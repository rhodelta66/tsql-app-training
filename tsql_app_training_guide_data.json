{
    "metadata": {
        "run_summary": {
            "generation_timestamp": "2025-05-25T00:38:11.535097",
            "total_framework_objects": 476,
            "objects_with_embedded_examples": 110,
            "objects_with_embedded_descriptions": 0,
            "training_generation_status": "success",
            "objects_with_real_usage_examples": 142,
            "total_action_scripts_in_corpus": 742,
            "action_scripts_analyzed_in_detail_sample": 20,
            "total_schema_tables_processed_for_discovery": 2,
            "params_total_in_api": 1735,
            "params_parsed_with_defaults_from_def": 1202,
            "params_with_type_from_def": 1725
        },
        "schema_memory_source": "db_demand_full_run",
        "api_memory_source": "db_discovery_full_with_view_attempt",
        "scripts_corpus_source": "init_full_run",
        "previous_run_summary_was_loaded": true,
        "last_updated": "2025-05-25T00:38:11.537214",
        "source": "script_save"
    },
    "framework_api_reference": [
        {
            "schema_name": "dbo",
            "object_name": "ABCDATE",
            "object_type": "SQL_SCALAR_FUNCTION",
            "object_type_short": "FN",
            "parameters": [
                {
                    "name": "[Return Value]",
                    "type_from_sys": "datetime",
                    "type_from_def": "datetime",
                    "max_length_bytes": 8,
                    "precision": 23,
                    "scale": 3,
                    "is_output": true,
                    "default_value": null,
                    "has_default": false,
                    "is_readonly": false,
                    "order": 0,
                    "full_declaration_from_def": null
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {
                "dbo.sp_api_goto": 7,
                "dbo.sp_api_modal_input": 13,
                "dbo.sp_api_modal_text": 17,
                "dbo.sp_api_modal_date": 10,
                "dbo.sp_api_modal_button": 20,
                "dbo.sp_api_modal_table": 16,
                "dbo.sp_api_modal_csv": 6,
                "dbo.sp_api_modal_modal": 6,
                "dbo.sp_api_modal_print": 3,
                "dbo.sp_api_modal_select": 9,
                "dbo.sp_api_modal_select_table": 3,
                "dbo.abcLeft": 1,
                "dbo.sp_api_toast": 6,
                "dbo.sp_api_modal_alert": 3,
                "dbo.sp_api_add_sql_task": 1,
                "dbo.sp_api_modal_route": 1,
                "dbo.sp_api_modal_date_from_to": 3,
                "dbo.sp_api_modal_choose": 2,
                "dbo.ABCWEEKNR": 3,
                "dbo.sp_api_statusbar": 1,
                "dbo.hasRole": 1
            },
            "real_usage_examples": [
                {
                    "sql_source": "DECLARE @search nvarchar(2000),@CalendarID INT\r\nSELECT @CalendarID = CalendarID FROM abcCalendar WHERE [Date] = dbo.abcdate()\r\nSET @search=N'?id=' + dbo.nv(@CalendarID)\r\nEXEC sp_api_goto @path,@search",
                    "action_id": 108,
                    "action_name": "vandaag",
                    "source_table": "api_card_actions"
                },
                {
                    "sql_source": "DECLARE @search nvarchar(128) ,@button nvarchar(128), @datumtijd nvarchar(50)\nDECLARE @filename nvarchar(1024) \n,@VroegNegatiefdownload nvarchar(128) = dbo.strdate(NULL) +'_'+ 'VroegNegatief.csv'\n,@Negatiefdownload nvarchar(128) = dbo.strdate(NULL) +'_'+ 'Negatief.csv'\n,@Reserveddownload nvarchar(128) = dbo.strdate(NULL) +'_'+ 'Gereserveerd.csv'\n,@Notzerodownload nvarchar(128) = dbo.strdate(NULL) +'_'+ 'Voorraad.csv'\nSET @datumtijd = FORMAT(getdate(),'dd MMM yyyy HH:mm')\n\n--EXEC sp_api_modal_input @name='search',@value = @search OUT,@focus=1 -- zoek veld\nEXEC sp_api_modal_modal @class = 'w100'\nSET @button = 'VroegNegatief'\nEXEC sp_api_modal_button @name='button',@value = 'VroegNegatief',@valueout = @button OUT,@class = 'btn-primary',@key = 'F1'\nEXEC sp_api_modal_button @name='button',@value = 'Negatief',@valueout = @button OUT,@class = 'btn-primary',@key = 'F2'\nEXEC sp_api_modal_button @name='button',@value = 'Gereserveerd',@valueout = @button OUT,@class = 'btn-primary',@key = 'F3'\nEXEC sp_api_modal_button @name='button',@value = 'Alles',@valueout = @button OUT,@class = 'btn-primary',@key = 'F4'\nEXEC sp_api_modal_button @name='button',@value = 'VolledigeLijst',@valueout = @button OUT,@class = 'btn-primary',@key = 'F5'\nEXEC sp_api_modal_button @name='button',@value = 'Partijvoorraad',@valueout = @button OUT,@class = 'btn-primary',@key = 'F6'\nEXEC sp_api_modal_print @keycode='F9'\nEXEC sp_api_modal_text @datumtijd, @printonly=1\n\nIF @button =  'VroegNegatief'\nBEGIN\nSELECT DISTINCT [Description~col-sm-5] = Description, Origin_Code, Size, xBrandName, ContentDesc, FustCode, 'Vroeg Negatief' AS [CAP*]\n\t,[verwacht@g] = VoorraadVerwacht@, [Voorraad@g] = Voorraad@\nINTO #VroegNegatief\nFROM          RV_IR_Voorraad\nWHERE        (Voorraad@ < 0) AND ([EndTime*] = 'Vroeg') AND (CoreType = 'FOOD')\nEXEC sp_api_modal_table @tmptable=N'#VroegNegatief',@orderby=N'ORDER BY [CAP*],1 ASC',@print=1\nEXEC sp_api_modal_button @name='button',@value = 'VroegNegatiefNaarCSV',@valueout = @button OUT,@class = 'btn-success'\nEND \n\nIF @button =  'VroegNegatiefNaarCSV'\nBEGIN\nSELECT DISTINCT Voorraad@, VoorraadVerwacht@, Description, Origin_Code, Size, xBrandName, ContentDesc, FustCode, 'Vroeg Negatief' AS [CAP*]\nINTO #VroegNegatiefdownload\nFROM          RV_IR_Voorraad\nWHERE        (Voorraad@ < 0) AND ([EndTime*] = 'Vroeg') AND (CoreType = 'FOOD')\nEXEC sp_api_modal_csv @tmptable=N'#VroegNegatiefdownload',@orderby=N'ORDER BY [CAP*],Description ASC', @filename= @VroegNegatiefdownload,@ansi=1\nEND \n\n\nIF @button =  'Negatief'\nBEGIN\nSELECT DISTINCT [Description~col-sm-5] = Description, Origin_Code, Size, xBrandName, ContentDesc, FustCode, 'Negatief' AS [CAP*]\n\t,[verwacht@g] = VoorraadVerwacht@, [Voorraad@g] = Voorraad@\nINTO #Negatief\nFROM          RV_IR_Voorraad\nWHERE        (Voorraad@ < 0) AND (CoreType = 'FOOD')\nEXEC sp_api_modal_table @tmptable=N'#Negatief',@orderby=N'ORDER BY [CAP*],1 ASC',@print=1\nEXEC sp_api_modal_button @name='button',@value = 'NegatiefNaarCSV',@valueout = @button OUT,@class = 'btn-success'\nEND \n\nIF @button =  'NegatiefNaarCSV'\nBEGIN\nSELECT DISTINCT Voorraad@, VoorraadVerwacht@, Description, Origin_Code, Size, xBrandName, ContentDesc, FustCode, 'Negatief' AS [CAP*]\nINTO #Negatiefdownload\nFROM          RV_IR_Voorraad\nWHERE        (Voorraad@ < 0) AND (CoreType = 'FOOD')\nEXEC sp_api_modal_csv @tmptable=N'#Negatiefdownload',@orderby=N'ORDER BY [CAP*],Description ASC', @filename= @Negatiefdownload,@ansi=1\nEND \n\nIF @button =  'Gereserveerd'\nBEGIN\nSELECT DISTINCT ReservedIn@, ReservedOut@, [Description~col-sm-5] = Description, Origin_Code, Size, xBrandName, ContentDesc, FustCode, 'Gereserveerd' AS [CAP*]\n\t,[verwacht@g] = VoorraadVerwacht@, [Voorraad@g] = Voorraad@\nINTO #Gereserveerd\nFROM          RV_IR_Voorraad\nWHERE        (ReservedIn@ <> 0 OR ReservedOut@ <> 0) AND (CoreType = 'FOOD')\nEXEC sp_api_modal_table @tmptable=N'#Gereserveerd',@orderby=N'ORDER BY [CAP*],3 ASC',@print=1\nEXEC sp_api_modal_button @name='button',@value = 'GereserveerdNaarCSV',@valueout = @button OUT,@class = 'btn-success'\nEND \n\nIF @button =  'GereserveerdNaarCSV'\nBEGIN\nSELECT DISTINCT Voorraad@, VoorraadVerwacht@, ReservedIn@, ReservedOut@, Description, Origin_Code, Size, xBrandName, ContentDesc, FustCode, 'Gereserveerd' AS [CAP*]\nINTO #GereserveerdNaarCSV\nFROM          RV_IR_Voorraad\nWHERE        (ReservedIn@ <> 0 OR ReservedOut@ <> 0) AND (CoreType = 'FOOD')\nEXEC sp_api_modal_csv @tmptable=N'#GereserveerdNaarCSV',@orderby=N'ORDER BY [CAP*],Description ASC', @filename= @Reserveddownload,@ansi=1\nEND \n\nIF @button =  'Alles'\nBEGIN\nSELECT DISTINCT [Description~col-sm-5] = Description, Origin_Code, Size, xBrandName, ContentDesc, FustCode, 'Alles' AS [CAP*]\n\t,[verwacht@g] = VoorraadVerwacht@, [Voorraad@g] = Voorraad@ --, [Correctie] = '         '\nINTO #Notzero\nFROM          RV_IR_Voorraad\nWHERE        (Voorraad@ <> 0) AND (CoreType = 'FOOD')\nSET @datumtijd = FORMAT(getdate(),'dd MMM yyyy HH:mm')\nDECLARE @sql nvarchar(max) = N'ALTER TABLE #Notzero ADD ' + QUOTENAME(@datumtijd+'~col-sm-2') +' nvarchar(128)'\nEXEC (@sql)\nEXEC sp_api_modal_table @tmptable=N'#Notzero',@orderby=N'ORDER BY [CAP*],1 ASC',@fontsize='120%',@print=1\nEXEC sp_api_modal_button @name='button',@value = 'AllesNaarCSV',@valueout = @button OUT,@class = 'btn-success'\nEND \n\n--\n\nIF @button =  'Partijvoorraad'\nBEGIN\nSELECT CatSub_0 as [CatSub*], Variety_0 as [Botanic~col-sm-2 wrap],ContentDesc as [inhoud~col-sm-1],Size as [maat~col-sm-1],Detail_0 as [Detail~col-sm-1],Origin_Code as [LVO~col-sm-1-2] ,KGN as [Kgn~col-sm-1],FustCode as [Fustcode~col-sm-1],TransactionHeader_ID as [InkNr:0~col-sm-1] \n,\tleft(counter_code,8) as [Lev~col-sm-1],\tLEFT((select CONVERT(VARCHAR, LFDATE , 13)), 6) as [Datum~col-sm-1]\n,\tVoorraad as [Stock:0~col-sm-1]\n\nINTO #PartijStock\nFROM          @main_db.dbo.StockPerLot_date(dbo.abcdate()) -- alles verkocht t/m vandaag!\nwhere [catsub_0] > N'' -- RH210209 hiermee wordt fust weggelaten\nEXEC sp_api_modal_table @tmptable=N'#PartijStock'\n,@orderby=N'ORDER BY [catsub*],[Botanic~col-sm-2 wrap]  ASC'\n,@fontsize='100%',@print=1\nEND \n\n\nIF @button =  'AllesNaarCSV'\nBEGIN\nSELECT DISTINCT Voorraad@, VoorraadVerwacht@, Description, Origin_Code, Size, xBrandName, ContentDesc, FustCode, 'Negatief' AS [CAP*]\nINTO #Notzerodownload\nFROM          RV_IR_Voorraad\nWHERE        (Voorraad@ <> 0) AND (CoreType = 'FOOD')\nEXEC sp_api_modal_csv @tmptable=N'#Notzerodownload',@orderby=N'ORDER BY [CAP*],Description ASC', @filename= @Notzerodownload,@ansi=1\nEND \n\nIF @button =  'VolledigeLijst'\n\tBEGIN\n\t\tDECLARE @datum nvarchar(128),@button2 nvarchar(128)\n\t\tEXEC sp_api_modal_text N'Kies de datum voor de voorraadlijst (dit is een lange lijst!!)'\n\t\tEXEC sp_api_modal_date @name='datum',@value = @datum OUT\n\t\tEXEC sp_api_modal_button @name='button2',@value = 'Laad lijst',@valueout = @button2 OUT,@class = 'btn-success',@key = 'Enter'\n\n\t\tIF @button2 IS NOT NULL\n\t\t\tBEGIN\n\t\t\t\tSELECT *\n\t\t\t\tINTO #VolledigeLijst\n\t\t\t\tFROM @main_db.dbo.stockByDate(@datum)\n\t\t\t\tEXEC sp_api_modal_table @tmptable=N'#VolledigeLijst',@orderby=N'ORDER BY ARTIKEL ASC'\n\t\t\tEND\n\tEND",
                    "action_id": 189,
                    "action_name": "Voorraad Lijsten",
                    "source_table": "api_card_actions"
                },
                {
                    "sql_source": "DECLARE @company_id nvarchar(32),@new_id nvarchar(32),@goto nvarchar(2000),@search nvarchar(2000), @location_id nvarchar(32), @reducer nvarchar(max), @date nvarchar(128), @opmerking nvarchar(128), @opmerkingrelation nvarchar(128)\n,@transactiondate nvarchar(128)\n,@button nvarchar(128)\n,@button1 nvarchar(128) = N'Nieuwe verkoop'\n,@button2 nvarchar(128) = N'Laatste open verkoop'\n,@button3 nvarchar(128) = N'Gereserveerde verkoop'\n,@button4 nvarchar(128) = N'Naar lokaties'\n,@button5 nvarchar(128) = N'Eigen lokaties'\n,@button6 nvarchar(128) = N'Werk lokaties'\n,@buttonescape nvarchar(128) = N'Ga terug'\n,@buttongoahead nvarchar(128) = N'Ga door'\nset @date = dbo.workDate()\nSET @transactiondate = dbo.abcdate()\n\nIF dbo.workDate() <> dbo.abcdate() AND @button IS NULL\n\tBEGIN\n\tEXEC sp_api_modal_text 'LET OP! DE WERKDATUM STAAT NIET OP VANDAAG.','text-danger font-weight-bold'\n\tEXEC sp_api_modal_button @name='@button',@value=@buttongoahead,@valueout = @button OUT,@key='Pagedown',@class='bg-danger text-light'\n\tEXEC sp_api_modal_button @name='@button',@value=@buttonescape,@valueout = @button OUT,@key='ESCAPE',@class='bg-danger text-light'\n\t\tIF @button = @buttonescape\n\t\tBEGIN\n\t\t\tEXEC sp_api_modal_clear\n\t\tEND\n\tEND\n\t\nIF @button = @buttongoahead OR dbo.workdate() = dbo.abcdate()\n\tBEGIN\n\tEXEC sp_api_modal_clear\n\tEXEC sp_api_modal_text 'Kies een klant:','text-primary'\n\t--SET @reducer = CONCAT('company_id = ',@company_id)\n\tSET @reducer = 'isDisabled = 0'\n\tEXEC sp_api_modal_select @card_name = N'klant',@value = @company_id OUT,@reducer = @reducer,@focus = 1\n\tEND\n\t\nIF @company_id > 0 \n\nBEGIN\n\t--DECLARE @only_new_is_possible BIT = 0\n\tDECLARE @reducer_location nvarchar(max) = N'Company_ID = ' + @company_id + ' OR id IN (SELECT Location_ID FROM xCompanyxLocation WHERE Company_ID =' + @company_id + ')'\n--\tDECLARE @reducer_location nvarchar(max) = N'id IN (SELECT Location_ID FROM xCompanyxLocation WHERE Company_ID =' + @company_id + ')'\n\tIF (SELECT LOCATIONS = count(Location_ID) FROM xCompanyxLocation WHERE Company_ID = @company_id) > 1\n\t\tBEGIN\n\t\t\tEXEC sp_api_modal_text 'Vertrek Datum:','text-primary'\n\t\t\tEXEC sp_api_modal_date @name='Date',@value = @date OUT,@class='w-25 mt-3',@focus=1\n\t\t\tEXEC sp_api_modal_input @name='Logistic',@value = @opmerking OUT,@placeholder = N'Opmerking voor loods'\n\t\t\tEXEC sp_api_modal_input @name='Relation',@value = @opmerkingrelation OUT,@placeholder = N'Referentie voor klant'\n\t\t\tEXEC sp_api_modal_text 'Kies een sublocatie van klant:','text-primary'\n\t\t\tEXEC sp_api_modal_select @card_name = N'xlocation',@value = @location_id OUT,@reducer = @reducer_location\n\t\t\t/*\n\t\t\t\tIF @location_id > 0\n\t\t\t\t\tBEGIN\n\t\t\t\t\t\tEXEC sp_api_modal_date @name='Date',@value = @date OUT,@class='w-25 mt-3',@focus=1\n\t\t\t\t\tEND\n\t\t\t*/\n\t\tEND\n\tIF (SELECT LOCATIONS = count(Location_ID) FROM xCompanyxLocation WHERE Company_ID = @company_id) = 1 AND (SELECT LOCATIONS = count(id) FROM xLocation WHERE Company_ID = @company_id) = 1\n\t\tBEGIN\n\t\t\tEXEC sp_api_modal_text 'Vertrek Datum:','text-primary'\n\t\t\tEXEC sp_api_modal_date @name='Date',@value = @date OUT,@class='w-25 mt-3',@focus=1\n\t\t\tEXEC sp_api_modal_input @name='Logistic',@value = @opmerking OUT,@placeholder = N'Opmerking voor loods'\n\t\t\tEXEC sp_api_modal_input @name='Relation',@value = @opmerkingrelation OUT,@placeholder = N'Referentie voor klant'\n\t\tEND\n\t/*\n\tSELECT id = xLocation.id, name=LocationCode\n\t\tINTO #locations\n\t\tFROM xLocation WHERE Company_ID = @company_id OR id IN (SELECT Location_ID FROM xCompanyxLocation WHERE Company_ID = @company_id)\n\tEXEC sp_api_modal_select_table @tmptable = N'#locations',@value = @location_id OUT,@focus=1,@class='mt-3'\n\t*/\n\n\t--IF @location_id > 0\n\n\tEXEC sp_api_modal_text 'Kies een optie:','text-primary font-weight-bold display-4 text-center'\n\tEXEC sp_api_modal_button @name='button',@value=@button1,@valueout = @button OUT,@key='Enter'\n\t\n\tIF EXISTS (SELECT * FROM xTransactionHeader WHERE status=N'openSale' AND CounterParty_ID = @company_id AND Transactiondate <= @date)\n\t\tBEGIN\n\t\tEXEC sp_api_modal_button @name='button',@value=@button2,@valueout = @button OUT,@key='F2'\n\t\tEND\n\t\t\n\tEXEC sp_api_modal_button @name='button',@value=@button4,@valueout = @button OUT,@key='F1'\n\tIF @button = @button4\n\t\tBEGIN\n\t\t\tEXEC sp_api_modal_clear\n\t\t\tEXEC sp_api_modal_button @name='button',@value=@button5,@valueout = @button OUT,@key='1'\n\t\t\tEXEC sp_api_modal_button @name='button',@value=@button6,@valueout = @button OUT,@key='2'\n\t\tEND\n\t\t\tIF @button = @button5\n\t\t\t\tBEGIN\n\t\t\t\t\tDECLARE @GotoOwnLocatie nvarchar(2000)\n\t\t\t\t\tSET @GotoOwnLocatie = N'/adres/'+@company_id+'/xlocation'\n\t\t\t\t\tEXEC sp_api_goto @GotoOwnLocatie,@referer_path=N'/verkoop'\n\t\t\t\tEND\n\t\t\tIF @button = @button6\n\t\t\t\tBEGIN\n\t\t\t\t\tDECLARE @GotoWorkLocatie nvarchar(2000)\n\t\t\t\t\tSET @GotoWorkLocatie = N'/adres/'+@company_id+'/company_locations'\n\t\t\t\t\tEXEC sp_api_goto @GotoWorkLocatie,@referer_path=N'/verkoop'\n\t\t\t\tEND\n\t\t\n\t\t/*\n\tIF EXISTS (SELECT * FROM xTransactionHeader WHERE status=N'openSale' AND CounterParty_ID = @company_id AND Transactiondate > @date)\n\t\tBEGIN\n\t\tEXEC sp_api_modal_button @name='button',@value=@button3,@valueout = @button OUT,@key='F2'\n\t\t\tSELECT TOP 1\n\t\t\t\ttv_companyname\n\t\t\t\t,transactiondate\n\t\t\t\t,[GERESERVEERD*] = 'GERESERVEERD'\n\t\t\t\t,id\n\t\t\t\tINTO #LASTORDER\n\t\t\tFROM q_xtransactionheader\n\t\t\tWHERE status=N'openSale' AND CounterParty_ID = @company_id AND Transactiondate > @date ORDER BY id DESC\n\t\t\tEXEC sp_api_modal_table @tmptable=N'#LASTORDER',@orderby=N'ORDER BY 3 ASC'\n\t\tEND\n\t\t*/\n/*\t\t\nELSE\n\t\tIF (select COUNT(id) from xlocation where company_id = @company_id ) = 1 \n\t\t\tBEGIN\n\t\t\t\tSET @only_new_is_possible = 1\n\t\t\tEND\n*/ \n\tIF @button = @button1 --OR @only_new_is_possible = 1\n\t\tBEGIN\n\t\tDELETE FROM api_storage WHERE card_id = (SELECT id FROM api_card WHERE name = N'verkoop') AND child_id = 0 AND user_id = @user_id\n\t\tEXEC sp_api_modal_clear\n\t\t\tEXEC sp_api_modal_post N'verkoop',N'CounterParty_ID',@company_id,0\n\t\t\tEXEC sp_api_modal_post N'verkoop',N'Destination_ID',@location_id,0\n\t\t\tEXEC sp_api_modal_post N'verkoop',N'TransactionDate',@transactiondate,0\n\t\t\tEXEC sp_api_modal_post N'verkoop',N'advTransportDep',@date,0\n\t\t\tEXEC sp_api_modal_post N'verkoop',N'unloadingdate',@date,0\n\t\t\tEXEC sp_api_modal_post N'verkoop',N'loadingdate',@date,0\n\t\t\tEXEC sp_api_modal_post N'verkoop',N'Logistic',@opmerking,0\n\t\t\tEXEC sp_api_modal_post N'verkoop',N'Relation',@opmerkingrelation,0\n\t\t\tEXEC @new_id = sp_api_modal_save N'verkoop',0\n\t\t\tIF @new_id > 0\n\t\t\t\tBEGIN\n\t\t\t\t\t/*SET @goto = N'/verkoop/'+@new_id+'/stock_ctr2'*/\n\t\t\t\t\tSET @goto = N'/verkoop/'+@new_id+'/ctr2/0/stockloc_ctr2'\n\t\t\t\t\tEXEC sp_api_toast N'Nieuwe verkoop gestart',N'alert-primary'\n\t\t\t\t\t--SET @search = N'?id='+@new_id\n\t\t\t\t\tSET @search = N'/verkoop/'+@new_id+'/ctr2'\n\t\t\t\t\tDECLARE @update_current_search nvarchar(4000) =CONCAT(N'?id=',@new_id)\n\t\t\t\t\tEXEC sp_api_goto @goto,@referer_path=@search,@referer_search=N'',@update_current_search=@update_current_search\n\t\t\t\tEND\n\t\t\tELSE\n\t\t\t\tEXEC sp_api_toast N'Error nieuwe verkoop',N'alert-danger'\n\t\t\tEXEC sp_api_modal_clear\n\t\tEND\n\tIF @button = @button2\n\t\tBEGIN\n\t\t\tSET @new_id = (SELECT TOP 1 id FROM xTransactionHeader WHERE status=N'openSale' AND CounterParty_ID = @company_id AND Transactiondate <= @date ORDER BY id DESC)\n\t\t\t/*SET @goto = N'/verkoop/'+@new_id+'/stock_ctr2'*/\n\t\t\tSET @goto = N'/verkoop/'+@new_id+'/ctr2/0/stockloc_ctr2'\n\t\t\tSET @search = N'/verkoop/'+@new_id+'/ctr2'\n\t\t\tEXEC sp_api_goto @goto,@referer_path=@search,@referer_search=N''\n\t\t\t--SET @search = N'?id='+@new_id\n\t\t\t--EXEC sp_api_goto @goto,@referer_path=N'/verkoop',@referer_search=@search\n\t\tEND\n\tIF @button = @button3\n\t\tBEGIN\n\t\t\tSET @new_id = (SELECT TOP 1 id FROM xTransactionHeader WHERE status=N'openSale' AND CounterParty_ID = @company_id AND Transactiondate > @date ORDER BY id DESC)\n\t\t\t/*SET @goto = N'/verkoop/'+@new_id+'/stock_ctr2'*/\n\t\t\tSET @goto = N'/verkoop/'+@new_id+'/ctr2/0/stockloc_ctr2'\n\t\t\tSET @search = N'/verkoop/'+@new_id+'/ctr2'\n\t\t\tEXEC sp_api_goto @goto,@referer_path=@search,@referer_search=N''\n\t\t\t--SET @search = N'?id='+@new_id\n\t\t\t--EXEC sp_api_goto @goto,@referer_path=N'/verkoop',@referer_search=@search\n\t\tEND\n\tEXEC sp_api_modal_button @name='button',@value=@buttonescape,@valueout = @button OUT,@key='ESCAPE',@class='bg-danger text-light'\n\tIF @button = @buttonescape\n\tBEGIN\n\tEXEC sp_api_modal_clear\n\tRETURN;\n\tEND\nEND\n",
                    "action_id": 258,
                    "action_name": "Insert Order",
                    "source_table": "api_card_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "abcLeft",
            "object_type": "SQL_SCALAR_FUNCTION",
            "object_type_short": "FN",
            "parameters": [
                {
                    "name": "[Return Value]",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "nvarchar(max)",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": null,
                    "has_default": false,
                    "is_readonly": false,
                    "order": 0,
                    "full_declaration_from_def": null
                },
                {
                    "name": "@str",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@str n"
                },
                {
                    "name": "@seperator",
                    "type_from_sys": "nchar",
                    "type_from_def": "n",
                    "max_length_bytes": 2,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "N'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@seperator n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {
                "dbo.sp_api_modal_table": 1,
                "dbo.sp_api_modal_input": 1,
                "dbo.sp_api_toast": 1,
                "dbo.sp_api_modal_text": 1,
                "dbo.sp_api_modal_button": 1,
                "dbo.ABCDATE": 1
            },
            "real_usage_examples": [
                {
                    "sql_source": "--EXEC sp_api_toast @user\n--ER WORDT MET @stockID UIT GEGAAN DAT ER VANAF xSTOCK WORDT GEWERKT, MAAR VEILIGER IS DIT OM TE ZETTEN NAAR @STOCK_ID ( via {[xStock].ID} )\nDECLARE @stockID INT = {[stock_ctr1].ID}\nIF @stockID is null\n\tBEGIN\n\t\texec sp_api_toast N'Eh...? Niets te doen...'\n\tEND\n\n--EXEC sp_api_toast @parent_parent_id\nDECLARE @CTHID INT = {[inkoop].id} --200818 curly\nIF @CTHID IS NULL begin\n\t\tEXEC sp_api_toast 'IS_NULL'\n\t\tRETURN;\n\t\tend\nELSE --EXEC sp_api_toast @CTHID\n--RETURN\n\nDECLARE @GIP nvarchar(10)\nselect @GIP= av from @main_db.dbo.gip(@stockID)\n\n-- 200629 Uitbreiding inkoop vanuit diverse contexten: Zoek CTH ; bijv als we afkomstig zijn van een regel, dan is CTH te vinden in de regel\n--if @parent_card_name ='inkoop'\tset @CTHID=@parent_id\n--if @parent_card_name = 'ctr1' set @CTHID=(select TransactionHeader_ID from xtransactiondetail where xtransactiondetail.id=@parent_id)\n--if @cthid is null RAISERROR(N'Unknown Context; config by consultant needed to find CTH',13,1)\n--exec sp_api_toast @parent_card_name\n\nDECLARE @mes nvarchar(200), @currStock int\nSELECT @mes= concat('Purchasing ' , x.[Description],' (GIP:',TRY_CAST(@GIP as decimal(8,2)),')'), @currStock=stock from xstock x where x.id=@stockID --@main_db.dbo.\n--EXEC sp_api_modal_text @mes,'h2 text-primary'\n------\n\n\nDECLARE @text nvarchar(max),@prodcode_id INT,@artcode_id INT\nDECLARE @prijs nvarchar(20),@aantal nvarchar(20) --='100'\nDECLARE @CounterpartyID int\nDECLARE @FlowModel int\nDECLARE @THDT int\nDECLARE @FRAFOT Nvarchar(3) -- 'FRA' OF 'FOT'\nDECLARE @SrcID int -- let op: slechts 'advies'\nDECLARE @DstID int\n\nSELECT @CounterpartyID = CTH.counterparty_ID,@FlowModel=cth.FlowModel_ID,@THDT=cth.TDT,@FRAFOT=cth.FRAFOT, @srcID=cth.source_ID,@DstID=cth.Destination_ID From q_xTransactionHeader CTH where CTH.ID=@CTHID\ndeclare @dayprice bit\nset @dayprice=isnull((select L from @main_db.dbo.[GetCompanySettings]('useDayprice')),0)\n--was @parent_id\n\n--BEPALEN VAN DE INKOOPPRIJS: \n--===========================\n--200630 er voor: PER check\nif @dayprice = 1 \n\tBEGIN\n\t\tselect top 1 @Prijs=per.pricehi from p_PriceEntryRow per where per.Stock_ID=@stockID and per.Supplier_ID=@CounterpartyID and per.activeCount>0\n\tEND\n\nif @prijs is null --201022\n\tbegin\n\t\t--201022\n\t\t--exec sp_api_toast @dayprice\n\t\t--exec sp_api_toast @dstID\n\t\t\t\tset @prijs=(select @main_db.dbo.stockprice(\t@stockID --48482 --stock_ID\n\t\t\t\t\t\t\t,@CTHID --3761\t--CTH_ID\n\t\t\t\t\t\t\t,@CounterpartyID --161418\t--Counterparty_ID\n\t\t\t\t\t\t\t,@FlowModel --null\t--Flowmodel_ID\n\t\t\t\t\t\t\t,@THDT --2\t\t--DaTDT\n\t\t\t\t\t\t\t,@SrcID --NULL --SupplierLocation_ID\n\t\t\t\t\t\t\t,@DstID --NULL -- 7945\t--Receiverlocation_ID\n\t\t\t\t\t\t\t,IIF(@FRAFOT='FOT',1,0)\t\t--isFOT\n\t\t\t\t\t\t\t,@dayprice --0-- use dayprice\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\tend\n\n/*\nif @prijs is null\n\tbegin\n\t\tselect @prijs = xCompanyStockID.FixedPrice from xCompanyStockID where xCompanyStockID.xstock_id = @stockID AND xCompanyStockID.xcompany_id = @CounterpartyID\n\tend\nif @prijs is null -- terug vallen naar laatste prijs..\n\tbegin\n\t\tSELECT top 1 @prijs = ctr.ctrPRICE FROM xctrtotals ctr WHERE ctr.ctrprice > 0 AND\n\t\t\tctr.Counterparty_ID=@CounterpartyID AND ctr.ctrStock_ID =@stockID ORDER BY ctr.id DESC -- laatste prijs!\n\tEND\n*/\n\nDECLARE @can_set_realprice BIT = 0,@can_set_delayed BIT = 0 \nIF dbo.hasClaims('role=admin,sub=jan@vgibv.nl,sub=rene@vgibv.nl,sub=pvg@vgibv.nl,sub=wim@vgibv.nl,sub=jeffrey@vgibv.nl,sub=anja@vgibv.nl,sub=nicky@vgibv.nl,sub=chris@vgibv.nl') > 0 SET @can_set_realprice = 1\nIF dbo.ABCDATE() < dbo.workDate() OR dbo.ABCDATE() < {[inkoop].TransactionDate} SET @can_set_delayed = 1\nDECLARE @realprice nvarchar(20),@new_id INT\n\nEXEC sp_api_modal_text @text = @mes,@class = 'h3 text-muted'\nEXEC sp_api_modal_text 'Aantal'\nIF @currStock<0 \n\tBEGIN\n\t\tSET @aantal=@currStock * -1 \n\tEND\nEXEC sp_api_modal_input @name='aantal',@value = @aantal OUT,@focus=1, @select=1\nEXEC sp_api_modal_text 'Prijs'\nEXEC sp_api_modal_input @name='prijs',@value = @prijs OUT\nIF @can_set_realprice = 1\n\tBEGIN\n\t\tEXEC sp_api_modal_text 'Real price'\n\t\tEXEC sp_api_modal_input @name='Real price',@value = @realprice OUT\n\tEND\n\nDECLARE @button nvarchar(128)\nEXEC sp_api_modal_button @name='button',@value = 'Toevoegen',@valueout = @button OUT,@class = 'btn-primary',@key = 'Enter'\n\n/*21-05-07 CG Nieuwe code toegevoegd om duidelijk aan te geven dat er een verkeerd input is ingegeven.*/\n\nIF (SELECT PATINDEX('%[^0-9.,-]%', @prijs)) > 0 OR (SELECT PATINDEX('%[^0-9-]%', @aantal)) > 0 OR (SELECT PATINDEX('%[^0-9.,-]%', @realprice)) > 0\n\tBEGIN\n\tEXEC sp_api_modal_clear\t\n\n\t\tEXEC sp_api_modal_text @text = @mes,@class = 'h3 text-muted'\n\t\t\n\t\tIF (SELECT PATINDEX('%[^0-9-]%', @aantal)) > 0\n\t\t\tBEGIN\n\t\t\t\tEXEC sp_api_modal_text 'Aantal niet goed ingevuld','text-danger'\n\t\t\t\tEXEC sp_api_modal_input @name='aantal',@value = @aantal OUT,@class = 'is-invalid',@focus=1\n\t\t\tEND\n\t\tELSE\n\t\t\tBEGIN\n\t\t\t\tEXEC sp_api_modal_text 'Aantal'\n\t\t\t\tEXEC sp_api_modal_input @name='aantal',@value = @aantal OUT\n\t\t\tEND\n\t\tIF (SELECT PATINDEX('%[^0-9.,-]%', @prijs)) > 0\n\t\t\tBEGIN\n\t\t\t\tEXEC sp_api_modal_text 'Prijs niet goed ingevuld','text-danger'\n\t\t\t\tEXEC sp_api_modal_input @name='prijs',@value = @prijs OUT,@class = 'is-invalid',@focus=1\n\t\t\tEND\n\t\tELSE\n\t\t\tBEGIN\n\t\t\t\tEXEC sp_api_modal_text 'Prijs'\n\t\t\t\tEXEC sp_api_modal_input @name='prijs',@value = @prijs OUT\n\t\t\tEND\n\t\tIF @can_set_realprice = 1\n\t\t\tBEGIN\n\t\t\t\tIF (SELECT PATINDEX('%[^0-9.,-]%', @realprice)) > 0\n\t\t\t\t\tBEGIN\n\t\t\t\t\t\tEXEC sp_api_modal_text 'Real Prijs niet goed ingevuld','text-danger'\n\t\t\t\t\t\tEXEC sp_api_modal_input @name='Real price',@value = @realprice OUT,@class = 'is-invalid',@focus=1\n\t\t\t\t\tEND\n\t\t\t\tELSE\n\t\t\t\t\tBEGIN\n\t\t\t\t\t\tEXEC sp_api_modal_text 'Real price'\n\t\t\t\t\t\tEXEC sp_api_modal_input @name='Real price',@value = @realprice OUT\n\t\t\t\t\tEND\n\t\t\tEND\n\t\t\t\n\t\tEXEC sp_api_modal_button @name='button',@value = 'Toevoegen',@valueout = @button OUT,@class = 'btn-primary',@key = 'Enter'\n\t\n\t\tIF (select count(id) from view_coco_prijshistory where {[Stock_ctr1].ID} = Stock_ID AND xCompanyID = {[inkoop].counterparty_id} AND TDT = 1) > 0\n\t\tBEGIN\n\t\tselect\n\t\t\tAmount\n\t\t\t,Price\n\t\t\t,insUser\n\t\t\t,[order_NR] = id\n\t\t\t,TransactionDate\n\t\t\tINTO #prijshistory2\n\t\t\tFROM view_coco_prijshistory\n\t\twhere {[Stock_ctr1].ID} = Stock_ID AND xCompanyID = {[inkoop].counterparty_id} AND TDT = 1\n\t\tEXEC sp_api_modal_table @tmptable=N'#prijshistory2',@orderby=N'ORDER BY TransactionDate DESC OFFSET 0 ROWS FETCH NEXT 8 ROWS ONLY'\n\t\tEND\n\t\tRETURN\n\tEND\n\n/*21-05-07 CG Einde: Nieuwe code toegevoegd om duidelijk aan te geven dat er een verkeerd input is ingegeven.*/\n\nIF (select count(id) from view_coco_prijshistory where {[Stock_ctr1].ID} = Stock_ID AND xCompanyID = {[inkoop].counterparty_id} AND TDT = 1) > 0\nBEGIN\nselect\n\tAmount\n\t,Price\n\t,insUser\n\t,[order_NR] = id\n\t,TransactionDate\n\tINTO #prijshistory\n\tFROM view_coco_prijshistory\nwhere {[Stock_ctr1].ID} = Stock_ID AND xCompanyID = {[inkoop].counterparty_id} AND TDT = 1\nEXEC sp_api_modal_table @tmptable=N'#prijshistory',@orderby=N'ORDER BY TransactionDate DESC OFFSET 0 ROWS FETCH NEXT 8 ROWS ONLY'\nEND\n\nIF @button IS NOT NULL\n\tBEGIN\n\t\tIF @Prijs>N'' SET @Prijs=replace(@Prijs, ',', '.') -- zorg dat je ook komma mag gebruiken als decimaal scheidingsteken\n\t\tIF isnull(TRY_CAST(@prijs as decimal),0) >= 0 AND  TRY_CAST(@aantal as int) > 0\n\t\t\tBEGIN\n\t\t\t\tSET @user = @main_db.dbo.abcleft(@user,'@')\n\t\t\t\texec @new_id =  @main_db.dbo.CreateCTR @CTH_ID=@CTHID, @stock_ID=@stockID,@Amount=@Aantal,@Price=@Prijs\n\t\t\t\t\t\t\t\t, @User=@User, @priceType='FIXED'--,@flowmodel_ID=1 --losse inkoop fixed price!\n\t\t\t\tIF @new_id > 0 AND @can_set_realprice = 1 AND @realprice IS NOT NULL\n\t\t\t\t\tUPDATE xTransactionDetail SET realprice = @realprice WHERE id = @new_id\n\t\t\t\tIF @new_id > 0 AND @can_set_delayed = 1\n\t\t\t\t\tBEGIN\n\t\t\t\t\tUPDATE xTransactionDetail SET delayed = @can_set_delayed WHERE id = @new_id\n\t\t\t\t\texec sp_api_toast N'Gereserveerd!'\n\t\t\t\t\tEND\n\t\t\t\tselect @mes = 'Er zijn '+@Aantal+ ' colli '+ x.[Description]+' toegevoegd aan de inkoop/partij' from xstock x where x.id=@stockID\n\t\t\t\texec sp_api_toast @mes\n\t\t\t\tEXEC sp_api_modal_clear\t\t\t\t\t\t\n\t\t\tEND\n\t\tELSE\n\t\t\tEXEC sp_api_modal_text 'Aantal of prijs niet geldig!','text-danger'\n\tEND\n",
                    "action_id": 275,
                    "action_name": "purchase_from_stock_VGI",
                    "source_table": "api_card_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "ABCWEEKNR",
            "object_type": "SQL_SCALAR_FUNCTION",
            "object_type_short": "FN",
            "parameters": [
                {
                    "name": "[Return Value]",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "nvarchar(20)",
                    "max_length_bytes": 40,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": null,
                    "has_default": false,
                    "is_readonly": false,
                    "order": 0,
                    "full_declaration_from_def": null
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {
                "dbo.sp_api_modal_table": 3,
                "dbo.sp_api_modal_csv": 3,
                "dbo.sp_api_modal_input": 3,
                "dbo.sp_api_modal_text": 3,
                "dbo.sp_api_modal_button": 3,
                "dbo.ABCDATE": 3,
                "dbo.sp_api_modal_modal": 2,
                "dbo.sp_api_modal_date_from_to": 1
            },
            "real_usage_examples": [
                {
                    "sql_source": "DECLARE @week nvarchar(128),@year nvarchar(128),@button nvarchar(128), @currentweek nvarchar(128), @date nvarchar(128), @dateandweek nvarchar(128)\r\nSET @week = @main_db.dbo.ABCWEEKNR() - 1\r\nSET @year = YEAR ( getdate() )\r\nSET @currentweek = @main_db.dbo.ABCWEEKNR()\r\nSET @date = FORMAT(@main_db.dbo.ABCDATE(), 'dd-MM-yyyy') --try_cast(@main_db.dbo.abcdate() AS date)\r\nSET @dateandweek = 'jjjj-mm-dd: '+ @date + ' ' + 'Week nummer: ' + @currentweek\r\nDECLARE @Download nvarchar(128) = dbo.strdate(NULL) +'_'+ 'Productschap.csv'\r\n\r\nEXEC sp_api_modal_text @dateandweek\r\n--EXEC sp_api_modal_text @name='Jaar',@value = @year OUT,@class='w-24' -- zoek veld\r\nEXEC sp_api_modal_text 'Week nummer: (Standaard 1 week terug gezet)'\r\nEXEC sp_api_modal_input @name='WeekNummer',@value = @week OUT,@class='w-24',@focus=1,@select=1 -- zoek veld\r\n\r\nSET @button = 'AangifteProductschap'\r\nEXEC sp_api_modal_button @name='button',@value = 'AangifteProductschap',@valueout = @button OUT,@class = 'btn-primary',@key = 'Enter'\r\nEXEC sp_api_modal_print\r\n\r\nIF @button =  'AangifteProductschap'\r\nBEGIN\r\nSELECT distinct [CountryName*], [Artikel], [Klas], [Aantal@],'Week nummer:' AS [WeekNummerCap*], [WeekNummer*]\r\nINTO #AangifteProductschap\r\nFROM          RV_AangifteProductschap\r\nWHERE\t\t[WeekNummer*] = @week AND [THTDT] = 2 AND [ABCYear] = @year\r\nEXEC sp_api_modal_table @tmptable=N'#AangifteProductschap',@orderby=N'ORDER BY [CountryName*], [WeekNummerCap*], [WeekNummer*], [Artikel] ASC', @print=1\r\nEXEC sp_api_modal_button @name='button',@value = 'DownloadProductschap',@valueout = @button OUT,@class = 'btn-success',@key = 'F1'\r\nEND \r\n\r\nIF @button =  'DownloadProductschap'\r\nBEGIN\r\nSELECT distinct [CountryName*], [Artikel], [Klas], [Aantal@],'Week nummer:' AS [WeekNummerCap*], [WeekNummer*]\r\nINTO #DownloadProductschap\r\nFROM          RV_AangifteProductschap\r\nWHERE\t\t[WeekNummer*] = @week AND [THTDT] = 2 AND [ABCYear] = @year\r\nEXEC sp_api_modal_csv @tmptable=N'#DownloadProductschap',@orderby=N'ORDER BY [CountryName*], [WeekNummerCap*], [WeekNummer*], [Artikel] ASC', @filename= @Download,@ansi=1\r\nEND \r\n",
                    "action_id": 1297,
                    "action_name": "Aangifte_Productschap",
                    "source_table": "api_card_actions"
                },
                {
                    "sql_source": "DECLARE @date nvarchar(128),@button nvarchar(128),@from nvarchar(128),@to nvarchar(128), @datumrange nvarchar(50), @week nvarchar(128), @year nvarchar(128), \n@currentweek nvarchar(128),@dateandweek nvarchar(128),@KCBLijstdownload nvarchar(128) = dbo.strdate(NULL) +'_'+ 'KCB-Lijst.csv'\n\nSET @date = dbo.workDate()\nSET @week = @main_db.dbo.ABCWEEKNR() - 1\nSET @year = YEAR ( getdate() )\nSET @currentweek = @main_db.dbo.ABCWEEKNR()\n\nEXEC sp_api_modal_text 'De volgende lijst bestaat uit producten afkomstig uit Nederland welke verkocht zijn binnen de Europese Unie'\nEXEC sp_api_modal_text 'Na 1 april is het verplicht om voor de export naar het VK eCertNL te gebruiken en vervalt de opgaveplicht voor het VK.'\n\nIF dbo.abcdate() > '2021-04-01'\n BEGIN\n EXEC sp_api_modal_clear\n EXEC sp_api_modal_text 'Het is 1 April geweest! Deze lijst moet aangepast worden. Het Verenigd Koninkrijk dient via eCertNL opgegeven te worden.', 'text-danger font-weight-bold text-center'\n EXEC sp_api_modal_text 'Neem contact op met een consultant om deze lijst aan te laten passen', 'text-danger font-weight-bold text-center'\n RETURN\n END\n\nEXEC sp_api_modal_modal @class = 'w100'\nEXEC sp_api_modal_text 'Week nummer:'\nEXEC sp_api_modal_input @name='WeekNummer',@value = @week OUT,@class='w-24',@focus=1,@select=1 -- zoek veld\n\nSET @button = 'KCB-Lijst'\nEXEC sp_api_modal_button @name='button',@value = 'KCB-Lijst',@valueout = @button OUT,@class = 'btn-primary',@key = 'F1'\nEXEC sp_api_modal_button @name='button',@value = '#KCBLijstdownload',@valueout = @button OUT,@class = 'btn-success'\nEXEC sp_api_modal_button @name='button',@value = 'KCB-Artikelen',@valueout = @button OUT,@class = 'btn-primary',@key = 'F1'\nEXEC sp_api_modal_print\n\nIF @button =  'KCB-Lijst'\nBEGIN\n\tSELECT DISTINCT\n\t   [woord~col-sm-3] = [woord]\n      ,[Totaal KGN@~col-sm-2] = [Totaal KGN]\n      ,[KLASSE~col-sm-1] = [KLASSE]\n      ,[TYPE] = [TYPE]\n      ,[KLEUR~col-sm-1] = [KLEUR]\n      ,[RAS~col-sm-2] = [RAS]\n      ,[isocode*] = [isocode]\n      ,[weeknrcap*] = 'Weeknummer: '\n      ,[weeknummer*] = [weeknummer]\n      ,[JaarCap*] = 'Jaar: '\n      ,[jaar*] = [jaar]\n\tINTO #KCBLijst\n\tfrom RV_KCB \n\twhere [weeknummer] = @week AND [jaar] = @year AND [Origin_ID] = 151 and [TDT] = 2 and ([CountryGroupID] = 1 OR [CountryId] = 224) and [CoreType] = 'FOOD' AND [isocode] != 'NL' \t\t\t \n\tEXEC sp_api_modal_table @tmptable=N'#KCBLijst',@orderby=N'ORDER BY [isocode*],[woord~col-sm-3] ASC',@fontsize='70%',@print=1\n\t--EXEC sp_api_modal_table @tmptable=N'#KCBLijst',@orderby=N'ORDER BY 9,1,8 ASC',@print=1\nEND \n\nIF @button =  'KCB-Artikelen'\nBEGIN\n\tSELECT DISTINCT\n\t   [woord] = [woord]\n\t  ,[detail] = [detail]\n      ,[KLASSE~col-sm-1] = [KLASSE]\n      ,[isocode*] = [isocode]\n      ,[weeknrcap*] = 'Weeknummer: '\n      ,[weeknummer*] = [weeknummer]\n      ,[JaarCap*] = 'Jaar: '\n      ,[jaar*] = [jaar]\n\tINTO #KCBArtikelen\n\tfrom RV_KCB \n\twhere [weeknummer] = @week AND [jaar] = @year AND [Origin_ID] = 151 and [TDT] = 2 and ([CountryGroupID] = 1 OR [CountryId] = 224) and [CoreType] = 'FOOD' AND [isocode] != 'NL' \t\t\t \n\tEXEC sp_api_modal_table @tmptable=N'#KCBArtikelen',@orderby=N'ORDER BY [isocode*],[woord] ASC',@fontsize='100%',@print=1\n\t--EXEC sp_api_modal_table @tmptable=N'#KCBLijst',@orderby=N'ORDER BY 9,1,8 ASC',@print=1\nEND \n\nIF @button =  '#KCBLijstdownload'\nBEGIN\n\tSELECT DISTINCT\n\t   [woord~col-sm-3] = [woord]\n      ,[Totaal KGN] = [Totaal KGN]\n      ,[KLASSE] = [KLASSE]\n      ,[TYPE~col-sm-2] = [TYPE]\n      ,[KLEUR] = [KLEUR]\n      ,[RAS] = [RAS]\n      ,[isocode] = [isocode]\n      ,[weeknummer] = [weeknummer]\n      ,[jaar] = [jaar]\n\tINTO #KCBLijstdownload\n\tfrom RV_KCB \n\twhere [weeknummer] = @week AND [jaar] = @year AND [Origin_ID] = 151 and [TDT] = 2 and ([CountryGroupID] = 1 OR [CountryId] = 224) and [CoreType] = 'FOOD' AND [isocode] != 'NL'\nEXEC sp_api_modal_csv @tmptable=N'#KCBLijstdownload',@orderby=N'ORDER BY [woord~col-sm-3] ASC', @filename= @KCBLijstdownload,@ansi=1\nEND \n",
                    "action_id": 1347,
                    "action_name": "KCB-Melding",
                    "source_table": "api_card_actions"
                },
                {
                    "sql_source": "DECLARE @date nvarchar(128),@button nvarchar(128),@from nvarchar(128),@to nvarchar(128), @datumrange nvarchar(50), @week nvarchar(128), @year nvarchar(128),\n@currentweek nvarchar(128),@dateandweek nvarchar(128),@KCBLijstdownload nvarchar(128) = dbo.strdate(NULL) +'_'+ 'KCB-Lijst.csv'\n\n--EXEC sp_api_modal_date_from_to @from=@from out, @to=@to out,@class='w-24'\nSET @date = dbo.workDate()\nSET @week = @main_db.dbo.ABCWEEKNR() - 1\nSET @year = YEAR ( getdate() )\nSET @currentweek = @main_db.dbo.ABCWEEKNR()\n\nEXEC sp_api_modal_text 'De volgende lijst bestaat uit producten afkomstig uit Nederland welke verkocht zijn binnen de Europese Unie'\n\n/*\nEXEC sp_api_modal_text 'Na 1 april is het verplicht om voor de export naar het VK eCertNL te gebruiken en vervalt de opgaveplicht voor het VK.'\n\nIF dbo.abcdate() > '2021-04-01'\n BEGIN\n EXEC sp_api_modal_clear\n EXEC sp_api_modal_text 'Het is 1 April geweest! Deze lijst moet aangepast worden. Het Verenigd Koninkrijk dient via eCertNL opgegeven te worden.', 'text-danger font-weight-bold text-center'\n EXEC sp_api_modal_text 'Neem contact op met een consultant om deze lijst aan te laten passen', 'text-danger font-weight-bold text-center'\n RETURN\n END\n*/\n\nEXEC sp_api_modal_modal @class = 'w100'\nEXEC sp_api_modal_text 'Week nummer:'\nEXEC sp_api_modal_input @name='WeekNummer',@value = @week OUT,@class='w-24',@focus=1,@select=1 -- zoek veld\n\nSET @button = 'KCB-Lijst'\nEXEC sp_api_modal_button @name='button',@value = 'KCB-Lijst',@valueout = @button OUT,@class = 'btn-primary',@key = 'F1'\nEXEC sp_api_modal_button @name='button',@value = '#KCBLijstdownload',@valueout = @button OUT,@class = 'btn-success'\nEXEC sp_api_modal_button @name='button',@value = 'KCB-Artikelen',@valueout = @button OUT,@class = 'btn-primary',@key = 'F1'\nEXEC sp_api_modal_print\n\nIF @button =  'KCB-Lijst'\nBEGIN\n\tSELECT DISTINCT\n\t   [woord~col-sm-3] = [woord]\n      ,[Totaal KGN@~col-sm-2] = [Totaal KGN]\n      ,[KLASSE~col-sm-1] = [KLASSE]\n      ,[TYPE] = [TYPE]\n      ,[KLEUR~col-sm-1] = [KLEUR]\n      ,[RAS~col-sm-2] = [RAS]\n      ,[isocode*] = [isocode]\n      ,[weeknrcap*] = 'Weeknummer: '\n      ,[weeknummer*] = [weeknummer]\n      ,[JaarCap*] = 'Jaar: '\n      ,[jaar*] = [jaar]\n\tINTO #KCBLijst\n\tfrom RV_KCB \n\twhere [weeknummer] = @week AND [jaar] = @year AND [Origin_ID] = 151 and [TDT] = 2 and ([CountryGroupID] = 1 OR [CountryId] = 224) and [CoreType] = 'FOOD' AND [isocode] != 'NL' \t\t\t \n\tEXEC sp_api_modal_table @tmptable=N'#KCBLijst',@orderby=N'ORDER BY [isocode*],[woord~col-sm-3] ASC',@fontsize='70%',@print=1\n\t--EXEC sp_api_modal_table @tmptable=N'#KCBLijst',@orderby=N'ORDER BY 9,1,8 ASC',@print=1\nEND \n\nIF @button =  'KCB-Artikelen'\nBEGIN\n\tSELECT DISTINCT\n\t   [woord] = [woord]\n\t  ,[detail] = [detail]\n      ,[KLASSE~col-sm-1] = [KLASSE]\n      ,[isocode*] = [isocode]\n      ,[weeknrcap*] = 'Weeknummer: '\n      ,[weeknummer*] = [weeknummer]\n      ,[JaarCap*] = 'Jaar: '\n      ,[jaar*] = [jaar]\n\tINTO #KCBArtikelen\n\tfrom RV_KCB \n\twhere [weeknummer] = @week AND [jaar] = @year AND [Origin_ID] = 151 and [TDT] = 2 and ([CountryGroupID] = 1 OR [CountryId] = 224) and [CoreType] = 'FOOD' AND [isocode] != 'NL'\t \n\tEXEC sp_api_modal_table @tmptable=N'#KCBArtikelen',@orderby=N'ORDER BY [isocode*],[woord] ASC',@fontsize='100%',@print=1\n\t--EXEC sp_api_modal_table @tmptable=N'#KCBLijst',@orderby=N'ORDER BY 9,1,8 ASC',@print=1\nEND \n\nIF @button =  '#KCBLijstdownload'\nBEGIN\n\tSELECT DISTINCT\n\t   [woord~col-sm-3] = [woord]\n      ,[Totaal KGN] = [Totaal KGN]\n      ,[KLASSE] = [KLASSE]\n      ,[TYPE~col-sm-2] = [TYPE]\n      ,[KLEUR] = [KLEUR]\n      ,[RAS] = [RAS]\n      ,[isocode] = [isocode]\n      ,[weeknummer] = [weeknummer]\n      ,[jaar] = [jaar]\n\tINTO #KCBLijstdownload\n\tfrom RV_KCB \n\twhere [weeknummer] = @week AND [jaar] = @year AND [Origin_ID] = 151 and [TDT] = 2 and ([CountryGroupID] = 1 OR [CountryId] = 224) and [CoreType] = 'FOOD' AND [isocode] != 'NL'\nEXEC sp_api_modal_csv @tmptable=N'#KCBLijstdownload',@orderby=N'ORDER BY [woord~col-sm-3] ASC', @filename= @KCBLijstdownload,@ansi=1\nEND \n",
                    "action_id": 1348,
                    "action_name": "KCB-Melding",
                    "source_table": "api_card_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "context_user",
            "object_type": "SQL_SCALAR_FUNCTION",
            "object_type_short": "FN",
            "parameters": [
                {
                    "name": "[Return Value]",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "nvarchar(256)",
                    "max_length_bytes": 512,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": null,
                    "has_default": false,
                    "is_readonly": false,
                    "order": 0,
                    "full_declaration_from_def": null
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "context_year",
            "object_type": "SQL_SCALAR_FUNCTION",
            "object_type_short": "FN",
            "parameters": [
                {
                    "name": "[Return Value]",
                    "type_from_sys": "int",
                    "type_from_def": "int",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": true,
                    "default_value": null,
                    "has_default": false,
                    "is_readonly": false,
                    "order": 0,
                    "full_declaration_from_def": null
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "hasRole",
            "object_type": "SQL_SCALAR_FUNCTION",
            "object_type_short": "FN",
            "parameters": [
                {
                    "name": "[Return Value]",
                    "type_from_sys": "int",
                    "type_from_def": "INT",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": true,
                    "default_value": null,
                    "has_default": false,
                    "is_readonly": false,
                    "order": 0,
                    "full_declaration_from_def": null
                },
                {
                    "name": "@roles",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 4000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@roles n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {
                "dbo.sp_api_modal_save": 1,
                "dbo.sp_api_modal_post": 1,
                "dbo.sp_api_modal_table": 3,
                "dbo.sp_api_modal_table_update": 3,
                "dbo.sp_api_modal_text": 4,
                "dbo.sp_api_modal_clear": 1,
                "dbo.sp_api_modal_button": 4,
                "dbo.sp_api_modal_input": 1,
                "dbo.sp_api_toast": 3,
                "dbo.sp_api_modal_input_decimal": 1,
                "dbo.sp_api_modal_menu_user": 1,
                "dbo.sp_api_modal_action": 1,
                "dbo.sp_api_modal_html": 1,
                "dbo.sp_api_modal_route": 3,
                "dbo.sp_api_modal_modal": 1,
                "dbo.sp_sys_admin_main_menu": 1,
                "dbo.sp_api_statusbar": 1,
                "dbo.ABCDATE": 1
            },
            "real_usage_examples": [
                {
                    "sql_source": "EXEC sp_api_modal_post @card = N'apicard',@column=N'unparsed_crud_create',@value=N'dbo.hasRole(''admin'') > 0',@id=@id\nEXEC sp_api_modal_post @card = N'apicard',@column=N'unparsed_crud_read',@value=N'dbo.hasRole(''admin'') > 0',@id=@id\nEXEC sp_api_modal_save @card = N'apicard',@id=@id",
                    "action_id": 142,
                    "action_name": "Admin Only",
                    "source_table": "api_card_actions"
                },
                {
                    "sql_source": "/*\nIF NOT (dbo.hasClaims('sub=sylvester@vgibv.nl,sub=joke@vgibv.nl') > 0 OR dbo.hasRole('admin') > 0)  --todo niet zo uiteindelijk...maar role!!\n\tBEGIN\n\t\tEXEC sp_api_modal_text N'U mag dit niet doen!','h2 text-danger font-weight-bold text-center'\n\t\tRETURN\n\tEND\n*/\t\nIF (SELECT COUNT(DISTINCT Counterparty_ID) FROM xTransactionHeader WHERE id IN({@ids})) > 1\n\tBEGIN\n\t\tEXEC sp_api_modal_text N'Meerdere leveranciers geselecteerd'\n\t\tRETURN\n\tEND\nSET @text = (SELECT [xCompany].[CompanyName] FROM [xCompany] WHERE [id] = (SELECT TOP 1 [Q_xTransactionHeader].[CounterParty_ID] FROM [Q_xTransactionHeader] WHERE [id] IN ({@ids})))\nSET @text = N'Boeken op ' + @text + ' voor inkooporders: {@ids}'\nIF @ids <> @id EXEC sp_api_modal_text @text,N'h4 text-muted'\nSELECT id, Factuurnummer,paraaf, Opmerking,[cth_id ]=cth_id--, [Username ] = Username --,Aantal = CAST(NULL as decimal(18,4)) \n\tINTO #modalupdate FROM xCTH_Check where CTH_ID IN ({@ids}) AND (trim(isnull(Factuurnummer,N'')) > N'' OR trim(isnull(Paraaf,N'')) > N'' OR trim(isnull(Opmerking,N'')) > N'') --ORDER BY 2\n\t--zet een leeg nieuw record er bij\n--OUD:\tINSERT #modalupdate (Factuurnummer, Opmerking, cth_id as [cth_id ], [username ]) values(NULL,NULL,@ID,@User) --DEFAULT VALUES --maak evt. een nieuw record\nEXEC sp_api_modal_table_update @tmptable = N'#modalupdate',@addnew=1\n\n-- hier heb je bijgewerkte data\nDECLARE @button1 nvarchar(128),@button_text1 nvarchar(128) = 'Opslaan'\nEXEC sp_api_modal_button @name='button1',@value = @button_text1, @valueout = @button1 OUT ,@class='btn-danger',@key='Enter'\n--DECLARE @code nvarchar(100)= (SELECT TOP 1 code from #modalupdate ORDER BY code DESC )\n--EXEC sp_api_modal_text @code\nIF @button1 IS NULL RETURN\n--test:EXEC sp_api_modal_text N'Result:',N'h4 text-muted'\n--EXEC sp_api_modal_table @tmptable = N'#modalupdate'\n--RETURN\n--cursortje\nDECLARE @Factuurnummer nvarchar(128)\n\t\t,@Paraaf nvarchar(10)--210122\n\t\t,@Opmerking nvarchar(128)\n\t\t,@checkid int\n\t\t--,@RealID int\n\t\t,@isNew int\n\tDECLARE @cursor_xCTH_Check CURSOR\n\tSET @cursor_xCTH_Check = CURSOR LOCAL FAST_FORWARD FOR\nSELECT Factuurnummer,paraaf, Opmerking, id,isNew FROM #modalupdate \n\tOPEN @cursor_xCTH_Check;\n\tFETCH NEXT FROM @cursor_xCTH_Check INTO\n\t\t@Factuurnummer\n\t\t,@Paraaf\n\t\t,@Opmerking\n\t\t,@checkid\n\t\t,@isNew\n\tWHILE @@FETCH_STATUS = 0\n\t\tBEGIN\n\t\t\tif 1=1 -- RH210111 geen conditie meer, ivm leeg kunnen maken van een nummer!\n\t\t\t\tBEGIN\n\t\t\t\t\t--select @Realid=id from xcth_check where id=@checkid and cth_id=@ID\n\t\t\t\t\tif @isNew = 1\n\t\t\t\t\t\t--ADD\n\t\t\t\t\t\tbegin\n\t\t\t\t\t\t\tDECLARE @cursor CURSOR,@idval INT\n\t\t\t\t\t\t\tSET @cursor = CURSOR LOCAL FAST_FORWARD FOR SELECT value FROM string_split(@ids,',')\n\t\t\t\t\t\t\tOPEN @cursor;\n\t\t\t\t\t\t\tFETCH NEXT FROM @cursor INTO @idval\n\t\t\t\t\t\t\tWHILE @@FETCH_STATUS = 0\n\t\t\t\t\t\t\t\tBEGIN\n\t\t\t\t\t\t\t\t    insert into xcth_check (Factuurnummer, Paraaf,Opmerking,cth_id,username) values (@Factuurnummer,@Paraaf,@Opmerking,@idval,@User)\n\t\t\t\t\t\t\t\t\tFETCH NEXT FROM @cursor INTO @idval\n\t\t\t\t\t\t\t\tEND\n\t\t\t\t\t\t\tCLOSE @cursor;\n\t\t\t\t\t\t\tDEALLOCATE @cursor;\n\t\t\t\t\t\tend\n\t\t\t\t\tif @isNew = 0\n\t\t\t\t\t\t--UPDATE\n\t\t\t\t\t\tbegin\n\t\t\t\t\t\t\tupdate xcth_check\n\t\t\t\t\t\t\t\tset Factuurnummer=@Factuurnummer\n\t\t\t\t\t\t\t\t\t,Paraaf=@Paraaf\n\t\t\t\t\t\t\t\t\t,Opmerking=@Opmerking\n\t\t\t\t\t\t\t\twhere id=@checkid\n--\t\t\t\t\t\t\t\tset @RealID = NULL --moet niet nodig zijn..\n\t\t\t\t\t\tend\n\t\t\t\tEND\t\t\t\t\t\n\t\t\t\t\t\t\t\n\t\t\tFETCH NEXT FROM @cursor_xCTH_Check INTO\n\t\t\t\t@Factuurnummer\n\t\t\t\t,@Paraaf\n\t\t\t\t,@Opmerking\n\t\t\t\t,@checkid\n\t\t\t\t,@isNew\n\t\tEND\n\tCLOSE @cursor_xCTH_Check;\n\tDEALLOCATE @cursor_xCTH_Check;\n\t\n\t--210111 VERWIJDER RECORDS WAAR GEEN FACTUURNUMMER OF OPMERKING STAAT !\n\tdelete from xcth_Check where  cth_id IN ({@ids}) AND trim(isnull(Factuurnummer,N''))=N'' AND  trim(isnull(Paraaf,N''))=N''  AND  trim(isnull(Opmerking,N''))=N''\n\t--return\n\tif @Button1 is NOT NULL\n\t\tEXEC sp_api_modal_clear\n\n",
                    "action_id": 465,
                    "action_name": "BOEK",
                    "source_table": "api_card_actions"
                },
                {
                    "sql_source": "DECLARE @Allowed BIT = 0 \nIF dbo.hasClaims('sub=sylvester@vgibv.nl,sub=joke@vgibv.nl,sub=nicky@vgibv.nl') > 0 OR dbo.hasRole('admin') > 0\nBEGIN\nSET @Allowed = 1\nEND\n\nIF @Allowed = 1\nBEGIN\n--100% kopie van xCTH_Check; CTH vervangen door LF\n\nSELECT id, Factuurnummer, Opmerking,[FactuurTotaal ] = FactuurTotaal,[LF_id ]=LF_id--, [Username ] = Username --,Aantal = CAST(NULL as decimal(18,4)) \n\tINTO #modalupdatetotal FROM xLF_Check where ISNULL(FactuurTotaal,'') > '' AND LF_ID=@ID --AND (trim(isnull(Factuurnummer,N'')) > N'' OR trim(isnull(Opmerking,N'')) > N'')\nEXEC sp_api_modal_table_update @tmptable = N'#modalupdatetotal'--,@addnew=1\n\nSELECT id, Factuurnummer, Opmerking,FactuurTotaal,[LF_id ]=LF_id--, [Username ] = Username --,Aantal = CAST(NULL as decimal(18,4)) \n\tINTO #modalupdate FROM xLF_Check where ISNULL(FactuurTotaal,'') = '' AND  LF_ID=@ID --AND (trim(isnull(Factuurnummer,N'')) > N'' OR trim(isnull(Opmerking,N'')) > N'')\nEXEC sp_api_modal_table_update @tmptable = N'#modalupdate',@addnew=1,@showheader = 0\n\n-- hier heb je bijgewerkte data\nDECLARE @button1 nvarchar(128),@button_text1 nvarchar(128) = 'Opslaan'\nEXEC sp_api_modal_button @name='button1',@value = @button_text1, @valueout = @button1 OUT ,@class='btn-danger',@key='Enter'\n--DECLARE @code nvarchar(100)= (SELECT TOP 1 code from #modalupdate ORDER BY code DESC )\n--EXEC sp_api_modal_text @code\nIF @button1 IS NULL RETURN\n--test:EXEC sp_api_modal_text N'Result:',N'h4 text-muted'\n--EXEC sp_api_modal_table @tmptable = N'#modalupdate'\n--RETURN\n--cursortje\nDECLARE @Factuurnummer nvarchar(128)\n\t\t,@Opmerking nvarchar(128)\n\t\t,@FactuurTotaal nvarchar(128)\n\t\t,@checkid int\n\t\t--,@RealID int\n\t\t,@isNew int\n\tDECLARE @cursor_xLF_Check CURSOR\n\tSET @cursor_xLF_Check = CURSOR LOCAL FAST_FORWARD FOR\nSELECT Factuurnummer, Opmerking,FactuurTotaal, id,isNew FROM #modalupdate UNION SELECT Factuurnummer, Opmerking,FactuurTotaal, id,isNew=0 FROM #modalupdatetotal\n\tOPEN @cursor_xLF_Check;\n\tFETCH NEXT FROM @cursor_xLF_Check INTO\n\t\t@Factuurnummer\n\t\t,@Opmerking\n\t\t,@FactuurTotaal\n\t\t,@checkid\n\t\t,@isNew\n\tWHILE @@FETCH_STATUS = 0\n\t\tBEGIN\n\t\t\tif 1=1 -- RH210111 geen conditie meer, ivm leeg kunnen maken van een nummer!\n\t\t\t\tbegin\n\t\t\t\t\t--select @Realid=id from xLF_check where id=@checkid and LF_id=@ID\n\t\t\t\t\tif @isNew = 1\n\t\t\t\t\t\t--ADD\n\t\t\t\t\t\tbegin\n\t\t\t\t\t\t    insert into xLF_check (Factuurnummer, Opmerking,FactuurTotaal,LF_id,username) values (@Factuurnummer,@Opmerking,@FactuurTotaal,@ID,@User)\n\t\t\t\t\t\tend\n\t\t\t\t\tif @isNew = 0\n\t\t\t\t\t\t--UPDATE\n\t\t\t\t\t\tbegin\n\t\t\t\t\t\t\tupdate xLF_check\n\t\t\t\t\t\t\t\tset Factuurnummer=@Factuurnummer\n\t\t\t\t\t\t\t\t\t,Opmerking=@Opmerking\n\t\t\t\t\t\t\t\t\t,FactuurTotaal=@FactuurTotaal\n\t\t\t\t\t\t\t\twhere id=@checkid\n--\t\t\t\t\t\t\t\tset @RealID = NULL --moet niet nodig zijn..\n\t\t\t\t\t\tend\n\t\t\t\tend\t\t\t\t\t\n\t\t\t\t\t\t\t\n\t\t\tFETCH NEXT FROM @cursor_xLF_Check INTO\n\t\t\t\t@Factuurnummer\n\t\t\t\t,@Opmerking\n\t\t\t\t,@FactuurTotaal\n\t\t\t\t,@checkid\n\t\t\t\t,@isNew\n\t\tEND\n\tCLOSE @cursor_xLF_Check;\n\tDEALLOCATE @cursor_xLF_Check;\n\t\n\t--210111 VERWIJDER RECORDS WAAR GEEN FACTUURNUMMER OF OPMERKING STAAT !\n\tdelete from xLF_Check where  LF_id=@ID AND trim(isnull(Factuurnummer,N''))=N'' AND  trim(isnull(Opmerking,N''))=N''\n\t--return\n\tif @Button1 is NOT NULL\n\t\tEXEC sp_api_modal_clear\n\t\t\nEND\n\nIF @Allowed = 0\nBEGIN\nEXEC sp_api_modal_text N'U mag dit niet doen!','h2 text-danger font-weight-bold text-center'\nEND",
                    "action_id": 594,
                    "action_name": "Boek_Vrachtfactuur",
                    "source_table": "api_card_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "IsEmpty",
            "object_type": "SQL_SCALAR_FUNCTION",
            "object_type_short": "FN",
            "parameters": [
                {
                    "name": "[Return Value]",
                    "type_from_sys": "bit",
                    "type_from_def": "bit",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": true,
                    "default_value": null,
                    "has_default": false,
                    "is_readonly": false,
                    "order": 0,
                    "full_declaration_from_def": null
                },
                {
                    "name": "@INPUT",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@INPUT n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "regex_match_group",
            "object_type": "SQL_SCALAR_FUNCTION",
            "object_type_short": "FN",
            "parameters": [
                {
                    "name": "[Return Value]",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "nvarchar(max)",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": null,
                    "has_default": false,
                    "is_readonly": false,
                    "order": 0,
                    "full_declaration_from_def": null
                },
                {
                    "name": "@string",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@string n"
                },
                {
                    "name": "@regex",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@regex n"
                },
                {
                    "name": "@group",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@group n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_action_as_stored_procedure",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@actions_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@actions_id i"
                },
                {
                    "name": "@test",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@test b"
                },
                {
                    "name": "@error",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@error n"
                },
                {
                    "name": "@tablename",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@tablename n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_action_to_slaves",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@action_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@action_id i"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_actions_execute_main",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@api_actions_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@api_actions_id i"
                },
                {
                    "name": "@card_name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@card_name n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_add_column",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@table_name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@table_name n"
                },
                {
                    "name": "@card_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@card_id i"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": [
                {
                    "sql_source": "EXEC sp_api_add_column @basetable,@card_id",
                    "action_id": 266,
                    "action_name": "sys_add_column",
                    "source_table": "api_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_add_column_to_view",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@card_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@card_id i"
                },
                {
                    "name": "@new_column",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@new_column n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_add_foreign_keys",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@card_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@card_id i"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_add_sql_task",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@sql",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@sql n"
                },
                {
                    "name": "@start_at",
                    "type_from_sys": "datetime2",
                    "type_from_def": "d",
                    "max_length_bytes": 8,
                    "precision": 27,
                    "scale": 7,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@start_at d"
                },
                {
                    "name": "@seconds",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@seconds i"
                },
                {
                    "name": "@description",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 512,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@description n"
                },
                {
                    "name": "@repeat_task_in_seconds",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@repeat_task_in_seconds i"
                },
                {
                    "name": "@async",
                    "type_from_sys": "bit",
                    "type_from_def": "B",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@async B"
                },
                {
                    "name": "@timeout_ms",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 7,
                    "full_declaration_from_def": "@timeout_ms i"
                },
                {
                    "name": "@priority",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 8,
                    "full_declaration_from_def": "@priority i"
                },
                {
                    "name": "@doNotRunSameTaskWithinSeconds",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 9,
                    "full_declaration_from_def": "@doNotRunSameTaskWithinSeconds i"
                },
                {
                    "name": "@on_error_sql",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 10,
                    "full_declaration_from_def": "@on_error_sql n"
                },
                {
                    "name": "@delayDuplicateTask",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 11,
                    "full_declaration_from_def": "@delayDuplicateTask b"
                },
                {
                    "name": "@task_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 12,
                    "full_declaration_from_def": "@task_id i"
                },
                {
                    "name": "@delete_after_success",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 13,
                    "full_declaration_from_def": "@delete_after_success b"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {
                "dbo.sp_api_modal_url": 2,
                "dbo.sp_api_modal_text": 3,
                "dbo.sp_api_modal_button": 3,
                "dbo.sp_api_report_download_base64": 2,
                "dbo.sp_api_modal_select_all_clear": 3,
                "dbo.sp_api_toast": 4,
                "dbo.sp_api_report_generate": 4,
                "dbo.sp_api_modal_clear": 3,
                "dbo.sp_api_modal_table": 1,
                "dbo.sp_api_modal_modal": 1,
                "dbo.sp_api_modal_route": 1,
                "dbo.ABCDATE": 1,
                "dbo.sp_api_populate_card": 1
            },
            "real_usage_examples": [
                {
                    "sql_source": "\nIF @id<>@ids --BULK naar Exact\n\tBEGIN\n\t\tDECLARE @cursor CURSOR,@idval INT,@count int = 0,@seconds int = 0\n\t\tSET @cursor = CURSOR LOCAL FAST_FORWARD FOR SELECT value FROM string_split(@ids,',')\n\t\tOPEN @cursor;\n\t\tFETCH NEXT FROM @cursor INTO @idval\n\t\tWHILE @@FETCH_STATUS = 0\n\t\t\tBEGIN\n\t\t\t\tSET @seconds+=6\n\t\t\t\tSET @subject = CONCAT(\n\t\t\t\t\t(SELECT [xCompany].[Code] FROM [xCompany] WHERE [id] = (SELECT [Q_xInvoice].[fromCompany_ID] FROM [Q_xInvoice] WHERE [id] = @idval))\n\t\t\t\t\t,' - ',(SELECT [Q_xInvoice].[dateInvoice] FROM [Q_xInvoice] WHERE [id] = @idval)\n\t\t\t\t\t,' - ',(SELECT [Q_xInvoice].[calcLegal] FROM [Q_xInvoice] WHERE [id] = @idval)\n\t\t\t\t\t)\n\t\t\t\tSET @sql = CONCAT(N'DECLARE @base64 nvarchar(max),@filename nvarchar(4000)\n', --EXEC sp_api_report_download_base64 @context = ''invoice_out'', @context_id = ',@idval,' , @filename =  @filename OUT, @base64 =  @base64 OUT\n'BEGIN TRY\n\tEXEC @main_db.dbo.sp_iu_finance_invoice ',@idval,',@groupbycostcodes = 1\nEND TRY BEGIN CATCH\n\tUPDATE xInvoice SET status = ''Exact Error'',statusHistory = ERROR_MESSAGE() WHERE id = ',@idval,'\nEND CATCH') -- = @filename,@subject = ',dbo.escape_string(@subject),',@base64 = @base64')\n\t\t\t\tSET @subject = N'To Exact: ' + @subject\n\t\t\t\tEXEC sp_api_add_sql_task @sql=@sql,@description=@subject,@seconds = @seconds\n\t\t\t\tUPDATE xInvoice SET status='Sending to Exact' WHERE id = @idval\n\t\t\t\tSET @count+=1\n\t\t\t\tFETCH NEXT FROM @cursor INTO @idval\n\t\t\tEND\n\t\tCLOSE @cursor;\n\t\tDEALLOCATE @cursor;\n\t\texecute sp_api_modal_clear\n\t\tIF @count > 0 EXEC sp_api_toast N'Verzenden is ingepland, F5 voor refresh'\n\t\tEXEC sp_api_modal_select_all_clear\n\t\tRETURN\n\tEND\n\nBEGIN TRY\n\tEXEC @main_db.dbo.sp_iu_finance_invoice @id, @groupbycostcodes = 1\nEND TRY BEGIN CATCH\n\tDECLARE @text nvarchar(max) = ERROR_MESSAGE(),@ERROR_SEVERITY int = ERROR_SEVERITY()\n\tIF @ERROR_SEVERITY = 17\n\t\tBEGIN\n\t\t\tEXEC sp_api_modal_url @text\n\t\t\tRETURN\n\t\tEND\n\tEXEC sp_api_modal_text @text\n\tDECLARE @valueout nvarchar(128)\n\tEXEC sp_api_modal_button @name='Retry',@value = 'Retry', @valueout = @valueout OUT\n\t\t,@class='btn-primary',@key='Enter'\nEND CATCH",
                    "action_id": 28,
                    "action_name": "Naar ExactOnline",
                    "source_table": "api_card_actions"
                },
                {
                    "sql_source": "\nIF @id<>@ids --BULK naar Exact\n\tBEGIN\n\t\tDECLARE @cursor CURSOR,@idval INT,@count int = 0,@seconds int = 0\n\t\tSET @cursor = CURSOR LOCAL FAST_FORWARD FOR SELECT value FROM string_split(@ids,',')\n\t\tOPEN @cursor;\n\t\tFETCH NEXT FROM @cursor INTO @idval\n\t\tWHILE @@FETCH_STATUS = 0\n\t\t\tBEGIN\n\t\t\t\tSET @seconds+=6\n\t\t\t\tSET @subject = CONCAT(\n\t\t\t\t\t(SELECT [xCompany].[Code] FROM [xCompany] WHERE [id] = (SELECT [Q_xInvoice].[toCompany_ID] FROM [Q_xInvoice] WHERE [id] = @idval))\n\t\t\t\t\t,' - ',(SELECT [Q_xInvoice].[dateInvoice] FROM [Q_xInvoice] WHERE [id] = @idval)\n\t\t\t\t\t,' - ',(SELECT [Q_xInvoice].[calcLegal] FROM [Q_xInvoice] WHERE [id] = @idval)\n\t\t\t\t\t)\n\t\t\t\tSET @sql = CONCAT(N'DECLARE @base64 nvarchar(max),@filename nvarchar(4000)\n', --EXEC sp_api_report_download_base64 @context = ''invoice_out'', @context_id = ',@idval,' , @filename =  @filename OUT, @base64 =  @base64 OUT\n'BEGIN TRY\n\tEXEC @main_db.dbo.sp_iu_finance_invoice ',@idval,',@groupbycostcodes = 1\nEND TRY BEGIN CATCH\n\tUPDATE xInvoice SET status = ''Exact Error'',statusHistory = ERROR_MESSAGE() WHERE id = ',@idval,'\nEND CATCH') -- = @filename,@subject = ',dbo.escape_string(@subject),',@base64 = @base64')\n\t\t\t\tSET @subject = N'To Exact: ' + @subject\n\t\t\t\tEXEC sp_api_add_sql_task @sql=@sql,@description=@subject,@seconds = @seconds\n\t\t\t\tUPDATE xInvoice SET status='Sending to Exact' WHERE id = @idval\n\t\t\t\tSET @count+=1\n\t\t\t\tFETCH NEXT FROM @cursor INTO @idval\n\t\t\tEND\n\t\tCLOSE @cursor;\n\t\tDEALLOCATE @cursor;\n\t\texecute sp_api_modal_clear\n\t\tIF @count > 0 EXEC sp_api_toast N'Verzenden is ingepland, F5 voor refresh'\n\t\tEXEC sp_api_modal_select_all_clear\n\t\tRETURN\n\tEND\n\nBEGIN TRY\n\tEXEC @main_db.dbo.sp_iu_finance_invoice @id, @groupbycostcodes = 1\nEND TRY BEGIN CATCH\n\tDECLARE @text nvarchar(max) = ERROR_MESSAGE(),@ERROR_SEVERITY int = ERROR_SEVERITY()\n\tIF @ERROR_SEVERITY = 17\n\t\tBEGIN\n\t\t\tEXEC sp_api_modal_url @text\n\t\t\tRETURN\n\t\tEND\n\tEXEC sp_api_modal_text @text\n\tDECLARE @valueout nvarchar(128)\n\tEXEC sp_api_modal_button @name='Retry',@value = 'Retry', @valueout = @valueout OUT\n\t\t,@class='btn-primary',@key='Enter'\nEND CATCH",
                    "action_id": 29,
                    "action_name": "Naar ExactOnline",
                    "source_table": "api_card_actions"
                },
                {
                    "sql_source": "/*EXEC sp_api_modal_alert N'Delete',N'Regel(s) verwijderen?'\nDECLARE @cursor CURSOR,@idval INT\nSET @cursor = CURSOR LOCAL FAST_FORWARD FOR SELECT value FROM string_split(@ids,',')\nOPEN @cursor;\nFETCH NEXT FROM @cursor INTO @idval\nWHILE @@FETCH_STATUS = 0\n\tBEGIN\n\t\t--DECLARE @task nvarchar(max) = CONCAT('UPDATE xtransactiondetail set amount = 0, price = 0 where id = ',@idval,';EXEC @main_db.dbo.DeleteCTR ',@idval)\n\t\t--EXEC sp_api_add_sql_task @task\n\t\t--Update xtransactiondetail set amount = 0, price = 0 where id = @idval\n\t\tEXEC @main_db.dbo.DeleteCTR @idval\n\t\tFETCH NEXT FROM @cursor INTO @idval\n\tEND\nCLOSE @cursor;\nDEALLOCATE @cursor;\nEXEC sp_api_modal_clear\nEXEC sp_api_modal_select_all_clear\n*/\n\nIF EXISTS (SELECT * FROM xIVLINK  where (ITD IN({@IDS}) OR VTD IN({@IDS})) AND EXISTS (SELECT * FROM xtransactionheader WHERE [status] = 'openPrice'))\n\tBEGIN\n\t\tEXEC sp_api_modal_alert N'De inkoop is toegewezen aan een commissie verkoop!',N'De regel kan niet verwijderd worden!'\n\t\tEXEC sp_api_modal_clear\n\t\tRETURN;\n\tEND\n\t\nIF {[inkoop].status} IN('openPurchase','openPurchaseC') OR {[inkoop_loods].status} IN('openPurchase','openPurchaseC') OR {[ctr1].CTH_fase} IN('openPurchase','openPurchaseC')\n\tBEGIN\n\t\tEXEC sp_api_modal_alert N'Zeker weten?',N'Het aantal wordt op 0 gezet, en daarna geheel verwijderd!'\n\t\tDECLARE @cursor CURSOR,@idval INT\n\t\tSET @cursor = CURSOR LOCAL FAST_FORWARD FOR SELECT value FROM string_split(@ids,',')\n\t\tOPEN @cursor;\n\t\tFETCH NEXT FROM @cursor INTO @idval\n\t\tWHILE @@FETCH_STATUS = 0\n\t\t\tBEGIN\t\n\t\t\t\tIF EXISTS (SELECT * FROM code_ctr_at_location WHERE ctr_id = @idval GROUP BY ctr_id HAVING SUM(amount) = SUM(available))\n\t\t\t\t\tBEGIN\n\t\t\t\t\t\tDECLARE @detail nvarchar(255), @TH_id nvarchar(255)\n\t\t\t\t\t\tSET @detail = (SELECT concat(Amount,' ',detail) from q_xtransactiondetail where id = @idval)\n\t\t\t\t\t\tSET @TH_id = (SELECT transactionheader_id from q_xtransactiondetail where id = @idval)\n\t\t\t\t\t\tDECLARE @textlog nvarchar(255) = concat(N'actie [Verwijder] gestart op order: ',@TH_id,' op product: ',@detail)\n\t\t\t\t\t\tEXEC @main_db.dbo.actielog @Card_name , @textlog\n\t\t\t\t\t\t\n\t\t\t\t\t\tEXEC @main_db.dbo.DeleteCTR @idval\n\t\t\t\t\tEND\n\t\t\t\tELSE\n\t\t\t\t\tBEGIN\n\t\t\t\t\t\tEXEC sp_api_toast N'Kan ctr niet verwijderen: deels overgebracht of toegewezen'\n\t\t\t\t\tEND\n\t\t\t\tFETCH NEXT FROM @cursor INTO @idval\n\t\t\tEND\n\t\tCLOSE @cursor;\n\t\tDEALLOCATE @cursor;\n\t\tEXEC sp_api_modal_clear\n\t\tEXEC sp_api_modal_select_all_clear\n\tEND\n\tELSE\n\tBEGIN\n\t\tEXEC sp_api_modal_alert N'De inkoop is gesloten',N'De regel kan niet verwijderd worden!'\n\t\tEXEC sp_api_modal_clear\n\t\tRETURN;\n\tEND\n",
                    "action_id": 180,
                    "action_name": "Verwijder",
                    "source_table": "api_card_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_add_sql_test_then_create",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@sql",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@sql n"
                },
                {
                    "name": "@table_name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@table_name n"
                },
                {
                    "name": "@dropsql",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@dropsql n"
                },
                {
                    "name": "@card_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@card_id i"
                },
                {
                    "name": "@column_name_to_view",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@column_name_to_view n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_add_table",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": [
                {
                    "sql_source": "EXEC sp_api_add_table",
                    "action_id": 267,
                    "action_name": "sys_add_table",
                    "source_table": "api_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_add_table_from_text",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@text",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@text n"
                },
                {
                    "name": "@prefix",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 64,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "''",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@prefix n"
                },
                {
                    "name": "@main",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "1",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@main b"
                },
                {
                    "name": "@database",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@database n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_add_unique_index",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@card_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@card_id i"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_backup",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@database",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@database n"
                },
                {
                    "name": "@differential",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@differential b"
                },
                {
                    "name": "@now",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@now b"
                },
                {
                    "name": "@username",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@username n"
                },
                {
                    "name": "@password",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@password n"
                },
                {
                    "name": "@drive",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 512,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "'T'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@drive n"
                },
                {
                    "name": "@backup_name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 7,
                    "full_declaration_from_def": "@backup_name n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_backup_all_and_clean_start",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@headless",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@headless b"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_broker",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_broker_clean_up",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_broker_request",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@type",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@type n"
                },
                {
                    "name": "@json",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@json n"
                },
                {
                    "name": "@wait",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "3000",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@wait i"
                },
                {
                    "name": "@dataout",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@dataout n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {
                "dbo.sp_api_modal_text": 1,
                "dbo.sp_api_toast": 1
            },
            "real_usage_examples": [
                {
                    "sql_source": "SET @url = {[api_data_set].urlinfo}\nSET @apikey = {[api_data_set].apikey.apikey}\nEXEC sp_api_modal_text 'Url',@class = N'mt-2'\nEXEC sp_api_modal_text @text = @url,@class = N'code'\nIF @apikey IS NOT NULL\n\tBEGIN\n\t\tEXEC sp_api_modal_text 'ApiKey',@class = N'mt-2'\n\t\tEXEC sp_api_modal_text @text = @apikey,@class = N'code'\n\tEND\nSET @json = CONCAT('{\"url\":\"',@url,'\",\"options\":{\"headers\":{\n\t\t\t\"Content-Type\":\"application/json\"\n\t\t\t',IIF(@apikey>'',',\"ApiKey\":\"'+@apikey+'\"',''),'\n\t\t}}}')\nEXEC sp_api_broker_request @type=N'fetch',@json=@json,@dataout = @dataout OUT,@wait = 15000\nEXEC sp_api_modal_text 'Result',@class = N'mt-2'\nSET @dataout = (SELECT value FROM OPENJSON(@dataout) WHERE [key] = 'data')\nEXEC sp_api_modal_text @text = @dataout,@class = N'json'\n",
                    "action_id": 1116,
                    "action_name": "test_api_data_set",
                    "source_table": "api_card_actions"
                },
                {
                    "sql_source": "EXEC sp_api_broker_request @type='update',@json='{}',@dataout = @dataout OUT,@wait=25000\nEXEC sp_api_toast @dataout\n\n",
                    "action_id": 220,
                    "action_name": "sys_update_dispatcher",
                    "source_table": "api_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_broker_request_linked_server",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@id i"
                },
                {
                    "name": "@wait",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "3000",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@wait i"
                },
                {
                    "name": "@idout",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@idout i"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_broker_setup",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@server",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@server n"
                },
                {
                    "name": "@user",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@user n"
                },
                {
                    "name": "@pass",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@pass n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_bulk_replace_actions",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@search",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "N'@class=''w-25'''",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@search  n"
                },
                {
                    "name": "@replace",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "N'@class=''w-24'''",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@replace n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_bulk_replace_templates",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@search",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "N'troost'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@search  n"
                },
                {
                    "name": "@replace",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "N'Demo'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@replace n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_bulk_translate",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@from_lang",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@from_lang n"
                },
                {
                    "name": "@to_lang",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@to_lang n"
                },
                {
                    "name": "@json",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@json n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_carbone",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@json",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@json n"
                },
                {
                    "name": "@template_file",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "N'invoice.docx'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@template_file n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_card_action_as_stored_procedure",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@card_actions_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@card_actions_id i"
                },
                {
                    "name": "@test",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@test b"
                },
                {
                    "name": "@error",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@error n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_card_actions",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@card_id",
                    "type_from_sys": "int",
                    "type_from_def": "I",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@card_id I"
                },
                {
                    "name": "@tablename",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "N",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@tablename N"
                },
                {
                    "name": "@basetable",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "N",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@basetable N"
                },
                {
                    "name": "@edit",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "N",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@edit N"
                },
                {
                    "name": "@id",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "N",
                    "max_length_bytes": 64,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@id N"
                },
                {
                    "name": "@is_new",
                    "type_from_sys": "bit",
                    "type_from_def": "B",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@is_new B"
                },
                {
                    "name": "@is_valid",
                    "type_from_sys": "bit",
                    "type_from_def": "B",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 7,
                    "full_declaration_from_def": "@is_valid B"
                },
                {
                    "name": "@parent_id",
                    "type_from_sys": "int",
                    "type_from_def": "I",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 8,
                    "full_declaration_from_def": "@parent_id I"
                },
                {
                    "name": "@listview",
                    "type_from_sys": "bit",
                    "type_from_def": "B",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 9,
                    "full_declaration_from_def": "@listview B"
                },
                {
                    "name": "@path",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 10,
                    "full_declaration_from_def": "@path n"
                },
                {
                    "name": "@is_picklist",
                    "type_from_sys": "bit",
                    "type_from_def": "B",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 11,
                    "full_declaration_from_def": "@is_picklist B"
                },
                {
                    "name": "@crud_create",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 12,
                    "full_declaration_from_def": "@crud_create n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_card_actions_execute",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@card_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@card_id i"
                },
                {
                    "name": "@id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@id i"
                },
                {
                    "name": "@tablename",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@tablename n"
                },
                {
                    "name": "@basetable",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@basetable n"
                },
                {
                    "name": "@identity_column",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 2048,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@identity_column n"
                },
                {
                    "name": "@parent_card_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@parent_card_id i"
                },
                {
                    "name": "@parent_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 7,
                    "full_declaration_from_def": "@parent_id i"
                },
                {
                    "name": "@path",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 8,
                    "full_declaration_from_def": "@path n"
                },
                {
                    "name": "@is_new",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 9,
                    "full_declaration_from_def": "@is_new i"
                },
                {
                    "name": "@action_name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "N",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 10,
                    "full_declaration_from_def": "@action_name N"
                },
                {
                    "name": "@is_picklist",
                    "type_from_sys": "int",
                    "type_from_def": "I",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 11,
                    "full_declaration_from_def": "@is_picklist I"
                },
                {
                    "name": "@fieldname",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "N",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 12,
                    "full_declaration_from_def": "@fieldname N"
                },
                {
                    "name": "@picklist_type",
                    "type_from_sys": "smallint",
                    "type_from_def": "S",
                    "max_length_bytes": 2,
                    "precision": 5,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 13,
                    "full_declaration_from_def": "@picklist_type S"
                },
                {
                    "name": "@prevpath",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 14,
                    "full_declaration_from_def": "@prevpath n"
                },
                {
                    "name": "@reducer",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "''",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 15,
                    "full_declaration_from_def": "@reducer  n"
                },
                {
                    "name": "@parent_reducer",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "''",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 16,
                    "full_declaration_from_def": "@parent_reducer  n"
                },
                {
                    "name": "@card_name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 17,
                    "full_declaration_from_def": "@card_name n"
                },
                {
                    "name": "@show_nothing_to_do_here_toast",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "1",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 18,
                    "full_declaration_from_def": "@show_nothing_to_do_here_toast b"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_card_actions_execute_main",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@api_card_actions_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@api_card_actions_id i"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_card_actions_execute_parse",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@card_id",
                    "type_from_sys": "int",
                    "type_from_def": "I",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@card_id I"
                },
                {
                    "name": "@action_name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@action_name n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_card_actions_execute_pre_declare",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@pre_declare",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "N'@sql",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@pre_declare n"
                },
                {
                    "name": "@all_action_params",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@all_action_params n"
                },
                {
                    "name": "@sql",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@sql n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_card_actions_execute_prepare_sql",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@sql",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@sql n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_card_actions_test",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@card_id",
                    "type_from_sys": "int",
                    "type_from_def": "I",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "2318",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@card_id I"
                },
                {
                    "name": "@tablename",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "N",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "'Q_xTransactionHeader'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@tablename N"
                },
                {
                    "name": "@basetable",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "N",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "'xTransactionHeader'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@basetable N"
                },
                {
                    "name": "@edit",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "N",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@edit N"
                },
                {
                    "name": "@id",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "N",
                    "max_length_bytes": 64,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "34",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@id N"
                },
                {
                    "name": "@is_new",
                    "type_from_sys": "bit",
                    "type_from_def": "B",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@is_new B"
                },
                {
                    "name": "@is_valid",
                    "type_from_sys": "bit",
                    "type_from_def": "B",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "1",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 7,
                    "full_declaration_from_def": "@is_valid B"
                },
                {
                    "name": "@parent_id",
                    "type_from_sys": "int",
                    "type_from_def": "I",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 8,
                    "full_declaration_from_def": "@parent_id I"
                },
                {
                    "name": "@listview",
                    "type_from_sys": "bit",
                    "type_from_def": "B",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "1",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 9,
                    "full_declaration_from_def": "@listview B"
                },
                {
                    "name": "@path",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "N'/verkoop'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 10,
                    "full_declaration_from_def": "@path n"
                },
                {
                    "name": "@is_picklist",
                    "type_from_sys": "bit",
                    "type_from_def": "B",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 11,
                    "full_declaration_from_def": "@is_picklist B"
                },
                {
                    "name": "@crud_create",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 12,
                    "full_declaration_from_def": "@crud_create n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_card_actions_v1",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@card_id",
                    "type_from_sys": "int",
                    "type_from_def": "I",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@card_id I"
                },
                {
                    "name": "@id",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "N",
                    "max_length_bytes": 64,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@id N"
                },
                {
                    "name": "@is_new",
                    "type_from_sys": "bit",
                    "type_from_def": "B",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@is_new B"
                },
                {
                    "name": "@is_valid",
                    "type_from_sys": "bit",
                    "type_from_def": "B",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@is_valid B"
                },
                {
                    "name": "@listview",
                    "type_from_sys": "bit",
                    "type_from_def": "B",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@listview B"
                },
                {
                    "name": "@is_picklist",
                    "type_from_sys": "bit",
                    "type_from_def": "B",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@is_picklist B"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_card_actions_v2",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@card_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@card_id i"
                },
                {
                    "name": "@id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@id i"
                },
                {
                    "name": "@is_new",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@is_new b"
                },
                {
                    "name": "@is_valid",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@is_valid b"
                },
                {
                    "name": "@listview",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@listview b"
                },
                {
                    "name": "@is_picklist",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@is_picklist b"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_card_actions_v3",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@card_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@card_id i"
                },
                {
                    "name": "@id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@id i"
                },
                {
                    "name": "@is_new",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@is_new b"
                },
                {
                    "name": "@is_valid",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@is_valid b"
                },
                {
                    "name": "@listview",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@listview b"
                },
                {
                    "name": "@is_picklist",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@is_picklist b"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_card_clear_dm_cache",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@card_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@card_id i"
                },
                {
                    "name": "@card_name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@card_name n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_card_copy_actions",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@src_card_id",
                    "type_from_sys": "int",
                    "type_from_def": "I",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@src_card_id I"
                },
                {
                    "name": "@dst_card_id",
                    "type_from_sys": "int",
                    "type_from_def": "I",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@dst_card_id I"
                },
                {
                    "name": "@force",
                    "type_from_sys": "bit",
                    "type_from_def": "B",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@force B"
                },
                {
                    "name": "@action",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@action n"
                },
                {
                    "name": "@action_name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@action_name n"
                },
                {
                    "name": "@rename_and_parse",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@rename_and_parse b"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_card_copy_children",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@src_card_id",
                    "type_from_sys": "int",
                    "type_from_def": "I",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@src_card_id I"
                },
                {
                    "name": "@dst_card_id",
                    "type_from_sys": "int",
                    "type_from_def": "I",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@dst_card_id I"
                },
                {
                    "name": "@force",
                    "type_from_sys": "bit",
                    "type_from_def": "B",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@force B"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_card_copy_fields",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@src_card_id",
                    "type_from_sys": "int",
                    "type_from_def": "I",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@src_card_id I"
                },
                {
                    "name": "@dst_card_id",
                    "type_from_sys": "int",
                    "type_from_def": "I",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@dst_card_id I"
                },
                {
                    "name": "@force",
                    "type_from_sys": "bit",
                    "type_from_def": "B",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@force B"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_card_create",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@table_name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@table_name n"
                },
                {
                    "name": "@card_name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@card_name n"
                },
                {
                    "name": "@card_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@card_id i"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_card_create_as_tvf",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@card_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@card_id i"
                },
                {
                    "name": "@makelist",
                    "type_from_sys": "bit",
                    "type_from_def": "B",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@makelist B"
                },
                {
                    "name": "@drop",
                    "type_from_sys": "bit",
                    "type_from_def": "B",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@drop B"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_card_create_as_tvf_all",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_card_create_as_view",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@card_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@card_id i"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_card_create_cache",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@card_id",
                    "type_from_sys": "int",
                    "type_from_def": "I",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@card_id I"
                },
                {
                    "name": "@toast",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "1",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@toast b"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_card_create_seek",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@card_id",
                    "type_from_sys": "int",
                    "type_from_def": "I",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@card_id I"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_card_curly_replace",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@card_id",
                    "type_from_sys": "int",
                    "type_from_def": "I",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@card_id I"
                },
                {
                    "name": "@string",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "N'SELECT {advTransportDep}",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@string n"
                },
                {
                    "name": "@prefix",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "N''",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@prefix n"
                },
                {
                    "name": "@prefix2",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "N''",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@prefix2 n"
                },
                {
                    "name": "@replace_self_with_this",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@replace_self_with_this b"
                },
                {
                    "name": "@no_warning",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@no_warning b"
                },
                {
                    "name": "@is_action",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 7,
                    "full_declaration_from_def": "@is_action b"
                },
                {
                    "name": "@is_picklist",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 8,
                    "full_declaration_from_def": "@is_picklist b"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {
                "dbo.sp_api_modal_field_insert": 1,
                "dbo.sp_api_modal_select_curly": 2,
                "dbo.sp_api_modal_download": 1,
                "dbo.sp_api_modal_text": 2,
                "dbo.sp_api_modal_button": 1,
                "dbo.sp_api_modal_table": 1,
                "dbo.sp_api_modal_select": 1
            },
            "real_usage_examples": [
                {
                    "sql_source": "DECLARE @search nvarchar(2000) = N'',@button nvarchar(128)\n--SELECT * INTO #modaltable FROM fn_api_get_curly_params_by_search(@search)\nEXEC sp_api_modal_select_curly @value = @search OUT\nEXEC sp_api_modal_button @name='button',@value=N'Parse',@valueout=@button OUT,@key='Insert'\nIF @button IS NOT NULL\n\tBEGIN\n\t\tDECLARE @sql nvarchar(max) = N'{'+@search+'}'\n\t\tEXEC sp_api_card_curly_replace @card_id = @card_id, @string = @sql OUT\n\t\tEXEC sp_api_modal_text @sql,N'code'\n--\t\tEXEC sp_api_modal_field_insert @card_field_id,@search\n--\t\tEXEC sp_api_modal_clear\n\tEND\n--EXEC sp_api_modal_field_insert @card_field_id,N'Afleveren bij loods 5'\n/*\nreturn\n--DECLARE @rawdata varbinary(max) = (SELECT * FROM OPENROWSET(BULK 'C:\\Beheer\\backup\\tracy_fka_proj.bak', SINGLE_BLOB) as f)\nDECLARE @rawdata varbinary(max) = (SELECT * FROM OPENROWSET(BULK 'C:\\Windows\\explorer.exe', SINGLE_BLOB) as f)\nEXEC sp_api_modal_download @rawdata=@rawdata,@filename=N'abc.zip'\n*/",
                    "action_id": 184,
                    "action_name": "dl file",
                    "source_table": "api_card_actions"
                },
                {
                    "sql_source": "/*EXEC sp_api_modal_select @card_name=N'apicard',@name=N'@selected_card_id',@value=@selected_card_id OUT--,@focus=1\nIF @selected_card_id IS NULL RETURN\nEXEC sp_api_modal_clear\nDECLARE @selected_card_name nvarchar(128),@selected_table_name nvarchar(128)\nSELECT @selected_card_name = '['+name+'].',@selected_table_name = ISNULL(basetable,tablename)  FROM api_card WHERE id = @selected_card_id\n*/\nDECLARE @search nvarchar(2000),@button nvarchar(128)\nEXEC sp_api_modal_select_curly @value = @search OUT,@focus=1\n\n/*RETURN\nDECLARE @parsed nvarchar(max) = '{'+REPLACE(@search,@selected_card_name,'')+'}'\nEXEC sp_api_card_curly_replace @card_id = @selected_card_id,@string = @parsed OUT\nSET @parsed = REPLACE(@parsed,'this.',QUOTENAME(@selected_table_name)+'.')\nEXEC sp_api_modal_text @parsed,N'my-3 code'\nRETURN\nSELECT word = CAST('{'+name+'}' as nvarchar(max)) INTO #curly FROM (\n\tselect name FROM api_card_fields WHERE card_id = @selected_card_id\n\tUNION\n\tselect '['+lower(name)+']' FROM api_card WHERE name is not null AND tablename NOT LIKE 'api_%'\n\tUNION\n\tselect '['+lower(ac.name)+'].'+acf1.name FROM api_card ac JOIN api_card_fields acf1 ON ac.id = acf1.card_id WHERE @sql LIKE '%{[[]' + ac.name+']%'\n\tUNION\n\tselect acf1.name+'.'+acf2.name FROM api_card_fields acf1 JOIN api_card_fields acf2 ON acf1.card_id = @card_id AND acf2.card_id = acf1.picklist_card_id\n\t\tWHERE @sql LIKE '%{' + acf1.name+'%'\n\tUNION\n\tselect acf1.name+'.'+acf2.name+'.'+acf3.name FROM api_card_fields acf1 JOIN api_card_fields acf2 ON acf1.card_id = @card_id AND acf2.card_id = acf1.picklist_card_id\n\t\t\tJOIN api_card_fields acf3 ON acf2.card_id = acf1.picklist_card_id AND acf3.card_id = acf2.picklist_card_id\n\t\t\t\tWHERE @sql LIKE '%{' + acf1.name+'.'+acf2.name+'%'\n\t) tbl\n\nEXEC sp_api_modal_table @tmptable=N'#curly'\n*/",
                    "action_id": 53,
                    "action_name": "sys_curly_brackets",
                    "source_table": "api_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_card_curly_replace_params",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@string",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@string n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_card_curly_template",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@card_id",
                    "type_from_sys": "int",
                    "type_from_def": "I",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@card_id I"
                },
                {
                    "name": "@string",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@string n"
                },
                {
                    "name": "@no_preview",
                    "type_from_sys": "bit",
                    "type_from_def": "B",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@no_preview B"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_card_custom",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@trigger_id",
                    "type_from_sys": "int",
                    "type_from_def": "I",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@trigger_id I"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_card_definition",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@card_id",
                    "type_from_sys": "int",
                    "type_from_def": "I",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@card_id I"
                },
                {
                    "name": "@sql",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "N'SELECT * FROM xCompany'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@sql n"
                },
                {
                    "name": "@tablename",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "N'xCompany'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@tablename n"
                },
                {
                    "name": "@identity_column",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "'id'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@identity_column n"
                },
                {
                    "name": "@id",
                    "type_from_sys": "int",
                    "type_from_def": "I",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@id I"
                },
                {
                    "name": "@ref_column",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "N",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@ref_column N"
                },
                {
                    "name": "@parent_id",
                    "type_from_sys": "int",
                    "type_from_def": "I",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 7,
                    "full_declaration_from_def": "@parent_id I"
                },
                {
                    "name": "@declare_cache",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "N",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 8,
                    "full_declaration_from_def": "@declare_cache N"
                },
                {
                    "name": "@select_cache",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 9,
                    "full_declaration_from_def": "@select_cache n"
                },
                {
                    "name": "@edit",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "N",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 10,
                    "full_declaration_from_def": "@edit N"
                },
                {
                    "name": "@is_new",
                    "type_from_sys": "int",
                    "type_from_def": "I",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 11,
                    "full_declaration_from_def": "@is_new I"
                },
                {
                    "name": "@create_cache",
                    "type_from_sys": "bit",
                    "type_from_def": "B",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 12,
                    "full_declaration_from_def": "@create_cache B"
                },
                {
                    "name": "@method",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 13,
                    "full_declaration_from_def": "@method n"
                },
                {
                    "name": "@toast",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "1",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 14,
                    "full_declaration_from_def": "@toast b"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_card_definition_test",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@card_id",
                    "type_from_sys": "int",
                    "type_from_def": "I",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "373",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@card_id I"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_card_detail",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@card_id",
                    "type_from_sys": "int",
                    "type_from_def": "I",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@card_id I"
                },
                {
                    "name": "@id",
                    "type_from_sys": "int",
                    "type_from_def": "I",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@id I"
                },
                {
                    "name": "@tablename",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "N",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@tablename N"
                },
                {
                    "name": "@basetable",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "N",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@basetable N"
                },
                {
                    "name": "@identity_column",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "N",
                    "max_length_bytes": 2048,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@identity_column N"
                },
                {
                    "name": "@reducer",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "N",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@reducer N"
                },
                {
                    "name": "@declare_cache",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "N",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 7,
                    "full_declaration_from_def": "@declare_cache N"
                },
                {
                    "name": "@select_cache",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "N",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 8,
                    "full_declaration_from_def": "@select_cache N"
                },
                {
                    "name": "@ref_column",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "N",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 9,
                    "full_declaration_from_def": "@ref_column N"
                },
                {
                    "name": "@parent_id",
                    "type_from_sys": "int",
                    "type_from_def": "I",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 10,
                    "full_declaration_from_def": "@parent_id I"
                },
                {
                    "name": "@last",
                    "type_from_sys": "bit",
                    "type_from_def": "B",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 11,
                    "full_declaration_from_def": "@last B"
                },
                {
                    "name": "@edit",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "N",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 12,
                    "full_declaration_from_def": "@edit N"
                },
                {
                    "name": "@method",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 13,
                    "full_declaration_from_def": "@method n"
                },
                {
                    "name": "@path",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 14,
                    "full_declaration_from_def": "@path n"
                },
                {
                    "name": "@inside_transaction",
                    "type_from_sys": "bit",
                    "type_from_def": "B",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 15,
                    "full_declaration_from_def": "@inside_transaction B"
                },
                {
                    "name": "@is_new",
                    "type_from_sys": "int",
                    "type_from_def": "I",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 16,
                    "full_declaration_from_def": "@is_new I"
                },
                {
                    "name": "@crud_update",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "N",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 17,
                    "full_declaration_from_def": "@crud_update N"
                },
                {
                    "name": "@is_picklist",
                    "type_from_sys": "bit",
                    "type_from_def": "B",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 18,
                    "full_declaration_from_def": "@is_picklist B"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_card_detail_edit",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@card_id",
                    "type_from_sys": "int",
                    "type_from_def": "I",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@card_id I"
                },
                {
                    "name": "@edit",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "N",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@edit N"
                },
                {
                    "name": "@method",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@method n"
                },
                {
                    "name": "@path",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@path n"
                },
                {
                    "name": "@record_id",
                    "type_from_sys": "int",
                    "type_from_def": "I",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@record_id I"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_card_detail_file",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@id i"
                },
                {
                    "name": "@ip_address",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@ip_address n"
                },
                {
                    "name": "@hash",
                    "type_from_sys": "nchar",
                    "type_from_def": "n",
                    "max_length_bytes": 128,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@hash n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_card_detail_files",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@context",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@context n"
                },
                {
                    "name": "@context_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@context_id i"
                },
                {
                    "name": "@allow_file_types",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 512,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@allow_file_types n"
                },
                {
                    "name": "@filesize_limit",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@filesize_limit i"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_card_detail_find_record",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@card_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@card_id i"
                },
                {
                    "name": "@id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@id i"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_card_detail_picklist",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@card_id",
                    "type_from_sys": "int",
                    "type_from_def": "I",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@card_id I"
                },
                {
                    "name": "@tablename",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@tablename n"
                },
                {
                    "name": "@identity_column",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@identity_column n"
                },
                {
                    "name": "@id",
                    "type_from_sys": "int",
                    "type_from_def": "I",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@id I"
                },
                {
                    "name": "@picklist_column",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "N",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@picklist_column N"
                },
                {
                    "name": "@picklist_id",
                    "type_from_sys": "int",
                    "type_from_def": "I",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@picklist_id I"
                },
                {
                    "name": "@isam",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "N",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 7,
                    "full_declaration_from_def": "@isam N"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_card_field_fill_with",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@field_id",
                    "type_from_sys": "int",
                    "type_from_def": "I",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "2592",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@field_id I"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_card_field_is_updateable",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@field_id",
                    "type_from_sys": "int",
                    "type_from_def": "I",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@field_id I"
                },
                {
                    "name": "@id",
                    "type_from_sys": "int",
                    "type_from_def": "I",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@id I"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": [
                {
                    "sql_source": "DECLARE @time time = CAST(SYSDATETIME() as time)\n\n\nDECLARE @cursor_ids CURSOR,@fid INT,@fname nvarchar(128),@class nvarchar(128)\nSET @cursor_ids = CURSOR LOCAL FAST_FORWARD FOR SELECT id,name FROM api_card_fields WHERE card_id = @card_id ORDER BY detail_order\nOPEN @cursor_ids;\nFETCH NEXT FROM @cursor_ids INTO @fid,@fname\nWHILE @@FETCH_STATUS = 0\n\tBEGIN\n\n\t\tDECLARE @is_field_updateable BIT\n\t\tEXEC @is_field_updateable = sp_api_card_field_is_updateable @fid,@id\n\t\tIF @is_field_updateable = 1\n\t\t\tSET @class= 'text-success'\n\t\tELSE\n\t\t\tSET @class= 'text-danger'\n\t\tEXEC sp_api_modal_text @fname,@class\n\n\t\tFETCH NEXT FROM @cursor_ids INTO @fid,@fname\n\tEND\nCLOSE @cursor_ids;\nDEALLOCATE @cursor_ids;\n\nDECLARE @ms INT = DATEDIFF(millisecond,@time,CAST(SYSDATETIME() as time))\nEXEC sp_api_toast @ms\n",
                    "action_id": 65,
                    "action_name": "sys_is_field_updateable",
                    "source_table": "api_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_card_import_csv",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@cardname",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "N'adres'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@cardname n"
                },
                {
                    "name": "@seperator",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 2,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@seperator n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": [
                {
                    "sql_source": "EXEC sp_api_card_import_csv @card_name",
                    "action_id": 244,
                    "action_name": "Geert Test Import",
                    "source_table": "api_card_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_card_import_csv_KIJK_VERDER",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@cardname",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "N'adres'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@cardname n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_card_insert",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@card_id",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "N",
                    "max_length_bytes": 64,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@card_id N"
                },
                {
                    "name": "@tablename",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "N",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@tablename N"
                },
                {
                    "name": "@basetable",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "N",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@basetable N"
                },
                {
                    "name": "@identity_column",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "N",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@identity_column N"
                },
                {
                    "name": "@ref_column",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "N",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@ref_column N"
                },
                {
                    "name": "@parent_id",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@parent_id n"
                },
                {
                    "name": "@parent_parent",
                    "type_from_sys": "bit",
                    "type_from_def": "B",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 7,
                    "full_declaration_from_def": "@parent_parent B"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_card_is_valid",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@card_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@card_id i"
                },
                {
                    "name": "@id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@id i"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_card_list",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@start_id",
                    "type_from_sys": "int",
                    "type_from_def": "I",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@start_id I"
                },
                {
                    "name": "@parent_card_id",
                    "type_from_sys": "int",
                    "type_from_def": "I",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@parent_card_id I"
                },
                {
                    "name": "@parent_id",
                    "type_from_sys": "int",
                    "type_from_def": "I",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@parent_id I"
                },
                {
                    "name": "@parent_declare_cache",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "null",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@parent_declare_cache n"
                },
                {
                    "name": "@parent_select_cache",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "null",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@parent_select_cache n"
                },
                {
                    "name": "@edit",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "N",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@edit N"
                },
                {
                    "name": "@method",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 7,
                    "full_declaration_from_def": "@method n"
                },
                {
                    "name": "@path",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 8,
                    "full_declaration_from_def": "@path n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_card_list_edit",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@card_id",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "N",
                    "max_length_bytes": 64,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@card_id N"
                },
                {
                    "name": "@card_name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "N",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@card_name N"
                },
                {
                    "name": "@edit",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "N",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@edit N"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_card_no_predeclare",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@card_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@card_id i"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_card_on_field_update_storage",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@id",
                    "type_from_sys": "int",
                    "type_from_def": "I",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@id I"
                },
                {
                    "name": "@card_id",
                    "type_from_sys": "int",
                    "type_from_def": "I",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@card_id I"
                },
                {
                    "name": "@is_new",
                    "type_from_sys": "int",
                    "type_from_def": "I",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@is_new I"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_card_re_order",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@card_id",
                    "type_from_sys": "int",
                    "type_from_def": "I",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@card_id I"
                },
                {
                    "name": "@toast",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@toast b"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {
                "dbo.sp_api_populate_card": 1,
                "dbo.sp_api_modal_clear": 1
            },
            "real_usage_examples": [
                {
                    "sql_source": "EXEC sp_api_modal_alert N'Velden verbergen?',N'Alleen velden van lijstweergave tonen'\nEXEC sp_api_modal_alert N'Zeker weten?',N'De hele bestaande volgorde wordt zoals de lijstweergave!'\nEXEC sp_api_modal_alert N'Laatste waarschuwing!',N'Dit kan niet ongedaan worden!'\nUPDATE acf SET detail_order = list_order FROM api_card_fields acf WHERE card_id = @card_id\n--DELETE FROM api_card_cache WHERE cid = @card_id\nEXEC sp_api_populate_card @card_id\n--EXEC sp_api_card_re_order @card_id\nEXEC sp_api_modal_clear\n",
                    "action_id": 63,
                    "action_name": "sys_hide_fields_not_in_list",
                    "source_table": "api_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_card_referer",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@pop_pathname",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@pop_pathname n"
                },
                {
                    "name": "@pop_search",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@pop_search n"
                },
                {
                    "name": "@update",
                    "type_from_sys": "bit",
                    "type_from_def": "B",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@update B"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_card_referer_update",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@card_name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@card_name n"
                },
                {
                    "name": "@search",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@search n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_card_template_get",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@template_name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@template_name n"
                },
                {
                    "name": "@template_lng",
                    "type_from_sys": "nchar",
                    "type_from_def": "n",
                    "max_length_bytes": 4,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@template_lng n"
                },
                {
                    "name": "@id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@id i"
                },
                {
                    "name": "@title",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@title n"
                },
                {
                    "name": "@template",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@template n"
                },
                {
                    "name": "@filename",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@filename n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_card_template_updater",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@id i"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_card_update_from_body",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@tablename",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "N",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "'xCountry'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@tablename N"
                },
                {
                    "name": "@id",
                    "type_from_sys": "int",
                    "type_from_def": "I",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@id I"
                },
                {
                    "name": "@identity_column",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "N",
                    "max_length_bytes": 2048,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@identity_column N"
                },
                {
                    "name": "@card_id",
                    "type_from_sys": "int",
                    "type_from_def": "I",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@card_id I"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_card_update_from_storage",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@tablename",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "N",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "'xCountry'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@tablename N"
                },
                {
                    "name": "@id",
                    "type_from_sys": "int",
                    "type_from_def": "I",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@id I"
                },
                {
                    "name": "@identity_column",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "N",
                    "max_length_bytes": 2048,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@identity_column N"
                },
                {
                    "name": "@card_id",
                    "type_from_sys": "int",
                    "type_from_def": "I",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@card_id I"
                },
                {
                    "name": "@parent_parent",
                    "type_from_sys": "bit",
                    "type_from_def": "B",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@parent_parent B"
                },
                {
                    "name": "@method",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "'GET'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@method n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_check_export_views",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_compare",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@src",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "N'tracy_fka_proj_new'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@src n"
                },
                {
                    "name": "@dst",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "N'tracy_fk_proj_new'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@dst n"
                },
                {
                    "name": "@table_name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@table_name n"
                },
                {
                    "name": "@card_name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@card_name n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_compare_main_db_definitions",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_confirm",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@question",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 2048,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@question n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_copy_core_data",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@db_src",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "N'tracy_fk_test_proj'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@db_src n"
                },
                {
                    "name": "@db_dst",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "N'tracy_fk_proj'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@db_dst n"
                },
                {
                    "name": "@table",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "N'api_card'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@table n"
                },
                {
                    "name": "@id_column",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "N'id'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@id_column n"
                },
                {
                    "name": "@code_column",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "N'name'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@code_column n"
                },
                {
                    "name": "@reducer",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "'name like ''v%'''",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@reducer n"
                },
                {
                    "name": "@set",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 7,
                    "full_declaration_from_def": "@set n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_create_card",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@TableName",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "N",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@TableName N"
                },
                {
                    "name": "@CardName",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "N",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@CardName N"
                }
            ],
            "embedded_example": "EXEC sp_api_create_card @TableName = N'demo_countries', @CardName = N'demo_countries2'",
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_create_card_action",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@card_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@card_id i"
                },
                {
                    "name": "@name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@name n"
                },
                {
                    "name": "@sql",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@sql n"
                },
                {
                    "name": "@keycode",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 100,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@keycode n"
                },
                {
                    "name": "@visability_type",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 100,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "'list'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@visability_type n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_create_json_data_with_fields_from_select_sql",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@select_sql",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@select_sql n"
                },
                {
                    "name": "@json",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@json n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_create_setting",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@key",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "'+dbo.escape_string_null(@key)+'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@key n"
                },
                {
                    "name": "@value",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "'+dbo.escape_string_null(@value)+'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@value n"
                },
                {
                    "name": "@enabled",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@enabled b"
                },
                {
                    "name": "@for_client",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@for_client b"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_create_synonym",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@object_name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@object_name n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_create_table_card",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@TableName",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "N",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@TableName N"
                },
                {
                    "name": "@CardName",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "N",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@CardName N"
                },
                {
                    "name": "@IdColumn",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "N",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "'ID'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@IdColumn N"
                },
                {
                    "name": "@TableJson",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "N",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@TableJson N"
                },
                {
                    "name": "@OnlyStructure",
                    "type_from_sys": "bit",
                    "type_from_def": "B",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@OnlyStructure B"
                },
                {
                    "name": "@IsSystemTable",
                    "type_from_sys": "bit",
                    "type_from_def": "B",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@IsSystemTable B"
                },
                {
                    "name": "@UseIdentity",
                    "type_from_sys": "bit",
                    "type_from_def": "B",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 7,
                    "full_declaration_from_def": "@UseIdentity B"
                }
            ],
            "embedded_example": "--complete example:\r\n--create database table plus card conform given JSON\r\nDECLARE @JSON NVARCHAR(MAX)=N'{\"data\":[{\"CountryId\":1,\"CountryGroupID\":2,\"Name_0\":\"Afghanistan\",\"Name_1\":\"Afghanistan\",\"Name_2\":\"Afghanistan\",\"Name_3\":\"Afghanistan\",\"Name_4\":\"Afganist\u00e1n\",\"Name_5\":\"Afganistan\",\"Name_6\":\"Afghanistan\",\"Name_7\":\"er\",\"IsoCode\":\"AF\",\"Iso3Code\":\"AFG\",\"CountryNumber\":\"4\",\"FreeText\":null,\"FreeMemo\":\"{\\\"city\\\":\\\"werweR\\\",\\\"Voornaam\\\":\\\"Rick\\\",\\\"postcode\\\":\\\"2595EJ\\\",\\\"Achternaam\\\":\\\"Hoek\\\",\\\"bloemnaam_nl\\\":\\\"roos\\\"}\",\"IsoNumber\":\"660\",\"Lookup\":\"AF \",\"LotGroup_ID\":12,\"VAT_Group\":null,\"doICP\":null,\"isEUCountry\":false,\"is_efta_country\":false},{\"CountryId\":2,\"CountryGroupID\":2,\"Name_0\":\"Albani\u00eb\",\"Name_1\":\"Albania\",\"Name_2\":\"Albanien\",\"Name_3\":\"Albanie\",\"Name_4\":\"Albania\",\"Name_5\":\"\u963f\u5c14\u5df4\u5c3c\u4e9a\",\"Name_6\":\"Albania\",\"Name_7\":\"ert\",\"IsoCode\":\"AL\",\"Iso3Code\":\"ALB\",\"CountryNumber\":\"8\",\"FreeText\":null,\"FreeMemo\":\"{\\\"bloemnaam_en\\\":\\\"Geert\\\",\\\"bloemnaam_nl\\\":\\\"Roos\\\",\\\"postcode\\\":\\\"2595 EJ\\\",\\\"street\\\":\\\"Emmastraat 10\\\",\\\"city\\\":\\\"Den Haag\\\",\\\"fullname\\\":\\\"G.W.A. Bultman\\\",\\\"country\\\":\\\"Nederland\\\"}\",\"IsoNumber\":\"070\",\"Lookup\":\"AL \",\"LotGroup_ID\":null,\"VAT_Group\":null,\"doICP\":null,\"isEUCountry\":false,\"is_efta_country\":false}],\"total\":2}'\r\nEXEC sp_api_create_table_card @TableName =N'demo_countries', @CardName = N'demo_countries', @IdColumn = 'Countryid', @TableJson =@JSON, @OnlyStructure = 1,  @IsSystemTable = 0",
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_create_table_from_json_data_with_fields",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@json",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@json n"
                },
                {
                    "name": "@tmptable",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@tmptable n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_csv_to_json",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@csv",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@csv n"
                },
                {
                    "name": "@options",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@options n"
                },
                {
                    "name": "@json",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@json n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_csv_to_table",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@text",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@text n"
                },
                {
                    "name": "@seperator",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 20,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "'[\\t]'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@seperator n"
                },
                {
                    "name": "@tablename",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "N'#tabs'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@tablename n"
                }
            ],
            "embedded_example": "DECLARE @text nvarchar(max) = N'qwry\ter\r\n34\t3\r\nwere we'\r\nCREATE TABLE #tabs (id int IDENTITY(1,1) PRIMARY KEY)\r\nEXEC sp_api_csv_to_table @text\r\n\t--,@seperator = '[\\t]'\r\n\t--,@tablename = N'#tabs'\r\nSELECT * FROM #tabs\r\nDROP TABLE #tabs\r\nEXEC sp_api_modal_table @tmptable = '#tabs'",
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_daily_project_cleanup",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@clean_action_stats",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@clean_action_stats b"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_data_set_generic_receiver",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@body",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@body n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_dataset_changes",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@data_set_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@data_set_id i"
                },
                {
                    "name": "@record_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@record_id i"
                },
                {
                    "name": "@keep_modified_time",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@keep_modified_time b"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_dataset_chart",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@type",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "'bar'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@type n"
                },
                {
                    "name": "@data",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@data n"
                },
                {
                    "name": "@options",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@options n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_dataset_core",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@data_set_name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@data_set_name n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_dataset_get",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@data_set_name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@data_set_name n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_dataset_portal_confirm_token",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_dataset_portal_request_token",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_dataset_portal_validate_token",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@tsqlportal_token",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@tsqlportal_token n"
                },
                {
                    "name": "@user_name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 512,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@user_name n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_dataset_replace_params",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@sql",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@sql n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_dataset_to_power_query",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@dataset_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@dataset_id i"
                },
                {
                    "name": "@code",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@code n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_dataset_tsqlsystem",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@ip",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@ip n"
                },
                {
                    "name": "@data_set_name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@data_set_name n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_dataset_tsqlsystem_backup",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_dataset_tsqlsystem_ip_adress",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_dataset_tsqlsystem_search",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_dataset_tsqlsystem_status",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_dataset_tsqlsystem_structure",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_dataset_tsqlsystem_structure_json",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@json",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@json n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_dataset_tsqlsystem_ticket",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_dataset_tsqlsystem_ticket_email",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@to",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 512,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@to n"
                },
                {
                    "name": "@link",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@link n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_dataset_whatsapp",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@data_set_name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@data_set_name n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_dataset_whatsapp_process_webhook",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@id i"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_deadlocks_add_from_log",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_email",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@to",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@to n"
                },
                {
                    "name": "@subject",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@subject n"
                },
                {
                    "name": "@body",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@body n"
                },
                {
                    "name": "@body_format",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 40,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@body_format n"
                },
                {
                    "name": "@query",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@query n"
                },
                {
                    "name": "@from",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "'noreply@tracy.nu'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@from n"
                },
                {
                    "name": "@html",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 7,
                    "full_declaration_from_def": "@html n"
                },
                {
                    "name": "@cc",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 8,
                    "full_declaration_from_def": "@cc n"
                },
                {
                    "name": "@bcc",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 9,
                    "full_declaration_from_def": "@bcc n"
                },
                {
                    "name": "@attachments",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 10,
                    "full_declaration_from_def": "@attachments n"
                },
                {
                    "name": "@ignore_test_environment",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 11,
                    "full_declaration_from_def": "@ignore_test_environment b"
                },
                {
                    "name": "@api_files_ids",
                    "type_from_sys": "varchar",
                    "type_from_def": "v",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 12,
                    "full_declaration_from_def": "@api_files_ids v"
                },
                {
                    "name": "@api_files_context",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 13,
                    "full_declaration_from_def": "@api_files_context n"
                },
                {
                    "name": "@api_files_context_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 14,
                    "full_declaration_from_def": "@api_files_context_id i"
                },
                {
                    "name": "@api_files_category_ids",
                    "type_from_sys": "varchar",
                    "type_from_def": "v",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 15,
                    "full_declaration_from_def": "@api_files_category_ids v"
                },
                {
                    "name": "@log_email_sent",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "1",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 16,
                    "full_declaration_from_def": "@log_email_sent b"
                },
                {
                    "name": "@resize_images",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 17,
                    "full_declaration_from_def": "@resize_images n"
                }
            ],
            "embedded_example": "EXEC sp_api_email @to=N'me@to.com',@subject='Hi there',@body='Hello!',@html='<b>Hello!</b>' --\r\n-- sending in HTML format is also possible:\r\nEXEC sp_api_email @to=N'me@to.com',@subject='Hi there (using HTML in the email body)',@html='<b>Hello, this is a HTML body!</b>'\r\n-- sending with a file attachment:\r\nEXEC sp_api_email @to=N'me@to.com',@subject='Hi there (using HTML plus ATTACHMENT)',@html='<b>Hello, please check the attachment!</b>',@attachments ='[{\"filename\":\"x.pdf\",\"path\":\"https://x.y.com\"]'\r\n\t,@resize_images nvarchar(max) = NULL -- '{\"width\":640,\"quality\":50}' see: https://sharp.pixelplumbing.com/api-resize/",
            "embedded_description": null,
            "co_occurrence_stats": {
                "dbo.sp_api_toast": 8,
                "dbo.sp_api_modal_alert": 2,
                "dbo.sp_api_modal_table": 5,
                "dbo.sp_api_modal_clear": 6,
                "dbo.sp_api_modal_button": 7,
                "dbo.sp_api_modal_date_from_to": 1,
                "dbo.sp_api_modal_text": 6,
                "dbo.sp_api_modal_input": 4,
                "dbo.sp_api_modal_choose": 4,
                "dbo.sp_api_push_bullet": 1,
                "dbo.sp_api_modal_scanner": 1,
                "dbo.sp_sys_file_upload_base64": 1,
                "dbo.sp_api_goto": 1,
                "dbo.sp_api_modal_qr_scanner": 1,
                "dbo.sp_api_modal_table_update": 1,
                "dbo.sp_api_file_set": 1,
                "dbo.sp_api_modal_html": 1,
                "dbo.sp_api_modal_value": 1,
                "dbo.sp_api_modal_values_clear": 1,
                "dbo.sp_api_modal_restart": 1,
                "dbo.sp_api_modal_get_value": 1,
                "dbo.sp_api_modal_choose_list": 1
            },
            "real_usage_examples": [
                {
                    "sql_source": "DECLARE @subject nvarchar(255) = N'Tracy '+@card_name + ' mail'\nDECLARE @body nvarchar(max),@html nvarchar(max),@list_select nvarchar(max),@list_select_cache nvarchar(max)\nSELECT @list_select_cache = list_select_cache FROM api_card WHERE id = @card_id\nSET @list_select=N'\n\tSELECT * INTO #tmptable FROM ('+@list_select_cache+') tbl\n\tEXEC sp_api_html_table N''#tmptable'',N''ORDER BY 2'',@html OUT'\nEXEC sp_executesql @list_select,N'@html nvarchar(max) OUT',@html OUT\n/*\nEXEC sp_api_toast @html\n\nRETURN\nEXEC sp_api_html_table N'api_card',N'ORDER BY name',@html OUT\n*/\n--EXEC sp_api_email @user,@subject,N'<h3>See attached</h3>',@query = @list_select_cache\n\nSET @body = N'<h3>Export</h3>'+@html\nEXEC sp_api_email @user,@subject,@body\nEXEC sp_api_toast N'Sent mail to:'\nEXEC sp_api_toast @user",
                    "action_id": 58,
                    "action_name": "sys_email_to_me",
                    "source_table": "api_actions"
                },
                {
                    "sql_source": "SET @alert_text=CONCAT('Eerst dit, dan: ',@alert_text,@card_name)\nif @sub_Text is NULL Set @Sub_Text=N'TEST123'\nEXEC sp_api_modal_alert @alert_text,@sub_text\nEXEC sp_api_email @to='rick@tracy.nu',@subject=@sub_text,@body=@alert_text\n",
                    "action_id": 263,
                    "action_name": "#alert",
                    "source_table": "api_actions"
                },
                {
                    "sql_source": "----------------------------------------------------------------------------\n--\tfunction: \t\tir_transit\n--\tdescription:\ttoon het actuele douanesaldo en zorg dat dit geprint kan worden\n--\tpre declare:\t@Mailbutton\n----------------------------------------------------------------------------\nexec sp_api_modal_text N'Actueel douanesaldo'\nselect *  INTO #IR_TransitoVoorraad from @main_db.dbo.DouaneSaldo_ctr1(0,0) \nEXEC sp_api_modal_table @tmptable=N'#IR_TransitoVoorraad' ,@print=1\n\n--mailen??\nEXEC sp_api_modal_button @name='@mailbutton',@value = 'Mail', @valueout = @Mailbutton OUT,@class='btn-warning',@key='M'\nif @Mailbutton='Mail'\nbegin\n\n\tDECLARE @subject nvarchar(255) = N'Tracy actual Transito stock'\n\tDECLARE @body nvarchar(max),@html nvarchar(max),@list_select nvarchar(max),@list_select_cache nvarchar(max)\n\tSELECT @list_select_cache = list_select_cache FROM api_card WHERE id = @card_id\n\tSET @list_select=N'\n\t\tSELECT * INTO #tmptable FROM @main_db.dbo.DouaneSaldo_ctr1(0,0) tbl\n\t\tEXEC sp_api_html_table N''#tmptable'',N''ORDER BY 2'',@html OUT'\n\tEXEC sp_executesql @list_select,N'@html nvarchar(max) OUT',@html OUT\n\n\n\t--wrap er een table omheen: / *\n\tSET @html = N'<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">\n\t<html xmlns=\"http://www.w3.org/1999/xhtml\">\n\t <head>\n\t  <meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\" />\n\t  <title>Demystifying Email Design</title>\n\t  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"/>\n\t</head><body style=\"margin: 0; padding: 0;\">\n\t <table border=\"3\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\">\n\t  <tr>\n\t   <td><h3>Export</h3>'+ @html +N'</td>\n\t  </tr>\n\t </table>\n\t</body></html>'\n\t--* /\n\n\tEXEC sp_api_email @user,@subject,@body = N'Geen html support',@html = @html -- html in @HTML !\n\tEXEC sp_api_toast N'Sent mail to:'\n\tEXEC sp_api_toast @user\n\texec sp_api_modal_clear-- afkappen na mailen..\n\nend",
                    "action_id": 274,
                    "action_name": "IR_Transit",
                    "source_table": "api_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_error_handler",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_error_handler_set_first",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@sql",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@sql n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_error_handler_sql",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@sql",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@sql n"
                },
                {
                    "name": "@PROCID",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@PROCID i"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_error_insert",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@error_message",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@error_message n"
                },
                {
                    "name": "@duration",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@duration i"
                },
                {
                    "name": "@dont_email",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@dont_email b"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_event_session_init",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_excel",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@sql",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@sql n"
                },
                {
                    "name": "@base64data",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@base64data n"
                },
                {
                    "name": "@sheetname",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 62,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@sheetname n"
                },
                {
                    "name": "@columnwidths",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@columnwidths n"
                },
                {
                    "name": "@filename",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 4000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@filename n"
                },
                {
                    "name": "@order_column",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "1",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@order_column i"
                },
                {
                    "name": "@datatypes",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 7,
                    "full_declaration_from_def": "@datatypes n"
                },
                {
                    "name": "@stay_in_modal",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 8,
                    "full_declaration_from_def": "@stay_in_modal b"
                },
                {
                    "name": "@context",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 9,
                    "full_declaration_from_def": "@context n"
                },
                {
                    "name": "@context_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 10,
                    "full_declaration_from_def": "@context_id i"
                },
                {
                    "name": "@description",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 11,
                    "full_declaration_from_def": "@description n"
                },
                {
                    "name": "@category",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 12,
                    "full_declaration_from_def": "@category n"
                },
                {
                    "name": "@api_files_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 13,
                    "full_declaration_from_def": "@api_files_id i"
                },
                {
                    "name": "@url",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 14,
                    "full_declaration_from_def": "@url n"
                },
                {
                    "name": "@tmptable",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 15,
                    "full_declaration_from_def": "@tmptable n"
                },
                {
                    "name": "@clean_column_names",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 16,
                    "full_declaration_from_def": "@clean_column_names b"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_excel_read",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@api_files_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@api_files_id i"
                },
                {
                    "name": "@json",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@json n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_exec",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@sql",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@sql n"
                },
                {
                    "name": "@offset_trick",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@offset_trick i"
                },
                {
                    "name": "@current_id_trick",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@current_id_trick i"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_exec_static",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@sql",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@sql n"
                },
                {
                    "name": "@total_count",
                    "type_from_sys": "int",
                    "type_from_def": "I",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@total_count I"
                },
                {
                    "name": "@first_id",
                    "type_from_sys": "int",
                    "type_from_def": "I",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@first_id I"
                },
                {
                    "name": "@last_id",
                    "type_from_sys": "int",
                    "type_from_def": "I",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@last_id I"
                },
                {
                    "name": "@total_isam_count",
                    "type_from_sys": "int",
                    "type_from_def": "I",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@total_isam_count I"
                },
                {
                    "name": "@parents",
                    "type_from_sys": "api_parents_table",
                    "type_from_def": "a",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@parents a"
                },
                {
                    "name": "@name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 7,
                    "full_declaration_from_def": "@name n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_export",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@json",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@json n"
                },
                {
                    "name": "@card_name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@card_name n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_favicon_ico",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_fetch",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@url",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@url n"
                },
                {
                    "name": "@headers",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@headers n"
                },
                {
                    "name": "@method",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@method n"
                },
                {
                    "name": "@body",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@body n"
                },
                {
                    "name": "@status",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@status i"
                },
                {
                    "name": "@response",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@response n"
                },
                {
                    "name": "@binary_response",
                    "type_from_sys": "varbinary",
                    "type_from_def": "v",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 7,
                    "full_declaration_from_def": "@binary_response v"
                },
                {
                    "name": "@binary",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 8,
                    "full_declaration_from_def": "@binary b"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_fetch_async",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@url",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@url n"
                },
                {
                    "name": "@headers",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@headers n"
                },
                {
                    "name": "@method",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@method n"
                },
                {
                    "name": "@body",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@body n"
                },
                {
                    "name": "@status",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@status i"
                },
                {
                    "name": "@response",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@response n"
                },
                {
                    "name": "@wait",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 7,
                    "full_declaration_from_def": "@wait i"
                },
                {
                    "name": "@error",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 8,
                    "full_declaration_from_def": "@error n"
                },
                {
                    "name": "@responseheaders",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 9,
                    "full_declaration_from_def": "@responseheaders n"
                },
                {
                    "name": "@json",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 10,
                    "full_declaration_from_def": "@json n"
                },
                {
                    "name": "@store",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 11,
                    "full_declaration_from_def": "@store b"
                },
                {
                    "name": "@filename",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 4096,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 12,
                    "full_declaration_from_def": "@filename n"
                },
                {
                    "name": "@api_files_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 13,
                    "full_declaration_from_def": "@api_files_id i"
                },
                {
                    "name": "@store_only",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 14,
                    "full_declaration_from_def": "@store_only b"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_fetch_binary",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@url",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@url n"
                },
                {
                    "name": "@headers",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@headers n"
                },
                {
                    "name": "@method",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@method n"
                },
                {
                    "name": "@body",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@body n"
                },
                {
                    "name": "@status",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@status i"
                },
                {
                    "name": "@response",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@response n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_fetch_json",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@url",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@url n"
                },
                {
                    "name": "@json",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@json n"
                },
                {
                    "name": "@headers",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@headers n"
                },
                {
                    "name": "@method",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@method n"
                },
                {
                    "name": "@body",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@body n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_file_auto_detect",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@api_files_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@api_files_id i"
                },
                {
                    "name": "@json",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@json n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_file_category",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@id i"
                },
                {
                    "name": "@name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@name n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_file_clean_up",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_file_download",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@path",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@path n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_file_get",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@token",
                    "type_from_sys": "varchar",
                    "type_from_def": "v",
                    "max_length_bytes": 1024,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@token v"
                },
                {
                    "name": "@show_repo",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@show_repo b"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_file_ocr",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@file_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@file_id i"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_file_set",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@api_files_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@api_files_id i"
                },
                {
                    "name": "@url",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@url n"
                },
                {
                    "name": "@valid_from",
                    "type_from_sys": "datetime2",
                    "type_from_def": "d",
                    "max_length_bytes": 6,
                    "precision": 19,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@valid_from d"
                },
                {
                    "name": "@valid_to",
                    "type_from_sys": "datetime2",
                    "type_from_def": "d",
                    "max_length_bytes": 6,
                    "precision": 19,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@valid_to d"
                },
                {
                    "name": "@seconds_valid",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@seconds_valid i"
                },
                {
                    "name": "@path",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@path n"
                },
                {
                    "name": "@filename",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 7,
                    "full_declaration_from_def": "@filename n"
                },
                {
                    "name": "@prefix",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 8,
                    "full_declaration_from_def": "@prefix n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {
                "dbo.sp_api_email": 1,
                "dbo.sp_api_toast": 1
            },
            "real_usage_examples": [
                {
                    "sql_source": "-------------------------------------\r\n-- mail_all_linked_files\r\n-------------------------------------\r\ndeclare @filename nvarchar(512) --240528\r\ndeclare @url nvarchar(512)\t\t--240528\r\ndeclare @mail_to nvarchar(256) = @user -- the user who is currently logged-in\r\nDECLARE @bodytext nvarchar(max) \r\nCREATE TABLE #files (filename nvarchar(4000),path nvarchar(4000))\r\nSELECT id,name FROM api_files WHERE context = @card_name AND context_id = @id\r\n\r\nDECLARE @cursor CURSOR,@idval INT\r\nSET @cursor = CURSOR LOCAL FAST_FORWARD FOR \r\n\t\tSELECT id,name FROM api_files \r\n\t\tWHERE context = @card_name AND context_id = @id -- IN ({@ids})\r\nOPEN @cursor;\r\nFETCH NEXT FROM @cursor INTO @idval,@filename\r\nWHILE @@FETCH_STATUS = 0\r\n\tBEGIN\r\n\t\tEXEC sp_api_file_set @api_files_id=@idval,@url = @url OUT\r\n        INSERT INTO #files (filename,path) VALUES(@filename,@url)\r\n        SET @bodytext = CONCAT(@bodytext,CHAR(13),@url)\r\n\t\tFETCH NEXT FROM @cursor INTO @idval,@filename\r\n\tEND\r\nCLOSE @cursor;\r\nDEALLOCATE @cursor;\r\nDECLARE @attachments nvarchar(max) = (SELECT * FROM #files FOR JSON PATH)\r\n\r\nDECLARE @subject nvarchar(256)=concat(' Files from dossier: ',@card_name,': ',@ID)\r\nif @bodytext is not null set @bodytext=CONCAT(N'Links for direct download:',CHAR(13),@bodytext)\r\nif @bodytext is null set @bodytext=concat(N'Hereby we send you the files for dossier ',@id,' (',@card_name,')')\r\nEXEC sp_api_email @mail_to,@subject,@bodytext,@attachments = @attachments --filename en path\r\n\r\nDECLARE @T1 nvarchar(256)=concat(N'All files for record ',@ID,N' are sent by mail to ',@mail_to)\r\nexec sp_api_toast @T1",
                    "action_id": 569,
                    "action_name": "mail_all_linked_files",
                    "source_table": "api_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_fk_usage",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@table_name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@table_name n"
                },
                {
                    "name": "@ids",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@ids n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_foreach_id",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@sql",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@sql n"
                },
                {
                    "name": "@ids",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@ids n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": [
                {
                    "sql_source": "--UPDATE xTransactionHeader SET transactiondate = GETDATE() WHERE id = @id\r\nEXEC sp_api_foreach_id N'UPDATE xTransactionHeader SET advTransportDep= dbo.workdate(), transactiondate = dbo.workdate() WHERE id = @id',@ids\r\nEXEC sp_api_toast N'Today set!'",
                    "action_id": 47,
                    "action_name": "set to workdate",
                    "source_table": "api_card_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_ftp_put",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@host",
                    "type_from_sys": "varchar",
                    "type_from_def": "v",
                    "max_length_bytes": 4000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@host v"
                },
                {
                    "name": "@user",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@user n"
                },
                {
                    "name": "@password",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@password n"
                },
                {
                    "name": "@filepath",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@filepath n"
                },
                {
                    "name": "@data",
                    "type_from_sys": "varbinary",
                    "type_from_def": "v",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@data v"
                },
                {
                    "name": "@port",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "21",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@port i"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_get_children",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@database",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "N",
                    "max_length_bytes": 510,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "'tracy_fkt'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@database N"
                },
                {
                    "name": "@tablename",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "N",
                    "max_length_bytes": 510,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "'xTransactionHeader'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@tablename N"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_get_children_v2",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@tablename",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "N",
                    "max_length_bytes": 510,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "'xTransactionHeader'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@tablename N"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_get_master_api_root_url",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@master_api_root_url",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@master_api_root_url n"
                },
                {
                    "name": "@system_card",
                    "type_from_sys": "smallint",
                    "type_from_def": "s",
                    "max_length_bytes": 2,
                    "precision": 5,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@system_card s"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_get_parents",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@tablename",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "N",
                    "max_length_bytes": 510,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "''",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@tablename N"
                },
                {
                    "name": "@query",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "N",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "''",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@query  N"
                },
                {
                    "name": "@database",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "N",
                    "max_length_bytes": 510,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "''",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@database N"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_get_parents_v2",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@tablename",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "N",
                    "max_length_bytes": 510,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "''",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@tablename N"
                },
                {
                    "name": "@query",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "N",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "''",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@query  N"
                },
                {
                    "name": "@database",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "N",
                    "max_length_bytes": 510,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "''",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@database N"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_get_parents_v3",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@tablename",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "N",
                    "max_length_bytes": 510,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "''",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@tablename N"
                },
                {
                    "name": "@query",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "N",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "''",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@query  N"
                },
                {
                    "name": "@database",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "N",
                    "max_length_bytes": 510,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "''",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@database N"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_get_query_filter",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@filter",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 4096,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@filter n"
                },
                {
                    "name": "@card_id",
                    "type_from_sys": "int",
                    "type_from_def": "I",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@card_id I"
                },
                {
                    "name": "@sql",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@sql n"
                },
                {
                    "name": "@identity_column",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@identity_column n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_get_relevance_order",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@tablename",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "'xCompany'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@tablename n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_get_relevance_order_fast",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@tablename",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "'api_card_fields'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@tablename n"
                },
                {
                    "name": "@reducer",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "N''",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@reducer n"
                },
                {
                    "name": "@top",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "100",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@top n"
                },
                {
                    "name": "@identity_column",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "'id'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@identity_column n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_get_relevance_order_super_fast",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@tablename",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "'xCompany'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@tablename n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_go_back",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_go2",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@steps_back",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@steps_back n"
                },
                {
                    "name": "@to_list",
                    "type_from_sys": "bit",
                    "type_from_def": "B",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "1",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@to_list B"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": [
                {
                    "sql_source": "DECLARE @wat nvarchar(200), @linktoME int,@text nvarchar(max)\n\nIF {[ctr2].cth_fase} NOT IN (N'openSale','openPrice')\n\tBEGIN\n\tEXEC sp_api_modal_Alert N'Let op!', N'De verkoop is reeds gesloten. U kan niet meer de toewijzing wijzigen.' \n\tEXEC sp_api_modal_clear\n\tRETURN\n\tEND\n\nSET @linktoME ={[ctr2].id}\n--201028 erbij ivm overbrengen..\nif @LinkToMe is NULL set @LinkToMe={[ctr_overbrengen].id}\n\nDECLARE @maxTeLinken INT,@maxBeschikbaar INT\nSELECT @maxTeLinken = (ctrAmount-IVTOTAL) FROM Q_xTransactionDetail WHERE ID=@LinkToME\n\nIF @maxTeLinken = 0\n\tBEGIN\n\t\tEXEC sp_api_modal_alert N'Regel is al volledig toegewezen'\n\t\tEXEC\t sp_api_go2 1 -- 1 stap terug (+list view; detailviewgebruik EXEC sp_api_go2 1,0)\n\t\tRETURN;\n\tEND\n\n\nSET @maxBeschikbaar = {[ctr1_toewijsbaar].available}\nIF @maxBeschikbaar < @maxTeLinken\n\tBEGIN\n\t\tdeclare @Melding nvarchar(200)\n\t\tset @Melding = concat(N'Niet genoeg beschikbaar! Te linken:',N' ',@maxTeLinken)\n\t\tEXEC sp_api_modal_text @Melding,N'h4 text-muted'\n\t\tSET @text = CONCAT('U kunt maximaal ',@maxBeschikbaar,' van de ',@maxTeLinken,' linken')\n\t\tEXEC sp_api_modal_text @text,N'm-4'\n\t\tSET @maxTeLinken = @maxBeschikbaar\n\tEND\n\nIF @maxTeLinken < 0\n\tBEGIN\n\t\tEXEC sp_api_modal_alert N'Probleem!',N'Regel heeft meer toegewezen dan mag. Ga naar de toewijzing (IV link) en verlaag deze.'\n\t\tEXEC sp_api_modal_clear\n\tEND\n\nDECLARE @aantalTeLinken INT = @maxTeLinken\n\t,@button nvarchar(50)\n\nEXEC sp_api_modal_input @name='Aantal',@value = @aantalTeLinken OUT,@focus=1,@select=1\nEXEC sp_api_modal_button @name='button',@value = 'Link aantal',@valueout=@button OUT,@key=N'Enter'\nIF @button IS NULL RETURN\nset @wat=N'Gekozen ID: '+str(@ID)+' wordt gekoppeld aan CTR: '+str(@LinktoME)\nexec sp_api_toast @wat\n--RETURN; --test\n\nif @linktoME is not null\n\tBEGIN\n\t\texec @main_db.dbo.map @linktoME,@ID, @aantalTeLinken\n\t\t\n\t\t--zet return path\n\t\tSET @ctr2_id = {[ctr2].id}\n\t\tSET @verkoop_id = {[verkoop].id}\n\t\tIF @ctr2_id IS NOT NULL AND @verkoop_id IS NOT NULL AND @aantalTeLinken = @maxTeLinken\n\t\t\tBEGIN\n\t\t\t\tSET @goto = CONCAT('/verkoop/',@verkoop_id,'/ctr2/',@ctr2_id,'/iv2')\n\t\t\t\tSET @referer_path = CONCAT('/verkoop/',@verkoop_id,'/ctr2')\n\t\t\t\tSET @referer_search = CONCAT(N'?id=',@ctr2_id)\n\t\t\t\tEXEC sp_api_toast N'Regel(s) is/zijn gelink bla',N'alert-primary'\t\t\t\t\n\t\t\t\tEXEC sp_api_goto @goto,@referer_path=@referer_path,@referer_search=@referer_search\n\t\t\tEND\n\t\t--210115 \n--\t\texec sp_api_go3\n\t\texec sp_api_modal_clear\n\tEND\n\n\n--if @parent_card_name='ctr2'\n--\tBEGIN\n--\t\texec @main_db.dbo.map @ID, @Parent_ID\n--\tEND\n--else --neem aan parent_parent...\n--\tBEGIN\n--\t\texec @main_db.dbo.map @ID, @Parent_Parent_ID\n--\tEND\n\n--EXEC sp_api_goto @path",
                    "action_id": 13,
                    "action_name": "link_this",
                    "source_table": "api_card_actions"
                },
                {
                    "sql_source": "declare @delresult int\nexec @DelResult=@main_db.dbo.[Delete_LF_IF_NO_LFCTR] @ID\nif @DelResult = -1\n\texec sp_api_Toast N'Er kan geen landfreight worden verwijderd, omdat er nog detailregels bestaan'\nEXEC sp_api_go2\n",
                    "action_id": 126,
                    "action_name": "Verwijder Landfreight",
                    "source_table": "api_card_actions"
                },
                {
                    "sql_source": "declare @Naam nvarchar(200)=(select size from xstock where id=@ID)\ndeclare @xbol_ID INT ={[xbol].id}\nif @xBol_ID is not null update xbol set DocNumber=@naam where id=@xBol_ID\n\nexec sp_api_go2",
                    "action_id": 194,
                    "action_name": "vul BOL",
                    "source_table": "api_card_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_goto",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@path",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@path n"
                },
                {
                    "name": "@search",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@search n"
                },
                {
                    "name": "@referer_path",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@referer_path n"
                },
                {
                    "name": "@referer_search",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@referer_search n"
                },
                {
                    "name": "@update_current_search",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@update_current_search n"
                },
                {
                    "name": "@id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@id i"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {
                "dbo.sp_api_modal_input": 13,
                "dbo.sp_api_toast": 13,
                "dbo.sp_api_modal_text": 25,
                "dbo.sp_api_modal_button": 26,
                "dbo.sp_api_modal_select": 18,
                "dbo.sp_api_modal_clear": 3,
                "dbo.ABCDATE": 7,
                "dbo.sp_api_modal_modal": 4,
                "dbo.sp_api_modal_pathname": 1,
                "dbo.sp_api_modal_date": 13,
                "dbo.sp_api_modal_table": 9,
                "dbo.sp_api_modal_select_table": 3,
                "dbo.sp_api_modal_alert": 1,
                "dbo.sp_api_modal_table_update": 2,
                "dbo.sp_api_modal_save": 1,
                "dbo.sp_api_modal_post": 1,
                "dbo.sp_api_modal_scanner": 1,
                "dbo.sp_sys_file_upload_base64": 1,
                "dbo.sp_api_email": 1,
                "dbo.sp_api_modal_qr_scanner": 1,
                "dbo.sp_api_modal_choose": 1
            },
            "real_usage_examples": [
                {
                    "sql_source": "DECLARE @wat nvarchar(200), @linktoME int,@text nvarchar(max)\n\nIF {[ctr2].cth_fase} NOT IN (N'openSale','openPrice')\n\tBEGIN\n\tEXEC sp_api_modal_Alert N'Let op!', N'De verkoop is reeds gesloten. U kan niet meer de toewijzing wijzigen.' \n\tEXEC sp_api_modal_clear\n\tRETURN\n\tEND\n\nSET @linktoME ={[ctr2].id}\n--201028 erbij ivm overbrengen..\nif @LinkToMe is NULL set @LinkToMe={[ctr_overbrengen].id}\n\nDECLARE @maxTeLinken INT,@maxBeschikbaar INT\nSELECT @maxTeLinken = (ctrAmount-IVTOTAL) FROM Q_xTransactionDetail WHERE ID=@LinkToME\n\nIF @maxTeLinken = 0\n\tBEGIN\n\t\tEXEC sp_api_modal_alert N'Regel is al volledig toegewezen'\n\t\tEXEC\t sp_api_go2 1 -- 1 stap terug (+list view; detailviewgebruik EXEC sp_api_go2 1,0)\n\t\tRETURN;\n\tEND\n\n\nSET @maxBeschikbaar = {[ctr1_toewijsbaar].available}\nIF @maxBeschikbaar < @maxTeLinken\n\tBEGIN\n\t\tdeclare @Melding nvarchar(200)\n\t\tset @Melding = concat(N'Niet genoeg beschikbaar! Te linken:',N' ',@maxTeLinken)\n\t\tEXEC sp_api_modal_text @Melding,N'h4 text-muted'\n\t\tSET @text = CONCAT('U kunt maximaal ',@maxBeschikbaar,' van de ',@maxTeLinken,' linken')\n\t\tEXEC sp_api_modal_text @text,N'm-4'\n\t\tSET @maxTeLinken = @maxBeschikbaar\n\tEND\n\nIF @maxTeLinken < 0\n\tBEGIN\n\t\tEXEC sp_api_modal_alert N'Probleem!',N'Regel heeft meer toegewezen dan mag. Ga naar de toewijzing (IV link) en verlaag deze.'\n\t\tEXEC sp_api_modal_clear\n\tEND\n\nDECLARE @aantalTeLinken INT = @maxTeLinken\n\t,@button nvarchar(50)\n\nEXEC sp_api_modal_input @name='Aantal',@value = @aantalTeLinken OUT,@focus=1,@select=1\nEXEC sp_api_modal_button @name='button',@value = 'Link aantal',@valueout=@button OUT,@key=N'Enter'\nIF @button IS NULL RETURN\nset @wat=N'Gekozen ID: '+str(@ID)+' wordt gekoppeld aan CTR: '+str(@LinktoME)\nexec sp_api_toast @wat\n--RETURN; --test\n\nif @linktoME is not null\n\tBEGIN\n\t\texec @main_db.dbo.map @linktoME,@ID, @aantalTeLinken\n\t\t\n\t\t--zet return path\n\t\tSET @ctr2_id = {[ctr2].id}\n\t\tSET @verkoop_id = {[verkoop].id}\n\t\tIF @ctr2_id IS NOT NULL AND @verkoop_id IS NOT NULL AND @aantalTeLinken = @maxTeLinken\n\t\t\tBEGIN\n\t\t\t\tSET @goto = CONCAT('/verkoop/',@verkoop_id,'/ctr2/',@ctr2_id,'/iv2')\n\t\t\t\tSET @referer_path = CONCAT('/verkoop/',@verkoop_id,'/ctr2')\n\t\t\t\tSET @referer_search = CONCAT(N'?id=',@ctr2_id)\n\t\t\t\tEXEC sp_api_toast N'Regel(s) is/zijn gelink bla',N'alert-primary'\t\t\t\t\n\t\t\t\tEXEC sp_api_goto @goto,@referer_path=@referer_path,@referer_search=@referer_search\n\t\t\tEND\n\t\t--210115 \n--\t\texec sp_api_go3\n\t\texec sp_api_modal_clear\n\tEND\n\n\n--if @parent_card_name='ctr2'\n--\tBEGIN\n--\t\texec @main_db.dbo.map @ID, @Parent_ID\n--\tEND\n--else --neem aan parent_parent...\n--\tBEGIN\n--\t\texec @main_db.dbo.map @ID, @Parent_Parent_ID\n--\tEND\n\n--EXEC sp_api_goto @path",
                    "action_id": 13,
                    "action_name": "link_this",
                    "source_table": "api_card_actions"
                },
                {
                    "sql_source": "SET @path = REPLACE(@path,'/lotpallets','/lotartsize')\r\nEXEC sp_api_goto @path\r\n",
                    "action_id": 19,
                    "action_name": "maten",
                    "source_table": "api_card_actions"
                },
                {
                    "sql_source": "DECLARE @VerkoopPath nvarchar(200) \nSET @VerkoopPath=concat(N'/verkoop/',{[verkoop].id},N'/ctr2')\nEXEC SP_API_GOTO @VerkoopPath",
                    "action_id": 26,
                    "action_name": "naar CTR",
                    "source_table": "api_card_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_goto_get_filter_and_sorting",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@path",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@path n"
                },
                {
                    "name": "@search",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@search n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_health_status",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": [
                {
                    "sql_source": "/*\nGebruik elders dit:\n\tEXEC sp_api_modal_set N'statusbar_1',N'Gooi dit in de statusbar!'\n\tof\n\tEXEC sp_api_modal_set N'statusbar_all_green',N'Dit overschrijft alles in de statusbar!'\n*/\n--EXEC sp_api_modal_set N'last_access_date',N'2020-01-01'\n\n\nDECLARE @status nvarchar(256)\nEXEC sp_api_modal_get N'last_access_date',@status OUT \nIF @status IS NULL OR @status <> dbo.strdate(NULL)\n\tBEGIN\n\t\tEXEC sp_api_toast N'Welkom deze nieuwe dag!!!'\n\t\tEXEC sp_api_modal_set N'workdate',NULL\n\t\tSET @status = dbo.strdate(NULL)\n\t\tEXEC sp_api_modal_set N'last_access_date',@status\n\t\tEXEC sp_api_modal_set N'statusbar_all_green',NULL -- wissen!\n\t\t--SP_DAILY HIER\n\t\tEXEC sp_api_health_status\n\tEND\nEXEC sp_api_health_status\n\nEXEC sp_api_modal_get N'workdate',@status OUT \nIF @status IS NULL\n\tBEGIN\n\t\tSET @status = dbo.abcdate()\n\t\tEXEC sp_api_modal_set N'workdate',@status \n\tEND\n\n\n/* --=> statusbar_all overschrijft alle status */\nEXEC sp_api_modal_get N'statusbar_all_red',@status OUT \nIF @status IS NOT NULL\n\tBEGIN\n\t\tEXEC sp_api_statusbar @status ,'bg-danger col-sm-3 text-truncate',0 --> 0 is links\n\t\tRETURN\n\tEND\n\nEXEC sp_api_modal_get N'statusbar_all_blue',@status OUT \nIF @status IS NOT NULL --OR  1=1\n\tBEGIN\n\t\tEXEC sp_api_statusbar @status ,'bg-primary col-sm text-truncate',1 --> 0 is links\n\t\tRETURN\n\tEND\n\nEXEC sp_api_modal_get N'statusbar_all_green',@status OUT \nIF @status IS NOT NULL\n\tBEGIN\n\t\tEXEC sp_api_statusbar @status ,'bg-success col-sm-3 text-truncate',1 --> 0 is links\n\t\tRETURN\n\tEND\n\nEXEC sp_api_modal_get N'statusbar_all_yellow',@status OUT \nIF @status IS NOT NULL\n\tBEGIN\n\t\tEXEC sp_api_statusbar @status ,'bg-warning col-sm-3 text-truncate',1 --> 0 is links\n\t\tRETURN\n\tEND\n\n\n\n\n\nEXEC sp_api_modal_get N'workdate',@status OUT\nDECLARE @class nvarchar(255) = N'bg-danger col-sm-1 text-truncate' -- zet kleur danger...\nIF dbo.abcdate() = @status SET @class = N'col-sm-1 text-truncate' -- als workdate gelijk is aan echte datum, dan geen kleur\n\nSET @status = dbo.strdate(@status)\nIF @status IS NOT NULL EXEC sp_api_statusbar @status ,@class,0 --> 0 is links\n-----------------------------------\n/* hier verder als statusbar_all NULL is */\nIF OBJECT_ID('xtenant') IS NOT NULL\n\tBEGIN\n\t\tif (select isnull(xtenant.forceToTestmodus,0) from xtenant where id=7)=1\n\t\t\tbegin\n\t\t\t\tEXEC sp_api_statusbar N'*TESTMODUS*' ,'bg-warning col-sm-1 text-truncate',0 --> 0 is links --'bg-danger col-sm-1 text-truncate'\n\t\t\tend\n\t\telse\n\t\t\tbegin\t\n\n\t\t\t\tEXEC sp_api_modal_get N'statusbar_1',@status OUT\n\t\t\t\tIF @status IS NOT NULL EXEC sp_api_statusbar @status ,'col-sm-1 text-truncate',0 --> 0 is links --'bg-danger col-sm-1 text-truncate'\n\t\t\tend\n\tEND\nDECLARE @is_admin bit = dbo.hasRole('admin')\nIF object_id('@main_db.dbo.debug_trigger_xCompany') IS NOT NULL AND @is_admin = 1\n\tbegin\n\t\tEXEC sp_api_statusbar N'DEBUG ON' ,'bg-primary col-sm-1 text-truncate',0 --> 0 is links --'bg-danger col-sm-1 text-truncate'\n\tend\n\nDECLARE @forcedRole nvarchar(4000)\nEXEC sp_api_modal_get N'forcedRole',@forcedRole OUT \nIF @forcedRole IS NOT NULL EXEC sp_api_statusbar @forcedRole ,'bg-primary col-sm-1 text-truncate',0 --> 0 is links\n/*\n\t\tEXEC sp_api_modal_get N'statusbar_1',@status OUT\n\t\tIF @status IS NOT NULL EXEC sp_api_statusbar @status ,'col-sm-1 text-truncate',0 --> 0 is links --'bg-danger col-sm-1 text-truncate'\n*/\t\t\n----------------------------------------------\n \n\nEXEC sp_api_modal_get N'statusbar_2',@status OUT\nIF @status IS NOT NULL EXEC sp_api_statusbar @status ,'col-sm-1-2 text-truncate',1 --> 1 is rechts -- 'bg-warning col-sm-1-2 text-truncate'\nEXEC sp_api_modal_get N'statusbar_4',@status OUT\nEXEC sp_api_statusbar @status ,'col-sm-1-3 text-truncate',1 --> 1 is rechts -- vijv success kleur: 'bg-success col-sm-1-3 text-truncate'\n\nEXEC sp_api_statusbar @user_name,'col-sm-1 text-truncate',0 --> 0 is links -- bijv rood: 'bg-warning col-sm-1 text-truncate'\n\n\nEXEC sp_api_statusbar @card_name,'col-sm-1 text-truncate text-right',1 --> 1 is rechts\n\n/*\nDECLARE @filter_reducer_name nvarchar(128) = TRY_CAST(SESSION_CONTEXT(N'query_red') as nvarchar(128))\nIF @filter_reducer_name > ''\n\tBEGIN\n\t\tSET @filter_reducer_name = N'Filter: '+(SELECT * FROM get_lang(@filter_reducer_name,'menu'))\n\t\tEXEC sp_api_statusbar @filter_reducer_name,'col-sm-2 text-truncate bg-primary',1 --> 1 is rechts\n\tEND\n\nEXEC sp_api_statusbar '','col-sm-1-2 text-center' -- 'bg-danger col-sm-1-2 text-center'\nEXEC sp_api_statusbar '','col-sm-1-2 text-center',1 --> 1 is rechts -- 'bg-primary col-sm-1-2 text-center'\nEXEC sp_api_statusbar '','col-sm-1-2 text-center',1 --> 1 is rechts --'bg-danger col-sm-1-2 text-center'\n*/\n/* the end */",
                    "action_id": 71,
                    "action_name": "sys_run_always",
                    "source_table": "api_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_history_delete",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@id",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 64,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@id n"
                },
                {
                    "name": "@tablename",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@tablename n"
                },
                {
                    "name": "@basetable",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@basetable n"
                },
                {
                    "name": "@identity_column",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@identity_column n"
                },
                {
                    "name": "@ids",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@ids n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {
                "dbo.sp_sys_delete": 1
            },
            "real_usage_examples": [
                {
                    "sql_source": "/*\nIndien je anders wilt deleten (EXEC DeleteCTR bijvoorbeeld) dan moet je VLAK ERVOOR(!) per id dit aanroepen:\n\n\tEXEC sp_api_history_delete @id,@tablename,@basetable,@identity_column\n\nDan wordt het verwijderde record in api_history opgeslagen!\n\n*/\nEXEC sp_sys_delete @ids,@id,@tablename,@basetable,@identity_column",
                    "action_id": 55,
                    "action_name": "sys_delete",
                    "source_table": "api_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_html_table",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@tmptable",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "'#modaltable'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@tmptable n"
                },
                {
                    "name": "@orderby",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "''",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@orderby n"
                },
                {
                    "name": "@html",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@html n"
                },
                {
                    "name": "@style",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "'border: 1px solid #ccc'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@style n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": [
                {
                    "sql_source": "DECLARE @subject nvarchar(255) = N'Tracy '+@card_name + ' mail'\nDECLARE @body nvarchar(max),@html nvarchar(max),@list_select nvarchar(max),@list_select_cache nvarchar(max)\nSELECT @list_select_cache = list_select_cache FROM api_card WHERE id = @card_id\nSET @list_select=N'\n\tSELECT * INTO #tmptable FROM ('+@list_select_cache+') tbl\n\tEXEC sp_api_html_table N''#tmptable'',N''ORDER BY 2'',@html OUT'\nEXEC sp_executesql @list_select,N'@html nvarchar(max) OUT',@html OUT\n/*\nEXEC sp_api_toast @html\n\nRETURN\nEXEC sp_api_html_table N'api_card',N'ORDER BY name',@html OUT\n*/\n--EXEC sp_api_email @user,@subject,N'<h3>See attached</h3>',@query = @list_select_cache\n\nSET @body = N'<h3>Export</h3>'+@html\nEXEC sp_api_email @user,@subject,@body\nEXEC sp_api_toast N'Sent mail to:'\nEXEC sp_api_toast @user",
                    "action_id": 58,
                    "action_name": "sys_email_to_me",
                    "source_table": "api_actions"
                },
                {
                    "sql_source": "----------------------------------------------------------------------------\n--\tfunction: \t\tir_transit\n--\tdescription:\ttoon het actuele douanesaldo en zorg dat dit geprint kan worden\n--\tpre declare:\t@Mailbutton\n----------------------------------------------------------------------------\nexec sp_api_modal_text N'Actueel douanesaldo'\nselect *  INTO #IR_TransitoVoorraad from @main_db.dbo.DouaneSaldo_ctr1(0,0) \nEXEC sp_api_modal_table @tmptable=N'#IR_TransitoVoorraad' ,@print=1\n\n--mailen??\nEXEC sp_api_modal_button @name='@mailbutton',@value = 'Mail', @valueout = @Mailbutton OUT,@class='btn-warning',@key='M'\nif @Mailbutton='Mail'\nbegin\n\n\tDECLARE @subject nvarchar(255) = N'Tracy actual Transito stock'\n\tDECLARE @body nvarchar(max),@html nvarchar(max),@list_select nvarchar(max),@list_select_cache nvarchar(max)\n\tSELECT @list_select_cache = list_select_cache FROM api_card WHERE id = @card_id\n\tSET @list_select=N'\n\t\tSELECT * INTO #tmptable FROM @main_db.dbo.DouaneSaldo_ctr1(0,0) tbl\n\t\tEXEC sp_api_html_table N''#tmptable'',N''ORDER BY 2'',@html OUT'\n\tEXEC sp_executesql @list_select,N'@html nvarchar(max) OUT',@html OUT\n\n\n\t--wrap er een table omheen: / *\n\tSET @html = N'<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">\n\t<html xmlns=\"http://www.w3.org/1999/xhtml\">\n\t <head>\n\t  <meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\" />\n\t  <title>Demystifying Email Design</title>\n\t  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"/>\n\t</head><body style=\"margin: 0; padding: 0;\">\n\t <table border=\"3\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\">\n\t  <tr>\n\t   <td><h3>Export</h3>'+ @html +N'</td>\n\t  </tr>\n\t </table>\n\t</body></html>'\n\t--* /\n\n\tEXEC sp_api_email @user,@subject,@body = N'Geen html support',@html = @html -- html in @HTML !\n\tEXEC sp_api_toast N'Sent mail to:'\n\tEXEC sp_api_toast @user\n\texec sp_api_modal_clear-- afkappen na mailen..\n\nend",
                    "action_id": 274,
                    "action_name": "IR_Transit",
                    "source_table": "api_actions"
                },
                {
                    "sql_source": "-------------------------------------------------------------------------------------------\n--\tfunction: \t\tIR_Douaneplot\n--\tdescription:\tmail de gemiddelde waarde van de gefactureerde vrij verkochte goederen\n--\tpre declare:\t@Mailbutton\n--\tLET OP: ALLEEN GEFACTUREERDE OMZET\n-------------------------------------------------------------------------------------------\n--EXEC sp_api_modal_modal N'bg-white'\nexec sp_api_modal_text N'Anaco & Greeve International BV', @class='h2', @Print=1\nexec sp_api_modal_text N'Douane overzicht vrije goederen (waarde in Euro)', @class='h2' , @Print=1\n\nSET @from = DATEADD(day, -1, dbo.workDate())\nSET @to=@from\nEXEC sp_api_modal_date_from_to @from=@from out, @to=@to out,@class='w-24'\nSET @datumrange = concat(N'Douaneoverzicht vrije goederen van ',@from, ' t/m ', @to)\nEXEC sp_api_modal_button @name='button',@value = 'Douanewaarde',@valueout = @button OUT,@class = 'btn-primary',@key = 'Enter'\n\nIF @button =  'Douanewaarde'\n\tBEGIN\n\n\n--\t\tdeclare @T1 nvarchar(128)=concat(N'Factuurdatum ',(select @main_db.dbo.datumstring(getdate()-30,0)))\n\t\texec sp_api_modal_text @datumrange, @Print=1, @class='h2'\n\t\tselect Douane_Groep,\tOorsprong,\tNetto_Gewicht,\tAantal,\tTotaal_Gewicht,\tGem_Prijs_EUR,\teasy as Artikelomschrijving\n\t\t\tINTO #IR_Douaneplot\n\t\t from @main_db.dbo.IR_Douaneplot\n\t\t\t--select * from Netto_Salesprice_Per_StockID_and_InvoiceDate_customs\n\t\t\twhere dateinvoice between @from and @to\n\t\t\t--=(select @main_db.dbo.cleandate(getdate()-30)) --'2021-11-24'\n\n\t\tEXEC sp_api_modal_table @tmptable=N'#IR_Douaneplot' ,@print=1\n\n\t\t--mailen??\n\t\tEXEC sp_api_modal_button @name='@mailbutton',@value = 'Mail', @valueout = @Mailbutton OUT,@class='btn-warning',@key='M'\n\t\tif @Mailbutton='Mail'\n\t\tbegin\n\n\t\t\tDECLARE @subject nvarchar(255) = @datumrange\n\t\t\tDECLARE @body nvarchar(max),@html nvarchar(max),@list_select nvarchar(max),@list_select_cache nvarchar(max)\n\t\t\tSELECT @list_select_cache = list_select_cache FROM api_card WHERE id = @card_id\n\t\t\tSET @list_select=concat(N'\n\t\t\t\t\t\tSELECT * INTO #tmptable FROM @main_db.dbo.IR_Douaneplot '--where dateinvoice=(select @main_db.dbo.cleandate(getdate()-30))\n\t\t\t\t\t\t,N' where dateinvoice between ''',@from,N''' AND ''',@to, N''' '\n\t\t\t\t\t\t,'\n\t\t\t\t\t\tEXEC sp_api_html_table N''#tmptable'',N''ORDER BY 2'',@html OUT'\n\t\t\t\t\t)\n\t\t\tEXEC sp_executesql @list_select,N'@html nvarchar(max) OUT',@html OUT\n\n\n\t\t\t--wrap er een table omheen: / *\n\t\t\tSET @html = N'<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">\n\t\t\t<html xmlns=\"http://www.w3.org/1999/xhtml\">\n\t\t\t <head>\n\t\t\t  <meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\" />\n\t\t\t  <title>Demystifying Email Design</title>\n\t\t\t  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"/>\n\t\t\t</head><body style=\"margin: 0; padding: 0;\">\n\t\t\t <table border=\"3\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\">\n\t\t\t  <tr>\n\t\t\t   <td><h3>Export</h3>'+ @html +N'</td>\n\t\t\t  </tr>\n\t\t\t </table>\n\t\t\t</body></html>'\n\t\t\t--* /\n\n\t\t\tEXEC sp_api_email @user,@subject,@body = N'Geen html support',@html = @html -- html in @HTML !\n\t\t\tEXEC sp_api_toast N'Sent mail to:'\n\t\t\tEXEC sp_api_toast @user\n\t\t\texec sp_api_modal_clear-- afkappen na mailen..\n\n\t\tend\n\tEND",
                    "action_id": 333,
                    "action_name": "Douanewaarde (gefactureerd)",
                    "source_table": "api_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_image_resize",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@images",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@images n"
                }
            ],
            "embedded_example": "DECLARE @images  nvarchar(max) = (\r\n\tSELECT\r\n\t\tid = 23\r\n\t\t,path = 'D:\\Data\\filestore\\DB\\DB3CC6A12AE44C0A90C54AEC9EBFCA2E413E5708AE9031BA090FB92382CF2BAC-bin.jpg'\r\n\t\t-- https://sharp.pixelplumbing.com/api-resize/\r\n\t\t,resize = JSON_QUERY((\r\n\t\t\tSELECT\r\n\t\t\t\twidth=400\r\n\t\t\t\t,height=400\r\n\t\t\t\t,quality = 25\r\n\t\t\tFOR JSON PATH,WITHOUT_ARRAY_WRAPPER\r\n\t\t))\r\n\tFOR JSON PATH\r\n)\r\nPRINT @images\r\nEXEC sp_api_image_resize @images",
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_import",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@json",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@json n"
                },
                {
                    "name": "@insert_only",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@insert_only b"
                },
                {
                    "name": "@repopulate_all_cards",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@repopulate_all_cards b"
                },
                {
                    "name": "@card_name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@card_name n"
                },
                {
                    "name": "@cards_only",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@cards_only b"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_import_cards",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@card_name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@card_name n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_import_csv_to_table",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@filename",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@filename n"
                },
                {
                    "name": "@tablename",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 512,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@tablename n"
                },
                {
                    "name": "@FIELDTERMINATOR",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@FIELDTERMINATOR n"
                },
                {
                    "name": "@ROWTERMINATOR",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "'0x0a'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@ROWTERMINATOR n"
                },
                {
                    "name": "@FIRSTROW",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "2",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@FIRSTROW i"
                },
                {
                    "name": "@FIELDQUOTE",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "'\"'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@FIELDQUOTE n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_import_from_master",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@card_name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@card_name n"
                },
                {
                    "name": "@json",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@json n"
                },
                {
                    "name": "@system_card",
                    "type_from_sys": "smallint",
                    "type_from_def": "s",
                    "max_length_bytes": 2,
                    "precision": 5,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@system_card s"
                },
                {
                    "name": "@store_json",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "1",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@store_json b"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {
                "dbo.sp_api_modal_select": 1,
                "dbo.sp_api_modal_button": 1
            },
            "real_usage_examples": [
                {
                    "sql_source": "EXEC sp_api_modal_select @name='@selected_card_id',@card_name='apicard', @value = @selected_card_id OUT\nSET @button_text = N'Import everything'\nIF @selected_card_id IS NOT NULL SET @selected_card_name = (SELECT name FROM api_card WHERE id = @selected_card_id)\nIF @selected_card_name IS NOT NULL SET @button_text = N'Import ' + @selected_card_name\nEXEC sp_api_modal_button @name='@button',@value = @button_text, @valueout = @button OUT,@class='btn-danger',@key='F1'\nIF @button IS NOT NULL\n\tBEGIN\n\t\tEXEC sp_api_import_from_master @card_name = @selected_card_name\n\t\tEXEC sp_api_modal_clear\n\tEND\n",
                    "action_id": 1065,
                    "action_name": "sys_import_config",
                    "source_table": "api_card_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_import_insert",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@trigger_id",
                    "type_from_sys": "int",
                    "type_from_def": "I",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@trigger_id I"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_import_system_card",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@card_name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@card_name n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_import_update",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@trigger_id",
                    "type_from_sys": "int",
                    "type_from_def": "I",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@trigger_id I"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_insert_into",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@tablename",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@tablename n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_ip_info",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@ip_address",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@ip_address n"
                },
                {
                    "name": "@ip_address_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@ip_address_id i"
                },
                {
                    "name": "@json",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@json n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_json_pivot",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@sql",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@sql n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_json_to_table",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@json",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@json n"
                },
                {
                    "name": "@tablename",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@tablename n"
                },
                {
                    "name": "@path",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "'$'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@path n"
                }
            ],
            "embedded_example": "DECLARE @json nvarchar(max) = N'[{\"a\":1,\"b\":2},{\"c\":3},{\"d\":true},{\"d\":\"true\"},{\"e\":false},{\"f\":[1,3,56,2]}]';\r\nCREATE TABLE #tabs (id32 int,x int)\r\nEXEC sp_api_json_to_table @json,N'#tabs'\r\nSELECT * FROM #tabs\r\nSELECT name,system_type_name FROM sys.dm_exec_describe_first_result_set(N'SELECT * FROM #tabs',NULL,1)\r\nDROP TABLE #tabs",
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_keypress",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@keycode",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@keycode n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": [
                {
                    "sql_source": "-- {[ctr2].Amount} \r\nDECLARE @count_iv2 INT = (SELECT sum(linkaantal) FROM xIvlink WHERE ITD = @id)\r\nIF @count_iv2 <>{[ctr_coco_verkoop].Amount}*iif({[ctr_coco_verkoop].stockmut}=0,0,1)--= 0\r\nBEGIN\r\nEXECUTE sp_api_toast 'Nu volgens mij moet er iets gebeuren'\r\nEND \r\nELSE\r\nBEGIN \r\nEXECUTE sp_api_toast 'anders nu'\r\nEND \r\n/*\tSET @path = @path+'/'+@id+'/ctr1_toewijsbaar'\r\nELSE\r\n\tSET @path = @path+'/'+@id+'/iv2'\r\n\r\nEXEC sp_api_goto @path\r\n*/\r\n/*\r\n\r\n\r\n\r\nIF @count_iv2 = 0\r\n\tEXEC sp_api_keypress N'F4'\r\nELSE\r\n\tEXEC sp_api_keypress N'Alt+T'\r\n*/",
                    "action_id": 101,
                    "action_name": "Toewijzen",
                    "source_table": "api_card_actions"
                },
                {
                    "sql_source": "-- {[ctr2].Amount} \n\n--EXEC sp_api_modal_set N'bewaar_kruimel_path',N'/inkoop' --@path\n--EXEC sp_api_modal_set N'bewaar_kruimel_search',N'?id=123' --@path\nif {[ctr2].Amount} is not null --we zitten op ctr2\n\tbegin\n\n\t\tDECLARE @count_iv2 INT = (SELECT sum(linkaantal) FROM xIvlink WHERE ITD = @id or vtd = @id)-- RH210116 OR vtd.. er bij (er was een overmatige toewijzing)\n\t\tDECLARE @DIFF INT \n\t\tset @DIFF=\t( select isnull({[ctr2].Amount}*iif({[ctr2].stockmut}=0,0,1),0) - @count_iv2)\n\t\tEXEC SP_API_TOAST @diff\n\t\tIF ISNULL(@count_iv2,0)=0 or @DIFF > 0 --@count_iv2 <>isnull({[ctr2].Amount}*iif({[ctr2].stockmut}=0,0,1),0)--= 0\n\t\t\tBEGIN\n\t\t\t\tIF NOT EXISTS (select * from @main_db.dbo.ctr1_Assignable(NULL,@id))\n\t\t\t\t\tBEGIN\n\t\t\t\t\t\tEXEC sp_api_modal_alert N'Geen partij met voorraad beschikbaar!'\n\t\t\t\t\t\tEXEC sp_api_modal_clear\n\t\t\t\t\t\tRETURN\n\t\t\t\t\tEND\n\t\t\t\tSET @path = @path+'/'+@id+'/ctr1_toewijsbaar'\n\t\t\tEND\n\t\tELSE\n\t\t\tBEGIN\n\t\t\t\tIF @DIFF < 0 -- meer toegewezen dan de ctr groot is\n\t\t\t\t\tBEGIN\n\t\t\t\t\t\tEXEC sp_api_modal_alert N'Er is te veel toegewezen!, verlaag de toewijzing of verwijder een toewijzing!'\t\n\t\t\t\t\tEND\t\n\t\t\t\tSET @path = @path+'/'+@id+'/iv2'\n\t\t\tEND\n\t\n\t\tEXEC sp_api_goto @path\n\tend\n\nelse\n EXEC SP_API_TOAST @card_name\n\n/*\n\n\n\nIF @count_iv2 = 0\n\tEXEC sp_api_keypress N'F4'\nELSE\n\tEXEC sp_api_keypress N'Alt+T'\n*/\n\n/* WAS: \n-- {[ctr2].Amount} \n\n--EXEC sp_api_modal_set N'bewaar_kruimel_path',N'/inkoop' --@path\n--EXEC sp_api_modal_set N'bewaar_kruimel_search',N'?id=123' --@path\nif {[ctr2].Amount} is not null --we zitten op ctr2\n\tbegin\n\n\t\tDECLARE @count_iv2 INT = (SELECT sum(linkaantal) FROM xIvlink WHERE ITD = @id)\n\t\t--EXEC SP_API_TOAST @count_iv2\n\t\tIF ISNULL(@count_iv2,0)=0 or @count_iv2 <>isnull({[ctr2].Amount}*iif({[ctr2].stockmut}=0,0,1),0)--= 0\n\t\t\tBEGIN\n\t\t\t\tIF NOT EXISTS (select * from @main_db.dbo.ctr1_Assignable(NULL,@id))\n\t\t\t\t\tBEGIN\n\t\t\t\t\t\tEXEC sp_api_modal_alert N'Geen partij met voorraad beschikbaar!'\n\t\t\t\t\t\tEXEC sp_api_modal_clear\n\t\t\t\t\t\tRETURN\n\t\t\t\t\tEND\n\t\t\t\tSET @path = @path+'/'+@id+'/ctr1_toewijsbaar'\n\t\t\tEND\n\t\tELSE\n\t\t\tSET @path = @path+'/'+@id+'/iv2'\n\t\t\n\t\tEXEC sp_api_goto @path\n\tend\n\nelse\n EXEC SP_API_TOAST @card_name\n\n*/",
                    "action_id": 102,
                    "action_name": "Toewijzen/Toewijzing",
                    "source_table": "api_card_actions"
                },
                {
                    "sql_source": "-- {[ctr2].Amount} \nDECLARE @count_iv2 INT = (SELECT sum(linkaantal) FROM xIvlink WHERE ITD = @id)\nIF @count_iv2 <>{[ctr2].Amount}*iif({[ctr2].stockmut}=0,0,1)--= 0\n\tSET @path = @path+'/'+@id+'/ctr1_toewijsbaar'\nELSE\n\tSET @path = @path+'/'+@id+'/iv2'\n\nEXEC sp_api_goto @path\n/*\n\n\n\nIF @count_iv2 = 0\n\tEXEC sp_api_keypress N'F4'\nELSE\n\tEXEC sp_api_keypress N'Alt+T'\n*/",
                    "action_id": 103,
                    "action_name": "Toewijzing",
                    "source_table": "api_card_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_menu",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_mo0dal_file_multi_old",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@name n"
                },
                {
                    "name": "@to_file_context",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@to_file_context n"
                },
                {
                    "name": "@to_file_context_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@to_file_context_id i"
                },
                {
                    "name": "@description",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "null",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@description n"
                },
                {
                    "name": "@api_files_id",
                    "type_from_sys": "int",
                    "type_from_def": "I",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "null OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@api_files_id I"
                },
                {
                    "name": "@url",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "null OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@url n"
                },
                {
                    "name": "@use_placeholder",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 7,
                    "full_declaration_from_def": "@use_placeholder n"
                },
                {
                    "name": "@category",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 8,
                    "full_declaration_from_def": "@category n"
                },
                {
                    "name": "@resize_max",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "2048",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 9,
                    "full_declaration_from_def": "@resize_max i"
                },
                {
                    "name": "@resize_quality",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "75",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 10,
                    "full_declaration_from_def": "@resize_quality i"
                },
                {
                    "name": "@filename",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 11,
                    "full_declaration_from_def": "@filename n"
                },
                {
                    "name": "@filesize_limit",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 12,
                    "full_declaration_from_def": "@filesize_limit i"
                },
                {
                    "name": "@api_files_ids",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 13,
                    "full_declaration_from_def": "@api_files_ids n"
                },
                {
                    "name": "@files_ready_for_use",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "0 OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 14,
                    "full_declaration_from_def": "@files_ready_for_use b"
                },
                {
                    "name": "@message",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 15,
                    "full_declaration_from_def": "@message n"
                },
                {
                    "name": "@upload_finished",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "0 OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 16,
                    "full_declaration_from_def": "@upload_finished b"
                }
            ],
            "embedded_example": "EXEC sp_api_modal_file_multi @to_file_context = @card_name, @to_file_context_id = @id, @category = 'image',@files_ready_for_use = @files_ready_for_use OUT\r\n\t--,@description = 'Some description'\r\n\t--,@api_files_id = @api_files_id OUT\r\n\t--,@url = @url OUT",
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_modal_action",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 510,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@name n"
                },
                {
                    "name": "@action",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@action n"
                },
                {
                    "name": "@params",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@params n"
                },
                {
                    "name": "@keycode",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@keycode n"
                },
                {
                    "name": "@class",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@class n"
                },
                {
                    "name": "@text",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@text n"
                },
                {
                    "name": "@use_placeholder",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 7,
                    "full_declaration_from_def": "@use_placeholder n"
                },
                {
                    "name": "@hidden",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 8,
                    "full_declaration_from_def": "@hidden b"
                },
                {
                    "name": "@language_context",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "'menu'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 9,
                    "full_declaration_from_def": "@language_context n"
                },
                {
                    "name": "@display_name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 10,
                    "full_declaration_from_def": "@display_name n"
                }
            ],
            "embedded_example": "EXEC sp_api_modal_action @name = N'action_name' --\r\n\t--,@action = N'real_action_name'\r\n\t--,@params = N'{\"custom_client\":\"params\"}'\r\n\t--,@keycode = N'F3'\r\n\t--,@class = N'btn-danger'\r\n\t--,@text = N'Go to [action] to handle it'\r\n\t--,@hidden = 0 -- 1 = do not show button, key-only",
            "embedded_description": null,
            "co_occurrence_stats": {
                "dbo.sp_api_modal_menu_user": 1,
                "dbo.sp_api_toast": 1,
                "dbo.sp_api_modal_html": 1,
                "dbo.sp_api_modal_route": 1,
                "dbo.sp_api_modal_text": 1,
                "dbo.sp_api_modal_button": 2,
                "dbo.sp_api_modal_modal": 1,
                "dbo.sp_sys_admin_main_menu": 1,
                "dbo.hasRole": 1,
                "dbo.sp_api_modal_get_value": 1,
                "dbo.sp_api_modal_clear": 1,
                "dbo.sp_api_modal_audio": 1
            },
            "real_usage_examples": [
                {
                    "sql_source": "EXEC sp_api_modal_date_from_to @from = @from OUT, @to = @to OUT\nEXEC sp_api_modal_action N'sp_api_modal_select_table2'",
                    "action_id": 1073,
                    "action_name": "date from to",
                    "source_table": "api_card_actions"
                },
                {
                    "sql_source": "DECLARE @text nvarchar(max)\n,@hclass nvarchar(128) = 'h5 text-muted mt-3'\n,@bclass nvarchar(128) = 'btn-primary'\n\nEXEC sp_api_modal_modal @class = 'pt-5'\nIF dbo.hasRole('admin') > 0 BEGIN\n\tSET @text = N'You''re at ' + @hostname + ' [@main_db]'\n\tEXEC sp_api_toast @text=@text,@seconds=3\nEND\n\nDECLARE @colorblind BIT = 0\nIF dbo.hasClaims('sub=email@anacogreeve.nl') > 0\nBEGIN\nSET @colorblind = 1\nEND\n\nDECLARE @extendedMenu BIT = 0\nIF dbo.hasClaims('sub=email@anacogreeve.nl') > 0\nBEGIN\nSET @extendedMenu = 1\nEND\n\nDECLARE @loods BIT = 0\nIF dbo.hasRole('loodsbaas,loodsmedewerker,ompakker,keurmeester') > 0\nBEGIN\nSET @loods = 1\nEND\n\n--ALS EERSTE!\n--EXEC sp_api_modal_action N'Scanner Test',@class='btn-danger'\nEXEC sp_api_modal_action N'Scanner',@class='btn-danger'\nEXEC sp_api_modal_action N'Mobilephone',@class='btn-danger'\nEXEC sp_api_modal_action N'detepo',@class='btn-danger'\nEXEC sp_api_modal_action N'micro_check_scan',@class='btn-danger' --rh 230825\nEXEC sp_api_modal_action N'test_rick_2',@class='btn-danger' --rh 230825\nEXEC sp_api_modal_action N'NEOVO_PALLET_SCAN',@class='btn-danger'\nEXEC sp_api_modal_action N'Barcode Scanner',@class='btn-tracy'\nEXEC sp_api_modal_action N'check_serial_number' --rh231218\nEXEC sp_api_modal_action N'check_pallets' --241129\nEXEC sp_api_modal_action N'check_pallets_in_stock' --241129\nEXEC sp_api_modal_action N'check_data' --rh240719\nEXEC sp_api_modal_action @name='RWS-podcast'\nEXEC sp_api_modal_action @name='rick_delete'\n\n\n--START\n\nIF @button = 'Quick menu'\n\tBEGIN\n\t\tEXEC #sys_quick_menu @path\n\t\tRETURN\n\tEND\n\nEXEC sp_api_modal_text 'Hoofdmenu','h1'\n\nif  dbo.hasClaims(N'tenant=AGNEOVO') >0 or dbo.hasRole('admin,directie') > 0\n\tbegin \n\t\t--EXEC sp_api_modal_action @name='pallet_status_agneovo',@class = 'btn-white border-dark text-dark' --test 230808\n\t\tEXEC sp_api_modal_route @cardname='pallet_status_agneovo'\t\n\tend\n\nEXEC sp_api_modal_route @cardname='wms_micro_outbound'\n\nIF dbo.hasClaims('sub=mterlouw@rwsbv.com') > 0 or dbo.hasClaims('sub=kterlouw@rwsbv.com') > 0 --250415\n\tor dbo.hasClaims('sub=rick@tracy.nu') > 0 OR dbo.hasRole('admin,directie,barsan,barsan_bo') > 0\nBEGIN\n\tEXEC sp_api_modal_route @cardname='douanevoorraadmutatie'\nEND\t\n\nIF dbo.hasRole('admin,directie,loodsmedewerker') > 0\nBEGIN\n\tEXEC sp_api_modal_route @cardname='vehicle_export_staging',@search= '?red=open'\nEND\t\n\n BEGIN\n\t-----------------\n\t-- ADMIN QUICK LIJST\n\t-----------------\n\n\t\tIF dbo.hasRole('admin') > 0\n\t\tBEGIN\n--\t\tEXEC sp_api_modal_text 'Admin Knopjes',@hclass\n--\t\tSET @bclass = 'btn btn-linkt border-danger text-dark'\n\t\t/*\n\t\tEXEC sp_api_modal_route @name='Product (Hoofdgroup)',@pathname='/xproduct',@search= '?red=',@class=@bclass,@key='P',@group = 'Voorraadbeheer'\n\t\tEXEC sp_api_modal_route @name='Intrastat Fout of Geen',@pathname='/xproduct',@search= '?red=Intrastat_ID+Empty+OR+Wrong',@class=@bclass,@key='I',@group = 'Voorraadbeheer'\n\t\tEXEC sp_api_modal_route @name='Geen Customs Group',@pathname='/xproduct',@search= '?red=Geen+Douane+Groep',@class=@bclass,@key='D',@group = 'Voorraadbeheer'\n\t\tEXEC sp_api_modal_route @name='Onvolledig Customs Art',@pathname='/xproduct',@search= '?red=Niet+(Volledig)+in+Customs+Art',@class=@bclass,@key='L',@group = 'Voorraadbeheer'\n\t\t*/\n\t\t\n\t\tEXEC sp_api_modal_route @name='To Do',@pathname='/api_todo',@search= '?red=Niet+klaar',@class='btn btn-linkt border-danger text-dark',@key='T'\n\t\tEXEC sp_api_modal_route @name='API DATASET',@pathname='/api_data_set'\n\t\tEND\n\t\n\t--------------\n\t-- Warehouse\n\t--------------\n--\tEXEC sp_api_modal_text 'Warehouse',@hclass\n\n\tIF @colorblind = 1\n\t\tBEGIN\n\t\t\tSET @bclass = 'btn-primary'\n\t\tEND\n\tELSE\n\t\tBEGIN\n\t\t\tSET @bclass = 'btn-secondary'\n\t\tEND\nIF dbo.hasRole('user,admin,directie') > 0\n\tbegin\n\n\t\n\t\tEXEC sp_api_modal_route @name='Vessel',@pathname='/w_vessel',@class=@bclass,@key='V'--, @Search='?red=Open+en+Nieuw',@group = 'main'\n\t\tEXEC sp_api_modal_route @name='Bill of Lading',@pathname='/w_bl',@class=@bclass,@key='Alt+B'--, @Search='?red=recent'--,@group = 'main'\n\t\tEXEC sp_api_modal_route @name='Forecast',@pathname='/forecast',@class=@bclass,@key='F'--, @Search='?red=Open+en+Nieuw',@group = 'main'\n\t\t\n\n\t--\tEXEC sp_api_modal_route @name='Inbound',@pathname='/inbound',@class=@bclass,@key='I'--, @Search='?red=Open+en+Nieuw',@group = 'main'\n\t--\tEXEC sp_api_modal_route @name='Outbound Transport',@pathname='/wms_out_transport',@class=@bclass,@key='O'--, @Search='?red=Open+en+Nieuw',@group = 'main'\n--\t\tEXEC sp_api_modal_action @name='report_menu',@class = 'btn-white border-dark text-dark'\n\t\t\n\n\t\t\n\tend\n--@name='Inbound Transport.',\n--\t\tEXEC sp_api_modal_route @name='Inbound Transport',@pathname='/wms_in_transport',@class=@bclass,@key='T'--, @Search='?red=Open+en+Nieuw',@group = 'main'\n\t\tEXEC sp_api_modal_route @name='Inbound Transport',@cardname='wms_in_transport',@class=@bclass,@key='T'--, @Search='?red=Open+en+Nieuw',@group = 'main'\n\n--IF dbo.hasRole('viewer') > 0\n\t--begin\n\n  \n\n\t--220319 NIEUW: DE CARD BEPAALT ZELF AAN DE HAND VAN DE ROLLEN OF HIJ GERENDERD WORDT..\nIF dbo.hasRole('loodsmedewerker') = 0 --specifiek ** UITSLUITEN ** bij menu voor loodsmedewerker\n\tbegin\n\t\tEXEC sp_api_modal_route @name='Inbound',@cardname='inbound',@class=@bclass,@key='I'\n\t\tEXEC sp_api_modal_route @name='Outbound Transport',@cardname='wms_out_transport',@class=@bclass,@key='O',@group = 'outbound'\n\t\tEXEC sp_api_modal_route @name='Micro outbound form',@cardname='wms_micro_outbound',@class=@bclass,@key='O'\t,@group=N'micro_outbound'\t\n\t\t\n\tend\n--230306 specifiek uitsluiten voor ensign\nif  dbo.hasClaims(N'tenant=VIAROT') =0 \t--iedereen behalve viaensign\t\n\tEXEC sp_api_modal_route @name='Outbound orders',@cardname='outbound_form',@class=@bclass,@key='O',@group = 'outbound'\n\n\t\tIF dbo.hasRole('admin,directie') > 0 -- micro werk!\n\t\t\tbegin\n\t\t\t\tEXEC sp_api_modal_route @name='Micro outbound form',@cardname='wms_micro_outbound',@class=@bclass,@key='O'\t,@group=N'micro_outbound'\t\n\t\t\t\tEXEC sp_api_modal_route @name='Replenishment',@cardname='w_pallet_replenishment',@class=@bclass,@key='R'\t,@group=N'micro_outbound'\t\t\n--\t\t\t\tEXEC sp_api_modal_route @name='Micro item stock info',@cardname='wms_micro_item_stock_info',@class=@bclass,@key='R'\t,@group=N'micro_outbound',@search= '?red=selecteerbare_pallets'\n\t\t\t\tEXEC sp_api_modal_route @name='micro_totals',@cardname='micro_totals',@class=@bclass,@key='T'\t,@group=N'micro_outbound'\n\n\t\t\t\t--231024\n\t\t\t\tEXEC sp_api_modal_route @cardname='micro_items_stock_per_position_agneovo'\n\t\t\tend\t\n\t\tEXEC sp_api_modal_route @name='Stock by Client',@cardname='wms_rv_pal_stock',@class=@bclass,@key='C'\n\n--230306 specifiek uitsluiten voor ensign\nif  dbo.hasClaims(N'tenant=VIAROT') =0 \n\t--alleen viarot uitsluiten, dus als je de claim niet hebt mag je dit item zien\n\tEXEC sp_api_modal_route @name='Stock by BL',@cardname='wms_rv_pal_stock_bl',@class=@bclass,@key='B'\n\n\t\tEXEC sp_api_modal_route @name='Stock by Container',@cardname='wms_rv_pal_stock_cnt',@class=@bclass,@key='N'\n\t\t--micro stock info\n--\t\tEXEC sp_api_modal_route @name='Stock per micro item',@cardname='micro_totals',@class=@bclass,@key='T'\t\n--per lotnumber\nIF dbo.hasRole('loodsmedewerker') = 0\n\tbegin --specifiek uitsluiten bij menu voor loodsmedewerker\n\t\tEXEC sp_api_modal_route @name='Stock per micro item',@cardname='micro_totals_lotnr_w_lot',@class=@bclass,@key='T'\t\n\tend\t\n\n\t\t--230114\n\t\tEXEC sp_api_modal_route @cardname='wms_io'\t\n\t\t--230710 uitgezet, driver-screen wordt via link direct gestart EXEC sp_api_modal_route @cardname='driver_screen'\t\n\t\tEXEC sp_api_modal_route @cardname='inbound_form_barsan'\t\n\t\t\n--\tend\n\t\t\n\t--------------\n\t-- Rapportage\n\t--------------\n\tEXEC sp_api_modal_action @name='report_menu',@class = 'btn-success'--'btn-white border-dark text-dark'\n\n\tIF dbo.hasRole('user,admin,directie') > 0\n\t\tBEGIN\n\t\t\t--EXEC sp_api_modal_text 'Rapportage (Maand Afsluiten)',@hclass\n\t\t\t--EXEC sp_api_modal_route @name='Aangifte',@pathname='/aangifte',@search= '',@class = 'btn-white border-dark text-dark',@key='A'\n\t\t\tEXEC sp_api_modal_route @name='Crossdock',@pathname='/w_crossdock',@class=@bclass,@key='C'\n\t\t\t\n\t\tEND\n\n\n/*\n\t-----------------\n\t-- VOORRAAD LIJST\n\t-----------------\n--\tEXEC sp_api_modal_text 'Artikelbestand (Voorraad)',@hclass\n--\tSET @bclass = 'btn-secondary'\n\t--EXEC sp_api_modal_route @name='xstock',@pathname='/xstock',@search= '',@class=@bclass,@key='X'\n\n\tIF @colorblind = 1\n\t\tBEGIN\n\t\t\tEXEC sp_api_modal_route @name='Totaal Voorraad per lokatie',@pathname='/stocklocation',@search= '',@class='btn-primary',@key='T',@group = 'Voorraad'\n\t\t\tEXEC sp_api_modal_route @name='Voorraad per lokatie',@pathname='/voorraadlokatie',@search= '',@class='btn-primary',@key='X',@group = 'Voorraad'\n\t\t\tEXEC sp_api_modal_route @name='Voorraad [Artikelen]',@pathname='/xstock',@search= '?red=',@class='btn-primary',@key='S',@group = 'Voorraad'\n\t\t\t\n\t\tEND\n\tELSE\n\t\tBEGIN\n\t\tEXEC sp_api_modal_route @name='Totaal Voorraad per lokatie',@pathname='/stocklocation',@search= '',@class=@bclass,@key='T',@group = 'Voorraad'\n\t\t\tEXEC sp_api_modal_route @name='Voorraad per lokatie',@pathname='/voorraadlokatie',@search= '',@class=@bclass,@key='X',@group = 'Voorraad'\n\t\t\tEXEC sp_api_modal_route @name='Voorraad [Artikelen]',@pathname='/xstock',@search= '?red=',@class=@bclass,@key='S',@group = 'Voorraad'\n\t\t\t\n\t\tEND\n*/\n\n\t------------\n\t-- Transactions\n\t------------\n--\tEXEC sp_api_modal_text 'Transacties',@hclass\n/*\n\tBEGIN\n\n\tEXEC sp_api_modal_route @name='Verkoop [Pakbon Niet Geprint]',@pathname='/verkoop',@search= '?red=Pickbon+NOG+NIET+GEPRINT' ,@class='btn-primary',@key='V',@group = 'verkoop'\n\n\tEXEC sp_api_modal_route @name='Filter [Pickbon Geprint]',@pathname='/verkoop',@search= '?red=Pickbon+Geprint' ,@class='btn-primary',@key='P',@group = 'verkoop'\n\tEXEC sp_api_modal_route @name='Verkoop [Alles]',@pathname='/verkoop',@search= '?red=' ,@class='btn-primary',@key='A',@group = 'verkoop'\n\tEXEC sp_api_modal_route @name='Filter [Commission]',@pathname='/verkoop',@search= '?red=Commission+%5BopenPrice%5D' ,@class='btn-primary',@key='C',@group = 'verkoop'\n\n\t--EXEC sp_api_modal_route @name='Verkoop [Vandaag]',@pathname='/verkoop',@search= '?red=Werkdatum+openSale' ,@class='btn-primary',@key='Ctrl+V',@group = 'verkoop'\n\n\tEXEC sp_api_modal_route @name='Filter [Pickbon Veranderd]',@pathname='/verkoop',@search= '?red=Pickbon+VERANDERD' ,@class='btn-primary',@key='W',@group = 'verkoop'\n\tEXEC sp_api_modal_route @name='Filter [Klaar voor Factuur]',@pathname='/verkoop',@search= '?red=Fase+Klaar+voor+Factuur' ,@class='btn-primary',@key='K',@group = 'verkoop'\n\tEXEC sp_api_modal_route @name='Filter [Gefactureerd]',@pathname='/verkoop',@search= '?red=Orders%3A+gefactureerd' ,@class='btn-primary',@key='F',@group = 'verkoop'\n\tEXEC sp_api_modal_route @name='Filter [Nog Toewijzen]',@pathname='/verkoop',@search= '?red=Toewijzen' ,@class='btn-primary',@key='T',@group = 'verkoop'\n\tEXEC sp_api_modal_route @name='Inkoop',@pathname='/inkoop',@search= '?red=',@class='btn-warning',@key='I',@group = 'inkoop'\n\tEXEC sp_api_modal_route @name='Open inkopen',@pathname='/inkoop',@search= '?red=Open+inkopen',@class='btn-primary',@key='O',@group = 'inkoop'\n\tEXEC sp_api_modal_route @name='Gesloten inkopen',@pathname='/inkoop',@search= '?red=Gesloten+inkopen',@class='btn-primary',@key='G',@group = 'inkoop'\n\tEXEC sp_api_modal_route @name='Inkoop [Vandaag]',@pathname='/inkoop',@search= '?red=Werkdatum',@class='btn-warning',@key='Ctrl+I',@group = 'inkoop'\n\tEXEC sp_api_modal_route @name='Douane Actie Nodig',@pathname='/inkoop',@search= '?red=Actie+nodig+(douane+tafel)',@class='btn-warning',@key='D',@group = 'inkoop'\n\tEXEC sp_api_modal_route @name='Verkoop Claims [New]',@pathname='/xclaim',@search= '?red=Status+%3D+New',@class='btn-danger',@key='Alt+C',@group = 'verkoop'\n\tEXEC sp_api_modal_route @name='AccountSale [Open]',@pathname='/xcth_accountsale',@search= '?red=Open',@class='btn-warning',@key='A',@group = 'accountsale'\n\tEXEC sp_api_modal_route @name='AccountSale [Invoiced]',@pathname='/xcth_accountsale',@search= '?red=Factuur+gemaakt',@class='btn-warning',@key='F',@group = 'accountsale'\n\t--EXEC sp_api_modal_route @name='Fust Inname',@pathname='/xfustreturned',@search= '?red=',@class='btn-white border-dark text-dark',@key='F'\n\t\tIF @extendedMenu = 1\n\t\tBEGIN\n\t\tEXEC sp_api_modal_route @name='Verkoop [Gereserveerd]',@pathname='/verkoop',@search= '?red=Orders+Reserved' ,@class='btn-primary',@key='Ctrl+V',@group = 'verkoop'\n\t\tEXEC sp_api_modal_route @name='Inkoop [Gereserveerd]',@pathname='/inkoop',@search= '?red=Orders+Reserved',@class='btn-warning',@key='Ctrl+I',@group = 'inkoop'\n\t\tEND\n\t\t\n\tEND\n*/\t\n\t\n/*\t\n\tEXEC sp_api_modal_text '',@class='row'\n\tEXEC sp_api_modal_action @name='Nieuwe Verkoop',@class='btn-primary',@keycode='ArrowUp'\n\tEXEC sp_api_modal_action @name='Nieuwe Inkoop',@class='btn-warning',@keycode='ArrowDown'\n*/\n\n/*\n\tIF dbo.hasRole('douane,admin') > 0\n\t\tBEGIN\n\t\t\n\t\t--------------\n\t\t-- Douane\n\t\t--------------\n\t\tEXEC sp_api_modal_text 'Douane',@hclass\n\t\t\n\t\tSET @bclass = 'btn-dark'\n\t\t\n\t\t\tIF EXISTS (SELECT * FROM check_lfctr_at_entrepot)\n\t\t\t\tBEGIN\n\t\t\t\t\tEXEC sp_api_modal_route @name='Verkoop Correctie',@pathname='/check_lfctr_at_entrepot',@search= '',@class='btn-danger',@key='E'\n\t\t\t\tEND\n\t\t\n\t\t\tEXEC sp_api_modal_route @name='Douane Saldo',@pathname='/douanesaldo',@search= '',@class=@bclass,@key='S',@group = 'Douaneoverzicht'--,@group = 'Container'\n\t\t\tEXEC sp_api_modal_route @name='Contingent',@pathname='/sf_femimp',@search= '',@class=@bclass,@key='C',@group = 'Douaneoverzicht'\n\t\t\t\n\t\t\tEXEC sp_api_modal_route @name='Import',@pathname='/xvessel',@search= '?red=Nog+Niet+Uitgelost&ord=22636,26417,22107',@class=@bclass,@key='B',@group = 'Container'\n\t\t\tEXEC sp_api_modal_route @name='Inslag document',@pathname='/xbol',@class=@bclass,@key='D',@group = 'Container'\n\t\t\tEXEC sp_api_modal_route @name='Containers',@pathname='/xcontainer',@class=@bclass,@key='C',@group = 'Container'\n\t\t\tEXEC sp_api_modal_route @name='Partij Douane Artikelen',@pathname='/xcthcustomsrows',@class=@bclass,@key='P',@group = 'Container'\n\t\t\t\n\t\t\t\n\t\t\tEXEC sp_api_modal_route @name='Douane Artikelen',@pathname='/xproductcustomsgroup',@search= '',@class=@bclass,@key='D',@group = 'DouaneArtikelGroup'\n\t\t\tEXEC sp_api_modal_route @name='Douane Artikelen Per Land',@pathname='/xcthcustomsart',@search= '',@class=@bclass,@key='A',@group = 'DouaneArtikelGroup'\n\t\t\tEXEC sp_api_modal_route @name='E-cert Groep',@pathname='/xclientbotanic',@search= '',@class=@bclass,@key='G',@group = 'DouaneArtikelGroup'\n\t\t\tEXEC sp_api_modal_route @name='E-cert Vari\u00ebteit',@pathname='/xclientexport',@search= '',@class=@bclass,@key='V',@group = 'DouaneArtikelGroup'\n\t\t\tEXEC sp_api_modal_route @name='Product (Hoofdgroup)',@pathname='/xproduct',@search= '?red=',@class=@bclass,@key='P',@group = 'DouaneArtikelGroup'\n\t\t\t\n\t\t\t--EXEC sp_api_modal_route @name='Binnenkomend (LF)',@pathname='/lf_aanvoer_inkomend',@search= '',@class=@bclass,@key='I',@group = 'Container'\n\t\t\t--EXEC sp_api_modal_route @name='Uitgaand (LF)',@pathname='/lf_aanvoer_uitgaand',@search= '',@class=@bclass,@key='U',@group = 'Container'\n\t\t\t\n\t\t\t\n\t\tEND\n*/\n\n\t--------------\n\t-- Facturatie\n\t--------------\n--\tEXEC sp_api_modal_text 'Facturatie',@hclass\n\n\tIF @colorblind = 1\n\t\tBEGIN\n\t\t\tSET @bclass = 'btn-primary'\n\t\tEND\n\tELSE\n\t\tBEGIN\n\t\t\tSET @bclass = 'btn-secondary'\n\t\tEND\nIF dbo.hasRole('user,admin,directie') > 0\n\tbegin\n\t--\tEXEC sp_api_modal_route @name='Uitgaande facturen',@pathname='/invoice',@class=@bclass,@key='Alt+U', @Search='?red=Open+en+Nieuw',@group = 'Factuuruit'\n\t\tEXEC sp_api_modal_route @name='Uitgaande facturen',@pathname='/invoice_wms',@class=@bclass,@key='Alt+U', @Search='?red=Open+en+Nieuw',@group = 'Factuuruit'\n\t\tEXEC sp_api_modal_route @name='Filter [Klaar voor Export]',@pathname='/invoice_wms',@class=@bclass,@key='', @Search='?red=Klaar+voor+Export',@group = 'Factuuruit'\n\t\tEXEC sp_api_modal_route @name='Voorbereiding weekfacturen',@pathname='/wms_week_data_for_invoice',@class=@bclass,@key='' ,@group = 'Factuuruit'--, @Search='?red=Klaar+voor+Export'\n\t\tEXEC sp_api_modal_route @name='Inslagen',@pathname='/w_applied_actions',@class=@bclass,@key='' ,@group = 'Factuuruit'--, @Search='?red=Klaar+voor+Export'\t\t\n\t\t\n\t\tEXEC sp_api_modal_route @name='Inkoopfacturen',@pathname='/incoming_invoice',@class=@bclass,@key='Alt+I',@group = 'Factuurin'\n\t\tEXEC sp_api_modal_route @name='Status Exact',@pathname='/incoming_invoice',@class=@bclass,@key='Alt+I',@Search='?red=Status+Exact',@group = 'Factuurin'\n\t\tEXEC sp_api_modal_route @name='Status Draft / Empty',@pathname='/incoming_invoice',@class=@bclass,@key='Alt+I',@Search='?red=Draft+%2F+Empty',@group = 'Factuurin'\n\tend\n\t------------\n\t-- ADRESSEN\n\t------------\n--\tEXEC sp_api_modal_text 'Adressen',@hclass\n\n\tIF @colorblind = 1\n\t\tBEGIN\n\t\t\tSET @bclass = 'btn-primary'\n\t\tEND\n\tELSE\n\t\tBEGIN\n\t\t\tSET @bclass = 'btn-success'\n\t\tEND\n\n\nIF dbo.hasRole('user,admin,directie') > 0\n\tbegin\n\t\t\t\n\t\tEXEC sp_api_modal_route @name='Alle bedrijven',@pathname='/adres',@search= '',@class=@bclass,@key='F1',@group = 'stamgegevens'\n\t\tEXEC sp_api_modal_route @name='Leveranciers',@pathname='/leverancier',@search= '',@class=@bclass,@key='F2',@group = 'stamgegevens'\n\t\tEXEC sp_api_modal_route @name='Klanten',@pathname='/klant',@search= '?ord=23124,27062',@class=@bclass,@key='F3',@group = 'stamgegevens'\n\t\tEXEC sp_api_modal_route @name='Transporteurs',@pathname='/transporteur',@search= '',@class=@bclass,@key='F4',@group = 'stamgegevens'\n\t\t\n\t\tEXEC sp_api_modal_route @name='Lokaties',@pathname='/xlocation',@search= '',@class=@bclass,@key='L',@group = 'Locaties'\n\t\tEXEC sp_api_modal_route @name='Pickup lokaties',@pathname='/wms_pickup_location',@search= '',@class=@bclass,@key='P',@group = 'Locaties'\n\n\tend\t\n\nIF dbo.hasRole('barsan_bo') > 0\n\tbegin\n\t\t--BARSAN_BO OOK DEZE LOKATIE OPTIE\n\t\tEXEC sp_api_modal_route @name='Lokaties',@pathname='/xlocation',@search= '',@class=@bclass,@key='L'\t\n\t\t\n\tend\t\n\nIF dbo.hasRole('barsan,barsan_bo,loodsmedewerker,directie') > 0 OR @user='alex_dong_nl@ensignfreight.com' --231110 alex specifiek OOK\n\tbegin\n\t\tEXEC sp_api_modal_route @cardname='barsan_micro_out'\n\tend\t\n\nIF dbo.hasRole('admin,directie') > 0\n\tbegin\n\t\t\t\n\t\tEXEC sp_api_modal_route @name='wms_artikelen',@pathname='/wms_item',@search= '',@class=@bclass,@key='Alt+A',@group = 'base'\n\t\tEXEC sp_api_modal_route @name='wms_groepen',@pathname='/xproduct',@search= '',@class=@bclass,@key='ALT+G',@group = 'base'\n\t\tEXEC sp_api_modal_route @name='wms_loodshuur_artikel',@pathname='/wms_price_per_week',@search= '',@class=@bclass,@key='ALT+W',@group = 'base'\t\n\t\tEXEC sp_api_modal_route @name='wms_tarief_inslag',@pathname='/w_action_tariff',@search= '',@class=@bclass,@key='ALT+i',@group = 'base'\t\n\t\tEXEC sp_api_modal_route @name='wms_notification_settings',@pathname='/wms_notification_settings',@search= '',@class=@bclass,@key='ALT+N',@group = 'base'\t\n\t\tEXEC sp_api_modal_route @name='wms_invoice_method',@pathname='/wms_invoice_method',@search= '',@class=@bclass,@key='ALT+M',@group = 'base'\t\n\t\tEXEC sp_api_modal_route @name='wms_verpakking_micro_items',@pathname='/fust',@search= '',@class=@bclass,@key='ALT+V',@group = 'base'\t\n\t\tEXEC sp_api_modal_route @name='pallets toevoegen',@pathname='/wms_purchase',@search= '',@class=@bclass,@key='ALT+P',@group = 'base'\t\n\t\t--https://rws.tsql.app/wms_notification_settings\t\n\tend\t\n\n\nEND\n------------\n-- GEBRUIKER\n------------\n--EXEC sp_api_modal_menu_user\t@user_id,@path\nDECLARE @key nvarchar(128) = IIF(@path='/','Escape','Home')\nSET @bclass = 'btn-tracy'\n\nEXEC sp_api_modal_route @name='Home',@pathname='/',@search= '',@class=@bclass,@key=@key\n\nEXEC sp_api_modal_button @name='logout',@value='Log Out',@valueout = @b_logout OUT,@class=@bclass,@key='End'\n\tIF @b_logout = 'Log Out'\n\t\tBEGIN\n\t\t\tEXEC sp_api_modal_dispatch N'{\"type\":\"logOut\"}'\n\t\t\tRETURN\n\t\tEND\n\n\n\n\n-----------\n-- ADMIN --\n-----------\n--if @user_name<>'rick@tracy.nu' \nEXEC sp_sys_admin_main_menu @hclass\n--https://rws.tsql.app/api_actions/32\n\ndeclare @T nvarchar(512)=N'&nbsp;'\nexec sp_api_modal_html @T\nexec sp_api_modal_html @T\nexec sp_api_modal_html @T\nset @T =concat(N'<a href=\"https://tracy.nu\" target=_blank>Solution &copy;',year(getdate()),' TDS B.V.</a><br/><a href=\"https://www.ux1.nl\" target=_blank>Technology &copy;',year(getdate()),' UX1 B.V.</a>'   \t)\nexec sp_api_modal_html @T, @class='m-1 w-24 btn btn-link2 btn-sm float-right' ",
                    "action_id": 32,
                    "action_name": "main_menu",
                    "source_table": "api_actions"
                },
                {
                    "sql_source": "DECLARE @date nvarchar(128),@button nvarchar(128),@buttoncsv nvarchar(128),@from nvarchar(128),@to nvarchar(128)\nset @date = dbo.workDate()\nEXEC sp_api_modal_modal @class = 'w100'\n--EXEC sp_api_modal_date @name='Date',@value = @date OUT,@focus = 1,@select=1 -- zoek veld\n--EXEC sp_api_modal_date_from_to @from=@from out, @to=@to out,@class='w-24'\n--EXEC sp_api_modal_button @name='button',@value = 'Omzet Per Artikel',@valueout = @button OUT,@class = 'btn-primary',@key = 'F1'\nEXEC sp_api_modal_print\n\nEXEC sp_api_modal_action N'report_menu',@keycode='Escape'\n\nSET @button = 'Stock Per Lot'\nIF @button =  'Stock Per Lot'\nBEGIN\nEXEC sp_api_modal_button @name='@button',@value = 'Download CSV', @valueout = @buttoncsv OUT,@class='btn btn-success',@key='4'\n\tSELECT \n\t\tffa_code as [ffa**]\n\t\t,client_code as [client_code]\n\t--\tvendor_code as Klant\n\t\t,\tcontainer_number\n\t\t,\tforecast as [forecast@T]\n\t\t,\tin_warehouse as [stock@T]\n\t\t,\tbusy as [busy@T]\n\t\t,\tgone as [out@T]\n\tinto #SPL\n\tFROM @main_db.dbo.piv_pallet_state where in_warehouse is not null or busy is not null\n\n\t\n\tEXEC sp_api_modal_table @tmptable=N'#SPL',@orderby=N'ORDER BY [ffa**],client_code ASC',@print=1\n\tIF @buttoncsv =  'Download CSV'\n\t\tBEGIN\n\t\t\tDECLARE @filename nvarchar(128) = dbo.strdate(NULL) +'_'+ 'Stock_Per_Lot.csv'\n\t\t\tEXEC sp_api_modal_csv @tmptable=N'#SPL',@filename= @filename,@ansi=1\n\t\tEND\nEND \n",
                    "action_id": 291,
                    "action_name": "Stock Per Lot",
                    "source_table": "api_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_modal_address",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "N'address_search'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@name n"
                },
                {
                    "name": "@value",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@value n"
                },
                {
                    "name": "@class",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "''",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@class n"
                },
                {
                    "name": "@max",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@max i"
                },
                {
                    "name": "@focus",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@focus b"
                },
                {
                    "name": "@select",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@select b"
                },
                {
                    "name": "@inline",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 7,
                    "full_declaration_from_def": "@inline b"
                },
                {
                    "name": "@hidden",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 8,
                    "full_declaration_from_def": "@hidden b"
                },
                {
                    "name": "@identifier",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 9,
                    "full_declaration_from_def": "@identifier n"
                },
                {
                    "name": "@class_updated",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 10,
                    "full_declaration_from_def": "@class_updated n"
                },
                {
                    "name": "@type",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "'textarea'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 11,
                    "full_declaration_from_def": "@type n"
                },
                {
                    "name": "@placeholder",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 12,
                    "full_declaration_from_def": "@placeholder n"
                },
                {
                    "name": "@postal_code",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 13,
                    "full_declaration_from_def": "@postal_code n"
                },
                {
                    "name": "@street_address",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 512,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 14,
                    "full_declaration_from_def": "@street_address n"
                },
                {
                    "name": "@street_name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 512,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 15,
                    "full_declaration_from_def": "@street_name n"
                },
                {
                    "name": "@street_number",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 64,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 16,
                    "full_declaration_from_def": "@street_number n"
                },
                {
                    "name": "@locality",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 17,
                    "full_declaration_from_def": "@locality n"
                },
                {
                    "name": "@region",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 18,
                    "full_declaration_from_def": "@region n"
                },
                {
                    "name": "@country_name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 19,
                    "full_declaration_from_def": "@country_name n"
                },
                {
                    "name": "@extended_address",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 512,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 20,
                    "full_declaration_from_def": "@extended_address n"
                },
                {
                    "name": "@place_id",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 21,
                    "full_declaration_from_def": "@place_id n"
                },
                {
                    "name": "@json_address",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 22,
                    "full_declaration_from_def": "@json_address n"
                },
                {
                    "name": "@button_value",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 512,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "'Search'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 23,
                    "full_declaration_from_def": "@button_value n"
                },
                {
                    "name": "@key",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 512,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "N'Enter'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 24,
                    "full_declaration_from_def": "@key n"
                },
                {
                    "name": "@address_name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 512,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 25,
                    "full_declaration_from_def": "@address_name n"
                }
            ],
            "embedded_example": "DECLARE @postal_code nvarchar(128),@street_address nvarchar(256),@street_name nvarchar(256)\r\n\t,@street_number nvarchar(32),@locality nvarchar(128),@region nvarchar(128)\r\n\t,@country_name nvarchar(128),@extended_address nvarchar(256),@place_id nvarchar(4000)\r\n\t,@json_address nvarchar(max)\r\nEXEC sp_api_modal_address @json_address = @json_address OUT --\r\n\t,@postal_code = @postal_code OUT\r\n\t,@street_address = @street_address OUT\r\n\t,@locality = @locality OUT\r\n\t,@region = @region OUT \r\n\t,@country_name = @country_name OUT \r\n\t,@extended_address = @extended_address OUT\r\n\t,@place_id = @place_id OUT\r\n\t,@placeholder = 'Search'\r\nEXEC sp_api_modal_text @json_address,'json'",
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_modal_address_search_save",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@address_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@address_id i"
                },
                {
                    "name": "@search",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@search n"
                },
                {
                    "name": "@show_region",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@show_region b"
                },
                {
                    "name": "@key",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 64,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "'PageDown'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@key n"
                }
            ],
            "embedded_example": "DECLARE @address_id int\r\nEXEC sp_api_modal_address_search_save @address_id = @address_id OUT",
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_modal_alert",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@alert_text",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@alert_text n"
                },
                {
                    "name": "@sub_text",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@sub_text n"
                },
                {
                    "name": "@key",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "'Enter'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@key n"
                },
                {
                    "name": "@class",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "'btn-primary'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@class n"
                },
                {
                    "name": "@escape_path",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@escape_path n"
                },
                {
                    "name": "@continue_path",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@continue_path n"
                },
                {
                    "name": "@textclass",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 7,
                    "full_declaration_from_def": "@textclass n"
                },
                {
                    "name": "@seed",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 8,
                    "full_declaration_from_def": "@seed n"
                }
            ],
            "embedded_example": "EXEC sp_api_modal_alert N'Error',N'Something went wrong!' --\r\n\t--@alert_text nvarchar(max)\r\n\t--,@sub_text nvarchar(max) = NULL\r\n\t,@key = 'Enter'\r\n\t,@class = 'btn-primary'\r\n\t,@escape_path = NULL -- Escape will go to this path\r\n\t,@continue_path = NULL -- OK will go to this path\r\n\t,@textclass = NULL",
            "embedded_description": null,
            "co_occurrence_stats": {
                "dbo.sp_api_modal_input": 27,
                "dbo.sp_api_toast": 26,
                "dbo.sp_api_modal_text": 26,
                "dbo.sp_api_modal_button": 29,
                "dbo.sp_api_modal_table": 10,
                "dbo.sp_api_modal_clear": 5,
                "dbo.sp_api_goto": 1,
                "dbo.ABCDATE": 3,
                "dbo.sp_api_modal_modal": 3,
                "dbo.sp_api_email": 2,
                "dbo.sp_api_places_search": 1,
                "dbo.sp_api_modal_select_table": 2,
                "dbo.sp_api_modal_input_decimal": 1,
                "dbo.sp_api_modal_choose": 3,
                "dbo.sp_api_modal_html": 1,
                "dbo.sp_api_modal_value": 1,
                "dbo.sp_api_modal_values_clear": 1,
                "dbo.sp_api_modal_restart": 1,
                "dbo.sp_api_modal_get_value": 2,
                "dbo.sp_api_modal_choose_list": 1
            },
            "real_usage_examples": [
                {
                    "sql_source": "DECLARE @wat nvarchar(200), @linktoME int,@text nvarchar(max)\n\nIF {[ctr2].cth_fase} NOT IN (N'openSale','openPrice')\n\tBEGIN\n\tEXEC sp_api_modal_Alert N'Let op!', N'De verkoop is reeds gesloten. U kan niet meer de toewijzing wijzigen.' \n\tEXEC sp_api_modal_clear\n\tRETURN\n\tEND\n\nSET @linktoME ={[ctr2].id}\n--201028 erbij ivm overbrengen..\nif @LinkToMe is NULL set @LinkToMe={[ctr_overbrengen].id}\n\nDECLARE @maxTeLinken INT,@maxBeschikbaar INT\nSELECT @maxTeLinken = (ctrAmount-IVTOTAL) FROM Q_xTransactionDetail WHERE ID=@LinkToME\n\nIF @maxTeLinken = 0\n\tBEGIN\n\t\tEXEC sp_api_modal_alert N'Regel is al volledig toegewezen'\n\t\tEXEC\t sp_api_go2 1 -- 1 stap terug (+list view; detailviewgebruik EXEC sp_api_go2 1,0)\n\t\tRETURN;\n\tEND\n\n\nSET @maxBeschikbaar = {[ctr1_toewijsbaar].available}\nIF @maxBeschikbaar < @maxTeLinken\n\tBEGIN\n\t\tdeclare @Melding nvarchar(200)\n\t\tset @Melding = concat(N'Niet genoeg beschikbaar! Te linken:',N' ',@maxTeLinken)\n\t\tEXEC sp_api_modal_text @Melding,N'h4 text-muted'\n\t\tSET @text = CONCAT('U kunt maximaal ',@maxBeschikbaar,' van de ',@maxTeLinken,' linken')\n\t\tEXEC sp_api_modal_text @text,N'm-4'\n\t\tSET @maxTeLinken = @maxBeschikbaar\n\tEND\n\nIF @maxTeLinken < 0\n\tBEGIN\n\t\tEXEC sp_api_modal_alert N'Probleem!',N'Regel heeft meer toegewezen dan mag. Ga naar de toewijzing (IV link) en verlaag deze.'\n\t\tEXEC sp_api_modal_clear\n\tEND\n\nDECLARE @aantalTeLinken INT = @maxTeLinken\n\t,@button nvarchar(50)\n\nEXEC sp_api_modal_input @name='Aantal',@value = @aantalTeLinken OUT,@focus=1,@select=1\nEXEC sp_api_modal_button @name='button',@value = 'Link aantal',@valueout=@button OUT,@key=N'Enter'\nIF @button IS NULL RETURN\nset @wat=N'Gekozen ID: '+str(@ID)+' wordt gekoppeld aan CTR: '+str(@LinktoME)\nexec sp_api_toast @wat\n--RETURN; --test\n\nif @linktoME is not null\n\tBEGIN\n\t\texec @main_db.dbo.map @linktoME,@ID, @aantalTeLinken\n\t\t\n\t\t--zet return path\n\t\tSET @ctr2_id = {[ctr2].id}\n\t\tSET @verkoop_id = {[verkoop].id}\n\t\tIF @ctr2_id IS NOT NULL AND @verkoop_id IS NOT NULL AND @aantalTeLinken = @maxTeLinken\n\t\t\tBEGIN\n\t\t\t\tSET @goto = CONCAT('/verkoop/',@verkoop_id,'/ctr2/',@ctr2_id,'/iv2')\n\t\t\t\tSET @referer_path = CONCAT('/verkoop/',@verkoop_id,'/ctr2')\n\t\t\t\tSET @referer_search = CONCAT(N'?id=',@ctr2_id)\n\t\t\t\tEXEC sp_api_toast N'Regel(s) is/zijn gelink bla',N'alert-primary'\t\t\t\t\n\t\t\t\tEXEC sp_api_goto @goto,@referer_path=@referer_path,@referer_search=@referer_search\n\t\t\tEND\n\t\t--210115 \n--\t\texec sp_api_go3\n\t\texec sp_api_modal_clear\n\tEND\n\n\n--if @parent_card_name='ctr2'\n--\tBEGIN\n--\t\texec @main_db.dbo.map @ID, @Parent_ID\n--\tEND\n--else --neem aan parent_parent...\n--\tBEGIN\n--\t\texec @main_db.dbo.map @ID, @Parent_Parent_ID\n--\tEND\n\n--EXEC sp_api_goto @path",
                    "action_id": 13,
                    "action_name": "link_this",
                    "source_table": "api_card_actions"
                },
                {
                    "sql_source": "--EXEC sp_api_toast @parent_parent_id\r\n--exec sp_api_toast @User\r\n\t\r\nDECLARE @CTHID INT = {[ompakken].id} --200818 curly\r\nIF @CTHID IS NULL begin\r\n\t\tEXEC sp_api_toast 'Kan geen [ompakken2] vinden'\r\n\t\tRETURN;\r\n\t\tend\r\n--ELSE EXEC sp_api_toast @CTHID\r\n\r\nIF {[ompakken].status} not in ('openRepack') BEGIN\r\n\tEXEC sp_api_modal_alert 'Toevoegen alleen bij status: openRepack'\r\n\tEXEC sp_api_modal_clear\t\t\r\n\tRETURN;\t\r\n\tend\r\n\r\n-- 200629 Uitbreiding inkoop vanuit diverse contexten: Zoek CTH ; bijv als we afkomstig zijn van een regel, dan is CTH te vinden in de regel\r\n--if @parent_card_name ='verkoop'\tset @CTHID=@parent_id\r\n--if @parent_card_name = 'ctr2' set @CTHID=(select TransactionHeader_ID from xtransactiondetail where xtransactiondetail.id=@parent_id)\r\n\r\nDECLARE @mes nvarchar(200), @FustSaldo int, @CoreType nvarchar(10),@FustID int, @xDesc nvarchar(200)\r\nSELECT @xDesc=x.[Description],@mes= concat('Ompak in ' , x.[Description]) ,@Coretype= x.coretype,@FustID=x.Fust_ID from xstock x where x.id=@ID --@main_db.dbo.\r\n--EXEC sp_api_modal_text @mes,'h2 text-primary'\r\n------\r\nIF @coretype in('CRATE','PALLET')\r\n\tBEGIN\r\n\t\tSELECT @Fustsaldo=Fustsaldo from @main_db.dbo.FustSaldo_FC(@FustID,{[verkoop].Counterparty_ID})\r\n\t\tEXEC sp_api_toast @Fustsaldo\r\n\t\t-- breid DECLARE message uit met het fust-saldo\r\n\t\tIF @FustSaldo is not NULL\r\n\t\t\tSET @mes=concat('Fust bij- of afboeken (', @xDesc,') actueel saldo bij deze klant: ',@fustsaldo)\r\n\t\tELSE\r\n\t\t\tSET @mes=concat('Fust bij- of afboeken (', @xDesc,') => let op: deze klant heeft dit fust nooit eerder gehad!')\r\n\tEND\r\n\r\nDECLARE @text nvarchar(max),@prodcode_id INT,@artcode_id INT\r\nDECLARE @aantal nvarchar(20),@opmerking nvarchar(50) --='100'\r\nDECLARE @CounterpartyID int\r\nDECLARE @FlowModel int\r\nDECLARE @THDT INT\r\nSELECT @CounterpartyID = CTH.counterparty_ID,@FlowModel=FlowModel_ID,@THDT=TDT From xTransactionHeader CTH where CTH.ID=@CTHID\r\n--200630 was@parent_id\r\n\r\n--200708 => ??? WAAROM GAAT DIT NIET ??? select @Prijs= @main_db.dbo.StockPrice(@ID,@CTHID,NULL,NULL,NULL,NULL,NULL,NULL,NULL)\r\n\r\nEXEC sp_api_modal_text @text = @mes,@class = 'h3 text-muted'\r\nEXEC sp_api_modal_text 'Aantal'\r\nEXEC sp_api_modal_input @name='aantal',@value = @aantal OUT,@focus=1\r\nEXEC sp_api_modal_text 'Opm. loods'\r\nEXEC sp_api_modal_input @name='opmerking',@value = @opmerking OUT\r\nDECLARE @button nvarchar(128)\r\nEXEC sp_api_modal_button @name='button',@value = 'Toevoegen',@valueout = @button OUT,@class = 'btn-primary',@key = 'Enter'\r\nIF @button IS NOT NULL\r\n\tBEGIN\r\n\t\tIF \t\t--TRY_CAST(@prijs as decimal) > 0 AND \r\n\t\t\t\tTRY_CAST(@aantal as int) > 0 \r\n\t\t\t\tOR @FustSaldo is not NULL -- 200921 Als het een selectie van LEEG FUST betreft, dan mag het aantal Negatief zijn!\r\n\t\t\tBEGIN\r\n\t\t\t\texec @main_db.dbo.CreateCTR @CTH_ID=@CTHID, @stock_ID=@ID,@Amount=@Aantal,@Price=NULL,@Logistic=@Opmerking, @User=@User,@forcedTDT=1\r\n\t\t\t\tselect @mes = 'Er zijn '+@Aantal+ ' colli '+ x.[Description]+' toegevoegd aan de order' from xstock x where x.id=@ID\r\n\t\t\t\texec sp_api_toast @mes\r\n\t\t\t\tEXEC sp_api_modal_clear\t\t\t\t\t\t\r\n\r\n\t\t\tEND\r\n\t\tELSE\r\n\t\t\tEXEC sp_api_modal_text 'Aantal of prijs niet geldig!','text-danger'\r\n\tEND",
                    "action_id": 42,
                    "action_name": "SelectAmountOUT",
                    "source_table": "api_card_actions"
                },
                {
                    "sql_source": "--text, class, translate (bit)\r\nEXEC sp_api_modal_text 'Kies Enter om de vorige prijzen te gebruiken.',@translate=1 --vertaalbaar\r\nDECLARE @button nvarchar(128) --button nodig om DECLARE oude SET nog te hebben.\r\nEXEC sp_api_modal_button @name='button',@value = 'Okay!',@valueout = @button OUT,@class = 'btn-primary',@key = 'Enter' --is initieel leeg\r\nEXEC sp_api_modal_button @name='button2',@value = 'Nah',@valueout = @button OUT,@class = 'btn-primary',@key = 'Escape' --is initieel leeg\r\nIF @button IS NULL EXEC sp_api_modal_select_all --STEP 1 SELECT all\r\n -- na klik\r\nIF @button = 'Nah' OR @button = 'Okay!'\r\n\tBEGIN\r\n\t\tEXEC sp_api_modal_clear -- einde formweergave; handel alleen nog de CURSOR af\r\n\t\tEXEC sp_api_modal_select_all_clear --STEP 2 SELECT clear all en de rest\r\n\tEND\r\nIF @button = 'Okay!'\r\n\tBEGIN\r\n\r\n\t\tDECLARE @cursor_ids CURSOR,@cid INT\r\n\t\t-- onderbreek de actie alos er meer dan 1 leverancier in DECLARE selectie voor komt\r\n\t\tif\t(SELECT count( distinct supplier_ID) FROM p_PriceEntryRow where id in (SELECT value FROM string_split(@ids,','))) > 1\r\n\t\t\tBEGIN\r\n\t\t\t\tEXEC sp_api_modal_alert N'Selecteer niet meer dan 1 leverancier!'\r\n\t\t\t\tEXEC sp_api_modal_clear \r\n\t\t\t\treturn;\r\n\t\t\tEND\r\n\r\n\t\tSET @cursor_ids = CURSOR LOCAL FAST_FORWARD FOR SELECT value FROM string_split(@ids,',')\r\n\t\tOPEN @cursor_ids;\r\n\t\tFETCH NEXT FROM @cursor_ids INTO @cid\r\n\t\tWHILE @@FETCH_STATUS = 0\r\n\t\t\tBEGIN\r\n\t\t\t\tUPDATE p_PriceEntryRow SET PriceHi = OldPriceHi, PriceLo = OldPriceLo WHERE id = @cid\r\n\t\t\t\tFETCH NEXT FROM @cursor_ids INTO @cid\r\n\t\t\tEND\r\n\t\tCLOSE @cursor_ids;\r\n\t\tDEALLOCATE @cursor_ids;\r\n\r\n\tEND\r\n\r\n",
                    "action_id": 83,
                    "action_name": "oude prijzen",
                    "source_table": "api_card_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_modal_alert_error",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@alert_text",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@alert_text n"
                },
                {
                    "name": "@sub_text",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@sub_text n"
                }
            ],
            "embedded_example": "EXEC sp_api_modal_alert_error N'Error',N'errortext'",
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_modal_alert_new",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@alert_text",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@alert_text n"
                },
                {
                    "name": "@sub_text",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@sub_text n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": [
                {
                    "sql_source": "--\t-----------------------------------------------------------------------------\n--\tinstant_report: BREAKDOWN_CTH1\n--\ttoont een overzicht van de partijkosten en verkoopopbrengsten\n--\tpre declare: @buttonmore,@buttonmore2, @mt\n--\t-----------------------------------------------------------------------------\nEXEC sp_api_modal_modal @class=N'w100',@printStyle=N'font-size:70%',@landscape=1\n\ndeclare @CTHID int={[inkoop].id}\nif @CTHID is null set @CTHID={[verkoop].id}\n\nexec sp_api_toast N'kosten'\n\n--exec @main_db.dbo.create_demo_1 \nif @CTHID IS NULL\n\tbegin\n\t\texecute sp_api_modal_alert_new N'Breakdown heeft een Inkoop of verkoop nodig.'\n\t\treturn;-- afkappen\n\tend\n--210830 totalen bovenaan even tonen in EURO!\ndeclare @LFC float=--(\tselect sum(isnull(nullif(cost,0),0)*isnull(nullif(xrate,0),1)) from @main_db.dbo.xCostReg_ALL_CTH(@CTHID) where landfreight_id>0)\n\t\t\t\t\t(\tselect sum(eurbedrag) from @main_db.dbo.xCostReg_ALL_CTH(@CTHID) where landfreight_id>0)\nif @lfc is not null\n\tbegin\n\t\tdeclare @lfctext nvarchar(512)=concat('Totaal op Landfreight geboekt: ',@lfc)\t\n\t\texec sp_api_modal_text @lfctext\n\tend\n\ndeclare @CTHC float=(\tselect sum(isnull(nullif(cost,0),0)*isnull(nullif(xrate,0),1)) from xcostregistration where transaction_id=@CTHID) \nif @CTHC is not null\n\tbegin\n\t\tdeclare @CTHCtext nvarchar(512)=concat('Totaal op CTH geboekt: ',@cthc)\t\n\t\texec sp_api_modal_text @CTHCtext\n\tend\n\ndeclare @CTRC float=(\tselect sum(isnull(nullif(cost,0),0)*isnull(nullif(xrate,0),1)) from xcostregistration \nwhere ctr_id in (select id from xtransactiondetail where transactionheader_id=@CTHID) )\nif @CTRC is not null\n\tbegin\n\t\tdeclare @CTRCtext nvarchar(512)=concat('Totaal op CTR(s) geboekt: ',@ctrc)\t\n\t\texec sp_api_modal_text @CTRCtext\n\tend\n\t\n--SELECT --lfctr_ctr_part,C_Part_CTR_CTH,\nselect ctr_id,lfctr_colli as [lfctrColli@:2],rpCTH_Costs_P as [CTHP@:2],lfctr_Pal,cth_PCost as CTH_P,LFCTRcosts_C as [CTHC@:2]\n, CTH_CCost as CTH_C,ctr_dirkosten * lfctr_ctr_part as [CTRDIRECT@:2],LFP as [LFP@:2]\n--,P_Part_LFCTR_LF as lfctr_lf_deel@ -- LFCTR deel van de LF (optellen per LF moet 1 zijn)\n, CP_CostLF as LF_P, lfctr_ccc as colPrijs, Lfctr_CCPP ,lfctr_ColliKosten as colTot, [regeltotaal@:2]=lfctr_colli * lfctr_collikosten\n--, ctr_totalCosts_C\n--,isnull(cth_PCost,0)+ isnull(CTH_CCost,0) as CTH\n--,CTR_COL\n--,ctr_cth_Cost   \nINTO #BreakDown FROM @main_db.dbo.lfctr_breakdown(@CTHID,0)          \n\nexec sp_api_modal_print -- zet de print button boven (=BROWSER CTRL-P)\nset @mt=concat(N'Dit is de kostenverdeling van de geboekte kosten op partij ',{[inkoop].Lotnumber})\nexec sp_api_modal_text @mt , @class='h2', @PrintOnly=1\nEXEC sp_api_modal_table @tmptable=N'#BreakDown', @PRINT=1\n\n\n--MORE? PREDECLARE @buttonmore\nIF @buttonmore IS NULL\n\tBEGIN\n\t\tEXEC sp_api_modal_text N'',N'm-4'\n\t\tEXEC sp_api_modal_button @name='@buttonmore',@value = 'Meer info...', @valueout = @buttonmore OUT,@class='btn-tracy',@key='PageDown'\n\t\tRETURN\n\tEND\n\nselect costReg_ID,suppliercode,costdate, eurbedrag as [Eurobedrag@:2], [description] \n\t\t\t,invoicenumber,gl_number,dateinvoice --inv en gl er bij 211125RH\nINTO #CostReg FROM @main_db.dbo.xCostReg_ALL_CTH(@CTHID)          \nexec sp_api_modal_text N'Geregistreerde kosten:' , @class='h5', @Print=1\nEXEC sp_api_modal_table @tmptable=N'#costReg', @PRINT=1\n\nselect ctr_id, [aantal@]=sum(lfctr_col), [niet_ingedeeld@:2]=sum([0]), [agf@:2]=sum([1]), [rabat@:2]=sum([2]), [transport@:2]=sum([3]),\n\t\t\t\t\t\t[overig@:2]=sum([4]), [sum5@:2]=sum([5]) \n\tinto #piv1\tfrom piv_xcostregistration where cth_id=@CTHID group by ctr_id\nexec sp_api_modal_text N'Kosten kolommen:' , @class='h5', @Print=1\nEXEC sp_api_modal_table @tmptable=N'#piv1', @PRINT=1\n\n\n--MORE? PREDECLARE @buttonmore2 VERKOOP OPBRENGST ( ALLEEN BIJ INKOOPBREAKDOWN )\nIF @buttonmore2 IS NULL AND {[inkoop].id} is NOT NULL\n\tBEGIN\n\t\tEXEC sp_api_modal_text N'',N'm-4'\n\t\tEXEC sp_api_modal_button @name='@buttonmore2',@value = 'Toon de verkoopopbrengst', @valueout = @buttonmore OUT,@class='btn-tracy',@key='PageDown'\n\t\tRETURN\n\tEND\n\n--210901 Toon verkoop opbrengst en kosten voor partijuitmelding\n/*\nselect * from SalesResultCTH1(13237)\n*/\nselect lotrefrowid as [ctr1~col-sm-1-2],(select D from @main_db.dbo.ctr_description_prod(lotrefrowid)) as [prod*]\n\t,(select D from @main_db.dbo.ctr_description(lotrefrowid)) as [artikel], TV_CODE as Customer,cth2 as [order~col-sm-1-2],\tctr_id as [ctr2~col-sm-1-2]\n\t,\tLFDate as [Date~col-sm-1],\tcolli_gefactureerd as [Colli@~col-sm-1-2],\tgemiddeld as [SalesCol:2~col-sm-1-2],\tomzet as [NetSales@:2~col-sm-1]\n\t,\tbookedcosts as [SalesCosts@:2~col-sm-1]\n\t, bookedcosts/nullif(colli_gefactureerd,0) as [CostCol:2~col-sm-1-2]\n\t,isnull(gemiddeld,0)-isnull(bookedcosts/nullif(colli_gefactureerd,0),0) as [NETT_COL:2]\nINTO #SalesRes FROM @main_db.dbo.[RowResultEUR_CTH1_perCTR2](@CTHID) --order by lotrefrowid\nexec sp_api_modal_text N'Geregistreerde verkoop opbrengsten:' , @class='h5', @Print=1\nEXEC sp_api_modal_table @tmptable=N'#SalesRes', @PRINT=1,@orderby='ORDER BY 1'-- maak alles het printbaar \n--@PRINTONLY=1 (hidden op scherm, maar wel op printer)--,@orderby=N'ORDER BY [wawa*],lalaDescription ASC'\n\n-- PARTIJ-RESULTAAT\nselect CTR1_ID,\tleverancier,\tklant,CTH2_ID,\tCTR2_ID, Orderdatum,\t\n\t\tAantal as [Aantal@]\n\t\t,-1 * I_PRIJS as [I_PRIJS@:2],\t-1 * (I_RABAT+\tI_TRANSP+\tI_OVERIG) as [I_KOST@:2]\n\t\t,-1 * V_PRIJS as [V_PRIJS@:2],\t-1 * V_RABAT as [V_RABAT@:2],\t-1* V_TRANSP as [V_TRANSP@:2],\t-1 * V_OVERIG as [V_OVERIG@:2]--\tV_AMT_CTR\tI_AMT_CTR\n\t\t, rowresult as [Resultaat@:2]\n\tinto #ivresult\n\tFROM @main_db.dbo.[IV_RESULT] where CTH1_ID =@CTHID\nexec sp_api_modal_text N'Partij resultaatregels :' , @class='h5', @Print=1\nEXEC sp_api_modal_table @tmptable=N'#ivresult', @PRINT=1\n\n\n",
                    "action_id": 271,
                    "action_name": "ctr_breakdown",
                    "source_table": "api_actions"
                },
                {
                    "sql_source": "declare @main_text nvarchar(512) = concat(N'You''re at ', @hostname, ' ', '@main_db')\nexec sp_api_modal_alert_new @main_text",
                    "action_id": 275,
                    "action_name": "main_db",
                    "source_table": "api_actions"
                },
                {
                    "sql_source": "--instant_report: Breakdown_CTH2\n--pre declare: @buttonmore, @mt, @m2, @m3, @m4\nEXEC sp_api_modal_modal @class=N'w100',@printStyle=N'font-size:70%',@landscape=1\n\ndeclare @CTHID int={[inkoop].id}\nif @CTHID is null set @CTHID={[verkoop].id}\n\nexec sp_api_toast N'kosten'\n\n--exec @main_db.dbo.create_demo_1 \nif @CTHID IS NULL\n\tbegin\n\t\texecute sp_api_modal_alert_new N'Breakdown heeft een Inkoop of verkoop nodig.'\n\t\treturn;-- afkappen\n\tend\n--210830 totalen bovenaan even tonen in EURO!\ndeclare @LFC float=--(\tselect sum(isnull(nullif(cost,0),0)*isnull(nullif(xrate,0),1)) from @main_db.dbo.xCostReg_ALL_CTH(@CTHID) where landfreight_id>0)\n\t\t\t\t\t(\tselect sum(eurbedrag) from @main_db.dbo.xCostReg_ALL_CTH(@CTHID) where landfreight_id>0)\nif @lfc is not null\n\tbegin\n\t\tdeclare @lfctext nvarchar(512)=concat('Totaal op Landfreight geboekt: ',@lfc)\t\n\t\texec sp_api_modal_text @lfctext\n\tend\n\ndeclare @CTHC float=(\tselect sum(isnull(nullif(cost,0),0)*isnull(nullif(xrate,0),1)) from xcostregistration where transaction_id=@CTHID) \nif @CTHC is not null\n\tbegin\n\t\tdeclare @CTHCtext nvarchar(512)=concat('Totaal op CTH geboekt: ',@cthc)\t\n\t\texec sp_api_modal_text @CTHCtext\n\tend\n\ndeclare @CTRC float=(\tselect sum(isnull(nullif(cost,0),0)*isnull(nullif(xrate,0),1)) \n\t\t\t\t\t\tfrom xcostregistration \n\t\t\t\t\t\twhere ctr_id in (select id from xtransactiondetail where transactionheader_id=@CTHID) )\nif @CTRC is not null\n\tbegin\n\t\tdeclare @CTRCtext nvarchar(512)=concat('Totaal op CTR(s) geboekt: ',@ctrc)\t\n\t\texec sp_api_modal_text @CTRCtext\n\tend\n\t\n--SELECT --lfctr_ctr_part,C_Part_CTR_CTH,\nselect ctr_id,rpCTH_Costs_P as [CTHP@:2],cth_PCost as CTH_P,LFCTRcosts_C as [CTHC@:2], CTH_CCost as CTH_C,ctr_dirkosten * lfctr_ctr_part as [CTRDIRECT@:2],LFP as [LFP@:2]\n, CP_CostLF as LF_P,lfctr_colli, lfctr_ccc as colPrijs, Lfctr_CCPP ,lfctr_ColliKosten as colTot, [regeltotaal@:2]=lfctr_colli * lfctr_collikosten\n--, ctr_totalCosts_C\n--,isnull(cth_PCost,0)+ isnull(CTH_CCost,0) as CTH\n--,CTR_COL\n--,ctr_cth_Cost   \nINTO #BreakDown FROM @main_db.dbo.lfctr_breakdown(@CTHID,0)          \n\nexec sp_api_modal_print -- zet de print button boven (=BROWSER CTRL-P)\nset @mt=concat(N'Dit is de kostenverdeling van CTH ',@CTHID,' (',{[inkoop].Lotnumber},')')\nexec sp_api_modal_text @mt , @class='h2', @PrintOnly=1\nEXEC sp_api_modal_table @tmptable=N'#BreakDown', @PRINT=1\n\n--MORE? PREDECLARE @buttonmore\nIF @buttonmore IS NULL\n\tBEGIN\n\t\tEXEC sp_api_modal_text N'',N'm-4'\n\t\tEXEC sp_api_modal_button @name='@buttonmore',@value = 'Meer info...', @valueout = @buttonmore OUT,@class='btn-tracy',@key='PageDown'\n\t\tRETURN\n\tEND\n\nset @m2=concat(N'Alle kostenregistraties van CTH ',@CTHID) --verkoop\nexec sp_api_modal_text @m2 , @class='h2', @PrintOnly=1\nselect costReg_ID,suppliercode,costdate, eurbedrag as [eurobedrag@:2], [description] \nINTO #CostReg FROM @main_db.dbo.xCostReg_ALL_CTH(@CTHID)          \nEXEC sp_api_modal_table @tmptable=N'#costReg', @PRINT=1-- maak alles het printbaar --@PRINTONLY=1 (hidden op scherm, maar wel op printer)\n--,@orderby=N'ORDER BY [wawa*],lalaDescription ASC'\n\n\n--211020 finmut er bij gehaald\nexec sp_api_modal_text N'Financiele mutaties:' , @class='h5'--, @PrintOnly=1\nset @m3=N'Financiele mutaties op basis van company cost settings'\nexec sp_api_modal_text @m3 , @class='h2', @PrintOnly=1\n\nSELECT * INTO #tt_verkoop from @main_db.dbo.Calc_Finrows_Summed_CTH_IV where cth_id=@CTHID and ([ExBedrag@:2] <>0 or Fin_Group=N'BASIS')\nEXEC sp_api_modal_table @tmptable=N'#tt_verkoop',@print=1,@lang_context=N'IR_tt_verkoop'\n\n--211021 netto verkoop opbrengst per colli\n\nset @m4=N'Netto opbrengst per regel:'\nexec sp_api_modal_text @m4 , @class='h2', @PrintOnly=1\n\nselect  ctr_id,\tomzet,\tcolli_gefactureerd,\tFactuurwaarde,\tNetto_omzet,\tNetto_waarde INTO #tt_nettores from @main_db.dbo.RowResultEUR_CTH2(@CTHID)\nEXEC sp_api_modal_table @tmptable=N'#tt_nettores',@print=1,@lang_context=N'IR_tt_nettores'\n",
                    "action_id": 324,
                    "action_name": "ctr_breakdown_cth2",
                    "source_table": "api_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_modal_audio",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@url",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@url n"
                },
                {
                    "name": "@autoplay",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "1",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@autoplay b"
                },
                {
                    "name": "@controls",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@controls b"
                },
                {
                    "name": "@seed",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@seed n"
                },
                {
                    "name": "@seconds",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@seconds i"
                },
                {
                    "name": "@toast_text",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@toast_text n"
                }
            ],
            "embedded_example": "EXEC sp_api_modal_audio @url = N'woef.mp3', @autoplay = 1, @controls = 0",
            "embedded_description": null,
            "co_occurrence_stats": {
                "dbo.sp_api_modal_get_value": 1,
                "dbo.sp_api_modal_action": 1,
                "dbo.sp_api_modal_clear": 1,
                "dbo.sp_api_modal_button": 1
            },
            "real_usage_examples": [
                {
                    "sql_source": "--\t_tracy_outbound-scanner-podcast\r\n--\tin main menu, add this: \t```  EXEC sp_api_modal_action @name='RWS-podcast'  ```\r\nexec sp_api_modal_text N'Listen to the deep dive podcast about Rotterdam Warehouse Solutions',@class='h4'\r\nEXEC sp_api_modal_audio @url = N'https://apis.tsql.app/storage/fn7sbi8mls7stkabcoxwpzmukhqwpzh3', @autoplay = 0, @controls = 1\r\n\r\nEXEC sp_api_modal_text N'click Quit/Exit button to end the action.'\r\nDECLARE @ButtonQuit nvarchar(128)\r\nEXEC sp_api_modal_get_value @name='@ButtonQuit', @value=@ButtonQuit OUT;\r\nEXEC sp_api_modal_button \r\n\t@name='quit',\r\n\t@value='Quit this Action', \r\n\t@class='btn-secondary', \r\n\t@valueout=@ButtonQuit OUT;\r\n\r\nIF @ButtonQuit IS NOT NULL\r\nBEGIN\r\n\t--SET @Quit = 1;\r\n\tEXEC sp_api_modal_clear;\r\n\tRETURN;\r\nEND",
                    "action_id": 723,
                    "action_name": "RWS-podcast",
                    "source_table": "api_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_modal_beep",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@frequency",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "1200",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@frequency i"
                },
                {
                    "name": "@duration",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "300",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@duration i"
                },
                {
                    "name": "@use_placeholder",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@use_placeholder n"
                },
                {
                    "name": "@seed",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 72,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@seed n"
                }
            ],
            "embedded_example": "EXEC sp_api_modal_beep 1200,300",
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": [
                {
                    "sql_source": "EXEC sp_api_modal_input @name = '@barcode', @value = @line OUT ,@focus=1   --,@inline = 1\r\nEXEC sp_api_modal_button @name='@button',@value = 'Test', @valueout = @button OUT,@class='btn-danger',@key='Enter', @pietje=12\r\nif @button is null return\r\nif exists(select 1 from wms_micro_outbound_line_barcode where line=@line)\r\n\tBEGIN\r\n\t\texec sp_api_modal_text @line\r\n\t\tEXEC sp_api_modal_beep 1200,300\r\n\tend\r\nELSE\t\r\n\tbegin\r\n\t\t--if correcte line gescand (serienummer line, check op begin en op lengte..)\r\n\t\texec sp_api_modal_text N'Toevoegen?'\r\n\t\tEXEC sp_api_modal_beep 2400,150\t\r\n\tend\t\r\n\t",
                    "action_id": 631,
                    "action_name": "test_rick_2",
                    "source_table": "api_actions"
                },
                {
                    "sql_source": "--241213 @GB: let op @origin gebruiken we hier niet.. maar dat is niet het probleem\r\n\r\n-------------------------------------------------------\r\n--\t#qr_action_verwerk_micro_pick_v11\r\n--\tversie met herschikking van gekoppelde miscro-items na scannen van een pallet (scanned_pallet-id) \r\n--\tPRE DECLARE: \r\n/*\r\n@uuid int ,@origin nvarchar(1024), @button_choose nvarchar(max) = null , @sampleqrscanner nvarchar(max)= null, @button5 nvarchar(max) = null, @button_choose2 nvarchar(max) = NULL, @b6 nvarchar(128) = NULL\r\n,@button nvarchar(max) = NULL,@mol nvarchar(max) = NULL,@button2 nvarchar(max) = NULL,@T nvarchar(max) = NULL,@sku_check nvarchar(max) = NULL\r\n,@button3 nvarchar(max) = NULL,@xstock_id nvarchar(max) = NULL,@aantal_serials_nodig nvarchar(max) = NULL,@sku_oke nvarchar(max) = NULL,@button4 nvarchar(max) = NULL\r\n,@pal_select_button nvarchar(128)=NULL,@pal_select nvarchar(128)=NULL,@button_choose_pal nvarchar(128)=NULL,@button_scan_serials_for_mol nvarchar(128)=NULL,@button_replenish nvarchar(128)=NULL,@replenish_loc nvarchar(128)=NULL\r\n,@ps nvarchar(128)=NULL, @pallet_mol_id int = NULL, @this_SP int = null, @pipa int = null\r\n,@but_10 nvarchar(128)=NULL\r\n\r\n*/\r\nexec sp_api_toast N'micro pick V11'\r\ndeclare @scanned_codes nvarchar(max) ; EXEC sp_api_modal_get_value @name='@scanned_codes',@value = @scanned_codes OUT --231211 IPV PREDECLARED\r\n-------------------------------------------------------\r\ndeclare @mob int = @uuid --opgeschoond scan ID \r\ndeclare @no_serials bit = null\r\ndeclare @this_pallet_id int =0 \r\ndeclare @this_pallet_nr int =0\r\ndeclare @this_pal_colli int =0\r\ndeclare @this_xstock_id int =0\r\ndeclare @this_item_lotnr nvarchar(128)\r\ndeclare @this_sku nvarchar(128)\r\ndeclare @this_pallet_type nvarchar(128) --'full, pick, replenish'\r\ndeclare @this_id int --temp table cursor\r\n--execute sp_api_toast '111111111'\r\n----------------------------------------------------------\r\n--\tafdwingen eerst replenishpallets halen en replenishen!\r\n----------------------------------------------------------\r\n\r\n\r\ndrop table if exists #mr \r\ndrop table if exists #list\r\ndeclare @button_gearriveerd_bij_pallet nvarchar(128)\r\n--declare @mob int=(select top 1 id from wms_micro_outbound order by id desc)\r\n--declare @T nvarchar(2000)\r\n\r\nselect --231130 TOP 1, zodat je per container goed bezig bent!\r\n\tp_pick.w_lot_id\r\n\t,pick_pal_id=p_pick.id\r\n\t,w_lot.container_number\r\n\t,adv_full_pos\r\n\t,p_pick.pallet_nr \r\n\t,mol.xstock_id\r\n\t,mol.id\r\n\t,mol.preferred_pallet_ids\r\n\t,mol.scanned_pallet_id\r\n\t,T=concat(N'Ga naar lokatie ',upper(mol.adv_full_pos), ' en haal daar'\r\n\t\t\t\t\t--,' en haal daar Pallet ',p_pick.pallet_nr\r\n\t\t\t\t\t--240122 eventueel willekeurig als de preferred_pallet al in gebruik is.. \r\n\t\t\t\t\t, case \r\n\t\t\t\t\t\twhen exists(select 1 from wms_micro_outbound_lines where scanned_pallet_id=mol.preferred_pallet_ids)\r\n\t\t\t\t\t\tthen ' een Pallet'\r\n\t\t\t\t\t\telse concat(' Pallet ',p_pick.pallet_nr)\r\n\t\t\t\t\t\tend\r\n\t\t\t\t\t\r\n\t\t\t\t\t,' met ',p_pick.colli,' colli' --231130\r\n\t\t\t\t\t,' van container ',upper(w_lot.container_number)\r\n\t\t\t\t\t,'. Artikel: ', upper(mol.lookupcode) \r\n\t\t\t\t\t)--* \r\n\t,remark --is dus 'replenish'\t\t\t\t\r\n\t,mol_amount=mol.amount --231130\r\ninto #mr \r\nfrom q_wms_micro_outbound_lines mol\r\n\t\t\tjoin w_lot on w_lot.id=mol.w_lot_id\r\n\t\t\tjoin w_pallet p_pick \r\n\t\t\t\t\ton p_pick.id=try_cast(preferred_pallet_ids as int) \r\n\t\t\t\t\t\t--dwing af dat de pallet uit de opgegeven mol-container komt\r\n\t\t\t\t\t\tand p_pick.w_lot_id=mol.w_lot_id\r\n\t\t\twhere mol.wms_micro_outbound_id=@mob \r\n\t\t\t\tand remark='replenish' \r\n\t\t\t\tand (\r\n\t\t\t\t\tscanned_pallet_id is null \r\n\t\t\t\t\tor NOT exists( select 1 from w_pallet where id=scanned_pallet_id and micro_pick_allowed=1)\r\n\t\t\t\t\t)\r\n\t\t\t\t\r\n\t\t\t\t--231020 met DENNIS LIVE IN MESONINE !!! (als de items al op de mol zijn toegekend, dan niet meer replenishen , want er waren er kennelijk genoeg\r\n\t\t\t\t-- nu wordt alles tegengehouden.. ook de pallets die wel gereplenished moeten worden..\r\n\t\t\t\tAND\tmol.linked_amount <> mol.amount\r\n\r\n--dev test select * from #modal_report \r\n--live \r\nselect * into #list from #mr\r\nif exists(select 1 from #list) exec sp_api_modal_text N'REPLENISH PALLETS',@class='h1'\r\nset @T = NULL\r\nif exists(select 1 from #mr)\r\nBEGIN\r\n\tSet @T='<ul>'--start lijst\r\nEND\r\n\r\nwhile exists(select 1 from #mr)\r\nBEGIN\r\n\tset @this_id=(select top 1 id from #mr)\r\n\tset @T=concat(@T,'<li>',(select T from #mr where id=@this_id),'</li>')\r\n\tdelete from #mr where id=@this_id\r\nEND\r\nif @T >''--lijst afsluiten\r\nBEGIN\r\nset @t=concat(@T,'</ul>')\r\nexec sp_api_modal_html @T\r\nEND\r\n\r\nWHILE exists(select 1 from #list) --bevat te replenishen pallets\r\nBEGIN -- 231004 REPLENISH PART\r\n\t--exec sp_api_modal_table @tmptable=N'#mr',@print=1,@excel=1 -- output to react client\r\n\tEXEC sp_api_modal_button @name='@button_gearriveerd_bij_pallet',@value = 'Ik ben bij de pallet', @valueout = @button_gearriveerd_bij_pallet OUT,@class='btn-danger',@key='Enter'\r\n\tif @button_gearriveerd_bij_pallet is null RETURN\r\n\t--scan pallet-sticker\r\n\texec sp_api_modal_text N'scan pallet sticker'\r\n\tEXEC sp_api_modal_input @name = '@ps', @value = @ps OUT ,@focus=1\r\n\r\n\tif @ps is null return\r\n\tif left(@ps,3)<>'ps:'\r\n\tBEGIN\r\n\t\texec sp_api_modal_text N'Dit is geen Tracy pallet sticker QR code'\r\n\t\t--exec sp_api_modal_restart--231130\r\n\r\n\t\tRETURN\r\n\tEND\t\r\n\r\n\r\n\tset @this_pallet_id=right(@ps,len(@ps)-3)\r\n\tif  not exists(select * from w_pallet where id=@this_pallet_id and w_lot_id in(select w_lot_id from #list) )\r\n\tBEGIN\r\n\t\tif  exists(select * from wms_micro_outbound_lines where scanned_pallet_id=@this_pallet_id )\r\n\t\tBEGIN --231009 pallet is er al.\r\n\t\t\texec sp_api_modal_text N'Deze pallet is al gescand en toegevoegd.'\r\n\t\tEND\t\r\n\t\telse BEGIN\t\r\n\t\t\texec sp_api_modal_text N'Dit is een pallet uit een ** VERKEERDE ** container'\r\n\t\tEND\r\n\t\texec sp_api_modal_beep 1100, 500 --error !\r\n\t\t--set @T=concat('pallet lot: ',(select w_lot_id from w_pallet where id=@this_pallet_id and w_lot_id in(select w_lot_id from #list) ))\r\n\t\t--exec sp_api_modal_text @T\r\n\t\t--exec sp_api_modal_table @tmptable=N'#modal_report',@print=1,@excel=1 -- output to react client\r\n\t\texec sp_api_modal_restart--231130\r\n\t\tRETURN\r\n\tEND\r\n\r\n\tif  not exists(select * from w_pallet p\r\n\t\t\t\t\twhere p.id=@this_pallet_id \r\n\t\t\t\t\t\t--\tand xstock_id in(select xstock_id from #list) \r\n\t\t\t\t\t\tand exists(select 1 from #list where #list.xstock_id=p.xstock_id and #list.mol_amount <= p.colli) --de gekozen pallet moet voor replenishen voldoende colli hebben 231130!!\r\n\t\t\t\t)\r\n\tBEGIN\r\n\t\texec sp_api_modal_text N'(1)Dit is ** NIET ** de juiste pallet. => Wel juiste container, maar verkeerd artikel of verkeerd colli aantal op de pallet!'\r\n\t\texec sp_api_modal_beep 1100, 500 --error !\r\n\t\t--set @T=concat('pallet lot: ',(select w_lot_id from w_pallet where id=@this_pallet_id and w_lot_id in(select w_lot_id from #list) ))\r\n\t\t--exec sp_api_modal_text @T\r\n\t\t--exec sp_api_modal_table @tmptable=N'#modal_report',@print=1,@excel=1 -- output to react client\r\n\t\t\t--exec sp_api_modal_restart--231130\r\n\t\t\t--EXEC sp_api_modal_values_clear @ignore='@uuid' --231130 KEEP SCANNED QR\r\n\t\t\texec sp_api_modal_value @name=N'@button_gearriveerd_bij_pallet'\r\n\t\t\texec sp_api_modal_value @name=N'@ps' -- er bij\r\n\t\tRETURN\r\n\tEND\r\n\tdeclare @foutinfo nvarchar(max)\r\n\t-- extra check 241213  -------------------------------------\r\n\tif exists(select 1 from mol where scanned_pallet_id=@this_pallet_id and mob_id<>@mob)\r\n\tBEGIN\r\n\t\texec sp_api_modal_ALERT N'FOUT','Deze pallet is al gekoppeld aan een andere outbound!'\r\n\t\texec sp_api_modal_beep 1100, 500 --error !\r\n\t\tdeclare @FOUT_bound int =(select top 1 mob_id from mol where scanned_pallet_id=@this_pallet_id and mob_id<>@mob)-- foute outbound..\r\n\r\n\r\n\t\tSET @foutinfo =\r\n\t\t\tconcat('Bij Outbound met ref: '\r\n\t\t\t\t\t,(select out_ref from mob where id=@mob)\r\n\t\t\t\t\t,' werd pallet id: ', @this_pallet_id\r\n\t\t\t\t\t,' (pal_nr: ', (select pallet_nr from w_pallet where id=@this_pallet_id),' )'\r\n\t\t\t\t\t,' gescand, maar die is (onjuist) gelinkt aan outbound : '\r\n\t\t\t\t\t,(select out_ref from mob where id=@FOUT_bound))\r\n\t\t-- Verstuur de e-mail\r\n\t\tEXEC sp_api_email \r\n\t\t\t@To = 'rick@tracy.nu + mterlouw@rwsbv.com',\r\n\t\t\t@Subject = 'Pallet FOUT ontdekt bij Replenish Scan',\r\n\t\t\t@Body = @foutinfo;\r\n\t\t\r\n\t\texec sp_api_modal_value @name=N'@button_gearriveerd_bij_pallet'\r\n\t\texec sp_api_modal_value @name=N'@ps' -- er bij\r\n\t\tRETURN\r\n\tEND\r\n\t-- einde  241213 extra check------------------------------- \r\n\r\n\r\n\t--we zitten nu absoluut op een pallet uit de juiste container en met het juiste artikel\r\n\t-- voorbereiden op replenishen\r\n\tset @this_pallet_type=N'REPLENISH'\r\n\tset @this_xstock_id=(select xstock_id from w_pallet where id=@this_pallet_id)\r\n\t--#list bevat hier alleen maar replenish regels\r\n\r\n/*\tif exists(select id from #list where scanned_pallet_id=@this_pallet_id) -- de pallet moet nog op MICRO_PICK_ALLOWED worden gezet\r\n\tBEGIN\r\n\t\texec sp_api_modal_text N'zet deze geselecteerde pallet op micro pick allowed....'\r\n\t\treturn\r\n\tEND\r\n*/\r\n/*\tif exists(select id from #list where @this_pallet_id in (select value from string_split(preferred_pallet_ids,','))) -- gewenst\r\n\tBEGIN\r\n\t\tset @T=N'Zet deze gewenste pallet definitief naar \"scanned_pallet_id\" en micro pick allowed....'\r\n\t\texec sp_api_modal_text @T\r\n\t\treturn\r\n\tEND\r\n*/\r\n\tif exists(select id from #list where scanned_pallet_id=@this_pallet_id) -- de pallet moet nog op MICRO_PICK_ALLOWED worden gezet\r\n\t\tOR exists(select id from #list where @this_pallet_id in (select value from string_split(preferred_pallet_ids,','))) -- gewenst\r\n\t\tOR exists(select id from #list where xstock_id=@this_xstock_id and @this_pallet_id not in (select value from string_split(preferred_pallet_ids,','))  ) -- alternatief\r\n\t--*************************\r\n\t-- HET RESPLENISHEN IS HIER\r\n\t--************************* \r\n\tBEGIN\r\n\t\t--231006 zorg dat er een pick pallet is\r\n\t\t--declare @pipa int = null\r\n\t\texec create_outbound_pickpallet --SELECTEERT OF MAAKT NIEUW..\r\n\t\t\t@wms_micro_outbound_id = @mob\r\n\t\t\t,@pallet_id  =@pipa output\r\n\t\t--print @pipa\r\n\r\n\t\tset @pallet_mol_id=(select top 1 id from #list where xstock_id=@this_xstock_id and scanned_pallet_id is null) -- er kan maar 1 replenish zijn voor 1 artikel !\r\n\t\t--set @T=concat(N'Deze pallet (pal.nr. ',(select pallet_nr from w_pallet where id=@this_pallet_id),') als alternatief gebruiken en definitief naar \"scanned_pallet_id\" en micro pick allowed....ipv prefrerred ', (select string_agg(preferred_pallet_ids,' *** ') from #list))\r\n\t\t--exec sp_api_modal_text @T\r\n\r\n\t\tif @replenish_loc is null \r\n\t\tBEGIN\r\n\t\t\tset @replenish_loc=(select pick_position from xstock where id=@this_xstock_id)\r\n\t\tEND\t\r\n\t\t--check of de replenishment al is geregistreerd op de pallet\r\n\t\t-- losse items picken en darvan serienummers scannen is niet hier. dit is alleen replenishen!\r\n\t\tif not exists( select * from w_pallet where id=@this_pallet_id and micro_pick_allowed=1)\r\n\t\tBEGIN\r\n\t\t\tEXEC sp_api_modal_input @name = '@replenish_loc', @value = @replenish_loc OUT \r\n\t\t\tEXEC sp_api_modal_button @name='@button_replenish',@value = 'Replenish NOW', @valueout = @button_replenish OUT,@class='btn-danger'\r\n\t\t\tif @button_replenish is null return\t\r\n\t\t\tif @replenish_loc is NULL\r\n\t\t\tBEGIN\r\n\t\t\t\texec sp_api_modal_text N'De POSITIE CODE voor de replenishmentlokatie is verplicht!'\r\n\t\t\t\treturn\r\n\t\t\tEND\r\n\t\t\t\r\n\t\t\t--update w_pallet set micro_pick_allowed=1,position_code=@replenish_loc where id=@this_pallet_id\r\n\t\t\t--update wms_micro_outbound_lines set scanned_pallet_id=@this_pallet_id where id=@pallet_mol_id\r\n\t\t\t-- is hieronder\r\n\t\t\texec sp_api_modal_clear\r\n\t\t\r\n\t\tEND\r\n\r\n\r\n\t\tupdate top(1) wms_micro_outbound_lines \r\n\t\t\tset scanned_pallet_id = @this_pallet_id\r\n\t\t\t\t,chk=1\r\n\t\t\t\t,remark='pick' --231006 van replenish naar pick\r\n\t\t\twhere ( scanned_pallet_id is null or scanned_pallet_id=@this_pallet_id)\r\n\t\t\t\tand id = @pallet_mol_id\r\n\t\t\r\n\t\tupdate w_pallet \r\n\t\t\tset micro_pick_allowed=1 \r\n\t\t\t\t,position_code=@replenish_loc--'rick'\r\n\t\t\twhere id=@this_pallet_id\t\t\r\n\r\n\t\tdeclare @assign_micro_items int =(select amount from wms_micro_outbound_lines where id=@pallet_mol_id)\r\n\t\twhile isnull(@assign_micro_items,0) >0\r\n\t\tBEGIN\r\n\t\t\tupdate top(1) wms_micro_item set w_pallet_pick_id=@pipa, wms_MICRO_OUTBOUND_LINES_ID=@pallet_mol_id where wms_micro_item.w_pallet_id=@this_pallet_id and w_pallet_pick_id is null\r\n\t\t\t--exec sp_api_toast N'  ** ITEM **'\r\n\t\t\t--exec sp_api_toast @this_pallet_id\r\n\t\t\t--exec sp_api_toast @pipa\r\n\t\t\tset @assign_micro_items = @assign_micro_items -1\r\n\t\tEND\t\r\n\t\treturn\r\n\tEND\r\n\r\n\texec sp_api_modal_text N'gelukt'\r\n\t\r\n\r\n\r\n\tset @this_SP= (select scanned_pallet_id from q_wms_micro_outbound_lines \r\n\t\t\t\t\twhere wms_micro_outbound_id=@mob \r\n\t\t\t\t\t\tand remark='replenish' \r\n\t\t\t\t\t\tand exists( select 1 from w_pallet where id=scanned_pallet_id and micro_pick_allowed=1)\r\n\t\t\t\t\t) \r\n\tif @this_SP is not NULL\r\n\tBEGIN\r\n\t\tdelete from #list where scanned_pallet_id=@this_SP and remark='replenish'\t\t\t\r\n\tEND\t\t\r\n\t\t\t\t\r\n\t\r\n\t----------------------------------------------------------------------------------------------------\r\n\t-- 231002 ALS ER NOG IETS GEREGELD MOET WORDEN BIJ REPLENISHMENT, DAN NIET VERDER. => EERST REGELEN! \r\n\t----------------------------------------------------------------------------------------------------\t\t\t\t\t\r\n\t--exec sp_api_modal_restart--231130\r\n\tEXEC sp_api_modal_value @name='@button_gearriveerd_bij_pallet' --231130 wis allleen deze waarde\r\n\tEXEC sp_api_modal_value @name='@ps' --231130 wis allleen deze waarde\r\n\t--exec sp_api_modal_restart--231130\r\n\treturn\r\nEND --REPLENISH PALLETS HALEN VAN BULK\r\n\r\n\r\n----------------------------------------------------------------------------------------------------\r\n-- 231010 VOLLE PALLETS PAKKEN VAN BULK EN KOPPELEN AAN DE MOL VAN DEZE OUTBOUND\r\n----------------------------------------------------------------------------------------------------\t\t\t\t\t\r\n\r\ndrop table if exists #fpa \r\ndrop table if exists #fpalist\r\n\r\nselect top 1 --231130 2x top 1 !!!\r\n\tp_pick.w_lot_id\r\n\t,pick_pal_id=p_pick.id\r\n\t,w_lot.container_number\r\n\t,adv_full_pos\r\n\t,p_pick.pallet_nr \r\n\t,mol.xstock_id\r\n\t,mol.id\r\n\t,mol.preferred_pallet_ids\r\n\t,mol.scanned_pallet_id\r\n\t,T=concat(N'Ga naar lokatie '\r\n\t\t\t\t--240826,upper(mol.adv_full_pos) --240826 voorheen: dit is een lokatie van een pallet die uit de container komt \r\n\t\t\t\t,isnull ((select position_code from w_pallet where id=p_pick.id) --niew: dit er voor gezet..12:05\r\n\t\t\t\t\t\t,upper(mol.adv_full_pos) --240826 nu baseren op de prefrerred pallet!\r\n\t\t\t\t\t\t)\r\n\t\t\t\t,' en haal daar'\r\n\t\t\t\t\t--240122 was,' en haal daar Pallet ',p_pick.pallet_nr\r\n\t\t\t\t\t--eventueel willekeurig als de preferred_pallet al in gebruik is.. \r\n\t\t\t\t\t, case \r\n\t\t\t\t\t\twhen exists(select 1 from wms_micro_outbound_lines where scanned_pallet_id=mol.preferred_pallet_ids)\r\n\t\t\t\t\t\tthen ' een Pallet'\r\n\t\t\t\t\t\telse concat(' Pallet ',p_pick.pallet_nr)\r\n\t\t\t\t\t\tend\r\n\t\t\t\t\t\r\n\t\t\t\t\t,' met ',p_pick.colli,' colli'--231130\r\n\t\t\t\t\t,' van container ',upper(w_lot.container_number)\r\n\t\t\t\t\t,'. Artikel: ', upper(mol.lookupcode) \r\n\t\t\t\t\t)--* \r\n\t,remark --is dus 'full'\t\t\t\t\t\t\t\r\n\t,mol_amount=mol.amount\t\t--231130\r\ninto #fpa \r\nfrom q_wms_micro_outbound_lines mol\r\n\t\t\tjoin w_lot on w_lot.id=mol.w_lot_id\r\n\t\t\tjoin w_pallet p_pick \r\n\t\t\t\t\ton p_pick.id=try_cast(preferred_pallet_ids as int) \r\n\t\t\t\t\t\t--dwing af dat de pallet uit de opgegeven mol-container komt\r\n\t\t\t\t\t\tand p_pick.w_lot_id=mol.w_lot_id\r\n\t\t\twhere mol.wms_micro_outbound_id=@mob \r\n\t\t\t\tand remark='full' \r\n\t\t\t\tand (\r\n\t\t\t\t\tscanned_pallet_id is null \r\n\t\t\t\t\t-- dit is alleen bij replenishment pallets !!!or NOT exists( select 1 from w_pallet where id=scanned_pallet_id and micro_pick_allowed=1)\r\n\t\t\t\t\t)\r\n--dev test select * from #modal_report \r\n--live \r\nselect * into #fpalist from #fpa  --FULL PALLET LIST\r\nif exists(select 1 from #fpalist) exec sp_api_modal_text N'VOLLE PALLETS OUTBOUND',@class='h1'\r\nset @T = NULL\r\nif exists(select 1 from #fpa)\r\nBEGIN\r\n\tSet @T='<ul>'--start lijst\r\nEND\r\n\r\nwhile exists(select 1 from #fpa)\r\nBEGIN\r\n\tset @this_id=(select top 1 id from #fpa)\r\n\tset @T=concat(@T,'<li>',(select T from #fpa where id=@this_id),'</li>')\r\n\tdelete from #fpa where id=@this_id\r\nEND\r\nif @T >''--lijst afsluiten\r\nBEGIN\r\nset @t=concat(@T,'</ul>')\r\nexec sp_api_modal_html @T\r\nEND\r\n\r\nWHILE exists(select 1 from #fpalist) --bevat volle pallets die op de outbound mee gaan\r\nBEGIN -- 231004 REPLENISH PART\r\n\t--exec sp_api_modal_table @tmptable=N'#mr',@print=1,@excel=1 -- output to react client\r\n\tEXEC sp_api_modal_button @name='@button_gearriveerd_bij_pallet',@value = 'Ik ben bij de pallet', @valueout = @button_gearriveerd_bij_pallet OUT,@class='btn-danger',@key='Enter'\r\n\tif @button_gearriveerd_bij_pallet is null RETURN\r\n\t--scan pallet-sticker\r\n\texec sp_api_modal_text N'scan pallet sticker'\r\n\tEXEC sp_api_modal_input @name = '@ps', @value = @ps OUT ,@focus=1\r\n\r\n\tif @ps is null return\r\n\tif left(@ps,3)<>'ps:'\r\n\tBEGIN\r\n\t\texec sp_api_modal_text N'Dit is geen Tracy pallet sticker QR code'\r\n\t\tRETURN\r\n\tEND\t\r\n\r\n\r\n\tset @this_pallet_id=right(@ps,len(@ps)-3)\r\n\tif  not exists(select * from w_pallet where id=@this_pallet_id and w_lot_id in(select w_lot_id from #fpalist) )\r\n\tBEGIN\r\n\t\tif  exists(select * from wms_micro_outbound_lines where scanned_pallet_id=@this_pallet_id )\r\n\t\tBEGIN --231009 pallet is er al.\r\n\t\t\texec sp_api_modal_text N'Deze pallet is al gescand en toegevoegd.'\r\n\t\tEND\t\r\n\t\telse BEGIN\t\r\n\t\t\texec sp_api_modal_text N'Dit is een pallet uit een ** VERKEERDE ** container'\r\n\t\tEND\r\n\t\texec sp_api_modal_beep 1100, 500 --error !\r\n\t\t--set @T=concat('pallet lot: ',(select w_lot_id from w_pallet where id=@this_pallet_id and w_lot_id in(select w_lot_id from #fpalist) ))\r\n\t\t--exec sp_api_modal_text @T\r\n\t\t--exec sp_api_modal_table @tmptable=N'#modal_report',@print=1,@excel=1 -- output to react client\r\n\t\tRETURN\r\n\tEND\r\n\r\n\tif  not exists(select * from w_pallet p where p.id=@this_pallet_id \r\n\t\t\t\t\t\t--  and xstock_id in(select xstock_id from #fpalist) \r\n\t\t\t\t\t\t--\tand xstock_id in(select xstock_id from #list) \r\n\t\t\t\t\t\tand exists(select 1 from #fpalist where #fpalist.xstock_id=p.xstock_id and #fpalist.mol_amount = p.colli) --de gekozen FULL PALLET pallet exact het opgegeven colli-aantal hebben 231130!!\r\n\t\t\t\t\t)\r\n\tBEGIN\r\n\t\texec sp_api_modal_text N'(2)Dit is ** NIET ** de juiste pallet. => Wel juiste container, maar verkeerd artikel (of CPP onjuist)!'\r\n\t\texec sp_api_modal_beep 1100, 500 --error !\r\n\t\t--set @T=concat('pallet lot: ',(select w_lot_id from w_pallet where id=@this_pallet_id and w_lot_id in(select w_lot_id from #fpalist) ))\r\n\t\t--exec sp_api_modal_text @T\r\n\t\t--exec sp_api_modal_table @tmptable=N'#modal_report',@print=1,@excel=1 -- output to react client\r\n\t\t\t\t\t--exec sp_api_modal_restart --2311390 extra probeersel..\r\n\t\t\t\t\t--EXEC sp_api_modal_values_clear @ignore='@uuid' --231130 KEEP SCANNED QR\r\n\t\t\t\t\texec sp_api_modal_value @name=N'@button_gearriveerd_bij_pallet'\r\n\t\t\t\t\texec sp_api_modal_value @name=N'@ps'\r\n\t\t\t\t\t--exec sp_api_modal_restart--231130 --er bij proberen!!\r\n\t\tRETURN\r\n\tEND\r\n\r\n\r\n\t--we zitten nu absoluut op een pallet uit de juiste container en met het juiste artikel\r\n\t-- voorbereiden op replenishen\r\n\texec sp_api_modal_beep 1800, 200\r\n\tset @this_pallet_type=N'FULL'\r\n\tset @this_xstock_id=(select xstock_id from w_pallet where id=@this_pallet_id)\r\n\tset @this_pal_colli=(select colli from w_pallet where id=@this_pallet_id) -- pallet heeft altijd colli en niet altijd 'items' \r\n\t--#fpalist bevat hier alleen maar full pallet regels (full pallets assignment)\r\n\r\n\r\n\tif  exists(select id from #fpalist where @this_pallet_id in (select value from string_split(preferred_pallet_ids,','))) -- gewenst\r\n\t\tOR exists(select id from #fpalist where xstock_id=@this_xstock_id and @this_pallet_id not in (select value from string_split(preferred_pallet_ids,','))  ) -- alternatief\r\n\t--***********************************\r\n\t-- HET FULL PALLET ASSIGNMENT IS HIER\r\n\t--*********************************** \r\n\tBEGIN\r\n\t\tset @pallet_mol_id=(select top 1 id from #fpalist where xstock_id=@this_xstock_id \r\n\t\t\t\t\t\t\t\tand scanned_pallet_id is null \r\n\t\t\t\t\t\t\t\tand mol_amount=@this_pal_colli --231130 collicheck er bij!\r\n\t\t\t\t\t\t\t) -- er mag maar 1 full pallet zijn voor 1 MOL\r\n\t\t--set @T=concat(N'Deze pallet (pal.nr. ',(select pallet_nr from w_pallet where id=@this_pallet_id),') als alternatief gebruiken en definitief naar \"scanned_pallet_id\" en micro pick allowed....ipv prefrerred ', (select string_agg(preferred_pallet_ids,' *** ') from #fpalist))\r\n\t\t--exec sp_api_modal_text @T\r\n\r\n\t\tif exists( select 1 from wms_micro_outbound_lines where scanned_pallet_id=@this_pallet_id)\r\n\t\tBEGIN --afbreken\r\n\t\t\tset @T=concat('Pallet nummer ',(select pallet_nr from w_pallet where id=@this_pallet_id),' is al gescand')\r\n\t\t\texec sp_api_modal_text @T\r\n\t\t\treturn\r\n\t\tend\r\n\r\n\t\t--=======================================extra 250502============================================================================\r\n\t\tif exists( select 1 from w_pallet_out po where w_pallet_id=@this_pallet_id and xlandfreight_id <> (select lf_id from mob where id=@mob))\r\n\t\tBEGIN --afbreken\r\n\t\t\tset @T=concat('Pallet nummer ',(select pallet_nr from w_pallet where id=@this_pallet_id),' staat gekoppeld aan een andere outbound vracht.')\r\n\t\t\texec sp_api_modal_text @T\r\n\r\n\t\t\t--rick een mailtje!\r\n\t\t\tSET @foutinfo = CONCAT(N'Mob: ',@mob, ' MOL: ',@mol, 'ScannedPallet: ',@this_pallet_id)\r\n\t\t\t\tEXEC sp_api_email @to = 'rick@tracy.nu,gb@tracy.nu',\r\n\t\t\t\t\t@subject = 'RWS - pallet geweigerd. Scanned pallet staat al op andere outbound vracht!',\r\n\t\t\t\t\t@Body = @foutinfo;\r\n\r\n\t\t\treturn\r\n\t\tend\r\n\t\t--=======================================extra 250502============================================================================\r\n\r\n\t\t-------------------------------------------------------------------------------------- A S S I G N   S C A N N E D    P A L L E T\r\n\t\t--oke verder\r\n\t\tupdate top(1) wms_micro_outbound_lines \r\n\t\t\tset scanned_pallet_id = @this_pallet_id\r\n\t\t\t\t,chk=1\r\n\t\t\t\t\r\n\t\t\twhere ( scanned_pallet_id is null or scanned_pallet_id=@this_pallet_id)\r\n\t\t\t\tand id = @pallet_mol_id\r\n\t\t\t\tand remark ='full' -- moet altijd al zo zijn\r\n\t\t--oude items van prefrerred pallet weghalen\r\n\t\t\r\n\t\tIF EXISTS( --GB241216\r\n\t\t\tSELECT * FROM wms_micro_outbound_lines WHERE id <> @pallet_mol_id AND preferred_pallet_ids =\r\n\t\t\t(select preferred_pallet_ids from wms_micro_outbound_lines where id=@pallet_mol_id)\r\n\t\t\t)\r\n\t\t\tBEGIN\r\n\t\t\t\tSET @foutinfo = CONCAT(N'SELECT * FROM wms_micro_outbound_lines WHERE preferred_pallet_ids = ''',\r\n\t\t\t\t\t\t(select preferred_pallet_ids from wms_micro_outbound_lines where id=@pallet_mol_id)\r\n\t\t\t\t\t,'''')\r\n\t\t\t\tEXEC sp_api_email @to = 'rick@tracy.nu,gb@tracy.nu',\r\n\t\t\t\t\t@subject = 'RWS - preferred_pallet_ids probleem!',\r\n\t\t\t\t\t@Body = @foutinfo;\r\n\r\n\t\t\t\t--250408 EVEN niet verder !\r\n\t\t\t\t--EXEC SP_API_MODAL_ALERT N'We breken even af!. Tracy heeft nu een mail om te kijken wat er is' \r\n\t\t\t\t--             RETURN \r\n\t\t\t\t-- 250408--------------------------\r\n\t\t\tEND\r\n\r\n\r\n\t\tupdate w_pallet set wms_micro_outbound_id=null\r\n\t\twhere wms_micro_outbound_id=@mob \r\n\t\tand id in (select preferred_pallet_ids from wms_micro_outbound_lines where id=@pallet_mol_id)\r\n\t\tupdate wms_micro_item \r\n\t\t\tset w_pallet_pick_id=NULL\r\n\t\t\t\t, wms_MICRO_OUTBOUND_LINES_ID=NULL\r\n\t\t\t\t,item_serial_number = null \r\n\t\t\twhere wms_MICRO_OUTBOUND_LINES_ID=@pallet_mol_id \r\n\t\t\t\r\n\r\n\t\t--nieuwe items van gekozen pallet\r\n\t\tupdate w_pallet set wms_micro_outbound_id=@mob where id =@this_pallet_id  --231108 IK NEEM AAN MOB! (er stond MOL )\r\n\t\tupdate wms_micro_item \r\n\t\t\tset w_pallet_pick_id=w_pallet_id\r\n\t\t\t\t, wms_MICRO_OUTBOUND_LINES_ID=@pallet_mol_id \r\n\t\t\twhere wms_micro_item.w_pallet_id=@this_pallet_id\r\n\t\t\t\t and w_pallet_pick_id is null -- in een heel fout geval zou er al een paar items aan een andere outbound kunnen zijn gekoppeld\r\n\t\t-- ?? return\r\n\tEND\r\n\r\n\texec sp_api_modal_text N'gelukt'\r\n\tdelete from #fpalist where id=@pallet_mol_id\r\n\t\r\n\tEXEC sp_api_modal_value @name='@button_gearriveerd_bij_pallet' --231130 wis alleen deze\r\n\tEXEC sp_api_modal_value @name='@ps' --231130 wis allleen deze waarde\r\n\t--exec sp_api_modal_restart--231130 --er bij proberen!!\r\n\treturn\r\n\t--exec sp_api_modal_restart\r\n\t\r\n\t\t\t\t\r\n\t\r\n\t----------------------------------------------------------------------------------------------------\r\n\t-- 231002 ALS ER NOG IETS GEREGELD MOET WORDEN BIJ REPLENISHMENT, DAN NIET VERDER. => EERST REGELEN! \r\n\t----------------------------------------------------------------------------------------------------\t\t\t\t\t\r\n\r\nEND --FULL PALLETS HALEN VOOR DE MICRO OUTBOUND\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n--afkappen na replenish pallets en volle pallets toekennen aan de MOL\r\n--RETURN\r\n\r\n/*\r\n\t--poortwachter\r\n\tif exists(select 1 from q_wms_micro_outbound_lines \r\n\t\t\t\twhere wms_micro_outbound_id=@mob \r\n\t\t\t\t\tand remark='replenish' \r\n\t\t\t\t\tand (\r\n\t\t\t\t\t\tscanned_pallet_id is null \r\n\t\t\t\t\t\tor NOT exists( select 1 from w_pallet where id=scanned_pallet_id and micro_pick_allowed=1)\r\n\t\t\t\t\t\t) \r\n\t\t\t)\r\n\tRETURN -- 231002 ALS ER NOG IETS GEREGELD MOET WORDEN BIJ REPLENISHMENT, DAN NIET VERDER.. EERST REGELEN! \t\t\t\r\n*/\r\n\r\n\r\n--check of er nog VOLLE PALLETS GEHAALD MOETEN WORDEN:\r\n\r\n\r\n--231006\r\nif exists(select 1 from @main_db.dbo.mob_pallets(@mob) where chk=0 or is_processed=0)\r\nbegin\r\n\t--hieronder misschien niet meer nodig.. tot NORMAAL\r\n\t--exec sp_api_toast N'n o r m a a l'\r\n\tgoto NORMAAL --231009 nu gan we serials toevoegen!!!\r\nend\t\r\n\r\n\r\n\r\n\r\n--exec sp_api_toast N'V6'\r\nif exists(select 1 from @main_db.dbo.mob_pallets(@mob) where chk=0 or is_processed=0)\r\nBEGIN\r\n--was\r\n\t--set @T=concat(N'Nog te scannen pallets: ',(select string_agg(concat(plts,' pallets op locatie ',position_code, ' met sku: ',sku, ' en cpp= ',cpp),' - ') from @main_db.dbo.mob_pallets(@mob) where chk=0 ))\r\n\t--exec sp_api_modal_text @T\r\n\t--set @T=concat(N'Scan een opgegeven pallet van de pick-instruction met ref: ',(select UPPER(out_ref) from wms_micro_outbound where id=@mob))\r\n\t--exec sp_api_modal_text @T\r\n--nu\r\n\tif exists(select 1 from wms_micro_outbound_lines where wms_micro_outbound_id=@mob and scanned_pallet_id is null) --231006 was is_processed=0)\r\n\tBEGIN\r\n\t\t--231013 was set @T=concat('Deze pallets zijn nog niet (volledig) op serienummers gescand. Haal de pallet op en Scan de pallet-stickers..','')\r\n\t\tset @T=concat('Deze pallets zijn nog opgehaald en pallet-sticker gescand.','Haal de pallet eerst op. Serienummers scannen komt later.')--niet (volledig) op serienummers gescand. Haal de pallet op en Scan de pallet-stickers..','')\r\n\t\texec sp_api_modal_text @T\r\n\t\tselect [nr~col-1]=pallet_nr\r\n\t\t\t\t,[sku~col-3]= sku\r\n\t\t\t\t--,[lookupcode~col-5]=lookupcode\r\n\t\t\t\t,[amt~col-2]=amount\r\n\t\t\t\t,[st~col-1]=chk\r\n\t\t\t\t,[ser.~col-2]=linked_serials\t\r\n\t\t\t\t,[remark~col-3]=remark\r\n\t\t\t\t\r\n\t\tinto #palnoser from q_wms_micro_outbound_lines where wms_micro_outbound_id=@mob and chk=0 --231013 was (is_processed=0 or chk=0) maar serienummers komen later!\r\n\t\texec sp_api_modal_table @tmptable=N'#palnoser'\r\n\t\t\r\n\r\n\tEND\r\n\r\n\r\nif NOT  exists(select 1 from wms_micro_outbound_lines where wms_micro_outbound_id=@mob and scanned_pallet_id is null) --231006 was is_processed=0)\r\nBEGIN\r\n\t--exec sp_api_modal_alert N'klaar (not)'\r\n\tgoto NORMAAL\r\n\treturn\r\nEND\t\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\tif 1=1\r\n\tbegin\r\n\t\t\r\n\t\tEXEC sp_api_modal_input @name = '@pal_select', @value = @pal_select OUT,@hidden=0,@select=1\r\n\t\tEXEC sp_api_modal_button @name='@pal_select_button',@value = N'Check', @valueout = @pal_select_button OUT,@class='btn-danger',@key='F5' --Enter kan niet verstoort de flow\r\n\t\tif @pal_select_button is null return\r\n\t\tif @pal_select is null return\r\n\t\tif left(@pal_select,3) <> N'ps:'\r\n\t\tBEGIN\r\n\t\t\texec sp_api_modal_text N'Dit is geen palletsticker'\r\n\t\t\treturn\r\n\t\tEND\r\n\t\t\r\n\t\t--oke verder\r\n\t\tset @this_pallet_id=right(@pal_select,len(@pal_select)-3)\r\n\t\tselect \r\n\t\t\t@this_pallet_nr=pallet_nr\r\n\t\t\t,@this_xstock_id=xStock_id\r\n\t\t\t,@this_item_lotnr=pallet_art_lotnr\r\n\t\t\t,@this_pal_colli=colli\r\n\t\tfrom w_pallet where id=@this_pallet_id\r\n\t\t--set @T=concat('scanned pallet stockid: ',@this_xstock_id)\r\n\t\t--exec sp_api_toast @T --231001\r\n\t\tset @this_sku=(select sku from xstock where id=@this_xstock_id)\r\n\t\t--set @T=concat('U heeft gekozen pallet nr: ',@this_pallet_nr)\r\n\t\t--exec sp_api_modal_text @T\r\n\r\n\t\t--declare @pallet_mol_id int =0 -- zoek het mol id die deze pallet als preferred heeft staan \r\n\t\tset @pallet_mol_id=( select top 1 id from wms_micro_outbound_lines \r\n\t\t\t\t\t\t\twhere wms_micro_outbound_id=@uuid \r\n\t\t\t\t\t\t\t\tand (@this_pallet_id in ([preferred_pallet_ids]) \r\n\t\t\t\t\t\t\t\t\tOR @this_pallet_id=[scanned_pallet_id] --(als hij al gekoppeld is aan een MOL)\r\n\t\t\t\t\t\t\t\t\t) \r\n\t\t\t\t\t\t\t)\r\n\t\t\r\n\t\tif @pallet_mol_id is not NULL -- het is een bekende pallet (id stemt overeen met preferred)!\r\n\t\tbegin\r\n\t\t\tset @mol=@pallet_mol_id\r\n\t\t\t----------------------------PICK / FULL / REPLENISH PALLET ?? -------------------\r\n\t\t\tSET @this_pallet_type=(select upper(remark) from wms_micro_outbound_lines where id=@mol)\r\n\t\t\t---------------------------------------------------------------------------------\r\n\t\t\tif (select chk from wms_micro_outbound_lines where id=@pallet_mol_id) =1\r\n\t\t\tBEGIN\r\n\t\t\t\t-- opmerking\r\n\t\t\t\tset @T=concat(N'Deze '\r\n\t\t\t\t\t\t\t\t--,( select UPPER(remark) from wms_micro_outbound_lines where wms_micro_outbound_id=@uuid and @this_pallet_id in ([preferred_pallet_ids]))\r\n\t\t\t\t\t\t\t\t,@this_pallet_type\r\n\t\t\t\t\t\t\t\t,' pallet is al definitief geselecteerd bij deze micro outbound.'\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\texec sp_api_modal_text @T\r\n\t\t\t\t\r\n\r\n\t\t\t\t--inserted 231001 gelijk hier mogelijkheid om serienummers te scannen:\r\n\t\t\t\tif (select is_processed from wms_micro_outbound_lines where id=@pallet_mol_id) =1\r\n\t\t\t\tBEGIN\r\n\t\t\t\t\tset @T=concat(N'Deze pallet is volledig gescand (inc. ',(select count(*) from wms_micro_item where wms_micro_outbound_lines_id=@pallet_mol_id and item_serial_number >N''),' serienummers)')\r\n\t\t\t\t\texec sp_api_modal_text @T\r\n\t\t\t\tEND\r\n\t\t\t\telse BEGIN -- go to scan\r\n\t\t\t\t\t\r\n\t\t\t\t\tif @this_pallet_type ='FULL' --> SHOW SCAN BUTTON!\r\n\t\t\t\t\t\tgoto GOFULL\r\n\t\t\t\t\t/*\t\r\n\t\t\t\t\tBEGIN\r\n\t\t\t\t\t\tEXEC sp_api_modal_button @name='@button_scan_serials_for_mol',@value = 'Scan serials', @valueout = @button_scan_serials_for_mol OUT,@class='btn-danger'\r\n\t\t\t\t\t\t--tot hier inserted 231001 gelijk hier mogelijkheid om serienummers te scannen:\r\n\t\t\t\t\t\tif @button_scan_serials_for_mol is null return\t\r\n\t\t\t\t\t\tif @button_scan_serials_for_mol='Scan serials' goto add_serials_to_mol --231001\r\n\t\t\t\t\tEND\r\n\t\t\t\t\t*/\t\r\n\r\n\t\t\t\t\tif @this_pallet_type ='REPLENISH' --> SHOW REPLENISH BUTTON!\r\n\t\t\t\t\t\tGOTO GOREPLENISH\r\n\t\t\t\t\t/*\r\n\t\t\t\t\tBEGIN\r\n\t\t\t\t\t\tif @replenish_loc is null \r\n\t\t\t\t\t\tBEGIN\r\n\t\t\t\t\t\t\tset @replenish_loc=(select pick_position from xstock where id=@this_xstock_id)\r\n\t\t\t\t\t\tEND\t\r\n\t\t\t\t\t\t--check of de replenishment al is geregistreerd op de pallet\r\n\t\t\t\t\t\t-- losse items picken en darvan serienummers scannen is niet hier. dit is alleen replenishen!\r\n\t\t\t\t\t\tif not exists( select * from w_pallet where id=@this_pallet_id and micro_pick_allowed=1)\r\n\t\t\t\t\t\tBEGIN\r\n\t\t\t\t\t\t\tEXEC sp_api_modal_input @name = '@replenish_loc', @value = @replenish_loc OUT \r\n\t\t\t\t\t\t\tEXEC sp_api_modal_button @name='@button_replenish',@value = 'Replenish NOW', @valueout = @button_replenish OUT,@class='btn-danger'\r\n\t\t\t\t\t\t\tif @button_replenish is null return\t\r\n\t\t\t\t\t\t\tif @button_replenish='Replenish NOW' --hier evt jump naar separaat replenishment\r\n\t\t\t\t\t\t\tBEGIN\r\n\t\t\t\t\t\t\t\tupdate w_pallet set micro_pick_allowed=1,position_code=@replenish_loc where id=@this_pallet_id\r\n\t\t\t\t\t\t\t\tupdate wms_micro_outbound_lines set scanned_pallet_id=@this_pallet_id where id=@pallet_mol_id\r\n\t\t\t\t\t\t\t\texec sp_api_modal_clear\r\n\t\t\t\t\t\t\t\t--PICKLOKATIE !!\r\n\t\t\t\t\t\t\t\t--TODO...\r\n\t\t\t\t\t\t\t\t--+ EVENTUEEL HELE REPLENISH KOP\r\n\t\t\t\t\t\t\tEND\r\n\t\t\t\t\t\tEND\r\n\r\n\t\t\t\t\tEND\r\n\t\t\t\t\t*/\r\n\r\n\r\n\r\n\t\t\t\tEND\r\n\r\n\r\n\r\n\r\n\t\t\tEND\r\n\t\t\tELSE BEGIN -- dus als CHK=0\r\n\t\t\t\tset @T=concat(N'Deze ',( select UPPER(remark) from wms_micro_outbound_lines where wms_micro_outbound_id=@uuid and @this_pallet_id in ([preferred_pallet_ids])),' pallet wordt nu definitief geselecteerd voor deze micro outbound.')\r\n\t\t\t\texec sp_api_modal_text @T\r\n\t\t\t\tupdate wms_micro_outbound_lines \r\n\t\t\t\t\tset chk=1 \r\n\t\t\t\t\t\t,scanned_pallet_id = @this_pallet_id\r\n\t\t\t\twhere id=@pallet_mol_id\r\n\r\n\t\t\t\t--BUSY !\r\n\t\t\t\t--if full dan optioneel serienummers\r\n\t\t\t\t--if replenish dan lokatie\r\n\t\t\t\t\r\n\t\t\t\tEXEC sp_api_modal_button @name='@button_scan_serials_for_mol',@value = 'Scan serials', @valueout = @button_scan_serials_for_mol OUT,@class='btn-danger'\r\n\t\t\t\t\t--tot hier inserted 231001 gelijk hier mogelijkheid om serienummers te scannen:\r\n\t\t\t\t\tif @button_scan_serials_for_mol is null return\t\r\n\t\t\t\t\tif @button_scan_serials_for_mol='Scan serials' goto add_serials_to_mol --231001\r\n\t\t\t\t----231001 JUMP: (2)\r\n\t\t\t\t--set @mol=@pallet_mol_id\r\n\t\t\t\t--goto add_serials_to_mol\r\n\t\t\t\r\n\t\t\tEND\r\n\t\tend\t\r\n\t\telse begin \r\n\t\t\t--\tPallet_mol_id is null, dus gescande pallet-sticker komt niet voor op de instructie.\r\n\t\t\t--\tHet gescande pallet_id komt niet voor in preferred_pallet_id's; kijk of er een mol vrij is om gewisseld te worden\r\n\t\t\t\r\n\t\t\t--\tCheck of er nog wel 'un-assigned' pallets zijn...\r\n\t\t\tif (select count(*) from q_wms_micro_outbound_lines where wms_micro_outbound_id=@mob and isnull(chk,0)=0) =0 --240607 isnull(chk,0)\r\n\t\t\t--alle pallets zijn al toegekend\r\n\t\t\tBEGIN\r\n\t\t\t\texec sp_api_modal_text N'Alle pallets zijn al toegekend, scan de palletsticker om serienummers toe te voegen',@class='h1'\r\n\t\t\tEND\t\r\n\t\t\telse BEGIN\r\n\t\t\t\texec sp_api_modal_text N'Deze pallet staat ** NIET ** in de instructie. Kies de juiste pallet of geef aan welke pallet van de pick-instructie u wilt vervangen.'\r\n\t\t\t\tif NOT exists(select * from wms_micro_outbound_lines where wms_micro_outbound_id=@mob and chk=0 and xstock_id=@this_xstock_id ) --230930 toon alleen een vervangbare pallet_mol als deze hetzelfde artikel heeft!\r\n\t\t\t\tBEGIN\r\n\t\t\t\t\t--set @T=concat(N'Er is ** GEEN ** vervangbare pallet, bevat de zojuist gescande pallet wel het bedoelde artikel? (vergelijk met de pick-instructie)','' )\r\n\t\t\t\t\tset @T=concat(N'Onjuiste pallet!. Scan een ** ANDERE PALLET ** (zie de pick-instructie)','' )\r\n\t\t\t\t\texec sp_api_modal_text @T\r\n\t\t\t\t\treturn --231001\r\n\t\t\t\tEND\r\n\t\t\t\telse BEGIN\r\n\t\t\t\t\tdeclare @replacement_mol_id int --op deze mol wordt een andere pallet uitgeboekt dan oorspronkelijk 'preferred'\r\n\t\t\t\t\t--laat de user een pallet kiezen die op de mol vervangen wordt door de gecande pallet\r\n\t\t\t\t\t/*\t\t--toon tabel:\r\n\t\t\t\t\t\t\texec sp_api_modal_text N'Kies de pallet die u vervangt door de nu gescande pallet:'\r\n\t\t\t\t\t\t\tselect \r\n\t\t\t\t\t\t\t[sku~col-sm-2]=sku\r\n\t\t\t\t\t\t\t,[lookupcode~col-sm-2]=lookupcode\r\n\t\t\t\t\t\t\t,[remark~col-sm-2]=remark\r\n\t\t\t\t\t\t\t,pos=case remark when 'full' then adv_full_pos else adv_pick_pos end\r\n\t\t\t\t\t\t\t,pal_nr=(select pallet_nr from w_pallet where id in (select value from string_split(preferred_pallet_ids,',')))\r\n\t\t\t\t\t\t\tinto #mol \r\n\t\t\t\t\t\t\t\tfrom q_wms_micro_outbound_lines \r\n\t\t\t\t\t\t\t\twhere wms_micro_outbound_id=@mob \r\n\t\t\t\t\t\t\t\t\tand chk=0 \r\n\t\t\t\t\t\t\t\t\tand xstock_id=@this_xstock_id --230930 toon alleen een vervangbare pallet_mol als deze hetzelfde artikel heeft!\r\n\t\t\t\t\t\t\texec sp_api_modal_table @tmptable=N'#mol'\r\n\t\t\t\t\t--*/\t\t\r\n\t\t\t\t\t--/*\r\n\t\t\t\t\t-- maak de keuzelijst van beschikbare micro_outbound_lines die een zelfde artikel bevatten als de gescande pallet en die nog niet aangescand zijn (chk=0)\r\n\t\t\t\t\tdeclare @list nvarchar(4000)\r\n\t\t\t\t\tset @T=concat('thispalcolli: ',@this_pal_colli)\r\n\t\t\t\t\texec sp_api_toast @T\r\n\t\t\t\t\tset @list=(\r\n\t\t\t\t\t\t\tSELECT STRING_AGG(concat(left(concat(mol.id,'          '),10)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t, ' ',upper(mol.remark)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t, ' ',replace(mol.sku,',',';'),' - ',replace(mol.lookupcode,',',';')\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t,' pal.nr: ',p.pallet_nr\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t,' colli: ',p.colli\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t, ','\r\n\t\t\t\t\t\t\t\t\t\t\t) --LET OP: GEEN KOMMA GEBRUIKEN !!!\r\n\t\t\t\t\t\t\tFROM q_wms_micro_outbound_lines mol\r\n\t\t\t\t\t\t\tCROSS APPLY STRING_SPLIT(mol.preferred_pallet_ids, ',') split_val\r\n\t\t\t\t\t\t\tJOIN w_pallet p ON p.id = CAST(split_val.value AS INT)\r\n\t\t\t\t\t\t\tWHERE mol.chk = 0 \r\n\t\t\t\t\t\t\t\tAND mol.wms_micro_outbound_id =@mob \r\n\t\t\t\t\t\t\t\t--? dit check ik zondag wel als ik het niet vergeet, want ik moet nu bikkelen met sassie \r\n\t\t\t\t\t\t\t\t--231001\r\n\t\t\t\t\t\t\t\tAND mol.xstock_id =@this_xstock_id --is not null --=@this_xstock_id --230930 toon alleen een vervangbare pallet_mol als deze hetzelfde artikel heeft!\r\n\t\t\t\t\t\t\t\tAND (mol.remark='replenish' OR (mol.amount=@this_pal_colli))\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\r\n\t\t\t\t\t--pre declare: @button_choose_pal\r\n\t\t\t\t\tEXEC sp_api_modal_text N'Kies een pallet die vervangen wordt door de gescande pallet:',@class='h1'  --je zie de pallet die oorspronkelijk op de mol bedoeld was; maar eigenlijk kiezen we de MOL om er vervolgens de gescande (alternatieve) pallet aan te koppelen\r\n\t\t\t\t\t\r\n\t\t\t\t\t--/*\r\n\t\t\t\t\t\t-- LIST:EXEC sp_api_modal_choose_list @list = @list\r\n\t\t\t\t\t\t--BUTTONS:\r\n\t\t\t\t\t\tEXEC sp_api_modal_choose @list = @list\r\n\t\t\t\t\t\t,@value = @button_choose_pal OUT\r\n\t\t\t\t\t\t--,@startkey=3 --function key starting number\r\n\t\t\t\t\t\tif @button_choose_pal is not NULL\r\n\t\t\t\t\t\tBEGIN\t\r\n\t\t\t\t\t\t\tset @replacement_mol_id=left(@button_choose_pal,10) --eerste stukje is het mol_id\r\n\t\t\t\t\t\t\t--exec sp_api_toast @button_choose_pal\r\n\t\t\t\t\t\t\tif not exists(select 1 from wms_micro_outbound_lines where id=@replacement_mol_id)\r\n\t\t\t\t\t\t\tBEGIN\r\n\t\t\t\t\t\t\t\texec sp_api_modal_alert N'Er is iets verkeerd gegaan met de selectie!!'\r\n\t\t\t\t\t\t\t\treturn\r\n\t\t\t\t\t\t\tEND\r\n\t\t\t\t\t\t\t--oke verder\r\n\t\t\t\t\t\t\tupdate wms_micro_outbound_lines \r\n\t\t\t\t\t\t\t\tset chk=1 \r\n\t\t\t\t\t\t\t\t,scanned_pallet_id = @this_pallet_id\r\n\t\t\t\t\t\t\twhere id=@replacement_mol_id\r\n\t\t\t\t\t\t\tset @mol=@replacement_mol_id\r\n\r\n\t\t\t\t\t\t\tset @this_pallet_type=(select UPPER(remark) from wms_micro_outbound_lines where id=@replacement_mol_id)\r\n\r\n\t\t\t\t\t\tEND\t\r\n\t\t\t\t\t--*/\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\tEND\t\r\n\t\t\tEND --de else\r\n\t\tend\t\r\n\t\t--exec sp_api_modal_alert @this_pallet_id --231001 TEST !!\r\n\t\treturn\r\n\tend\t\t\r\nEND\r\n\r\n\r\n--240607 was: \r\nRETURN -- EVEN AFKAPPEN ..........\r\n--nu:\r\n--if not exists(select 1 from code_mob_serials where mob_id=@uuid and amount<>codes) RETURN\r\n\r\n--240607 nu dus dus doorgaan naar scannen als er nog serienummers niet gekoppeld zijn..\r\n\r\n\r\nNORMAAL:\r\nexec sp_api_modal_text N'Scannen van items:'\r\nEXEC sp_api_modal_choose @list = N'alles,onvoltooid,volle_pallets',@value = @button_choose2 OUT\r\nif @button_choose2 is null return--set @button_choose2='onvoltooid'\t\r\n--exec sp_api_toast @uuid\r\n--MOBILE ACTION EXTRA CODE\r\n--set @button_choose2='onvoltooid'\r\nif @button_choose2='volle_pallets'\r\n\tbegin\r\n\t\texec sp_api_modal_text N'scan de labels van deze volle pallets: '\r\n\t\tselect id, pallet_label into #sfp from pallet_status where id in (select preferred_pallet_ids from wms_micro_outbound_lines where wms_micro_outbound_id=@uuid) --scanned full pallets\r\n\t\texec sp_api_modal_table @tmptable=N'#sfp'\r\n\t\treturn\r\n\tEND\r\nif @button_choose2='alles'\r\n\tbegin\r\n\t\t\r\n/*\t\tset @mol=(select top 1 id from q_wms_micro_outbound_lines mol\r\n\t\t\twhere mol.wms_micro_outbound_id =@uuid\r\n\t\t\t --AND\t(select count(*) from wms_micro_outbound_line_barcode where wms_micro_outbound_lines_id=mol.id)<mol.Amount\r\n\t\t\tand (select scan_serial_number_outbound from xstock where id=(mol.xstock_id)) = 1 -- ER MOET SERIAL GESCAND WORDEN\r\n\t\t\t--ALLES and mol.is_processed =0 -- als deze door de loods op 1 wordt gezet\r\n\t\t\torder by adv_pick_pos\r\n\t\t)  \r\n\t\t\r\n\t\tset @t=concat('mol:',@mol,N' alles')\r\n\t\texec sp_api_modal_text @t\r\n*/\r\n\t\t--exec sp_api_modal_alert @UUID\r\n\t\t--select * into #mol from Q_wms_micro_outbound_lines where wms_micro_outbound_id = @uuid\r\n\t\t/*\r\n\t\tselect  \r\n\t\t\t--is_processed,\r\n\t\t\t--container_number,\r\n\t\t\t--linked_amount,\r\n\t\t\tlinked_SERIALS as [serials@~col-sm-1],\r\n\t\t\tsku\r\n\t\t\t--lookupcode,\r\n\t\t\t\r\n\t\t\t into #mol \r\n\t\t\tfrom q_wms_micro_outbound_lines where wms_micro_outbound_id=@uuid--3297\r\n\t\texec sp_api_modal_table @tmptable=N'#mol'\t,@print=1\r\n\t\treturn\r\n\t\t*/\r\n\r\n\t\tselect [amt~col-2]=items, [sku~col-6]=sku, [ser_head~col-4]=left5 into #mob_info from mob_scan_info where mob_id=@uuid\r\n\t\texec sp_api_modal_table @tmptable=N'#mob_info'\t,@print=1, @orderby=N' order by 2'\r\n\t\treturn\r\n\r\n\t\t--exec sp_api_modal_clear\r\n\r\n\tend\r\n\r\nif @button_choose2='onvoltooid'\r\n\tbegin\r\n\t\t--infolijstje\r\n\t\tselect [mol_id~col-3]=ID -- nozzels per 240611\r\n\t\t\t\t,[pal_nr~col-3]=(select pallet_nr from w_pallet where id=scanned_pallet_id)\r\n\t\t\t\t,[scanned_pallet_id~col-6]=scanned_pallet_id\r\n\t\t\t\tinto #lijstje_onvoltooid\r\n\t\t\t\tfrom q_wms_micro_outbound_lines mol\r\n\t\t\twhere scanned_pallet_id is not NULL --240611 ! erbij moet een scanned pallet zijn voor deze mol selectie!\r\n\t\t\t\tAND remark <> 'pick' --240611 1433\r\n\t\t\t\tAND mol.wms_micro_outbound_id =@uuid\r\n\t\t\t--AND\t(select count(*) from wms_micro_outbound_line_barcode where wms_micro_outbound_lines_id=mol.id)<mol.Amount\r\n\t\t\t-- 230907 items zonder serienummer moeten wel SKU SCAN KRIJGEN... and (select scan_serial_number_outbound from xstock where id=(mol.xstock_id)) = 1 -- ER MOET SERIAL GESCAND WORDEN\r\n\t\t\tand (\r\n\t\t\t\t\tmol.is_processed =0 -- als deze door de loods op 1 wordt gezet\r\n\t\t\t\t\tOR\r\n\t\t\t\t\t--linked_serials <> amount\r\n\t\t\t\t\tlinked_amount <> amount --230901 dit betekent dat de (auto)assign nog niet compleet is (misschien nor replenish pallet maken etc.)\r\n\t\t\t\t)\t\r\n\t\tif (select count(*) from #lijstje_onvoltooid)>0 --if er voorgezet 240611\t\t\r\n\t\tBEGIN\r\n\t\t\texec sp_api_modal_table @tmptable=N'#lijstje_onvoltooid',@print=0\t\t\r\n\t\t\r\n\r\n\t\t\t--scan pallet-sticker\r\n\t\t\texec sp_api_modal_text N'scan de pallet sticker een van de genoemde pallets'\r\n\t\t\tEXEC sp_api_modal_input @name = '@ps', @value = @ps OUT ,@focus=1\r\n\t\t\t--but_10 er bij\r\n\t\t\tEXEC sp_api_modal_button @name='@but_10',@value = 'Check', @valueout = @but_10 OUT,@class='btn-danger',@key='Enter'; if @but_10 is NULL return\r\n\t\t\tif @ps is null return\r\n\t\t\tif left(@ps,3)<>'ps:'\r\n\t\t\tBEGIN\r\n\t\t\t\texec sp_api_modal_text N'Dit is geen Tracy pallet sticker QR code'\r\n\t\t\t\t--exec sp_api_modal_restart--231130\r\n\r\n\t\t\t\tRETURN\r\n\t\t\tEND\t\r\n\t\t\r\n\r\n\t\t\tset @this_pallet_id=right(@ps,len(@ps)-3)\r\n\t\t\tif not exists(select 1 from #lijstje_onvoltooid where [scanned_pallet_id~col-6]=@this_pallet_id)\r\n\t\t\tBEGIN\r\n\t\t\t\texec sp_api_modal_text 'Fout, deze pallet staat niet in de lijst..'\r\n\t\t\t\treturn\r\n\t\t\tEND\r\n\t\t\tELSE\r\n\t\t\tBEGIN\r\n\t\t\t\t-- zet @mol\r\n\t\t\t\tset @mol=(select [mol_id~col-3] from #lijstje_onvoltooid where [scanned_pallet_id~col-6]=@this_pallet_id )\r\n\t\t\tEND\r\n\t\t\t\r\n\t\t\t--einde infolijstje\r\n\t\tEND\r\n\t\tif @mol is null --fallback naar top 1 \r\n\r\n\t\tset @mol=(select top 1 id from q_wms_micro_outbound_lines mol\r\n\t\t\twhere mol.wms_micro_outbound_id =@uuid\r\n\t\t\t--AND\t(select count(*) from wms_micro_outbound_line_barcode where wms_micro_outbound_lines_id=mol.id)<mol.Amount\r\n\t\t\t-- 230907 items zonder serienummer moeten wel SKU SCAN KRIJGEN... and (select scan_serial_number_outbound from xstock where id=(mol.xstock_id)) = 1 -- ER MOET SERIAL GESCAND WORDEN\r\n\t\t\tand (\r\n\t\t\t\t\tmol.is_processed =0 -- als deze door de loods op 1 wordt gezet\r\n\t\t\t\t\tOR\r\n\t\t\t\t\t--linked_serials <> amount\r\n\t\t\t\t\tlinked_amount <> amount --230901 dit betekent dat de (auto)assign nog niet compleet is (misschien nor replenish pallet maken etc.)\r\n\t\t\t\t)\t\r\n\t\t\torder by adv_pick_pos\r\n\t\t)\r\n\t\t--set @t=concat('1:',@mol); exec sp_api_toast @T\r\n\t\tset @no_serials =(select case (select scan_serial_number_outbound from xstock where id=(select xstock_id from wms_micro_outbound_lines where id=@mol)) when 1 then 0 else 1 end)\r\n\t\t\r\n\t\t--set @t=concat('mol:',@mol,N' nog verwerken..',case when @no_serials=1 then '**NO SERIALS**' else '' end) --indicator dat er geen serienummers nodig zijn\r\n\t\t--240610\r\n\t\tset @t=concat('mol:',@mol,N' pallet nr: ',(select pallet_nr from w_pallet where id=(select scanned_pallet_id from wms_micro_outbound_lines where id=@mol)),N' op deze pallet nog ',(select l_items\t- isnull(serial_items,0) from mol where mol_id=@mol),' verwerken..',case when @no_serials=1 then '**NO SERIALS**' else '' end) --indicator dat er geen serienummers nodig zijn\r\n\t\t\r\n\t\texec sp_api_modal_text @T\r\n\t\t \r\n\tend\r\n\r\n\r\n\r\nif @mol is null \r\n\tbegin\r\n\t\texec sp_api_modal_alert N'Scan serienummers is voltooid.' --231130 was sp_api_modal_text\r\n\t\texec sp_api_modal_clear\r\n\t\tRETURN\r\n\tend\t\r\n\r\n--230918 extra dummyscan voor deze @mol, want inmiddels kan een pallet ge-replenished zijn waardoor het aantal micro-items inmiddels volledig beschikbaar is\r\n\texec auto_assign_wms_micro_items_to_wms_micro_outbound_line @LINE_id=@mol\r\n\texec assign_pallets_to_micro_outbound_from_line\t@Line =@mol\r\n------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n\r\nselect @xstock_id=xstock_id, @aantal_serials_nodig = amount  from wms_micro_outbound_lines where id=@mol\r\n\r\nselect * into #registered_serials from wms_micro_outbound_line_barcode where wms_micro_outbound_lines_id=@mol\r\nif (select count(*) from #registered_serials)>=@aantal_serials_nodig\r\n\tbegin\r\n\t\tset @T=concat(N'Er is al gescand.','')\r\n\t\texec sp_api_modal_text @T\r\n\t\tset @T=concat(N'Aantal gescande codes:',(select count(*) from wms_micro_outbound_line_barcode where wms_micro_outbound_lines_id=@mol))\r\n\t\texec sp_api_modal_text @T\r\n\t\t--exec sp_api_modal_table @tmptable=N'#registered_serials'\r\n\t\t--exec sp_api_modal_alert @uuid\r\n\t\tEXEC sp_api_modal_button @name='@button5',@value = 'Meer Scannen', @valueout = @button5 OUT,@class='btn-danger',@key='F9'\r\n\t\tif isnull(@button5,N'')<>N'Meer Scannen'\r\n\t\treturn\r\n\tend\t\r\n\r\n \r\n\r\n\r\nif isnull(@sku_oke,0)\t=0\r\n\tbegin\r\n\t\tset @T=concat(N'pickpositie: ',(select top 1 position_code from pallet_status where micro_pick_allowed=1 and xstock_id=@xstock_id and out_completed is null))\r\n\t\texec sp_api_modal_text @T, @class='h1'\r\n\t\tSET @T=concat(N'Aantal: ',@aantal_serials_nodig,'. Artikelomschrijving: ',(select lookupcode from xstock where id=@xstock_id))\r\n\t\texec sp_api_modal_text @T\r\n\t\tSET @T=concat(N'Scan de SKU: ',(select sku from xstock where id=@xstock_id))--, ' en ', @aantal_serials_nodig,' serienummers'\t)\r\n\t\texec sp_api_modal_text @T\r\n\t\t\r\n\t\tEXEC sp_api_modal_input @name = '@sku_check', @value = @sku_check OUT,@hidden=0,@focus=1 --, @type='textarea',@rows=20--,@inline = 1 -- (multi line input)\r\n\t\tEXEC sp_api_modal_button @name='@button3',@value = N'Check', @valueout = @button3 OUT,@class='btn-danger',@key='F5' --Enter kan niet verstoort de flow\r\n\t\tif @button3 is null return\r\n\t\tif @sku_check is null return\r\n\t\texec sp_api_modal_text @sku_check\r\n\t\t\r\n\tend\t\t\r\nif not exists(select 1 from wms_micro_outbound_lines mol \r\n\t\t\t\tjoin xstock s on s.id= mol.xStock_id \r\n\t\t\t\twhere mol.id=@mol and \r\n\t\t\t\t\t(\r\n\t\t\t\t\t\ttrim(s.sku)=trim(@sku_check) \r\n\t\t\t\t\t\tor \r\n\t\t\t\t\t\t--230912 OOK EAN TOESTAAN I.P.V. SKU ALS ER GEEN SERIENUMMERS GESCAND HOEVEN TE WORDEN\r\n\t\t\t\t\t\t( trim(s.EAN_CODE)>N'' AND @no_serials =1 AND trim(s.EAN_CODE)=trim(@sku_check) )\r\n\t\t\t\t\t)\r\n\t\t\t\t)\r\n\tBEGIN\r\n\t\tset @T=concat(@sku_check,' is de SKU van een verkeerd artikel.')\r\n\t\t--231128 beep er bij\r\n\t\texec sp_api_modal_beep 1100, 500 --error !\r\n\r\n\t\texec sp_api_toast @T --N'* VERKEERD ARTIKEL ! *'\r\n\t\tEXEC sp_api_modal_value @name = '@sku_check',@value = NULL\r\n\t\tEXEC sp_api_modal_value @name = '@button3',@value = NULL\r\n\t\tset @SKU_OKE=0\r\n\t\treturn\r\n\tEND\r\nset @sku_oke=1\r\n\r\n\r\n------231001-------\r\nadd_serials_to_mol:\r\n---- L A B E L ----\r\n--exec sp_api_toast N'serials to mol...'--231130\r\n--231001 als hier heen wordt gesprongen kan het zijn dat @no_serials onbekend is..\r\nset @no_serials =(select case (select scan_serial_number_outbound from xstock where id=(select xstock_id from wms_micro_outbound_lines where id=@mol)) when 1 then 0 else 1 end)\r\n\r\n\r\nset @T=concat(N'NOG: ',@aantal_serials_nodig - (select count(*) from wms_micro_outbound_line_barcode where wms_micro_outbound_lines_id=@mol),' serienummers. (save=bijwerken)')\r\nexec sp_api_modal_text @T\r\n\r\n\r\n--extra 230907\r\nif @no_serials =1 \r\n\tBEGIN\r\n\t\tset @scanned_codes='no serials required'\r\n\t\t--set @button =N'Save'\r\n\tEND\r\n\t\t--oud: voor 230907\r\n--> set @scanned_codes= (select serialnumbers from wms_micro_outbound_lines where id=@mol)\t\t--231211 NIEUW ER VOOR..\r\nEXEC sp_api_modal_input @name = '@scanned_codes', @value = @scanned_codes OUT , @type='textarea',@rows=8, @focus=1 --,@inline = 1 -- (multi line input)\r\nEXEC sp_api_modal_button @name='@button',@value = 'Save', @valueout = @button OUT,@class='btn-danger',@key='F6'\r\nif @button is null return; --231211 extra wacht op button\r\n\r\nif @button='Save' -- opslaan, zodat je ze niet kwijt raakt \r\n\tBEGIN\r\n\t\tif @scanned_codes > N''\r\n\t\t\tBEGIN\r\n\t\t\t\tif @no_serials =0 --NORMALE SITUATIE MET SERIENUMMERS VERPLICHTING\r\n\t\t\t\t\tBEGIN\r\n\t\t\t\t\t\t-- log, is al 2x een lifesaver geweest!\r\n\t\t\t\t\t\tupdate wms_micro_outbound_lines set serialnumbers=concat(serialnumbers,@scanned_codes) where id=@mol--=@ID\r\n\r\n\t\t\t\t\t\t-- unieke barcodes registreren bij de micro outbound line\r\n\t\t\t\t\t\t--declare @scanned_codes nvarchar(max) = (select top 1 serialnumbers from wms_micro_outbound_lines where nullif(trim(serialnumbers),N'') is not null)\r\n\t\t\t\t\t\t--select serialnumbers,*  from wms_micro_outbound_lines where nullif(trim(serialnumbers),N'') is not null\r\n\t\t\t\t\t\t/*\r\n\t\t\t\t\t\t--krijg de unieke codes uit de scans en \r\n\t\t\t\t\t\tselect line from scanresult_as_table(@scanned_codes) \r\n\t\t\t\t\t\t\twhere nullif(trim(line),N'') is not NULL --\tzonder blanco regels!\r\n\t\t\t\t\t\t\t\t-- evt lengrte afdwingen and len(line) >15\r\n\t\t\t\t\t\t\tgroup by line -- maak uniek\r\n\t\t\t\t\t\t*/\r\n\t\t\t\t\t\t--select * from \r\n\t\t\t\t\t\t--declare @mol int=297\r\n\t\t\t\t\t\tinsert into wms_micro_outbound_line_barcode(wms_micro_outbound_lines_id,Line)\r\n\t\t\t\t\t\t\tselect @mol, line\r\n\t\t\t\t\t\t\tfrom _1\r\n\t\t\t\t\t\t\tcross apply ( select line from scanresult_as_table(@scanned_codes) \r\n\t\t\t\t\t\t\t\t\t\t\twhere nullif(trim(line),N'') is not NULL --\tzonder blanco regels!\r\n\t\t\t\t\t\t\t\t\t\t\t\t-- evt lengte afdwingen and len(line) >15\r\n\t\t\t\t\t\t\t\t\t\t\tgroup by line -- maak uniek\r\n\t\t\t\t\t\t\t\t\t\t) sr\r\n\t\t\t\t\t\t\twhere --beter pas bij toekennen beperken, want zo blijft deze scan-actie redelijk universeel  len(sr.line) >13 and --230823 zo hebben we geen last van de EAN CODES VAN AGNEOVO\r\n\t\t\t\t\t\t\t\tnot exists(select 1 from wms_micro_outbound_line_barcode where Line=sr.line)\r\n\r\n\t\t\t\t\t\t-- select * from wms_micro_outbound_line_barcode\r\n\t\t\t\t\t\t\r\n\r\n\t\t\t\t\t\t--EXEC sp_api_modal_button @name='@button2',@value = 'Klaar', @valueout = @button2 OUT,@class='btn-danger',@key='F7'\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t--set @T=concat(N'Aantal gescande codes:',(select count(*) from wms_micro_outbound_line_barcode where wms_micro_outbound_lines_id=@mol))\r\n\t\t\t\t\t\t--exec sp_api_modal_text @T\r\n\t\t\t\t\t\t\t--select * into #unique from wms_micro_outbound_line_barcode where wms_micro_outbound_lines_id=@mol\r\n\t\t\t\t\t\t\t--exec sp_api_modal_table @tmptable=N'#unique'\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t--GELIJK TOEKENNEN\r\n\t\t\t\t\t\texec assign_scanned_serials_to_micro_items \r\n\t\t\t\t\t\t\t\t@mob=@uuid -- KOPPEL DE MICRO ITEMS (en verwijder eventueel de overscans)\r\n\t\t\t\t\t\t\t\t,@remove_unassigned =1\r\n\t\t\t\t\t\t\r\n\t\t\t\t\tEND\t--(OPLSAAN MET SERIENUMMER VERWERKEN)\r\n\t\t\t\t--AUTOMATISCH KLAARBOEKEN PER MOL\r\n\t\t\t\tif @no_serials =1 --230907 altijd conform bij NO SERIALS\r\n\t\t\t\t\t--bijserienummers moet het aantal overeenkomen\r\n\t\t\t\t\tor exists (select 1 from q_wms_micro_outbound_lines where id=@mol and linked_serials=Amount) -- volledig toegekend! was: @button2=N'Klaar' \r\n\t\t\t\t\tbegin\r\n\t\t\t\t\t\tupdate wms_micro_outbound_lines set is_processed =1 where id=@mol  -- 230824 op processed zetten,zodat de volgende gekozen kan worden..\r\n\t\t\t\t\t\t--230828 dit verwijdert de scans die niet geloppeld zijn aan items.\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t--exec sp_api_modal_alert N'items volledig gescand, scan QR voor eventueel volgende items.'\t\r\n\t\t\t\t\t\texec sp_api_toast N'items volledig gescand, scan QR voor eventueel volgende items.'\t\r\n\t\t\t\t\t\t--exec sp_api_modal_restart --231130 ipv clear\r\n\t\t\t\t\t\t--exec sp_api_modal_value @name=N'@button_gearriveerd_bij_pallet'\r\n\t\t\t\t\t\texec sp_api_modal_clear --231211 er bij\r\n\t\t\t\t\t\treturn\r\n\t\t\t\t\t\t--EXEC sp_api_modal_values_clear -- @ignore = N'company'\r\n\t\t\t\t\t\t-- voor alert gezet exec sp_api_modal_clear\r\n\t\t\t\t\t\t--EXEC sp_api_modal_restart --230907 proberen..\r\n\t\t\t\t\tend\t\r\n\t\t\t\t\r\n\t\t\tEND\r\n\t\t--EXEC sp_api_modal_value @name = '@button',@value = NULL \t\t--231211 save button un-clicken\t\r\n\t\t--EXEC sp_api_modal_value @name = '@sku_ok',@value = NULL\t\t\t--231211\r\n\t\t--EXEC sp_api_modal_value @name = '@sku_check',@value = NULL\t\t--231211\r\n\t\t--EXEC sp_api_modal_value @name = '@scanned_codes',@value = NULL\t--231211\r\n\t\t--return\t\r\n\t\texec sp_api_modal_clear --restart--231211 test restart ! clear --230907\t--als je hier niet cleart, dan kan je tussendoor opslaan..\r\n\t\treturn\r\n\tend\r\n\r\n----------------------\r\n-- LABELS\r\n----------------------\r\nexec sp_api_modal_clear -- 231211 TEST ER BIJ \r\nRETURN\r\nGOFULL:\r\nif @this_pallet_type ='FULL' --> SHOW SCAN BUTTON!\r\nBEGIN\r\n\tEXEC sp_api_modal_button @name='@button_scan_serials_for_mol',@value = 'Scan serials', @valueout = @button_scan_serials_for_mol OUT,@class='btn-danger'\r\n\t--tot hier inserted 231001 gelijk hier mogelijkheid om serienummers te scannen:\r\n\tif @button_scan_serials_for_mol is null return\t\r\n\tif @button_scan_serials_for_mol='Scan serials' goto add_serials_to_mol --231001\r\nEND\r\nRETURN --GOFULL\r\n\r\nGOREPLENISH:\r\nif @this_pallet_type ='REPLENISH' --> SHOW REPLENISH BUTTON!\r\nBEGIN\r\n\tif @replenish_loc is null \r\n\tBEGIN\r\n\t\tset @replenish_loc=(select pick_position from xstock where id=@this_xstock_id)\r\n\tEND\t\r\n\t--check of de replenishment al is geregistreerd op de pallet\r\n\t-- losse items picken en darvan serienummers scannen is niet hier. dit is alleen replenishen!\r\n\tif not exists( select * from w_pallet where id=@this_pallet_id and micro_pick_allowed=1)\r\n\tBEGIN\r\n\t\tEXEC sp_api_modal_input @name = '@replenish_loc', @value = @replenish_loc OUT \r\n\t\tEXEC sp_api_modal_button @name='@button_replenish',@value = 'Replenish NOW', @valueout = @button_replenish OUT,@class='btn-danger'\r\n\t\tif @button_replenish is null return\t\r\n\t\tif @button_replenish='Replenish NOW' --hier evt jump naar separaat replenishment\r\n\t\tBEGIN\r\n\t\t\tif nullif(trim(@replenish_loc),N'') is NULL\r\n\t\t\tBEGIN\r\n\t\t\t\texec sp_api_modal_text N'REPLENISHMENT LOCATION REQUIRED'\r\n\t\t\t\tRETURN\r\n\t\t\tEND\r\n\t\t\tupdate w_pallet set micro_pick_allowed=1,position_code=@replenish_loc where id=@this_pallet_id\r\n\t\t\tupdate wms_micro_outbound_lines set scanned_pallet_id=@this_pallet_id where id=@pallet_mol_id\r\n\t\t\texec sp_api_modal_clear\r\n\t\t\t--PICKLOKATIE !!\r\n\t\t\t--TODO...\r\n\t\t\t--+ EVENTUEEL HELE REPLENISH KOP\r\n\t\tEND\r\n\tEND\r\nEND\t\r\nRETURN --GOREPLENISH\r\n\r\n\r\n\t\t\t\t\r\n\r\n\r\n/*\r\n----231001----\r\nreplenish_mol:\r\n----LABEL-----\r\nupdate w_pallet set micro_pick_allowed=1 where id=\r\nreturn\r\n*/\r\n\r\n/* --230821 RESET UITGESCHAKELD\r\nEXEC sp_api_modal_button @name='@button4',@value = 'Reset', @valueout = @button4 OUT,@class='btn-danger',@key='F8'\r\n\r\nif @button4=N'Reset'\r\n\tBEGIN\r\n\t\tdelete from wms_micro_outbound_line_barcode where wms_micro_outbound_lines_id=@mol\r\n\t\tEXEC SP_API_MODAL_CLEAR\r\n\t\tEXEC sp_api_modal_value @name = '@button4',@value = NULL\r\n\tend\r\n*/\r\n-- als het aantal in #unique overeenkomt met het aantal nog te vullen serienummers dan kunnen ze worden toegekend\r\n\t",
                    "action_id": 692,
                    "action_name": "#qr_action_verwerk_micro_pick_v11",
                    "source_table": "api_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_modal_button",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@name n"
                },
                {
                    "name": "@value",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@value n"
                },
                {
                    "name": "@valueout",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@valueout n"
                },
                {
                    "name": "@class",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "'btn-primary'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@class n"
                },
                {
                    "name": "@key",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 510,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@key n"
                },
                {
                    "name": "@translate",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "1",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@translate b"
                },
                {
                    "name": "@class_updated",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 7,
                    "full_declaration_from_def": "@class_updated n"
                },
                {
                    "name": "@set_values",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 8,
                    "full_declaration_from_def": "@set_values n"
                },
                {
                    "name": "@inline",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "1",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 9,
                    "full_declaration_from_def": "@inline b"
                },
                {
                    "name": "@use_placeholder",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 10,
                    "full_declaration_from_def": "@use_placeholder n"
                },
                {
                    "name": "@seed",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 11,
                    "full_declaration_from_def": "@seed n"
                },
                {
                    "name": "@invisible",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 12,
                    "full_declaration_from_def": "@invisible b"
                },
                {
                    "name": "@language_context",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "'modal'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 13,
                    "full_declaration_from_def": "@language_context n"
                },
                {
                    "name": "@reset_after_click",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 14,
                    "full_declaration_from_def": "@reset_after_click b"
                },
                {
                    "name": "@disabled",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 15,
                    "full_declaration_from_def": "@disabled b"
                }
            ],
            "embedded_example": "EXEC sp_api_modal_button @name='@button',@value = 'Save', @valueout = @button OUT,@class='btn-danger',@key='Enter' --\r\n\t--,@class = '',@translate = 1,@class_updated = ''\r\n\t--,@set_values = N'{\"@search\":null}' --json to set/clear other values\r\n\t--,@reset_after_click = 1 --Directly reset the value\r\n\t--,@disabled = 1 --greyed out",
            "embedded_description": null,
            "co_occurrence_stats": {
                "dbo.sp_api_modal_table": 112,
                "dbo.sp_api_modal_csv": 22,
                "dbo.sp_api_modal_input": 115,
                "dbo.sp_api_modal_text": 172,
                "dbo.sp_api_modal_date": 63,
                "dbo.sp_api_toast": 64,
                "dbo.sp_api_modal_route": 7,
                "dbo.sp_api_modal_clear": 24,
                "dbo.sp_api_goto": 26,
                "dbo.sp_api_modal_url": 3,
                "dbo.sp_api_add_sql_task": 3,
                "dbo.sp_api_report_download_base64": 2,
                "dbo.sp_api_modal_alert": 29,
                "dbo.sp_api_modal_date_from_to": 29,
                "dbo.sp_api_modal_select": 40,
                "dbo.sp_api_modal_modal": 42,
                "dbo.sp_api_modal_print": 17,
                "dbo.sp_api_modal_select_all": 1,
                "dbo.sp_api_modal_select_all_clear": 1,
                "dbo.sp_api_modal_field_insert": 3,
                "dbo.sp_api_modal_select_curly": 3,
                "dbo.sp_api_modal_download": 2,
                "dbo.sp_api_card_curly_replace": 1,
                "dbo.ABCDATE": 20,
                "dbo.sp_api_modal_dispatch": 1,
                "dbo.sp_api_modal_pathname": 2,
                "dbo.sp_api_modal_select_table": 10,
                "dbo.sp_api_report_generate": 1,
                "dbo.abcLeft": 1,
                "dbo.sp_api_modal_table_update": 15,
                "dbo.hasRole": 4,
                "dbo.sp_api_modal_choose": 13,
                "dbo.sp_api_modal_save": 7,
                "dbo.sp_api_modal_post": 7,
                "dbo.sp_api_modal_input_decimal": 10,
                "dbo.sp_api_import_from_master": 1,
                "dbo.sp_api_populate_card": 2,
                "dbo.ABCWEEKNR": 3,
                "dbo.sp_api_modal_value": 2,
                "dbo.sp_api_modal_menu_user": 1,
                "dbo.sp_api_modal_action": 2,
                "dbo.sp_api_modal_html": 3,
                "dbo.sp_sys_admin_main_menu": 1,
                "dbo.sp_api_populate_card_views": 1,
                "dbo.sp_api_modal_input_calculator": 1,
                "dbo.sp_api_email": 7,
                "dbo.sp_api_push_bullet": 1,
                "dbo.sp_api_modal_scanner": 1,
                "dbo.sp_sys_file_upload_base64": 1,
                "dbo.sp_api_modal_qr_scanner": 1,
                "dbo.sp_api_modal_restart": 2,
                "dbo.sp_api_modal_values_clear": 1,
                "dbo.sp_api_modal_get_value": 6,
                "dbo.sp_api_modal_choose_list": 1,
                "dbo.sp_api_modal_audio": 1
            },
            "real_usage_examples": [
                {
                    "sql_source": "--RH210215 BEZIG DOWNLOAD ALS CSV ER BIJ.. lukt nofg niet..\nDECLARE @date nvarchar(128),@date2 nvarchar(128),@button nvarchar(128),@button2 nvarchar(128),@companyname nvarchar(128), @FileName nvarchar(128)\nset @date = dbo.workDate()\nset @date2 = dbo.workDate()\nSET @companyname = (select CompanyName from xcompany where id = @id)\nset @Filename=concat(@Companyname,'.csv')\n/*EXEC sp_api_modal_text 'Zoek op transport bedrijf'\nEXEC sp_api_modal_input @name='Transporteur',@value = @TransComp OUT,@focus=1,@select=1 -- zoek veld\n*/\nEXEC sp_api_modal_text 'Van:'\nEXEC sp_api_modal_date @name='Date',@value = @date OUT,@class='w-24',@focus=1,@select=1  -- zoek veld\nEXEC sp_api_modal_text 'Tot en met:'\nEXEC sp_api_modal_date @name='Date2',@value = @date2 OUT,@class='w-24' -- zoek veld\n--SET @date2 = CONCAT(@date2,' 23:59:59.999')\nSET @button = 'Intrastat_Melding'\nEXEC sp_api_modal_button @name='button',@value = 'Intrastat_Melding',@valueout = @button OUT,@class = 'btn-primary',@key = 'Enter'\nEXEC sp_api_modal_button @name='button',@value = 'Excel_CSV',@valueout = @button OUT,@class = 'btn-primary',@key = 'F5'\nEXEC sp_api_modal_text @companyname,N'h4 text-muted',@printonly=1\nEXEC sp_api_modal_print\n\nIF @button =  'Intrastat_Melding'\nBEGIN\nSELECT distinct [QUANTITY@] = sum(QUANTITY@), [ARTICLE~col-sm-5] = ARTICLE, LAND, INTRASTAT_CODE, [NETT_WEIGHT@] = sum(NETT_WEIGHT@), ISO, [AMOUNT@] = sum(AMOUNT@)\nINTO #Intrastat_Melding\nFROM          RV_INTRASTAT_MELDING\nWHERE\t\t(INTRASTAT_CODE is not NULL) AND (CompanyID = @id) AND (TransactionDate BETWEEN @date AND @date2) AND (THTDT = 2)\nGROUP BY ARTICLE,LAND,INTRASTAT_CODE,ISO\nEXEC sp_api_modal_table @tmptable=N'#Intrastat_Melding',@orderby=N'ORDER BY 2 ASC',@print=1\n\nEND \n\t\n\nIF @button =  'Excel_CSV'\nBEGIN\nSELECT distinct [QUANTITY] = sum(QUANTITY@), [ARTICLE] = ARTICLE, LAND, INTRASTAT_CODE, [NETT_WEIGHT] = sum(NETT_WEIGHT@), ISO, [AMOUNT] = sum(AMOUNT@)\nINTO #Intrastat_CSV\nFROM          RV_INTRASTAT_MELDING\nWHERE\t\t(INTRASTAT_CODE is not NULL) AND (CompanyID = @id) AND (TransactionDate BETWEEN @date AND @date2) AND (THTDT = 2)\nGROUP BY ARTICLE,LAND,INTRASTAT_CODE,ISO\n--EXEC sp_api_modal_table @tmptable=N'#Intrastat_CSV',@print=1\n--EXEC sp_api_modal_csv\t@tmptable = '#Intrastat_CSV'\t,@filename = @filename\t,@sep = ';'\n\n--EXEC sp_api_modal_table @tmptable=N'#Intrastat_CSV'\nEXEC sp_api_modal_csv @tmptable=N'#Intrastat_CSV',@ansi =1,@filename=@FileName\n\nEND \n\n\n\n\n\n\n\n",
                    "action_id": 1,
                    "action_name": "INTRASTAT_MELDING",
                    "source_table": "api_card_actions"
                },
                {
                    "sql_source": "DECLARE @clone_id INT, @sure nvarchar(255), @text nvarchar(255)\r\nEXEC sp_api_modal_get N'my_last_clone_id',@text OUT\r\nEXEC sp_api_modal_text @text,'h1'\r\nEXEC sp_api_modal_text @basetable,'h1'\r\nEXEC sp_api_modal_button @name='Sure',@value = 'Clone? (Esc=Nee)', @valueout = @sure OUT,@class='btn-danger',@key='Enter'\r\nIF @sure is not null\r\n\tBEGIN\r\n\t\tEXEC sp_api_modal_clear\r\n\t\t--EXEC @clone_id = sp_clone_record @basetable,@ids\r\n\t\tEXEC @clone_id = sp_clone_record @basetable,@ids,N'size=''EDIT'', stock=0'\r\n\t\tSET @path = @path+'/'+dbo.nv(@clone_id)\r\n\t\tEXEC sp_api_toast @text = N'Record cloned'\r\n\t\tEXEC sp_api_modal_route @name = N'Ga met Enter naar de kopie en vul de nieuwe maat in',@pathname=@path,@search='?focus=7377' ,@class = N'btn-danger' ,@key='Enter'\r\n\tEND\r\n",
                    "action_id": 6,
                    "action_name": "kopieer-artikel",
                    "source_table": "api_card_actions"
                },
                {
                    "sql_source": "DECLARE @wat nvarchar(200), @linktoME int,@text nvarchar(max)\n\nIF {[ctr2].cth_fase} NOT IN (N'openSale','openPrice')\n\tBEGIN\n\tEXEC sp_api_modal_Alert N'Let op!', N'De verkoop is reeds gesloten. U kan niet meer de toewijzing wijzigen.' \n\tEXEC sp_api_modal_clear\n\tRETURN\n\tEND\n\nSET @linktoME ={[ctr2].id}\n--201028 erbij ivm overbrengen..\nif @LinkToMe is NULL set @LinkToMe={[ctr_overbrengen].id}\n\nDECLARE @maxTeLinken INT,@maxBeschikbaar INT\nSELECT @maxTeLinken = (ctrAmount-IVTOTAL) FROM Q_xTransactionDetail WHERE ID=@LinkToME\n\nIF @maxTeLinken = 0\n\tBEGIN\n\t\tEXEC sp_api_modal_alert N'Regel is al volledig toegewezen'\n\t\tEXEC\t sp_api_go2 1 -- 1 stap terug (+list view; detailviewgebruik EXEC sp_api_go2 1,0)\n\t\tRETURN;\n\tEND\n\n\nSET @maxBeschikbaar = {[ctr1_toewijsbaar].available}\nIF @maxBeschikbaar < @maxTeLinken\n\tBEGIN\n\t\tdeclare @Melding nvarchar(200)\n\t\tset @Melding = concat(N'Niet genoeg beschikbaar! Te linken:',N' ',@maxTeLinken)\n\t\tEXEC sp_api_modal_text @Melding,N'h4 text-muted'\n\t\tSET @text = CONCAT('U kunt maximaal ',@maxBeschikbaar,' van de ',@maxTeLinken,' linken')\n\t\tEXEC sp_api_modal_text @text,N'm-4'\n\t\tSET @maxTeLinken = @maxBeschikbaar\n\tEND\n\nIF @maxTeLinken < 0\n\tBEGIN\n\t\tEXEC sp_api_modal_alert N'Probleem!',N'Regel heeft meer toegewezen dan mag. Ga naar de toewijzing (IV link) en verlaag deze.'\n\t\tEXEC sp_api_modal_clear\n\tEND\n\nDECLARE @aantalTeLinken INT = @maxTeLinken\n\t,@button nvarchar(50)\n\nEXEC sp_api_modal_input @name='Aantal',@value = @aantalTeLinken OUT,@focus=1,@select=1\nEXEC sp_api_modal_button @name='button',@value = 'Link aantal',@valueout=@button OUT,@key=N'Enter'\nIF @button IS NULL RETURN\nset @wat=N'Gekozen ID: '+str(@ID)+' wordt gekoppeld aan CTR: '+str(@LinktoME)\nexec sp_api_toast @wat\n--RETURN; --test\n\nif @linktoME is not null\n\tBEGIN\n\t\texec @main_db.dbo.map @linktoME,@ID, @aantalTeLinken\n\t\t\n\t\t--zet return path\n\t\tSET @ctr2_id = {[ctr2].id}\n\t\tSET @verkoop_id = {[verkoop].id}\n\t\tIF @ctr2_id IS NOT NULL AND @verkoop_id IS NOT NULL AND @aantalTeLinken = @maxTeLinken\n\t\t\tBEGIN\n\t\t\t\tSET @goto = CONCAT('/verkoop/',@verkoop_id,'/ctr2/',@ctr2_id,'/iv2')\n\t\t\t\tSET @referer_path = CONCAT('/verkoop/',@verkoop_id,'/ctr2')\n\t\t\t\tSET @referer_search = CONCAT(N'?id=',@ctr2_id)\n\t\t\t\tEXEC sp_api_toast N'Regel(s) is/zijn gelink bla',N'alert-primary'\t\t\t\t\n\t\t\t\tEXEC sp_api_goto @goto,@referer_path=@referer_path,@referer_search=@referer_search\n\t\t\tEND\n\t\t--210115 \n--\t\texec sp_api_go3\n\t\texec sp_api_modal_clear\n\tEND\n\n\n--if @parent_card_name='ctr2'\n--\tBEGIN\n--\t\texec @main_db.dbo.map @ID, @Parent_ID\n--\tEND\n--else --neem aan parent_parent...\n--\tBEGIN\n--\t\texec @main_db.dbo.map @ID, @Parent_Parent_ID\n--\tEND\n\n--EXEC sp_api_goto @path",
                    "action_id": 13,
                    "action_name": "link_this",
                    "source_table": "api_card_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_modal_button_back",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@set_values",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@set_values n"
                },
                {
                    "name": "@invisible",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@invisible b"
                }
            ],
            "embedded_example": "DON'T USE! -- this is an internal button!",
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_modal_chart",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@name n"
                },
                {
                    "name": "@data",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@data n"
                },
                {
                    "name": "@height",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "'400px'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@height n"
                },
                {
                    "name": "@tmptable",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@tmptable n"
                },
                {
                    "name": "@inline",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@inline b"
                },
                {
                    "name": "@class",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@class n"
                },
                {
                    "name": "@type",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "'bar'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 7,
                    "full_declaration_from_def": "@type n"
                },
                {
                    "name": "@title",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 8,
                    "full_declaration_from_def": "@title n"
                },
                {
                    "name": "@options",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 9,
                    "full_declaration_from_def": "@options n"
                },
                {
                    "name": "@value",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 10,
                    "full_declaration_from_def": "@value n"
                },
                {
                    "name": "@dataset_value",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 11,
                    "full_declaration_from_def": "@dataset_value n"
                },
                {
                    "name": "@number_value",
                    "type_from_sys": "float",
                    "type_from_def": "f",
                    "max_length_bytes": 8,
                    "precision": 53,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 12,
                    "full_declaration_from_def": "@number_value f"
                },
                {
                    "name": "@animation",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "1",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 13,
                    "full_declaration_from_def": "@animation b"
                },
                {
                    "name": "@animation_duration",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "200",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 14,
                    "full_declaration_from_def": "@animation_duration i"
                },
                {
                    "name": "@set_values",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 15,
                    "full_declaration_from_def": "@set_values n"
                },
                {
                    "name": "@back_invisible",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 16,
                    "full_declaration_from_def": "@back_invisible b"
                },
                {
                    "name": "@print",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 17,
                    "full_declaration_from_def": "@print b"
                },
                {
                    "name": "@top",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 18,
                    "full_declaration_from_def": "@top i"
                }
            ],
            "embedded_example": "SELECT * INTO #tmptable\r\nFROM(\r\n\tSELECT\r\n\t\t[dataset] = 'Week 3'\r\n\t\t,[label] = 'Sales IBM'\r\n\t\t,[number] = 300\r\n) t\r\n\r\nEXEC sp_api_modal_chart @tmptable = '#tmptable'\r\n\t,@name = '@sales' --click on values, result @sales, @sales_dataset, @sales_number\r\n\t,@title = 'Sales'",
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_modal_choose",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@list",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@list n"
                },
                {
                    "name": "@value",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@value n"
                },
                {
                    "name": "@name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@name n"
                },
                {
                    "name": "@class",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@class n"
                },
                {
                    "name": "@startkey",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "1",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@startkey i"
                },
                {
                    "name": "@keyprefix",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 40,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "'F'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@keyprefix n"
                },
                {
                    "name": "@class_updated",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 7,
                    "full_declaration_from_def": "@class_updated n"
                },
                {
                    "name": "@multi",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 8,
                    "full_declaration_from_def": "@multi b"
                },
                {
                    "name": "@tmptable",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 9,
                    "full_declaration_from_def": "@tmptable n"
                },
                {
                    "name": "@orderby",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 10,
                    "full_declaration_from_def": "@orderby n"
                },
                {
                    "name": "@translate",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 11,
                    "full_declaration_from_def": "@translate b"
                },
                {
                    "name": "@seed",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 12,
                    "full_declaration_from_def": "@seed n"
                },
                {
                    "name": "@inline",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "1",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 13,
                    "full_declaration_from_def": "@inline b"
                },
                {
                    "name": "@reducer",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 14,
                    "full_declaration_from_def": "@reducer n"
                },
                {
                    "name": "@name_filter",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 512,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 15,
                    "full_declaration_from_def": "@name_filter n"
                },
                {
                    "name": "@select_all_button",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 16,
                    "full_declaration_from_def": "@select_all_button b"
                },
                {
                    "name": "@reset_values",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 17,
                    "full_declaration_from_def": "@reset_values n"
                },
                {
                    "name": "@button_class",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "N'primary'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 18,
                    "full_declaration_from_def": "@button_class n"
                },
                {
                    "name": "@ids",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 19,
                    "full_declaration_from_def": "@ids n"
                },
                {
                    "name": "@id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 20,
                    "full_declaration_from_def": "@id i"
                },
                {
                    "name": "@value_seperator",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 21,
                    "full_declaration_from_def": "@value_seperator n"
                },
                {
                    "name": "@table",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 22,
                    "full_declaration_from_def": "@table n"
                },
                {
                    "name": "@column",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 23,
                    "full_declaration_from_def": "@column n"
                },
                {
                    "name": "@column_classes",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 24,
                    "full_declaration_from_def": "@column_classes n"
                }
            ],
            "embedded_example": "SELECT id = CountryId, name = IsoCode, selected = CAST(0 as bit) INTO #tmptable FROM xCountry\r\nEXEC sp_api_modal_choose @list = N'A,B,C',@value = @button_choose OUT -- ,@multi = 0, @table ='xCountry', @column = 'Name_0',@id = @country_id OUT --\r\n\t--,@name = '@button_choose'\r\n\t--,@class = 'btn-outline-danger'\r\n\t--,@class_updated = 'btn-danger'\r\n\t--,@startkey = 1 -- 0 = no keys or NULL = first character of text\r\n\t--,@keyprefix = 'F'\r\n\t--,@multi = 0 --allow multiple values\r\n\t--,@tmptable = '#tmptable'\r\n\t--,@orderby = 'ORDER BY name'\r\n\t--,@inline = 1\r\n\t--,@reducer = NULL\r\n\t--,@reset_values = N'@button,lastname,etc' -- onchange, reset other values\r\n\t--,@ids = NULL OUT --GB240905\r\n\t--,@value_seperator = ' - ' --GB240905",
            "embedded_description": null,
            "co_occurrence_stats": {
                "dbo.sp_api_modal_table": 10,
                "dbo.sp_api_modal_table_update": 2,
                "dbo.sp_api_modal_text": 15,
                "dbo.sp_api_modal_button": 13,
                "dbo.sp_api_modal_clear": 6,
                "dbo.sp_api_modal_select_all_clear": 1,
                "dbo.sp_api_modal_select": 4,
                "dbo.sp_api_modal_date": 6,
                "dbo.sp_api_modal_csv": 4,
                "dbo.sp_api_modal_date_from_to": 4,
                "dbo.sp_api_modal_print": 4,
                "dbo.ABCDATE": 2,
                "dbo.sp_api_modal_save": 1,
                "dbo.sp_api_modal_input": 8,
                "dbo.sp_api_toast": 6,
                "dbo.sp_api_modal_route": 1,
                "dbo.sp_api_modal_value": 2,
                "dbo.sp_api_modal_post": 1,
                "dbo.sp_api_modal_input_decimal": 1,
                "dbo.sp_api_populate_card": 1,
                "dbo.sp_api_modal_select_table": 2,
                "dbo.sp_api_email": 4,
                "dbo.sp_api_push_bullet": 1,
                "dbo.sp_api_modal_scanner": 2,
                "dbo.sp_sys_file_upload_base64": 1,
                "dbo.sp_api_goto": 1,
                "dbo.sp_api_modal_qr_scanner": 1,
                "dbo.sp_api_modal_alert": 3,
                "dbo.sp_api_modal_html": 1,
                "dbo.sp_api_modal_values_clear": 1,
                "dbo.sp_api_modal_restart": 1,
                "dbo.sp_api_modal_get_value": 2,
                "dbo.sp_api_modal_choose_list": 1
            },
            "real_usage_examples": [
                {
                    "sql_source": "/*\nDECLARE @button23 nvarchar(max) ,@buttongeert nvarchar(max) \n--EXEC sp_api_modal_button @name='buttongeert',@value = 'hidden', @valueout = @buttongeert OUT\nEXEC sp_api_modal_text @button23\nIF @buttongeert IS NOT NULL EXEC sp_api_modal_text N'werewrtwetwertwertwe'\n\n\nEXEC sp_api_modal_button @name='@buttongeert',@value = 'hidden', @valueout = @buttongeert OUT\n\n\n\nEXEC sp_api_modal_choose @list = N'a,b,c, dirk,pieter,derkje',@value = @button23 OUT,@startkey=5 --,@keyprefix=N'Alt+'\n\nEXEC sp_api_modal_button @name='buttongeert',@value = 'Tralalala', @valueout = @buttongeert OUT ,@class='btn-danger',@key='Enter'\n\n\nEXEC sp_api_modal_text @button23\n--RETURN\n*/\n\nSELECT TOP 5 id, Code, CompanyName,invoiceEmail,Aantal = CAST(NULL as decimal(18,4)) INTO #modalupdate FROM xCompany ORDER BY 2\n--INSERT #modalupdate DEFAULT VALUES --maak evt. een nieuw record\nEXEC sp_api_modal_table_update @tmptable = N'#modalupdate',@addnew=2\n\n-- hier heb je bijgewerkte data\nDECLARE @button1 nvarchar(128),@button_text1 nvarchar(128) = 'Opslaan'\nEXEC sp_api_modal_button @name='button1',@value = @button_text1, @valueout = @button1 OUT ,@class='btn-danger',@key='Enter'\nDECLARE @code nvarchar(100)= (SELECT TOP 1 code from #modalupdate ORDER BY code DESC )\nEXEC sp_api_modal_text @code\nEXEC sp_api_modal_text N'Result:',N'h4 text-muted'\nEXEC sp_api_modal_table @tmptable = N'#modalupdate'\nRETURN\n--cursortje\nDECLARE @compid int\n\t\t,@cCode nvarchar(12)\n\t\t,@cCompanyName nvarchar(50)\n\t\tDECLARE @cursor_xCompany CURSOR\n\tSET @cursor_xCompany = CURSOR LOCAL FAST_FORWARD FOR\nselect id, Code, CompanyName from #modalupdate\n\tOPEN @cursor_xCompany;\n\tFETCH NEXT FROM @cursor_xCompany INTO\n\t\t@compid\n\t\t,@cCode\n\t\t,@cCompanyName\n\t\t\n\tWHILE @@FETCH_STATUS = 0\n\t\tBEGIN\n\t\t\t\n\t\t\tupdate xCompany set code=@cCode, CompanyName=@cCompanyname where id=@compid\n\t\t\t\n\t\t\tFETCH NEXT FROM @cursor_xCompany INTO\n\t\t\t\t@compid\n\t\t\t\t,@cCode\n\t\t\t\t,@cCompanyName\n\t\t\t\n\t\tEND\n\tCLOSE @cursor_xCompany;\n\tDEALLOCATE @cursor_xCompany;\n\n\n",
                    "action_id": 473,
                    "action_name": "table_update",
                    "source_table": "api_card_actions"
                },
                {
                    "sql_source": "SET @text = N'You pressed: '+ISNULL(@button,'[nothing, eg. NULL]')\nEXEC sp_api_modal_text @text\nEXEC sp_api_modal_choose @list=N'ABC,DEF,GHI,JLK', @name = '@button', @value = @button OUT",
                    "action_id": 499,
                    "action_name": "Pre Declare",
                    "source_table": "api_card_actions"
                },
                {
                    "sql_source": "EXEC sp_api_modal_choose @list = N'Draft,Sent,Exact',@value = @button_choose OUT\n\nIF @button_choose IS NOT NULL\n\tBEGIN\n\t\tUPDATE xInvoice set status = @button_choose WHERE id IN ({@ids})\n\t\tEXEC sp_api_modal_clear\n\t\t--EXEC sp_api_modal_select_all_clear --juist even niet!\n\tEND\t",
                    "action_id": 511,
                    "action_name": "Status naar ...",
                    "source_table": "api_card_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_modal_choose_list",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@list",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@list n"
                },
                {
                    "name": "@value",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@value n"
                },
                {
                    "name": "@name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@name n"
                },
                {
                    "name": "@placeholder",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 512,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@placeholder n"
                },
                {
                    "name": "@initial_id",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 4000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@initial_id n"
                },
                {
                    "name": "@top",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 64,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "50",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@top n"
                },
                {
                    "name": "@use_placeholder",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 7,
                    "full_declaration_from_def": "@use_placeholder n"
                }
            ],
            "embedded_example": "EXEC sp_api_modal_choose_list N'left,center,right', @value = @value OUT --\r\n\t,@name = NULL\r\n\t,@placeholder = NULL\r\n\t,@initial_id = NULL\r\n\t,@top = 50\r\n\t,@use_placeholder = NULL",
            "embedded_description": null,
            "co_occurrence_stats": {
                "dbo.sp_api_modal_input": 1,
                "dbo.sp_api_toast": 1,
                "dbo.sp_api_modal_text": 1,
                "dbo.sp_api_modal_html": 1,
                "dbo.sp_api_modal_clear": 1,
                "dbo.sp_api_modal_button": 1,
                "dbo.sp_api_modal_alert": 1,
                "dbo.sp_api_email": 1,
                "dbo.sp_api_modal_table": 1,
                "dbo.sp_api_modal_value": 1,
                "dbo.sp_api_modal_values_clear": 1,
                "dbo.sp_api_modal_restart": 1,
                "dbo.sp_api_modal_get_value": 1,
                "dbo.sp_api_modal_choose": 1
            },
            "real_usage_examples": [
                {
                    "sql_source": "--241213 @GB: let op @origin gebruiken we hier niet.. maar dat is niet het probleem\r\n\r\n-------------------------------------------------------\r\n--\t#qr_action_verwerk_micro_pick_v11\r\n--\tversie met herschikking van gekoppelde miscro-items na scannen van een pallet (scanned_pallet-id) \r\n--\tPRE DECLARE: \r\n/*\r\n@uuid int ,@origin nvarchar(1024), @button_choose nvarchar(max) = null , @sampleqrscanner nvarchar(max)= null, @button5 nvarchar(max) = null, @button_choose2 nvarchar(max) = NULL, @b6 nvarchar(128) = NULL\r\n,@button nvarchar(max) = NULL,@mol nvarchar(max) = NULL,@button2 nvarchar(max) = NULL,@T nvarchar(max) = NULL,@sku_check nvarchar(max) = NULL\r\n,@button3 nvarchar(max) = NULL,@xstock_id nvarchar(max) = NULL,@aantal_serials_nodig nvarchar(max) = NULL,@sku_oke nvarchar(max) = NULL,@button4 nvarchar(max) = NULL\r\n,@pal_select_button nvarchar(128)=NULL,@pal_select nvarchar(128)=NULL,@button_choose_pal nvarchar(128)=NULL,@button_scan_serials_for_mol nvarchar(128)=NULL,@button_replenish nvarchar(128)=NULL,@replenish_loc nvarchar(128)=NULL\r\n,@ps nvarchar(128)=NULL, @pallet_mol_id int = NULL, @this_SP int = null, @pipa int = null\r\n,@but_10 nvarchar(128)=NULL\r\n\r\n*/\r\nexec sp_api_toast N'micro pick V11'\r\ndeclare @scanned_codes nvarchar(max) ; EXEC sp_api_modal_get_value @name='@scanned_codes',@value = @scanned_codes OUT --231211 IPV PREDECLARED\r\n-------------------------------------------------------\r\ndeclare @mob int = @uuid --opgeschoond scan ID \r\ndeclare @no_serials bit = null\r\ndeclare @this_pallet_id int =0 \r\ndeclare @this_pallet_nr int =0\r\ndeclare @this_pal_colli int =0\r\ndeclare @this_xstock_id int =0\r\ndeclare @this_item_lotnr nvarchar(128)\r\ndeclare @this_sku nvarchar(128)\r\ndeclare @this_pallet_type nvarchar(128) --'full, pick, replenish'\r\ndeclare @this_id int --temp table cursor\r\n--execute sp_api_toast '111111111'\r\n----------------------------------------------------------\r\n--\tafdwingen eerst replenishpallets halen en replenishen!\r\n----------------------------------------------------------\r\n\r\n\r\ndrop table if exists #mr \r\ndrop table if exists #list\r\ndeclare @button_gearriveerd_bij_pallet nvarchar(128)\r\n--declare @mob int=(select top 1 id from wms_micro_outbound order by id desc)\r\n--declare @T nvarchar(2000)\r\n\r\nselect --231130 TOP 1, zodat je per container goed bezig bent!\r\n\tp_pick.w_lot_id\r\n\t,pick_pal_id=p_pick.id\r\n\t,w_lot.container_number\r\n\t,adv_full_pos\r\n\t,p_pick.pallet_nr \r\n\t,mol.xstock_id\r\n\t,mol.id\r\n\t,mol.preferred_pallet_ids\r\n\t,mol.scanned_pallet_id\r\n\t,T=concat(N'Ga naar lokatie ',upper(mol.adv_full_pos), ' en haal daar'\r\n\t\t\t\t\t--,' en haal daar Pallet ',p_pick.pallet_nr\r\n\t\t\t\t\t--240122 eventueel willekeurig als de preferred_pallet al in gebruik is.. \r\n\t\t\t\t\t, case \r\n\t\t\t\t\t\twhen exists(select 1 from wms_micro_outbound_lines where scanned_pallet_id=mol.preferred_pallet_ids)\r\n\t\t\t\t\t\tthen ' een Pallet'\r\n\t\t\t\t\t\telse concat(' Pallet ',p_pick.pallet_nr)\r\n\t\t\t\t\t\tend\r\n\t\t\t\t\t\r\n\t\t\t\t\t,' met ',p_pick.colli,' colli' --231130\r\n\t\t\t\t\t,' van container ',upper(w_lot.container_number)\r\n\t\t\t\t\t,'. Artikel: ', upper(mol.lookupcode) \r\n\t\t\t\t\t)--* \r\n\t,remark --is dus 'replenish'\t\t\t\t\r\n\t,mol_amount=mol.amount --231130\r\ninto #mr \r\nfrom q_wms_micro_outbound_lines mol\r\n\t\t\tjoin w_lot on w_lot.id=mol.w_lot_id\r\n\t\t\tjoin w_pallet p_pick \r\n\t\t\t\t\ton p_pick.id=try_cast(preferred_pallet_ids as int) \r\n\t\t\t\t\t\t--dwing af dat de pallet uit de opgegeven mol-container komt\r\n\t\t\t\t\t\tand p_pick.w_lot_id=mol.w_lot_id\r\n\t\t\twhere mol.wms_micro_outbound_id=@mob \r\n\t\t\t\tand remark='replenish' \r\n\t\t\t\tand (\r\n\t\t\t\t\tscanned_pallet_id is null \r\n\t\t\t\t\tor NOT exists( select 1 from w_pallet where id=scanned_pallet_id and micro_pick_allowed=1)\r\n\t\t\t\t\t)\r\n\t\t\t\t\r\n\t\t\t\t--231020 met DENNIS LIVE IN MESONINE !!! (als de items al op de mol zijn toegekend, dan niet meer replenishen , want er waren er kennelijk genoeg\r\n\t\t\t\t-- nu wordt alles tegengehouden.. ook de pallets die wel gereplenished moeten worden..\r\n\t\t\t\tAND\tmol.linked_amount <> mol.amount\r\n\r\n--dev test select * from #modal_report \r\n--live \r\nselect * into #list from #mr\r\nif exists(select 1 from #list) exec sp_api_modal_text N'REPLENISH PALLETS',@class='h1'\r\nset @T = NULL\r\nif exists(select 1 from #mr)\r\nBEGIN\r\n\tSet @T='<ul>'--start lijst\r\nEND\r\n\r\nwhile exists(select 1 from #mr)\r\nBEGIN\r\n\tset @this_id=(select top 1 id from #mr)\r\n\tset @T=concat(@T,'<li>',(select T from #mr where id=@this_id),'</li>')\r\n\tdelete from #mr where id=@this_id\r\nEND\r\nif @T >''--lijst afsluiten\r\nBEGIN\r\nset @t=concat(@T,'</ul>')\r\nexec sp_api_modal_html @T\r\nEND\r\n\r\nWHILE exists(select 1 from #list) --bevat te replenishen pallets\r\nBEGIN -- 231004 REPLENISH PART\r\n\t--exec sp_api_modal_table @tmptable=N'#mr',@print=1,@excel=1 -- output to react client\r\n\tEXEC sp_api_modal_button @name='@button_gearriveerd_bij_pallet',@value = 'Ik ben bij de pallet', @valueout = @button_gearriveerd_bij_pallet OUT,@class='btn-danger',@key='Enter'\r\n\tif @button_gearriveerd_bij_pallet is null RETURN\r\n\t--scan pallet-sticker\r\n\texec sp_api_modal_text N'scan pallet sticker'\r\n\tEXEC sp_api_modal_input @name = '@ps', @value = @ps OUT ,@focus=1\r\n\r\n\tif @ps is null return\r\n\tif left(@ps,3)<>'ps:'\r\n\tBEGIN\r\n\t\texec sp_api_modal_text N'Dit is geen Tracy pallet sticker QR code'\r\n\t\t--exec sp_api_modal_restart--231130\r\n\r\n\t\tRETURN\r\n\tEND\t\r\n\r\n\r\n\tset @this_pallet_id=right(@ps,len(@ps)-3)\r\n\tif  not exists(select * from w_pallet where id=@this_pallet_id and w_lot_id in(select w_lot_id from #list) )\r\n\tBEGIN\r\n\t\tif  exists(select * from wms_micro_outbound_lines where scanned_pallet_id=@this_pallet_id )\r\n\t\tBEGIN --231009 pallet is er al.\r\n\t\t\texec sp_api_modal_text N'Deze pallet is al gescand en toegevoegd.'\r\n\t\tEND\t\r\n\t\telse BEGIN\t\r\n\t\t\texec sp_api_modal_text N'Dit is een pallet uit een ** VERKEERDE ** container'\r\n\t\tEND\r\n\t\texec sp_api_modal_beep 1100, 500 --error !\r\n\t\t--set @T=concat('pallet lot: ',(select w_lot_id from w_pallet where id=@this_pallet_id and w_lot_id in(select w_lot_id from #list) ))\r\n\t\t--exec sp_api_modal_text @T\r\n\t\t--exec sp_api_modal_table @tmptable=N'#modal_report',@print=1,@excel=1 -- output to react client\r\n\t\texec sp_api_modal_restart--231130\r\n\t\tRETURN\r\n\tEND\r\n\r\n\tif  not exists(select * from w_pallet p\r\n\t\t\t\t\twhere p.id=@this_pallet_id \r\n\t\t\t\t\t\t--\tand xstock_id in(select xstock_id from #list) \r\n\t\t\t\t\t\tand exists(select 1 from #list where #list.xstock_id=p.xstock_id and #list.mol_amount <= p.colli) --de gekozen pallet moet voor replenishen voldoende colli hebben 231130!!\r\n\t\t\t\t)\r\n\tBEGIN\r\n\t\texec sp_api_modal_text N'(1)Dit is ** NIET ** de juiste pallet. => Wel juiste container, maar verkeerd artikel of verkeerd colli aantal op de pallet!'\r\n\t\texec sp_api_modal_beep 1100, 500 --error !\r\n\t\t--set @T=concat('pallet lot: ',(select w_lot_id from w_pallet where id=@this_pallet_id and w_lot_id in(select w_lot_id from #list) ))\r\n\t\t--exec sp_api_modal_text @T\r\n\t\t--exec sp_api_modal_table @tmptable=N'#modal_report',@print=1,@excel=1 -- output to react client\r\n\t\t\t--exec sp_api_modal_restart--231130\r\n\t\t\t--EXEC sp_api_modal_values_clear @ignore='@uuid' --231130 KEEP SCANNED QR\r\n\t\t\texec sp_api_modal_value @name=N'@button_gearriveerd_bij_pallet'\r\n\t\t\texec sp_api_modal_value @name=N'@ps' -- er bij\r\n\t\tRETURN\r\n\tEND\r\n\tdeclare @foutinfo nvarchar(max)\r\n\t-- extra check 241213  -------------------------------------\r\n\tif exists(select 1 from mol where scanned_pallet_id=@this_pallet_id and mob_id<>@mob)\r\n\tBEGIN\r\n\t\texec sp_api_modal_ALERT N'FOUT','Deze pallet is al gekoppeld aan een andere outbound!'\r\n\t\texec sp_api_modal_beep 1100, 500 --error !\r\n\t\tdeclare @FOUT_bound int =(select top 1 mob_id from mol where scanned_pallet_id=@this_pallet_id and mob_id<>@mob)-- foute outbound..\r\n\r\n\r\n\t\tSET @foutinfo =\r\n\t\t\tconcat('Bij Outbound met ref: '\r\n\t\t\t\t\t,(select out_ref from mob where id=@mob)\r\n\t\t\t\t\t,' werd pallet id: ', @this_pallet_id\r\n\t\t\t\t\t,' (pal_nr: ', (select pallet_nr from w_pallet where id=@this_pallet_id),' )'\r\n\t\t\t\t\t,' gescand, maar die is (onjuist) gelinkt aan outbound : '\r\n\t\t\t\t\t,(select out_ref from mob where id=@FOUT_bound))\r\n\t\t-- Verstuur de e-mail\r\n\t\tEXEC sp_api_email \r\n\t\t\t@To = 'rick@tracy.nu + mterlouw@rwsbv.com',\r\n\t\t\t@Subject = 'Pallet FOUT ontdekt bij Replenish Scan',\r\n\t\t\t@Body = @foutinfo;\r\n\t\t\r\n\t\texec sp_api_modal_value @name=N'@button_gearriveerd_bij_pallet'\r\n\t\texec sp_api_modal_value @name=N'@ps' -- er bij\r\n\t\tRETURN\r\n\tEND\r\n\t-- einde  241213 extra check------------------------------- \r\n\r\n\r\n\t--we zitten nu absoluut op een pallet uit de juiste container en met het juiste artikel\r\n\t-- voorbereiden op replenishen\r\n\tset @this_pallet_type=N'REPLENISH'\r\n\tset @this_xstock_id=(select xstock_id from w_pallet where id=@this_pallet_id)\r\n\t--#list bevat hier alleen maar replenish regels\r\n\r\n/*\tif exists(select id from #list where scanned_pallet_id=@this_pallet_id) -- de pallet moet nog op MICRO_PICK_ALLOWED worden gezet\r\n\tBEGIN\r\n\t\texec sp_api_modal_text N'zet deze geselecteerde pallet op micro pick allowed....'\r\n\t\treturn\r\n\tEND\r\n*/\r\n/*\tif exists(select id from #list where @this_pallet_id in (select value from string_split(preferred_pallet_ids,','))) -- gewenst\r\n\tBEGIN\r\n\t\tset @T=N'Zet deze gewenste pallet definitief naar \"scanned_pallet_id\" en micro pick allowed....'\r\n\t\texec sp_api_modal_text @T\r\n\t\treturn\r\n\tEND\r\n*/\r\n\tif exists(select id from #list where scanned_pallet_id=@this_pallet_id) -- de pallet moet nog op MICRO_PICK_ALLOWED worden gezet\r\n\t\tOR exists(select id from #list where @this_pallet_id in (select value from string_split(preferred_pallet_ids,','))) -- gewenst\r\n\t\tOR exists(select id from #list where xstock_id=@this_xstock_id and @this_pallet_id not in (select value from string_split(preferred_pallet_ids,','))  ) -- alternatief\r\n\t--*************************\r\n\t-- HET RESPLENISHEN IS HIER\r\n\t--************************* \r\n\tBEGIN\r\n\t\t--231006 zorg dat er een pick pallet is\r\n\t\t--declare @pipa int = null\r\n\t\texec create_outbound_pickpallet --SELECTEERT OF MAAKT NIEUW..\r\n\t\t\t@wms_micro_outbound_id = @mob\r\n\t\t\t,@pallet_id  =@pipa output\r\n\t\t--print @pipa\r\n\r\n\t\tset @pallet_mol_id=(select top 1 id from #list where xstock_id=@this_xstock_id and scanned_pallet_id is null) -- er kan maar 1 replenish zijn voor 1 artikel !\r\n\t\t--set @T=concat(N'Deze pallet (pal.nr. ',(select pallet_nr from w_pallet where id=@this_pallet_id),') als alternatief gebruiken en definitief naar \"scanned_pallet_id\" en micro pick allowed....ipv prefrerred ', (select string_agg(preferred_pallet_ids,' *** ') from #list))\r\n\t\t--exec sp_api_modal_text @T\r\n\r\n\t\tif @replenish_loc is null \r\n\t\tBEGIN\r\n\t\t\tset @replenish_loc=(select pick_position from xstock where id=@this_xstock_id)\r\n\t\tEND\t\r\n\t\t--check of de replenishment al is geregistreerd op de pallet\r\n\t\t-- losse items picken en darvan serienummers scannen is niet hier. dit is alleen replenishen!\r\n\t\tif not exists( select * from w_pallet where id=@this_pallet_id and micro_pick_allowed=1)\r\n\t\tBEGIN\r\n\t\t\tEXEC sp_api_modal_input @name = '@replenish_loc', @value = @replenish_loc OUT \r\n\t\t\tEXEC sp_api_modal_button @name='@button_replenish',@value = 'Replenish NOW', @valueout = @button_replenish OUT,@class='btn-danger'\r\n\t\t\tif @button_replenish is null return\t\r\n\t\t\tif @replenish_loc is NULL\r\n\t\t\tBEGIN\r\n\t\t\t\texec sp_api_modal_text N'De POSITIE CODE voor de replenishmentlokatie is verplicht!'\r\n\t\t\t\treturn\r\n\t\t\tEND\r\n\t\t\t\r\n\t\t\t--update w_pallet set micro_pick_allowed=1,position_code=@replenish_loc where id=@this_pallet_id\r\n\t\t\t--update wms_micro_outbound_lines set scanned_pallet_id=@this_pallet_id where id=@pallet_mol_id\r\n\t\t\t-- is hieronder\r\n\t\t\texec sp_api_modal_clear\r\n\t\t\r\n\t\tEND\r\n\r\n\r\n\t\tupdate top(1) wms_micro_outbound_lines \r\n\t\t\tset scanned_pallet_id = @this_pallet_id\r\n\t\t\t\t,chk=1\r\n\t\t\t\t,remark='pick' --231006 van replenish naar pick\r\n\t\t\twhere ( scanned_pallet_id is null or scanned_pallet_id=@this_pallet_id)\r\n\t\t\t\tand id = @pallet_mol_id\r\n\t\t\r\n\t\tupdate w_pallet \r\n\t\t\tset micro_pick_allowed=1 \r\n\t\t\t\t,position_code=@replenish_loc--'rick'\r\n\t\t\twhere id=@this_pallet_id\t\t\r\n\r\n\t\tdeclare @assign_micro_items int =(select amount from wms_micro_outbound_lines where id=@pallet_mol_id)\r\n\t\twhile isnull(@assign_micro_items,0) >0\r\n\t\tBEGIN\r\n\t\t\tupdate top(1) wms_micro_item set w_pallet_pick_id=@pipa, wms_MICRO_OUTBOUND_LINES_ID=@pallet_mol_id where wms_micro_item.w_pallet_id=@this_pallet_id and w_pallet_pick_id is null\r\n\t\t\t--exec sp_api_toast N'  ** ITEM **'\r\n\t\t\t--exec sp_api_toast @this_pallet_id\r\n\t\t\t--exec sp_api_toast @pipa\r\n\t\t\tset @assign_micro_items = @assign_micro_items -1\r\n\t\tEND\t\r\n\t\treturn\r\n\tEND\r\n\r\n\texec sp_api_modal_text N'gelukt'\r\n\t\r\n\r\n\r\n\tset @this_SP= (select scanned_pallet_id from q_wms_micro_outbound_lines \r\n\t\t\t\t\twhere wms_micro_outbound_id=@mob \r\n\t\t\t\t\t\tand remark='replenish' \r\n\t\t\t\t\t\tand exists( select 1 from w_pallet where id=scanned_pallet_id and micro_pick_allowed=1)\r\n\t\t\t\t\t) \r\n\tif @this_SP is not NULL\r\n\tBEGIN\r\n\t\tdelete from #list where scanned_pallet_id=@this_SP and remark='replenish'\t\t\t\r\n\tEND\t\t\r\n\t\t\t\t\r\n\t\r\n\t----------------------------------------------------------------------------------------------------\r\n\t-- 231002 ALS ER NOG IETS GEREGELD MOET WORDEN BIJ REPLENISHMENT, DAN NIET VERDER. => EERST REGELEN! \r\n\t----------------------------------------------------------------------------------------------------\t\t\t\t\t\r\n\t--exec sp_api_modal_restart--231130\r\n\tEXEC sp_api_modal_value @name='@button_gearriveerd_bij_pallet' --231130 wis allleen deze waarde\r\n\tEXEC sp_api_modal_value @name='@ps' --231130 wis allleen deze waarde\r\n\t--exec sp_api_modal_restart--231130\r\n\treturn\r\nEND --REPLENISH PALLETS HALEN VAN BULK\r\n\r\n\r\n----------------------------------------------------------------------------------------------------\r\n-- 231010 VOLLE PALLETS PAKKEN VAN BULK EN KOPPELEN AAN DE MOL VAN DEZE OUTBOUND\r\n----------------------------------------------------------------------------------------------------\t\t\t\t\t\r\n\r\ndrop table if exists #fpa \r\ndrop table if exists #fpalist\r\n\r\nselect top 1 --231130 2x top 1 !!!\r\n\tp_pick.w_lot_id\r\n\t,pick_pal_id=p_pick.id\r\n\t,w_lot.container_number\r\n\t,adv_full_pos\r\n\t,p_pick.pallet_nr \r\n\t,mol.xstock_id\r\n\t,mol.id\r\n\t,mol.preferred_pallet_ids\r\n\t,mol.scanned_pallet_id\r\n\t,T=concat(N'Ga naar lokatie '\r\n\t\t\t\t--240826,upper(mol.adv_full_pos) --240826 voorheen: dit is een lokatie van een pallet die uit de container komt \r\n\t\t\t\t,isnull ((select position_code from w_pallet where id=p_pick.id) --niew: dit er voor gezet..12:05\r\n\t\t\t\t\t\t,upper(mol.adv_full_pos) --240826 nu baseren op de prefrerred pallet!\r\n\t\t\t\t\t\t)\r\n\t\t\t\t,' en haal daar'\r\n\t\t\t\t\t--240122 was,' en haal daar Pallet ',p_pick.pallet_nr\r\n\t\t\t\t\t--eventueel willekeurig als de preferred_pallet al in gebruik is.. \r\n\t\t\t\t\t, case \r\n\t\t\t\t\t\twhen exists(select 1 from wms_micro_outbound_lines where scanned_pallet_id=mol.preferred_pallet_ids)\r\n\t\t\t\t\t\tthen ' een Pallet'\r\n\t\t\t\t\t\telse concat(' Pallet ',p_pick.pallet_nr)\r\n\t\t\t\t\t\tend\r\n\t\t\t\t\t\r\n\t\t\t\t\t,' met ',p_pick.colli,' colli'--231130\r\n\t\t\t\t\t,' van container ',upper(w_lot.container_number)\r\n\t\t\t\t\t,'. Artikel: ', upper(mol.lookupcode) \r\n\t\t\t\t\t)--* \r\n\t,remark --is dus 'full'\t\t\t\t\t\t\t\r\n\t,mol_amount=mol.amount\t\t--231130\r\ninto #fpa \r\nfrom q_wms_micro_outbound_lines mol\r\n\t\t\tjoin w_lot on w_lot.id=mol.w_lot_id\r\n\t\t\tjoin w_pallet p_pick \r\n\t\t\t\t\ton p_pick.id=try_cast(preferred_pallet_ids as int) \r\n\t\t\t\t\t\t--dwing af dat de pallet uit de opgegeven mol-container komt\r\n\t\t\t\t\t\tand p_pick.w_lot_id=mol.w_lot_id\r\n\t\t\twhere mol.wms_micro_outbound_id=@mob \r\n\t\t\t\tand remark='full' \r\n\t\t\t\tand (\r\n\t\t\t\t\tscanned_pallet_id is null \r\n\t\t\t\t\t-- dit is alleen bij replenishment pallets !!!or NOT exists( select 1 from w_pallet where id=scanned_pallet_id and micro_pick_allowed=1)\r\n\t\t\t\t\t)\r\n--dev test select * from #modal_report \r\n--live \r\nselect * into #fpalist from #fpa  --FULL PALLET LIST\r\nif exists(select 1 from #fpalist) exec sp_api_modal_text N'VOLLE PALLETS OUTBOUND',@class='h1'\r\nset @T = NULL\r\nif exists(select 1 from #fpa)\r\nBEGIN\r\n\tSet @T='<ul>'--start lijst\r\nEND\r\n\r\nwhile exists(select 1 from #fpa)\r\nBEGIN\r\n\tset @this_id=(select top 1 id from #fpa)\r\n\tset @T=concat(@T,'<li>',(select T from #fpa where id=@this_id),'</li>')\r\n\tdelete from #fpa where id=@this_id\r\nEND\r\nif @T >''--lijst afsluiten\r\nBEGIN\r\nset @t=concat(@T,'</ul>')\r\nexec sp_api_modal_html @T\r\nEND\r\n\r\nWHILE exists(select 1 from #fpalist) --bevat volle pallets die op de outbound mee gaan\r\nBEGIN -- 231004 REPLENISH PART\r\n\t--exec sp_api_modal_table @tmptable=N'#mr',@print=1,@excel=1 -- output to react client\r\n\tEXEC sp_api_modal_button @name='@button_gearriveerd_bij_pallet',@value = 'Ik ben bij de pallet', @valueout = @button_gearriveerd_bij_pallet OUT,@class='btn-danger',@key='Enter'\r\n\tif @button_gearriveerd_bij_pallet is null RETURN\r\n\t--scan pallet-sticker\r\n\texec sp_api_modal_text N'scan pallet sticker'\r\n\tEXEC sp_api_modal_input @name = '@ps', @value = @ps OUT ,@focus=1\r\n\r\n\tif @ps is null return\r\n\tif left(@ps,3)<>'ps:'\r\n\tBEGIN\r\n\t\texec sp_api_modal_text N'Dit is geen Tracy pallet sticker QR code'\r\n\t\tRETURN\r\n\tEND\t\r\n\r\n\r\n\tset @this_pallet_id=right(@ps,len(@ps)-3)\r\n\tif  not exists(select * from w_pallet where id=@this_pallet_id and w_lot_id in(select w_lot_id from #fpalist) )\r\n\tBEGIN\r\n\t\tif  exists(select * from wms_micro_outbound_lines where scanned_pallet_id=@this_pallet_id )\r\n\t\tBEGIN --231009 pallet is er al.\r\n\t\t\texec sp_api_modal_text N'Deze pallet is al gescand en toegevoegd.'\r\n\t\tEND\t\r\n\t\telse BEGIN\t\r\n\t\t\texec sp_api_modal_text N'Dit is een pallet uit een ** VERKEERDE ** container'\r\n\t\tEND\r\n\t\texec sp_api_modal_beep 1100, 500 --error !\r\n\t\t--set @T=concat('pallet lot: ',(select w_lot_id from w_pallet where id=@this_pallet_id and w_lot_id in(select w_lot_id from #fpalist) ))\r\n\t\t--exec sp_api_modal_text @T\r\n\t\t--exec sp_api_modal_table @tmptable=N'#modal_report',@print=1,@excel=1 -- output to react client\r\n\t\tRETURN\r\n\tEND\r\n\r\n\tif  not exists(select * from w_pallet p where p.id=@this_pallet_id \r\n\t\t\t\t\t\t--  and xstock_id in(select xstock_id from #fpalist) \r\n\t\t\t\t\t\t--\tand xstock_id in(select xstock_id from #list) \r\n\t\t\t\t\t\tand exists(select 1 from #fpalist where #fpalist.xstock_id=p.xstock_id and #fpalist.mol_amount = p.colli) --de gekozen FULL PALLET pallet exact het opgegeven colli-aantal hebben 231130!!\r\n\t\t\t\t\t)\r\n\tBEGIN\r\n\t\texec sp_api_modal_text N'(2)Dit is ** NIET ** de juiste pallet. => Wel juiste container, maar verkeerd artikel (of CPP onjuist)!'\r\n\t\texec sp_api_modal_beep 1100, 500 --error !\r\n\t\t--set @T=concat('pallet lot: ',(select w_lot_id from w_pallet where id=@this_pallet_id and w_lot_id in(select w_lot_id from #fpalist) ))\r\n\t\t--exec sp_api_modal_text @T\r\n\t\t--exec sp_api_modal_table @tmptable=N'#modal_report',@print=1,@excel=1 -- output to react client\r\n\t\t\t\t\t--exec sp_api_modal_restart --2311390 extra probeersel..\r\n\t\t\t\t\t--EXEC sp_api_modal_values_clear @ignore='@uuid' --231130 KEEP SCANNED QR\r\n\t\t\t\t\texec sp_api_modal_value @name=N'@button_gearriveerd_bij_pallet'\r\n\t\t\t\t\texec sp_api_modal_value @name=N'@ps'\r\n\t\t\t\t\t--exec sp_api_modal_restart--231130 --er bij proberen!!\r\n\t\tRETURN\r\n\tEND\r\n\r\n\r\n\t--we zitten nu absoluut op een pallet uit de juiste container en met het juiste artikel\r\n\t-- voorbereiden op replenishen\r\n\texec sp_api_modal_beep 1800, 200\r\n\tset @this_pallet_type=N'FULL'\r\n\tset @this_xstock_id=(select xstock_id from w_pallet where id=@this_pallet_id)\r\n\tset @this_pal_colli=(select colli from w_pallet where id=@this_pallet_id) -- pallet heeft altijd colli en niet altijd 'items' \r\n\t--#fpalist bevat hier alleen maar full pallet regels (full pallets assignment)\r\n\r\n\r\n\tif  exists(select id from #fpalist where @this_pallet_id in (select value from string_split(preferred_pallet_ids,','))) -- gewenst\r\n\t\tOR exists(select id from #fpalist where xstock_id=@this_xstock_id and @this_pallet_id not in (select value from string_split(preferred_pallet_ids,','))  ) -- alternatief\r\n\t--***********************************\r\n\t-- HET FULL PALLET ASSIGNMENT IS HIER\r\n\t--*********************************** \r\n\tBEGIN\r\n\t\tset @pallet_mol_id=(select top 1 id from #fpalist where xstock_id=@this_xstock_id \r\n\t\t\t\t\t\t\t\tand scanned_pallet_id is null \r\n\t\t\t\t\t\t\t\tand mol_amount=@this_pal_colli --231130 collicheck er bij!\r\n\t\t\t\t\t\t\t) -- er mag maar 1 full pallet zijn voor 1 MOL\r\n\t\t--set @T=concat(N'Deze pallet (pal.nr. ',(select pallet_nr from w_pallet where id=@this_pallet_id),') als alternatief gebruiken en definitief naar \"scanned_pallet_id\" en micro pick allowed....ipv prefrerred ', (select string_agg(preferred_pallet_ids,' *** ') from #fpalist))\r\n\t\t--exec sp_api_modal_text @T\r\n\r\n\t\tif exists( select 1 from wms_micro_outbound_lines where scanned_pallet_id=@this_pallet_id)\r\n\t\tBEGIN --afbreken\r\n\t\t\tset @T=concat('Pallet nummer ',(select pallet_nr from w_pallet where id=@this_pallet_id),' is al gescand')\r\n\t\t\texec sp_api_modal_text @T\r\n\t\t\treturn\r\n\t\tend\r\n\r\n\t\t--=======================================extra 250502============================================================================\r\n\t\tif exists( select 1 from w_pallet_out po where w_pallet_id=@this_pallet_id and xlandfreight_id <> (select lf_id from mob where id=@mob))\r\n\t\tBEGIN --afbreken\r\n\t\t\tset @T=concat('Pallet nummer ',(select pallet_nr from w_pallet where id=@this_pallet_id),' staat gekoppeld aan een andere outbound vracht.')\r\n\t\t\texec sp_api_modal_text @T\r\n\r\n\t\t\t--rick een mailtje!\r\n\t\t\tSET @foutinfo = CONCAT(N'Mob: ',@mob, ' MOL: ',@mol, 'ScannedPallet: ',@this_pallet_id)\r\n\t\t\t\tEXEC sp_api_email @to = 'rick@tracy.nu,gb@tracy.nu',\r\n\t\t\t\t\t@subject = 'RWS - pallet geweigerd. Scanned pallet staat al op andere outbound vracht!',\r\n\t\t\t\t\t@Body = @foutinfo;\r\n\r\n\t\t\treturn\r\n\t\tend\r\n\t\t--=======================================extra 250502============================================================================\r\n\r\n\t\t-------------------------------------------------------------------------------------- A S S I G N   S C A N N E D    P A L L E T\r\n\t\t--oke verder\r\n\t\tupdate top(1) wms_micro_outbound_lines \r\n\t\t\tset scanned_pallet_id = @this_pallet_id\r\n\t\t\t\t,chk=1\r\n\t\t\t\t\r\n\t\t\twhere ( scanned_pallet_id is null or scanned_pallet_id=@this_pallet_id)\r\n\t\t\t\tand id = @pallet_mol_id\r\n\t\t\t\tand remark ='full' -- moet altijd al zo zijn\r\n\t\t--oude items van prefrerred pallet weghalen\r\n\t\t\r\n\t\tIF EXISTS( --GB241216\r\n\t\t\tSELECT * FROM wms_micro_outbound_lines WHERE id <> @pallet_mol_id AND preferred_pallet_ids =\r\n\t\t\t(select preferred_pallet_ids from wms_micro_outbound_lines where id=@pallet_mol_id)\r\n\t\t\t)\r\n\t\t\tBEGIN\r\n\t\t\t\tSET @foutinfo = CONCAT(N'SELECT * FROM wms_micro_outbound_lines WHERE preferred_pallet_ids = ''',\r\n\t\t\t\t\t\t(select preferred_pallet_ids from wms_micro_outbound_lines where id=@pallet_mol_id)\r\n\t\t\t\t\t,'''')\r\n\t\t\t\tEXEC sp_api_email @to = 'rick@tracy.nu,gb@tracy.nu',\r\n\t\t\t\t\t@subject = 'RWS - preferred_pallet_ids probleem!',\r\n\t\t\t\t\t@Body = @foutinfo;\r\n\r\n\t\t\t\t--250408 EVEN niet verder !\r\n\t\t\t\t--EXEC SP_API_MODAL_ALERT N'We breken even af!. Tracy heeft nu een mail om te kijken wat er is' \r\n\t\t\t\t--             RETURN \r\n\t\t\t\t-- 250408--------------------------\r\n\t\t\tEND\r\n\r\n\r\n\t\tupdate w_pallet set wms_micro_outbound_id=null\r\n\t\twhere wms_micro_outbound_id=@mob \r\n\t\tand id in (select preferred_pallet_ids from wms_micro_outbound_lines where id=@pallet_mol_id)\r\n\t\tupdate wms_micro_item \r\n\t\t\tset w_pallet_pick_id=NULL\r\n\t\t\t\t, wms_MICRO_OUTBOUND_LINES_ID=NULL\r\n\t\t\t\t,item_serial_number = null \r\n\t\t\twhere wms_MICRO_OUTBOUND_LINES_ID=@pallet_mol_id \r\n\t\t\t\r\n\r\n\t\t--nieuwe items van gekozen pallet\r\n\t\tupdate w_pallet set wms_micro_outbound_id=@mob where id =@this_pallet_id  --231108 IK NEEM AAN MOB! (er stond MOL )\r\n\t\tupdate wms_micro_item \r\n\t\t\tset w_pallet_pick_id=w_pallet_id\r\n\t\t\t\t, wms_MICRO_OUTBOUND_LINES_ID=@pallet_mol_id \r\n\t\t\twhere wms_micro_item.w_pallet_id=@this_pallet_id\r\n\t\t\t\t and w_pallet_pick_id is null -- in een heel fout geval zou er al een paar items aan een andere outbound kunnen zijn gekoppeld\r\n\t\t-- ?? return\r\n\tEND\r\n\r\n\texec sp_api_modal_text N'gelukt'\r\n\tdelete from #fpalist where id=@pallet_mol_id\r\n\t\r\n\tEXEC sp_api_modal_value @name='@button_gearriveerd_bij_pallet' --231130 wis alleen deze\r\n\tEXEC sp_api_modal_value @name='@ps' --231130 wis allleen deze waarde\r\n\t--exec sp_api_modal_restart--231130 --er bij proberen!!\r\n\treturn\r\n\t--exec sp_api_modal_restart\r\n\t\r\n\t\t\t\t\r\n\t\r\n\t----------------------------------------------------------------------------------------------------\r\n\t-- 231002 ALS ER NOG IETS GEREGELD MOET WORDEN BIJ REPLENISHMENT, DAN NIET VERDER. => EERST REGELEN! \r\n\t----------------------------------------------------------------------------------------------------\t\t\t\t\t\r\n\r\nEND --FULL PALLETS HALEN VOOR DE MICRO OUTBOUND\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n--afkappen na replenish pallets en volle pallets toekennen aan de MOL\r\n--RETURN\r\n\r\n/*\r\n\t--poortwachter\r\n\tif exists(select 1 from q_wms_micro_outbound_lines \r\n\t\t\t\twhere wms_micro_outbound_id=@mob \r\n\t\t\t\t\tand remark='replenish' \r\n\t\t\t\t\tand (\r\n\t\t\t\t\t\tscanned_pallet_id is null \r\n\t\t\t\t\t\tor NOT exists( select 1 from w_pallet where id=scanned_pallet_id and micro_pick_allowed=1)\r\n\t\t\t\t\t\t) \r\n\t\t\t)\r\n\tRETURN -- 231002 ALS ER NOG IETS GEREGELD MOET WORDEN BIJ REPLENISHMENT, DAN NIET VERDER.. EERST REGELEN! \t\t\t\r\n*/\r\n\r\n\r\n--check of er nog VOLLE PALLETS GEHAALD MOETEN WORDEN:\r\n\r\n\r\n--231006\r\nif exists(select 1 from @main_db.dbo.mob_pallets(@mob) where chk=0 or is_processed=0)\r\nbegin\r\n\t--hieronder misschien niet meer nodig.. tot NORMAAL\r\n\t--exec sp_api_toast N'n o r m a a l'\r\n\tgoto NORMAAL --231009 nu gan we serials toevoegen!!!\r\nend\t\r\n\r\n\r\n\r\n\r\n--exec sp_api_toast N'V6'\r\nif exists(select 1 from @main_db.dbo.mob_pallets(@mob) where chk=0 or is_processed=0)\r\nBEGIN\r\n--was\r\n\t--set @T=concat(N'Nog te scannen pallets: ',(select string_agg(concat(plts,' pallets op locatie ',position_code, ' met sku: ',sku, ' en cpp= ',cpp),' - ') from @main_db.dbo.mob_pallets(@mob) where chk=0 ))\r\n\t--exec sp_api_modal_text @T\r\n\t--set @T=concat(N'Scan een opgegeven pallet van de pick-instruction met ref: ',(select UPPER(out_ref) from wms_micro_outbound where id=@mob))\r\n\t--exec sp_api_modal_text @T\r\n--nu\r\n\tif exists(select 1 from wms_micro_outbound_lines where wms_micro_outbound_id=@mob and scanned_pallet_id is null) --231006 was is_processed=0)\r\n\tBEGIN\r\n\t\t--231013 was set @T=concat('Deze pallets zijn nog niet (volledig) op serienummers gescand. Haal de pallet op en Scan de pallet-stickers..','')\r\n\t\tset @T=concat('Deze pallets zijn nog opgehaald en pallet-sticker gescand.','Haal de pallet eerst op. Serienummers scannen komt later.')--niet (volledig) op serienummers gescand. Haal de pallet op en Scan de pallet-stickers..','')\r\n\t\texec sp_api_modal_text @T\r\n\t\tselect [nr~col-1]=pallet_nr\r\n\t\t\t\t,[sku~col-3]= sku\r\n\t\t\t\t--,[lookupcode~col-5]=lookupcode\r\n\t\t\t\t,[amt~col-2]=amount\r\n\t\t\t\t,[st~col-1]=chk\r\n\t\t\t\t,[ser.~col-2]=linked_serials\t\r\n\t\t\t\t,[remark~col-3]=remark\r\n\t\t\t\t\r\n\t\tinto #palnoser from q_wms_micro_outbound_lines where wms_micro_outbound_id=@mob and chk=0 --231013 was (is_processed=0 or chk=0) maar serienummers komen later!\r\n\t\texec sp_api_modal_table @tmptable=N'#palnoser'\r\n\t\t\r\n\r\n\tEND\r\n\r\n\r\nif NOT  exists(select 1 from wms_micro_outbound_lines where wms_micro_outbound_id=@mob and scanned_pallet_id is null) --231006 was is_processed=0)\r\nBEGIN\r\n\t--exec sp_api_modal_alert N'klaar (not)'\r\n\tgoto NORMAAL\r\n\treturn\r\nEND\t\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\tif 1=1\r\n\tbegin\r\n\t\t\r\n\t\tEXEC sp_api_modal_input @name = '@pal_select', @value = @pal_select OUT,@hidden=0,@select=1\r\n\t\tEXEC sp_api_modal_button @name='@pal_select_button',@value = N'Check', @valueout = @pal_select_button OUT,@class='btn-danger',@key='F5' --Enter kan niet verstoort de flow\r\n\t\tif @pal_select_button is null return\r\n\t\tif @pal_select is null return\r\n\t\tif left(@pal_select,3) <> N'ps:'\r\n\t\tBEGIN\r\n\t\t\texec sp_api_modal_text N'Dit is geen palletsticker'\r\n\t\t\treturn\r\n\t\tEND\r\n\t\t\r\n\t\t--oke verder\r\n\t\tset @this_pallet_id=right(@pal_select,len(@pal_select)-3)\r\n\t\tselect \r\n\t\t\t@this_pallet_nr=pallet_nr\r\n\t\t\t,@this_xstock_id=xStock_id\r\n\t\t\t,@this_item_lotnr=pallet_art_lotnr\r\n\t\t\t,@this_pal_colli=colli\r\n\t\tfrom w_pallet where id=@this_pallet_id\r\n\t\t--set @T=concat('scanned pallet stockid: ',@this_xstock_id)\r\n\t\t--exec sp_api_toast @T --231001\r\n\t\tset @this_sku=(select sku from xstock where id=@this_xstock_id)\r\n\t\t--set @T=concat('U heeft gekozen pallet nr: ',@this_pallet_nr)\r\n\t\t--exec sp_api_modal_text @T\r\n\r\n\t\t--declare @pallet_mol_id int =0 -- zoek het mol id die deze pallet als preferred heeft staan \r\n\t\tset @pallet_mol_id=( select top 1 id from wms_micro_outbound_lines \r\n\t\t\t\t\t\t\twhere wms_micro_outbound_id=@uuid \r\n\t\t\t\t\t\t\t\tand (@this_pallet_id in ([preferred_pallet_ids]) \r\n\t\t\t\t\t\t\t\t\tOR @this_pallet_id=[scanned_pallet_id] --(als hij al gekoppeld is aan een MOL)\r\n\t\t\t\t\t\t\t\t\t) \r\n\t\t\t\t\t\t\t)\r\n\t\t\r\n\t\tif @pallet_mol_id is not NULL -- het is een bekende pallet (id stemt overeen met preferred)!\r\n\t\tbegin\r\n\t\t\tset @mol=@pallet_mol_id\r\n\t\t\t----------------------------PICK / FULL / REPLENISH PALLET ?? -------------------\r\n\t\t\tSET @this_pallet_type=(select upper(remark) from wms_micro_outbound_lines where id=@mol)\r\n\t\t\t---------------------------------------------------------------------------------\r\n\t\t\tif (select chk from wms_micro_outbound_lines where id=@pallet_mol_id) =1\r\n\t\t\tBEGIN\r\n\t\t\t\t-- opmerking\r\n\t\t\t\tset @T=concat(N'Deze '\r\n\t\t\t\t\t\t\t\t--,( select UPPER(remark) from wms_micro_outbound_lines where wms_micro_outbound_id=@uuid and @this_pallet_id in ([preferred_pallet_ids]))\r\n\t\t\t\t\t\t\t\t,@this_pallet_type\r\n\t\t\t\t\t\t\t\t,' pallet is al definitief geselecteerd bij deze micro outbound.'\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\texec sp_api_modal_text @T\r\n\t\t\t\t\r\n\r\n\t\t\t\t--inserted 231001 gelijk hier mogelijkheid om serienummers te scannen:\r\n\t\t\t\tif (select is_processed from wms_micro_outbound_lines where id=@pallet_mol_id) =1\r\n\t\t\t\tBEGIN\r\n\t\t\t\t\tset @T=concat(N'Deze pallet is volledig gescand (inc. ',(select count(*) from wms_micro_item where wms_micro_outbound_lines_id=@pallet_mol_id and item_serial_number >N''),' serienummers)')\r\n\t\t\t\t\texec sp_api_modal_text @T\r\n\t\t\t\tEND\r\n\t\t\t\telse BEGIN -- go to scan\r\n\t\t\t\t\t\r\n\t\t\t\t\tif @this_pallet_type ='FULL' --> SHOW SCAN BUTTON!\r\n\t\t\t\t\t\tgoto GOFULL\r\n\t\t\t\t\t/*\t\r\n\t\t\t\t\tBEGIN\r\n\t\t\t\t\t\tEXEC sp_api_modal_button @name='@button_scan_serials_for_mol',@value = 'Scan serials', @valueout = @button_scan_serials_for_mol OUT,@class='btn-danger'\r\n\t\t\t\t\t\t--tot hier inserted 231001 gelijk hier mogelijkheid om serienummers te scannen:\r\n\t\t\t\t\t\tif @button_scan_serials_for_mol is null return\t\r\n\t\t\t\t\t\tif @button_scan_serials_for_mol='Scan serials' goto add_serials_to_mol --231001\r\n\t\t\t\t\tEND\r\n\t\t\t\t\t*/\t\r\n\r\n\t\t\t\t\tif @this_pallet_type ='REPLENISH' --> SHOW REPLENISH BUTTON!\r\n\t\t\t\t\t\tGOTO GOREPLENISH\r\n\t\t\t\t\t/*\r\n\t\t\t\t\tBEGIN\r\n\t\t\t\t\t\tif @replenish_loc is null \r\n\t\t\t\t\t\tBEGIN\r\n\t\t\t\t\t\t\tset @replenish_loc=(select pick_position from xstock where id=@this_xstock_id)\r\n\t\t\t\t\t\tEND\t\r\n\t\t\t\t\t\t--check of de replenishment al is geregistreerd op de pallet\r\n\t\t\t\t\t\t-- losse items picken en darvan serienummers scannen is niet hier. dit is alleen replenishen!\r\n\t\t\t\t\t\tif not exists( select * from w_pallet where id=@this_pallet_id and micro_pick_allowed=1)\r\n\t\t\t\t\t\tBEGIN\r\n\t\t\t\t\t\t\tEXEC sp_api_modal_input @name = '@replenish_loc', @value = @replenish_loc OUT \r\n\t\t\t\t\t\t\tEXEC sp_api_modal_button @name='@button_replenish',@value = 'Replenish NOW', @valueout = @button_replenish OUT,@class='btn-danger'\r\n\t\t\t\t\t\t\tif @button_replenish is null return\t\r\n\t\t\t\t\t\t\tif @button_replenish='Replenish NOW' --hier evt jump naar separaat replenishment\r\n\t\t\t\t\t\t\tBEGIN\r\n\t\t\t\t\t\t\t\tupdate w_pallet set micro_pick_allowed=1,position_code=@replenish_loc where id=@this_pallet_id\r\n\t\t\t\t\t\t\t\tupdate wms_micro_outbound_lines set scanned_pallet_id=@this_pallet_id where id=@pallet_mol_id\r\n\t\t\t\t\t\t\t\texec sp_api_modal_clear\r\n\t\t\t\t\t\t\t\t--PICKLOKATIE !!\r\n\t\t\t\t\t\t\t\t--TODO...\r\n\t\t\t\t\t\t\t\t--+ EVENTUEEL HELE REPLENISH KOP\r\n\t\t\t\t\t\t\tEND\r\n\t\t\t\t\t\tEND\r\n\r\n\t\t\t\t\tEND\r\n\t\t\t\t\t*/\r\n\r\n\r\n\r\n\t\t\t\tEND\r\n\r\n\r\n\r\n\r\n\t\t\tEND\r\n\t\t\tELSE BEGIN -- dus als CHK=0\r\n\t\t\t\tset @T=concat(N'Deze ',( select UPPER(remark) from wms_micro_outbound_lines where wms_micro_outbound_id=@uuid and @this_pallet_id in ([preferred_pallet_ids])),' pallet wordt nu definitief geselecteerd voor deze micro outbound.')\r\n\t\t\t\texec sp_api_modal_text @T\r\n\t\t\t\tupdate wms_micro_outbound_lines \r\n\t\t\t\t\tset chk=1 \r\n\t\t\t\t\t\t,scanned_pallet_id = @this_pallet_id\r\n\t\t\t\twhere id=@pallet_mol_id\r\n\r\n\t\t\t\t--BUSY !\r\n\t\t\t\t--if full dan optioneel serienummers\r\n\t\t\t\t--if replenish dan lokatie\r\n\t\t\t\t\r\n\t\t\t\tEXEC sp_api_modal_button @name='@button_scan_serials_for_mol',@value = 'Scan serials', @valueout = @button_scan_serials_for_mol OUT,@class='btn-danger'\r\n\t\t\t\t\t--tot hier inserted 231001 gelijk hier mogelijkheid om serienummers te scannen:\r\n\t\t\t\t\tif @button_scan_serials_for_mol is null return\t\r\n\t\t\t\t\tif @button_scan_serials_for_mol='Scan serials' goto add_serials_to_mol --231001\r\n\t\t\t\t----231001 JUMP: (2)\r\n\t\t\t\t--set @mol=@pallet_mol_id\r\n\t\t\t\t--goto add_serials_to_mol\r\n\t\t\t\r\n\t\t\tEND\r\n\t\tend\t\r\n\t\telse begin \r\n\t\t\t--\tPallet_mol_id is null, dus gescande pallet-sticker komt niet voor op de instructie.\r\n\t\t\t--\tHet gescande pallet_id komt niet voor in preferred_pallet_id's; kijk of er een mol vrij is om gewisseld te worden\r\n\t\t\t\r\n\t\t\t--\tCheck of er nog wel 'un-assigned' pallets zijn...\r\n\t\t\tif (select count(*) from q_wms_micro_outbound_lines where wms_micro_outbound_id=@mob and isnull(chk,0)=0) =0 --240607 isnull(chk,0)\r\n\t\t\t--alle pallets zijn al toegekend\r\n\t\t\tBEGIN\r\n\t\t\t\texec sp_api_modal_text N'Alle pallets zijn al toegekend, scan de palletsticker om serienummers toe te voegen',@class='h1'\r\n\t\t\tEND\t\r\n\t\t\telse BEGIN\r\n\t\t\t\texec sp_api_modal_text N'Deze pallet staat ** NIET ** in de instructie. Kies de juiste pallet of geef aan welke pallet van de pick-instructie u wilt vervangen.'\r\n\t\t\t\tif NOT exists(select * from wms_micro_outbound_lines where wms_micro_outbound_id=@mob and chk=0 and xstock_id=@this_xstock_id ) --230930 toon alleen een vervangbare pallet_mol als deze hetzelfde artikel heeft!\r\n\t\t\t\tBEGIN\r\n\t\t\t\t\t--set @T=concat(N'Er is ** GEEN ** vervangbare pallet, bevat de zojuist gescande pallet wel het bedoelde artikel? (vergelijk met de pick-instructie)','' )\r\n\t\t\t\t\tset @T=concat(N'Onjuiste pallet!. Scan een ** ANDERE PALLET ** (zie de pick-instructie)','' )\r\n\t\t\t\t\texec sp_api_modal_text @T\r\n\t\t\t\t\treturn --231001\r\n\t\t\t\tEND\r\n\t\t\t\telse BEGIN\r\n\t\t\t\t\tdeclare @replacement_mol_id int --op deze mol wordt een andere pallet uitgeboekt dan oorspronkelijk 'preferred'\r\n\t\t\t\t\t--laat de user een pallet kiezen die op de mol vervangen wordt door de gecande pallet\r\n\t\t\t\t\t/*\t\t--toon tabel:\r\n\t\t\t\t\t\t\texec sp_api_modal_text N'Kies de pallet die u vervangt door de nu gescande pallet:'\r\n\t\t\t\t\t\t\tselect \r\n\t\t\t\t\t\t\t[sku~col-sm-2]=sku\r\n\t\t\t\t\t\t\t,[lookupcode~col-sm-2]=lookupcode\r\n\t\t\t\t\t\t\t,[remark~col-sm-2]=remark\r\n\t\t\t\t\t\t\t,pos=case remark when 'full' then adv_full_pos else adv_pick_pos end\r\n\t\t\t\t\t\t\t,pal_nr=(select pallet_nr from w_pallet where id in (select value from string_split(preferred_pallet_ids,',')))\r\n\t\t\t\t\t\t\tinto #mol \r\n\t\t\t\t\t\t\t\tfrom q_wms_micro_outbound_lines \r\n\t\t\t\t\t\t\t\twhere wms_micro_outbound_id=@mob \r\n\t\t\t\t\t\t\t\t\tand chk=0 \r\n\t\t\t\t\t\t\t\t\tand xstock_id=@this_xstock_id --230930 toon alleen een vervangbare pallet_mol als deze hetzelfde artikel heeft!\r\n\t\t\t\t\t\t\texec sp_api_modal_table @tmptable=N'#mol'\r\n\t\t\t\t\t--*/\t\t\r\n\t\t\t\t\t--/*\r\n\t\t\t\t\t-- maak de keuzelijst van beschikbare micro_outbound_lines die een zelfde artikel bevatten als de gescande pallet en die nog niet aangescand zijn (chk=0)\r\n\t\t\t\t\tdeclare @list nvarchar(4000)\r\n\t\t\t\t\tset @T=concat('thispalcolli: ',@this_pal_colli)\r\n\t\t\t\t\texec sp_api_toast @T\r\n\t\t\t\t\tset @list=(\r\n\t\t\t\t\t\t\tSELECT STRING_AGG(concat(left(concat(mol.id,'          '),10)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t, ' ',upper(mol.remark)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t, ' ',replace(mol.sku,',',';'),' - ',replace(mol.lookupcode,',',';')\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t,' pal.nr: ',p.pallet_nr\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t,' colli: ',p.colli\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t, ','\r\n\t\t\t\t\t\t\t\t\t\t\t) --LET OP: GEEN KOMMA GEBRUIKEN !!!\r\n\t\t\t\t\t\t\tFROM q_wms_micro_outbound_lines mol\r\n\t\t\t\t\t\t\tCROSS APPLY STRING_SPLIT(mol.preferred_pallet_ids, ',') split_val\r\n\t\t\t\t\t\t\tJOIN w_pallet p ON p.id = CAST(split_val.value AS INT)\r\n\t\t\t\t\t\t\tWHERE mol.chk = 0 \r\n\t\t\t\t\t\t\t\tAND mol.wms_micro_outbound_id =@mob \r\n\t\t\t\t\t\t\t\t--? dit check ik zondag wel als ik het niet vergeet, want ik moet nu bikkelen met sassie \r\n\t\t\t\t\t\t\t\t--231001\r\n\t\t\t\t\t\t\t\tAND mol.xstock_id =@this_xstock_id --is not null --=@this_xstock_id --230930 toon alleen een vervangbare pallet_mol als deze hetzelfde artikel heeft!\r\n\t\t\t\t\t\t\t\tAND (mol.remark='replenish' OR (mol.amount=@this_pal_colli))\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\r\n\t\t\t\t\t--pre declare: @button_choose_pal\r\n\t\t\t\t\tEXEC sp_api_modal_text N'Kies een pallet die vervangen wordt door de gescande pallet:',@class='h1'  --je zie de pallet die oorspronkelijk op de mol bedoeld was; maar eigenlijk kiezen we de MOL om er vervolgens de gescande (alternatieve) pallet aan te koppelen\r\n\t\t\t\t\t\r\n\t\t\t\t\t--/*\r\n\t\t\t\t\t\t-- LIST:EXEC sp_api_modal_choose_list @list = @list\r\n\t\t\t\t\t\t--BUTTONS:\r\n\t\t\t\t\t\tEXEC sp_api_modal_choose @list = @list\r\n\t\t\t\t\t\t,@value = @button_choose_pal OUT\r\n\t\t\t\t\t\t--,@startkey=3 --function key starting number\r\n\t\t\t\t\t\tif @button_choose_pal is not NULL\r\n\t\t\t\t\t\tBEGIN\t\r\n\t\t\t\t\t\t\tset @replacement_mol_id=left(@button_choose_pal,10) --eerste stukje is het mol_id\r\n\t\t\t\t\t\t\t--exec sp_api_toast @button_choose_pal\r\n\t\t\t\t\t\t\tif not exists(select 1 from wms_micro_outbound_lines where id=@replacement_mol_id)\r\n\t\t\t\t\t\t\tBEGIN\r\n\t\t\t\t\t\t\t\texec sp_api_modal_alert N'Er is iets verkeerd gegaan met de selectie!!'\r\n\t\t\t\t\t\t\t\treturn\r\n\t\t\t\t\t\t\tEND\r\n\t\t\t\t\t\t\t--oke verder\r\n\t\t\t\t\t\t\tupdate wms_micro_outbound_lines \r\n\t\t\t\t\t\t\t\tset chk=1 \r\n\t\t\t\t\t\t\t\t,scanned_pallet_id = @this_pallet_id\r\n\t\t\t\t\t\t\twhere id=@replacement_mol_id\r\n\t\t\t\t\t\t\tset @mol=@replacement_mol_id\r\n\r\n\t\t\t\t\t\t\tset @this_pallet_type=(select UPPER(remark) from wms_micro_outbound_lines where id=@replacement_mol_id)\r\n\r\n\t\t\t\t\t\tEND\t\r\n\t\t\t\t\t--*/\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\tEND\t\r\n\t\t\tEND --de else\r\n\t\tend\t\r\n\t\t--exec sp_api_modal_alert @this_pallet_id --231001 TEST !!\r\n\t\treturn\r\n\tend\t\t\r\nEND\r\n\r\n\r\n--240607 was: \r\nRETURN -- EVEN AFKAPPEN ..........\r\n--nu:\r\n--if not exists(select 1 from code_mob_serials where mob_id=@uuid and amount<>codes) RETURN\r\n\r\n--240607 nu dus dus doorgaan naar scannen als er nog serienummers niet gekoppeld zijn..\r\n\r\n\r\nNORMAAL:\r\nexec sp_api_modal_text N'Scannen van items:'\r\nEXEC sp_api_modal_choose @list = N'alles,onvoltooid,volle_pallets',@value = @button_choose2 OUT\r\nif @button_choose2 is null return--set @button_choose2='onvoltooid'\t\r\n--exec sp_api_toast @uuid\r\n--MOBILE ACTION EXTRA CODE\r\n--set @button_choose2='onvoltooid'\r\nif @button_choose2='volle_pallets'\r\n\tbegin\r\n\t\texec sp_api_modal_text N'scan de labels van deze volle pallets: '\r\n\t\tselect id, pallet_label into #sfp from pallet_status where id in (select preferred_pallet_ids from wms_micro_outbound_lines where wms_micro_outbound_id=@uuid) --scanned full pallets\r\n\t\texec sp_api_modal_table @tmptable=N'#sfp'\r\n\t\treturn\r\n\tEND\r\nif @button_choose2='alles'\r\n\tbegin\r\n\t\t\r\n/*\t\tset @mol=(select top 1 id from q_wms_micro_outbound_lines mol\r\n\t\t\twhere mol.wms_micro_outbound_id =@uuid\r\n\t\t\t --AND\t(select count(*) from wms_micro_outbound_line_barcode where wms_micro_outbound_lines_id=mol.id)<mol.Amount\r\n\t\t\tand (select scan_serial_number_outbound from xstock where id=(mol.xstock_id)) = 1 -- ER MOET SERIAL GESCAND WORDEN\r\n\t\t\t--ALLES and mol.is_processed =0 -- als deze door de loods op 1 wordt gezet\r\n\t\t\torder by adv_pick_pos\r\n\t\t)  \r\n\t\t\r\n\t\tset @t=concat('mol:',@mol,N' alles')\r\n\t\texec sp_api_modal_text @t\r\n*/\r\n\t\t--exec sp_api_modal_alert @UUID\r\n\t\t--select * into #mol from Q_wms_micro_outbound_lines where wms_micro_outbound_id = @uuid\r\n\t\t/*\r\n\t\tselect  \r\n\t\t\t--is_processed,\r\n\t\t\t--container_number,\r\n\t\t\t--linked_amount,\r\n\t\t\tlinked_SERIALS as [serials@~col-sm-1],\r\n\t\t\tsku\r\n\t\t\t--lookupcode,\r\n\t\t\t\r\n\t\t\t into #mol \r\n\t\t\tfrom q_wms_micro_outbound_lines where wms_micro_outbound_id=@uuid--3297\r\n\t\texec sp_api_modal_table @tmptable=N'#mol'\t,@print=1\r\n\t\treturn\r\n\t\t*/\r\n\r\n\t\tselect [amt~col-2]=items, [sku~col-6]=sku, [ser_head~col-4]=left5 into #mob_info from mob_scan_info where mob_id=@uuid\r\n\t\texec sp_api_modal_table @tmptable=N'#mob_info'\t,@print=1, @orderby=N' order by 2'\r\n\t\treturn\r\n\r\n\t\t--exec sp_api_modal_clear\r\n\r\n\tend\r\n\r\nif @button_choose2='onvoltooid'\r\n\tbegin\r\n\t\t--infolijstje\r\n\t\tselect [mol_id~col-3]=ID -- nozzels per 240611\r\n\t\t\t\t,[pal_nr~col-3]=(select pallet_nr from w_pallet where id=scanned_pallet_id)\r\n\t\t\t\t,[scanned_pallet_id~col-6]=scanned_pallet_id\r\n\t\t\t\tinto #lijstje_onvoltooid\r\n\t\t\t\tfrom q_wms_micro_outbound_lines mol\r\n\t\t\twhere scanned_pallet_id is not NULL --240611 ! erbij moet een scanned pallet zijn voor deze mol selectie!\r\n\t\t\t\tAND remark <> 'pick' --240611 1433\r\n\t\t\t\tAND mol.wms_micro_outbound_id =@uuid\r\n\t\t\t--AND\t(select count(*) from wms_micro_outbound_line_barcode where wms_micro_outbound_lines_id=mol.id)<mol.Amount\r\n\t\t\t-- 230907 items zonder serienummer moeten wel SKU SCAN KRIJGEN... and (select scan_serial_number_outbound from xstock where id=(mol.xstock_id)) = 1 -- ER MOET SERIAL GESCAND WORDEN\r\n\t\t\tand (\r\n\t\t\t\t\tmol.is_processed =0 -- als deze door de loods op 1 wordt gezet\r\n\t\t\t\t\tOR\r\n\t\t\t\t\t--linked_serials <> amount\r\n\t\t\t\t\tlinked_amount <> amount --230901 dit betekent dat de (auto)assign nog niet compleet is (misschien nor replenish pallet maken etc.)\r\n\t\t\t\t)\t\r\n\t\tif (select count(*) from #lijstje_onvoltooid)>0 --if er voorgezet 240611\t\t\r\n\t\tBEGIN\r\n\t\t\texec sp_api_modal_table @tmptable=N'#lijstje_onvoltooid',@print=0\t\t\r\n\t\t\r\n\r\n\t\t\t--scan pallet-sticker\r\n\t\t\texec sp_api_modal_text N'scan de pallet sticker een van de genoemde pallets'\r\n\t\t\tEXEC sp_api_modal_input @name = '@ps', @value = @ps OUT ,@focus=1\r\n\t\t\t--but_10 er bij\r\n\t\t\tEXEC sp_api_modal_button @name='@but_10',@value = 'Check', @valueout = @but_10 OUT,@class='btn-danger',@key='Enter'; if @but_10 is NULL return\r\n\t\t\tif @ps is null return\r\n\t\t\tif left(@ps,3)<>'ps:'\r\n\t\t\tBEGIN\r\n\t\t\t\texec sp_api_modal_text N'Dit is geen Tracy pallet sticker QR code'\r\n\t\t\t\t--exec sp_api_modal_restart--231130\r\n\r\n\t\t\t\tRETURN\r\n\t\t\tEND\t\r\n\t\t\r\n\r\n\t\t\tset @this_pallet_id=right(@ps,len(@ps)-3)\r\n\t\t\tif not exists(select 1 from #lijstje_onvoltooid where [scanned_pallet_id~col-6]=@this_pallet_id)\r\n\t\t\tBEGIN\r\n\t\t\t\texec sp_api_modal_text 'Fout, deze pallet staat niet in de lijst..'\r\n\t\t\t\treturn\r\n\t\t\tEND\r\n\t\t\tELSE\r\n\t\t\tBEGIN\r\n\t\t\t\t-- zet @mol\r\n\t\t\t\tset @mol=(select [mol_id~col-3] from #lijstje_onvoltooid where [scanned_pallet_id~col-6]=@this_pallet_id )\r\n\t\t\tEND\r\n\t\t\t\r\n\t\t\t--einde infolijstje\r\n\t\tEND\r\n\t\tif @mol is null --fallback naar top 1 \r\n\r\n\t\tset @mol=(select top 1 id from q_wms_micro_outbound_lines mol\r\n\t\t\twhere mol.wms_micro_outbound_id =@uuid\r\n\t\t\t--AND\t(select count(*) from wms_micro_outbound_line_barcode where wms_micro_outbound_lines_id=mol.id)<mol.Amount\r\n\t\t\t-- 230907 items zonder serienummer moeten wel SKU SCAN KRIJGEN... and (select scan_serial_number_outbound from xstock where id=(mol.xstock_id)) = 1 -- ER MOET SERIAL GESCAND WORDEN\r\n\t\t\tand (\r\n\t\t\t\t\tmol.is_processed =0 -- als deze door de loods op 1 wordt gezet\r\n\t\t\t\t\tOR\r\n\t\t\t\t\t--linked_serials <> amount\r\n\t\t\t\t\tlinked_amount <> amount --230901 dit betekent dat de (auto)assign nog niet compleet is (misschien nor replenish pallet maken etc.)\r\n\t\t\t\t)\t\r\n\t\t\torder by adv_pick_pos\r\n\t\t)\r\n\t\t--set @t=concat('1:',@mol); exec sp_api_toast @T\r\n\t\tset @no_serials =(select case (select scan_serial_number_outbound from xstock where id=(select xstock_id from wms_micro_outbound_lines where id=@mol)) when 1 then 0 else 1 end)\r\n\t\t\r\n\t\t--set @t=concat('mol:',@mol,N' nog verwerken..',case when @no_serials=1 then '**NO SERIALS**' else '' end) --indicator dat er geen serienummers nodig zijn\r\n\t\t--240610\r\n\t\tset @t=concat('mol:',@mol,N' pallet nr: ',(select pallet_nr from w_pallet where id=(select scanned_pallet_id from wms_micro_outbound_lines where id=@mol)),N' op deze pallet nog ',(select l_items\t- isnull(serial_items,0) from mol where mol_id=@mol),' verwerken..',case when @no_serials=1 then '**NO SERIALS**' else '' end) --indicator dat er geen serienummers nodig zijn\r\n\t\t\r\n\t\texec sp_api_modal_text @T\r\n\t\t \r\n\tend\r\n\r\n\r\n\r\nif @mol is null \r\n\tbegin\r\n\t\texec sp_api_modal_alert N'Scan serienummers is voltooid.' --231130 was sp_api_modal_text\r\n\t\texec sp_api_modal_clear\r\n\t\tRETURN\r\n\tend\t\r\n\r\n--230918 extra dummyscan voor deze @mol, want inmiddels kan een pallet ge-replenished zijn waardoor het aantal micro-items inmiddels volledig beschikbaar is\r\n\texec auto_assign_wms_micro_items_to_wms_micro_outbound_line @LINE_id=@mol\r\n\texec assign_pallets_to_micro_outbound_from_line\t@Line =@mol\r\n------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n\r\nselect @xstock_id=xstock_id, @aantal_serials_nodig = amount  from wms_micro_outbound_lines where id=@mol\r\n\r\nselect * into #registered_serials from wms_micro_outbound_line_barcode where wms_micro_outbound_lines_id=@mol\r\nif (select count(*) from #registered_serials)>=@aantal_serials_nodig\r\n\tbegin\r\n\t\tset @T=concat(N'Er is al gescand.','')\r\n\t\texec sp_api_modal_text @T\r\n\t\tset @T=concat(N'Aantal gescande codes:',(select count(*) from wms_micro_outbound_line_barcode where wms_micro_outbound_lines_id=@mol))\r\n\t\texec sp_api_modal_text @T\r\n\t\t--exec sp_api_modal_table @tmptable=N'#registered_serials'\r\n\t\t--exec sp_api_modal_alert @uuid\r\n\t\tEXEC sp_api_modal_button @name='@button5',@value = 'Meer Scannen', @valueout = @button5 OUT,@class='btn-danger',@key='F9'\r\n\t\tif isnull(@button5,N'')<>N'Meer Scannen'\r\n\t\treturn\r\n\tend\t\r\n\r\n \r\n\r\n\r\nif isnull(@sku_oke,0)\t=0\r\n\tbegin\r\n\t\tset @T=concat(N'pickpositie: ',(select top 1 position_code from pallet_status where micro_pick_allowed=1 and xstock_id=@xstock_id and out_completed is null))\r\n\t\texec sp_api_modal_text @T, @class='h1'\r\n\t\tSET @T=concat(N'Aantal: ',@aantal_serials_nodig,'. Artikelomschrijving: ',(select lookupcode from xstock where id=@xstock_id))\r\n\t\texec sp_api_modal_text @T\r\n\t\tSET @T=concat(N'Scan de SKU: ',(select sku from xstock where id=@xstock_id))--, ' en ', @aantal_serials_nodig,' serienummers'\t)\r\n\t\texec sp_api_modal_text @T\r\n\t\t\r\n\t\tEXEC sp_api_modal_input @name = '@sku_check', @value = @sku_check OUT,@hidden=0,@focus=1 --, @type='textarea',@rows=20--,@inline = 1 -- (multi line input)\r\n\t\tEXEC sp_api_modal_button @name='@button3',@value = N'Check', @valueout = @button3 OUT,@class='btn-danger',@key='F5' --Enter kan niet verstoort de flow\r\n\t\tif @button3 is null return\r\n\t\tif @sku_check is null return\r\n\t\texec sp_api_modal_text @sku_check\r\n\t\t\r\n\tend\t\t\r\nif not exists(select 1 from wms_micro_outbound_lines mol \r\n\t\t\t\tjoin xstock s on s.id= mol.xStock_id \r\n\t\t\t\twhere mol.id=@mol and \r\n\t\t\t\t\t(\r\n\t\t\t\t\t\ttrim(s.sku)=trim(@sku_check) \r\n\t\t\t\t\t\tor \r\n\t\t\t\t\t\t--230912 OOK EAN TOESTAAN I.P.V. SKU ALS ER GEEN SERIENUMMERS GESCAND HOEVEN TE WORDEN\r\n\t\t\t\t\t\t( trim(s.EAN_CODE)>N'' AND @no_serials =1 AND trim(s.EAN_CODE)=trim(@sku_check) )\r\n\t\t\t\t\t)\r\n\t\t\t\t)\r\n\tBEGIN\r\n\t\tset @T=concat(@sku_check,' is de SKU van een verkeerd artikel.')\r\n\t\t--231128 beep er bij\r\n\t\texec sp_api_modal_beep 1100, 500 --error !\r\n\r\n\t\texec sp_api_toast @T --N'* VERKEERD ARTIKEL ! *'\r\n\t\tEXEC sp_api_modal_value @name = '@sku_check',@value = NULL\r\n\t\tEXEC sp_api_modal_value @name = '@button3',@value = NULL\r\n\t\tset @SKU_OKE=0\r\n\t\treturn\r\n\tEND\r\nset @sku_oke=1\r\n\r\n\r\n------231001-------\r\nadd_serials_to_mol:\r\n---- L A B E L ----\r\n--exec sp_api_toast N'serials to mol...'--231130\r\n--231001 als hier heen wordt gesprongen kan het zijn dat @no_serials onbekend is..\r\nset @no_serials =(select case (select scan_serial_number_outbound from xstock where id=(select xstock_id from wms_micro_outbound_lines where id=@mol)) when 1 then 0 else 1 end)\r\n\r\n\r\nset @T=concat(N'NOG: ',@aantal_serials_nodig - (select count(*) from wms_micro_outbound_line_barcode where wms_micro_outbound_lines_id=@mol),' serienummers. (save=bijwerken)')\r\nexec sp_api_modal_text @T\r\n\r\n\r\n--extra 230907\r\nif @no_serials =1 \r\n\tBEGIN\r\n\t\tset @scanned_codes='no serials required'\r\n\t\t--set @button =N'Save'\r\n\tEND\r\n\t\t--oud: voor 230907\r\n--> set @scanned_codes= (select serialnumbers from wms_micro_outbound_lines where id=@mol)\t\t--231211 NIEUW ER VOOR..\r\nEXEC sp_api_modal_input @name = '@scanned_codes', @value = @scanned_codes OUT , @type='textarea',@rows=8, @focus=1 --,@inline = 1 -- (multi line input)\r\nEXEC sp_api_modal_button @name='@button',@value = 'Save', @valueout = @button OUT,@class='btn-danger',@key='F6'\r\nif @button is null return; --231211 extra wacht op button\r\n\r\nif @button='Save' -- opslaan, zodat je ze niet kwijt raakt \r\n\tBEGIN\r\n\t\tif @scanned_codes > N''\r\n\t\t\tBEGIN\r\n\t\t\t\tif @no_serials =0 --NORMALE SITUATIE MET SERIENUMMERS VERPLICHTING\r\n\t\t\t\t\tBEGIN\r\n\t\t\t\t\t\t-- log, is al 2x een lifesaver geweest!\r\n\t\t\t\t\t\tupdate wms_micro_outbound_lines set serialnumbers=concat(serialnumbers,@scanned_codes) where id=@mol--=@ID\r\n\r\n\t\t\t\t\t\t-- unieke barcodes registreren bij de micro outbound line\r\n\t\t\t\t\t\t--declare @scanned_codes nvarchar(max) = (select top 1 serialnumbers from wms_micro_outbound_lines where nullif(trim(serialnumbers),N'') is not null)\r\n\t\t\t\t\t\t--select serialnumbers,*  from wms_micro_outbound_lines where nullif(trim(serialnumbers),N'') is not null\r\n\t\t\t\t\t\t/*\r\n\t\t\t\t\t\t--krijg de unieke codes uit de scans en \r\n\t\t\t\t\t\tselect line from scanresult_as_table(@scanned_codes) \r\n\t\t\t\t\t\t\twhere nullif(trim(line),N'') is not NULL --\tzonder blanco regels!\r\n\t\t\t\t\t\t\t\t-- evt lengrte afdwingen and len(line) >15\r\n\t\t\t\t\t\t\tgroup by line -- maak uniek\r\n\t\t\t\t\t\t*/\r\n\t\t\t\t\t\t--select * from \r\n\t\t\t\t\t\t--declare @mol int=297\r\n\t\t\t\t\t\tinsert into wms_micro_outbound_line_barcode(wms_micro_outbound_lines_id,Line)\r\n\t\t\t\t\t\t\tselect @mol, line\r\n\t\t\t\t\t\t\tfrom _1\r\n\t\t\t\t\t\t\tcross apply ( select line from scanresult_as_table(@scanned_codes) \r\n\t\t\t\t\t\t\t\t\t\t\twhere nullif(trim(line),N'') is not NULL --\tzonder blanco regels!\r\n\t\t\t\t\t\t\t\t\t\t\t\t-- evt lengte afdwingen and len(line) >15\r\n\t\t\t\t\t\t\t\t\t\t\tgroup by line -- maak uniek\r\n\t\t\t\t\t\t\t\t\t\t) sr\r\n\t\t\t\t\t\t\twhere --beter pas bij toekennen beperken, want zo blijft deze scan-actie redelijk universeel  len(sr.line) >13 and --230823 zo hebben we geen last van de EAN CODES VAN AGNEOVO\r\n\t\t\t\t\t\t\t\tnot exists(select 1 from wms_micro_outbound_line_barcode where Line=sr.line)\r\n\r\n\t\t\t\t\t\t-- select * from wms_micro_outbound_line_barcode\r\n\t\t\t\t\t\t\r\n\r\n\t\t\t\t\t\t--EXEC sp_api_modal_button @name='@button2',@value = 'Klaar', @valueout = @button2 OUT,@class='btn-danger',@key='F7'\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t--set @T=concat(N'Aantal gescande codes:',(select count(*) from wms_micro_outbound_line_barcode where wms_micro_outbound_lines_id=@mol))\r\n\t\t\t\t\t\t--exec sp_api_modal_text @T\r\n\t\t\t\t\t\t\t--select * into #unique from wms_micro_outbound_line_barcode where wms_micro_outbound_lines_id=@mol\r\n\t\t\t\t\t\t\t--exec sp_api_modal_table @tmptable=N'#unique'\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t--GELIJK TOEKENNEN\r\n\t\t\t\t\t\texec assign_scanned_serials_to_micro_items \r\n\t\t\t\t\t\t\t\t@mob=@uuid -- KOPPEL DE MICRO ITEMS (en verwijder eventueel de overscans)\r\n\t\t\t\t\t\t\t\t,@remove_unassigned =1\r\n\t\t\t\t\t\t\r\n\t\t\t\t\tEND\t--(OPLSAAN MET SERIENUMMER VERWERKEN)\r\n\t\t\t\t--AUTOMATISCH KLAARBOEKEN PER MOL\r\n\t\t\t\tif @no_serials =1 --230907 altijd conform bij NO SERIALS\r\n\t\t\t\t\t--bijserienummers moet het aantal overeenkomen\r\n\t\t\t\t\tor exists (select 1 from q_wms_micro_outbound_lines where id=@mol and linked_serials=Amount) -- volledig toegekend! was: @button2=N'Klaar' \r\n\t\t\t\t\tbegin\r\n\t\t\t\t\t\tupdate wms_micro_outbound_lines set is_processed =1 where id=@mol  -- 230824 op processed zetten,zodat de volgende gekozen kan worden..\r\n\t\t\t\t\t\t--230828 dit verwijdert de scans die niet geloppeld zijn aan items.\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t--exec sp_api_modal_alert N'items volledig gescand, scan QR voor eventueel volgende items.'\t\r\n\t\t\t\t\t\texec sp_api_toast N'items volledig gescand, scan QR voor eventueel volgende items.'\t\r\n\t\t\t\t\t\t--exec sp_api_modal_restart --231130 ipv clear\r\n\t\t\t\t\t\t--exec sp_api_modal_value @name=N'@button_gearriveerd_bij_pallet'\r\n\t\t\t\t\t\texec sp_api_modal_clear --231211 er bij\r\n\t\t\t\t\t\treturn\r\n\t\t\t\t\t\t--EXEC sp_api_modal_values_clear -- @ignore = N'company'\r\n\t\t\t\t\t\t-- voor alert gezet exec sp_api_modal_clear\r\n\t\t\t\t\t\t--EXEC sp_api_modal_restart --230907 proberen..\r\n\t\t\t\t\tend\t\r\n\t\t\t\t\r\n\t\t\tEND\r\n\t\t--EXEC sp_api_modal_value @name = '@button',@value = NULL \t\t--231211 save button un-clicken\t\r\n\t\t--EXEC sp_api_modal_value @name = '@sku_ok',@value = NULL\t\t\t--231211\r\n\t\t--EXEC sp_api_modal_value @name = '@sku_check',@value = NULL\t\t--231211\r\n\t\t--EXEC sp_api_modal_value @name = '@scanned_codes',@value = NULL\t--231211\r\n\t\t--return\t\r\n\t\texec sp_api_modal_clear --restart--231211 test restart ! clear --230907\t--als je hier niet cleart, dan kan je tussendoor opslaan..\r\n\t\treturn\r\n\tend\r\n\r\n----------------------\r\n-- LABELS\r\n----------------------\r\nexec sp_api_modal_clear -- 231211 TEST ER BIJ \r\nRETURN\r\nGOFULL:\r\nif @this_pallet_type ='FULL' --> SHOW SCAN BUTTON!\r\nBEGIN\r\n\tEXEC sp_api_modal_button @name='@button_scan_serials_for_mol',@value = 'Scan serials', @valueout = @button_scan_serials_for_mol OUT,@class='btn-danger'\r\n\t--tot hier inserted 231001 gelijk hier mogelijkheid om serienummers te scannen:\r\n\tif @button_scan_serials_for_mol is null return\t\r\n\tif @button_scan_serials_for_mol='Scan serials' goto add_serials_to_mol --231001\r\nEND\r\nRETURN --GOFULL\r\n\r\nGOREPLENISH:\r\nif @this_pallet_type ='REPLENISH' --> SHOW REPLENISH BUTTON!\r\nBEGIN\r\n\tif @replenish_loc is null \r\n\tBEGIN\r\n\t\tset @replenish_loc=(select pick_position from xstock where id=@this_xstock_id)\r\n\tEND\t\r\n\t--check of de replenishment al is geregistreerd op de pallet\r\n\t-- losse items picken en darvan serienummers scannen is niet hier. dit is alleen replenishen!\r\n\tif not exists( select * from w_pallet where id=@this_pallet_id and micro_pick_allowed=1)\r\n\tBEGIN\r\n\t\tEXEC sp_api_modal_input @name = '@replenish_loc', @value = @replenish_loc OUT \r\n\t\tEXEC sp_api_modal_button @name='@button_replenish',@value = 'Replenish NOW', @valueout = @button_replenish OUT,@class='btn-danger'\r\n\t\tif @button_replenish is null return\t\r\n\t\tif @button_replenish='Replenish NOW' --hier evt jump naar separaat replenishment\r\n\t\tBEGIN\r\n\t\t\tif nullif(trim(@replenish_loc),N'') is NULL\r\n\t\t\tBEGIN\r\n\t\t\t\texec sp_api_modal_text N'REPLENISHMENT LOCATION REQUIRED'\r\n\t\t\t\tRETURN\r\n\t\t\tEND\r\n\t\t\tupdate w_pallet set micro_pick_allowed=1,position_code=@replenish_loc where id=@this_pallet_id\r\n\t\t\tupdate wms_micro_outbound_lines set scanned_pallet_id=@this_pallet_id where id=@pallet_mol_id\r\n\t\t\texec sp_api_modal_clear\r\n\t\t\t--PICKLOKATIE !!\r\n\t\t\t--TODO...\r\n\t\t\t--+ EVENTUEEL HELE REPLENISH KOP\r\n\t\tEND\r\n\tEND\r\nEND\t\r\nRETURN --GOREPLENISH\r\n\r\n\r\n\t\t\t\t\r\n\r\n\r\n/*\r\n----231001----\r\nreplenish_mol:\r\n----LABEL-----\r\nupdate w_pallet set micro_pick_allowed=1 where id=\r\nreturn\r\n*/\r\n\r\n/* --230821 RESET UITGESCHAKELD\r\nEXEC sp_api_modal_button @name='@button4',@value = 'Reset', @valueout = @button4 OUT,@class='btn-danger',@key='F8'\r\n\r\nif @button4=N'Reset'\r\n\tBEGIN\r\n\t\tdelete from wms_micro_outbound_line_barcode where wms_micro_outbound_lines_id=@mol\r\n\t\tEXEC SP_API_MODAL_CLEAR\r\n\t\tEXEC sp_api_modal_value @name = '@button4',@value = NULL\r\n\tend\r\n*/\r\n-- als het aantal in #unique overeenkomt met het aantal nog te vullen serienummers dan kunnen ze worden toegekend\r\n\t",
                    "action_id": 692,
                    "action_name": "#qr_action_verwerk_micro_pick_v11",
                    "source_table": "api_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_modal_clear",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@alert_text",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@alert_text n"
                },
                {
                    "name": "@sub_text",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@sub_text n"
                },
                {
                    "name": "@clear_gui_only",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@clear_gui_only b"
                },
                {
                    "name": "@from_placeholder",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@from_placeholder n"
                }
            ],
            "embedded_example": "EXEC sp_api_modal_clear",
            "embedded_description": null,
            "co_occurrence_stats": {
                "dbo.sp_api_toast": 19,
                "dbo.sp_api_modal_text": 20,
                "dbo.sp_api_modal_route": 3,
                "dbo.sp_api_modal_button": 24,
                "dbo.sp_api_modal_select_all": 1,
                "dbo.sp_api_modal_select_all_clear": 2,
                "dbo.sp_api_goto": 3,
                "dbo.sp_api_modal_select": 6,
                "dbo.sp_api_modal_table": 11,
                "dbo.sp_api_modal_input": 13,
                "dbo.sp_api_modal_alert": 5,
                "dbo.sp_api_modal_table_update": 5,
                "dbo.hasRole": 1,
                "dbo.sp_api_modal_choose": 6,
                "dbo.sp_api_report_generate": 3,
                "dbo.sp_api_add_sql_task": 3,
                "dbo.sp_api_modal_input_decimal": 3,
                "dbo.sp_api_modal_date": 2,
                "dbo.sp_api_modal_modal": 2,
                "dbo.sp_api_modal_save": 1,
                "dbo.sp_api_modal_value": 2,
                "dbo.sp_api_modal_post": 1,
                "dbo.sp_api_card_re_order": 1,
                "dbo.sp_api_populate_card": 2,
                "dbo.sp_api_email": 6,
                "dbo.sp_api_modal_date_from_to": 1,
                "dbo.sp_api_push_bullet": 1,
                "dbo.sp_api_modal_select_table": 2,
                "dbo.sp_api_modal_restart": 2,
                "dbo.sp_api_modal_html": 2,
                "dbo.sp_api_modal_values_clear": 1,
                "dbo.sp_api_modal_get_value": 4,
                "dbo.sp_api_modal_choose_list": 1,
                "dbo.sp_api_modal_action": 1,
                "dbo.sp_api_modal_audio": 1
            },
            "real_usage_examples": [
                {
                    "sql_source": "DECLARE @clone_id INT, @sure nvarchar(255), @text nvarchar(255)\r\nEXEC sp_api_modal_get N'my_last_clone_id',@text OUT\r\nEXEC sp_api_modal_text @text,'h1'\r\nEXEC sp_api_modal_text @basetable,'h1'\r\nEXEC sp_api_modal_button @name='Sure',@value = 'Clone? (Esc=Nee)', @valueout = @sure OUT,@class='btn-danger',@key='Enter'\r\nIF @sure is not null\r\n\tBEGIN\r\n\t\tEXEC sp_api_modal_clear\r\n\t\t--EXEC @clone_id = sp_clone_record @basetable,@ids\r\n\t\tEXEC @clone_id = sp_clone_record @basetable,@ids,N'size=''EDIT'', stock=0'\r\n\t\tSET @path = @path+'/'+dbo.nv(@clone_id)\r\n\t\tEXEC sp_api_toast @text = N'Record cloned'\r\n\t\tEXEC sp_api_modal_route @name = N'Ga met Enter naar de kopie en vul de nieuwe maat in',@pathname=@path,@search='?focus=7377' ,@class = N'btn-danger' ,@key='Enter'\r\n\tEND\r\n",
                    "action_id": 6,
                    "action_name": "kopieer-artikel",
                    "source_table": "api_card_actions"
                },
                {
                    "sql_source": "DECLARE @wat nvarchar(200), @linktoME int,@text nvarchar(max)\n\nIF {[ctr2].cth_fase} NOT IN (N'openSale','openPrice')\n\tBEGIN\n\tEXEC sp_api_modal_Alert N'Let op!', N'De verkoop is reeds gesloten. U kan niet meer de toewijzing wijzigen.' \n\tEXEC sp_api_modal_clear\n\tRETURN\n\tEND\n\nSET @linktoME ={[ctr2].id}\n--201028 erbij ivm overbrengen..\nif @LinkToMe is NULL set @LinkToMe={[ctr_overbrengen].id}\n\nDECLARE @maxTeLinken INT,@maxBeschikbaar INT\nSELECT @maxTeLinken = (ctrAmount-IVTOTAL) FROM Q_xTransactionDetail WHERE ID=@LinkToME\n\nIF @maxTeLinken = 0\n\tBEGIN\n\t\tEXEC sp_api_modal_alert N'Regel is al volledig toegewezen'\n\t\tEXEC\t sp_api_go2 1 -- 1 stap terug (+list view; detailviewgebruik EXEC sp_api_go2 1,0)\n\t\tRETURN;\n\tEND\n\n\nSET @maxBeschikbaar = {[ctr1_toewijsbaar].available}\nIF @maxBeschikbaar < @maxTeLinken\n\tBEGIN\n\t\tdeclare @Melding nvarchar(200)\n\t\tset @Melding = concat(N'Niet genoeg beschikbaar! Te linken:',N' ',@maxTeLinken)\n\t\tEXEC sp_api_modal_text @Melding,N'h4 text-muted'\n\t\tSET @text = CONCAT('U kunt maximaal ',@maxBeschikbaar,' van de ',@maxTeLinken,' linken')\n\t\tEXEC sp_api_modal_text @text,N'm-4'\n\t\tSET @maxTeLinken = @maxBeschikbaar\n\tEND\n\nIF @maxTeLinken < 0\n\tBEGIN\n\t\tEXEC sp_api_modal_alert N'Probleem!',N'Regel heeft meer toegewezen dan mag. Ga naar de toewijzing (IV link) en verlaag deze.'\n\t\tEXEC sp_api_modal_clear\n\tEND\n\nDECLARE @aantalTeLinken INT = @maxTeLinken\n\t,@button nvarchar(50)\n\nEXEC sp_api_modal_input @name='Aantal',@value = @aantalTeLinken OUT,@focus=1,@select=1\nEXEC sp_api_modal_button @name='button',@value = 'Link aantal',@valueout=@button OUT,@key=N'Enter'\nIF @button IS NULL RETURN\nset @wat=N'Gekozen ID: '+str(@ID)+' wordt gekoppeld aan CTR: '+str(@LinktoME)\nexec sp_api_toast @wat\n--RETURN; --test\n\nif @linktoME is not null\n\tBEGIN\n\t\texec @main_db.dbo.map @linktoME,@ID, @aantalTeLinken\n\t\t\n\t\t--zet return path\n\t\tSET @ctr2_id = {[ctr2].id}\n\t\tSET @verkoop_id = {[verkoop].id}\n\t\tIF @ctr2_id IS NOT NULL AND @verkoop_id IS NOT NULL AND @aantalTeLinken = @maxTeLinken\n\t\t\tBEGIN\n\t\t\t\tSET @goto = CONCAT('/verkoop/',@verkoop_id,'/ctr2/',@ctr2_id,'/iv2')\n\t\t\t\tSET @referer_path = CONCAT('/verkoop/',@verkoop_id,'/ctr2')\n\t\t\t\tSET @referer_search = CONCAT(N'?id=',@ctr2_id)\n\t\t\t\tEXEC sp_api_toast N'Regel(s) is/zijn gelink bla',N'alert-primary'\t\t\t\t\n\t\t\t\tEXEC sp_api_goto @goto,@referer_path=@referer_path,@referer_search=@referer_search\n\t\t\tEND\n\t\t--210115 \n--\t\texec sp_api_go3\n\t\texec sp_api_modal_clear\n\tEND\n\n\n--if @parent_card_name='ctr2'\n--\tBEGIN\n--\t\texec @main_db.dbo.map @ID, @Parent_ID\n--\tEND\n--else --neem aan parent_parent...\n--\tBEGIN\n--\t\texec @main_db.dbo.map @ID, @Parent_Parent_ID\n--\tEND\n\n--EXEC sp_api_goto @path",
                    "action_id": 13,
                    "action_name": "link_this",
                    "source_table": "api_card_actions"
                },
                {
                    "sql_source": "\nIF @id<>@ids --BULK naar Exact\n\tBEGIN\n\t\tDECLARE @cursor CURSOR,@idval INT,@count int = 0,@seconds int = 0\n\t\tSET @cursor = CURSOR LOCAL FAST_FORWARD FOR SELECT value FROM string_split(@ids,',')\n\t\tOPEN @cursor;\n\t\tFETCH NEXT FROM @cursor INTO @idval\n\t\tWHILE @@FETCH_STATUS = 0\n\t\t\tBEGIN\n\t\t\t\tSET @seconds+=6\n\t\t\t\tSET @subject = CONCAT(\n\t\t\t\t\t(SELECT [xCompany].[Code] FROM [xCompany] WHERE [id] = (SELECT [Q_xInvoice].[fromCompany_ID] FROM [Q_xInvoice] WHERE [id] = @idval))\n\t\t\t\t\t,' - ',(SELECT [Q_xInvoice].[dateInvoice] FROM [Q_xInvoice] WHERE [id] = @idval)\n\t\t\t\t\t,' - ',(SELECT [Q_xInvoice].[calcLegal] FROM [Q_xInvoice] WHERE [id] = @idval)\n\t\t\t\t\t)\n\t\t\t\tSET @sql = CONCAT(N'DECLARE @base64 nvarchar(max),@filename nvarchar(4000)\n', --EXEC sp_api_report_download_base64 @context = ''invoice_out'', @context_id = ',@idval,' , @filename =  @filename OUT, @base64 =  @base64 OUT\n'BEGIN TRY\n\tEXEC @main_db.dbo.sp_iu_finance_invoice ',@idval,',@groupbycostcodes = 1\nEND TRY BEGIN CATCH\n\tUPDATE xInvoice SET status = ''Exact Error'',statusHistory = ERROR_MESSAGE() WHERE id = ',@idval,'\nEND CATCH') -- = @filename,@subject = ',dbo.escape_string(@subject),',@base64 = @base64')\n\t\t\t\tSET @subject = N'To Exact: ' + @subject\n\t\t\t\tEXEC sp_api_add_sql_task @sql=@sql,@description=@subject,@seconds = @seconds\n\t\t\t\tUPDATE xInvoice SET status='Sending to Exact' WHERE id = @idval\n\t\t\t\tSET @count+=1\n\t\t\t\tFETCH NEXT FROM @cursor INTO @idval\n\t\t\tEND\n\t\tCLOSE @cursor;\n\t\tDEALLOCATE @cursor;\n\t\texecute sp_api_modal_clear\n\t\tIF @count > 0 EXEC sp_api_toast N'Verzenden is ingepland, F5 voor refresh'\n\t\tEXEC sp_api_modal_select_all_clear\n\t\tRETURN\n\tEND\n\nBEGIN TRY\n\tEXEC @main_db.dbo.sp_iu_finance_invoice @id, @groupbycostcodes = 1\nEND TRY BEGIN CATCH\n\tDECLARE @text nvarchar(max) = ERROR_MESSAGE(),@ERROR_SEVERITY int = ERROR_SEVERITY()\n\tIF @ERROR_SEVERITY = 17\n\t\tBEGIN\n\t\t\tEXEC sp_api_modal_url @text\n\t\t\tRETURN\n\t\tEND\n\tEXEC sp_api_modal_text @text\n\tDECLARE @valueout nvarchar(128)\n\tEXEC sp_api_modal_button @name='Retry',@value = 'Retry', @valueout = @valueout OUT\n\t\t,@class='btn-primary',@key='Enter'\nEND CATCH",
                    "action_id": 28,
                    "action_name": "Naar ExactOnline",
                    "source_table": "api_card_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_modal_csv",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@tmptable",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "'#modaltable'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@tmptable n"
                },
                {
                    "name": "@filename",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 2048,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@filename n"
                },
                {
                    "name": "@sep",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 2,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "';'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@sep n"
                },
                {
                    "name": "@orderby",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "'ORDER BY (SELECT 0)'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@orderby n"
                },
                {
                    "name": "@eol",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 32,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@eol n"
                },
                {
                    "name": "@ansi",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@ansi b"
                },
                {
                    "name": "@useheaders",
                    "type_from_sys": "bit",
                    "type_from_def": "B",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "1",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 7,
                    "full_declaration_from_def": "@useheaders B"
                },
                {
                    "name": "@startrow",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "''",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 8,
                    "full_declaration_from_def": "@startrow n"
                },
                {
                    "name": "@endrow",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "''",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 9,
                    "full_declaration_from_def": "@endrow n"
                },
                {
                    "name": "@usequotes",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 10,
                    "full_declaration_from_def": "@usequotes b"
                },
                {
                    "name": "@usequotesfornull",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 11,
                    "full_declaration_from_def": "@usequotesfornull b"
                },
                {
                    "name": "@to_base64",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 12,
                    "full_declaration_from_def": "@to_base64 b"
                },
                {
                    "name": "@base64",
                    "type_from_sys": "varchar",
                    "type_from_def": "v",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 13,
                    "full_declaration_from_def": "@base64 v"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {
                "dbo.sp_api_modal_table": 23,
                "dbo.sp_api_modal_input": 12,
                "dbo.sp_api_modal_text": 19,
                "dbo.sp_api_modal_date": 12,
                "dbo.sp_api_modal_button": 22,
                "dbo.ABCDATE": 6,
                "dbo.sp_api_modal_modal": 11,
                "dbo.sp_api_modal_print": 7,
                "dbo.sp_api_modal_select": 5,
                "dbo.sp_api_modal_date_from_to": 10,
                "dbo.sp_api_modal_choose": 4,
                "dbo.sp_api_toast": 1,
                "dbo.ABCWEEKNR": 3,
                "dbo.sp_api_modal_download": 1,
                "dbo.sp_api_modal_input_decimal": 1
            },
            "real_usage_examples": [
                {
                    "sql_source": "--RH210215 BEZIG DOWNLOAD ALS CSV ER BIJ.. lukt nofg niet..\nDECLARE @date nvarchar(128),@date2 nvarchar(128),@button nvarchar(128),@button2 nvarchar(128),@companyname nvarchar(128), @FileName nvarchar(128)\nset @date = dbo.workDate()\nset @date2 = dbo.workDate()\nSET @companyname = (select CompanyName from xcompany where id = @id)\nset @Filename=concat(@Companyname,'.csv')\n/*EXEC sp_api_modal_text 'Zoek op transport bedrijf'\nEXEC sp_api_modal_input @name='Transporteur',@value = @TransComp OUT,@focus=1,@select=1 -- zoek veld\n*/\nEXEC sp_api_modal_text 'Van:'\nEXEC sp_api_modal_date @name='Date',@value = @date OUT,@class='w-24',@focus=1,@select=1  -- zoek veld\nEXEC sp_api_modal_text 'Tot en met:'\nEXEC sp_api_modal_date @name='Date2',@value = @date2 OUT,@class='w-24' -- zoek veld\n--SET @date2 = CONCAT(@date2,' 23:59:59.999')\nSET @button = 'Intrastat_Melding'\nEXEC sp_api_modal_button @name='button',@value = 'Intrastat_Melding',@valueout = @button OUT,@class = 'btn-primary',@key = 'Enter'\nEXEC sp_api_modal_button @name='button',@value = 'Excel_CSV',@valueout = @button OUT,@class = 'btn-primary',@key = 'F5'\nEXEC sp_api_modal_text @companyname,N'h4 text-muted',@printonly=1\nEXEC sp_api_modal_print\n\nIF @button =  'Intrastat_Melding'\nBEGIN\nSELECT distinct [QUANTITY@] = sum(QUANTITY@), [ARTICLE~col-sm-5] = ARTICLE, LAND, INTRASTAT_CODE, [NETT_WEIGHT@] = sum(NETT_WEIGHT@), ISO, [AMOUNT@] = sum(AMOUNT@)\nINTO #Intrastat_Melding\nFROM          RV_INTRASTAT_MELDING\nWHERE\t\t(INTRASTAT_CODE is not NULL) AND (CompanyID = @id) AND (TransactionDate BETWEEN @date AND @date2) AND (THTDT = 2)\nGROUP BY ARTICLE,LAND,INTRASTAT_CODE,ISO\nEXEC sp_api_modal_table @tmptable=N'#Intrastat_Melding',@orderby=N'ORDER BY 2 ASC',@print=1\n\nEND \n\t\n\nIF @button =  'Excel_CSV'\nBEGIN\nSELECT distinct [QUANTITY] = sum(QUANTITY@), [ARTICLE] = ARTICLE, LAND, INTRASTAT_CODE, [NETT_WEIGHT] = sum(NETT_WEIGHT@), ISO, [AMOUNT] = sum(AMOUNT@)\nINTO #Intrastat_CSV\nFROM          RV_INTRASTAT_MELDING\nWHERE\t\t(INTRASTAT_CODE is not NULL) AND (CompanyID = @id) AND (TransactionDate BETWEEN @date AND @date2) AND (THTDT = 2)\nGROUP BY ARTICLE,LAND,INTRASTAT_CODE,ISO\n--EXEC sp_api_modal_table @tmptable=N'#Intrastat_CSV',@print=1\n--EXEC sp_api_modal_csv\t@tmptable = '#Intrastat_CSV'\t,@filename = @filename\t,@sep = ';'\n\n--EXEC sp_api_modal_table @tmptable=N'#Intrastat_CSV'\nEXEC sp_api_modal_csv @tmptable=N'#Intrastat_CSV',@ansi =1,@filename=@FileName\n\nEND \n\n\n\n\n\n\n\n",
                    "action_id": 1,
                    "action_name": "INTRASTAT_MELDING",
                    "source_table": "api_card_actions"
                },
                {
                    "sql_source": "SELECT * INTO #globecsv FROM calc_exact_globe_csv WHERE datum IS NOT NULL ORDER BY factuurnum,dagboek,regel\nEXEC sp_api_modal_csv @tmptable=N'#globecsv',@ansi =1,@filename=N'exact_globe.csv',@orderby=N'ORDER BY factuurnum,dagboek,regel'",
                    "action_id": 27,
                    "action_name": "Naar ExactGlobe CSV_voor210112",
                    "source_table": "api_card_actions"
                },
                {
                    "sql_source": "DECLARE @filename nvarchar(1024) = concat(dbo.strdate(NULL),'-test.csv')\nSELECT top 10 * INTO #temptable FROM xstock\nEXEC sp_api_modal_csv @tmptable=N'#temptable', @filename=@filename\n\n--select TOP 10000 * into #cities FROM xCity --WHERE country_id = 151\n--exec sp_api_modal_csv @tmptable=N'#cities', @filename=N'yoyo cities.csv'\n--select * into #modaltable13 FROM xCountry\n--exec sp_api_modal_csv @tmptable=N'#modaltable13', @filename=N'yoyo country456.csv'\n",
                    "action_id": 186,
                    "action_name": "download csv",
                    "source_table": "api_card_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_modal_csv_from_file",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@seperator",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 20,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "'[\\t]'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@seperator n"
                },
                {
                    "name": "@tablename",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "N'#tabs'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@tablename n"
                },
                {
                    "name": "@file_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@file_id i"
                }
            ],
            "embedded_example": "CREATE TABLE #tabs (id int IDENTITY(1,1) PRIMARY KEY)\r\nEXEC sp_api_modal_csv_from_file\r\n\t--,@seperator = '[\\t]'\r\n\t--,@tablename = N'#tabs'\r\n\t--,@file_id = @file_id OUT\r\nEXEC sp_api_modal_table @tmptable = '#tabs'",
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_modal_date",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@name n"
                },
                {
                    "name": "@value",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@value n"
                },
                {
                    "name": "@class",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@class n"
                },
                {
                    "name": "@focus",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@focus b"
                },
                {
                    "name": "@select",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@select b"
                },
                {
                    "name": "@inline",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@inline b"
                },
                {
                    "name": "@identifier",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 7,
                    "full_declaration_from_def": "@identifier n"
                },
                {
                    "name": "@class_updated",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 8,
                    "full_declaration_from_def": "@class_updated n"
                },
                {
                    "name": "@hidden",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 9,
                    "full_declaration_from_def": "@hidden b"
                },
                {
                    "name": "@min",
                    "type_from_sys": "date",
                    "type_from_def": "d",
                    "max_length_bytes": 3,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 10,
                    "full_declaration_from_def": "@min d"
                },
                {
                    "name": "@max",
                    "type_from_sys": "date",
                    "type_from_def": "d",
                    "max_length_bytes": 3,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 11,
                    "full_declaration_from_def": "@max d"
                },
                {
                    "name": "@seed",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 12,
                    "full_declaration_from_def": "@seed n"
                }
            ],
            "embedded_example": "EXEC sp_api_modal_date @name = N'@datum', @value = @datum OUT",
            "embedded_description": null,
            "co_occurrence_stats": {
                "dbo.sp_api_modal_table": 49,
                "dbo.sp_api_modal_csv": 12,
                "dbo.sp_api_modal_input": 24,
                "dbo.sp_api_modal_text": 57,
                "dbo.sp_api_modal_button": 63,
                "dbo.sp_api_toast": 8,
                "dbo.sp_api_modal_select": 20,
                "dbo.sp_api_modal_modal": 22,
                "dbo.sp_api_modal_print": 13,
                "dbo.ABCDATE": 10,
                "dbo.sp_api_goto": 13,
                "dbo.sp_api_modal_select_table": 5,
                "dbo.sp_api_modal_date_from_to": 24,
                "dbo.sp_api_modal_choose": 6,
                "dbo.sp_api_modal_input_decimal": 3,
                "dbo.sp_api_modal_clear": 2,
                "dbo.sp_api_modal_save": 2,
                "dbo.sp_api_modal_post": 2,
                "dbo.sp_api_modal_route": 1,
                "dbo.sp_api_modal_value": 1,
                "dbo.sp_api_populate_card": 1
            },
            "real_usage_examples": [
                {
                    "sql_source": "--RH210215 BEZIG DOWNLOAD ALS CSV ER BIJ.. lukt nofg niet..\nDECLARE @date nvarchar(128),@date2 nvarchar(128),@button nvarchar(128),@button2 nvarchar(128),@companyname nvarchar(128), @FileName nvarchar(128)\nset @date = dbo.workDate()\nset @date2 = dbo.workDate()\nSET @companyname = (select CompanyName from xcompany where id = @id)\nset @Filename=concat(@Companyname,'.csv')\n/*EXEC sp_api_modal_text 'Zoek op transport bedrijf'\nEXEC sp_api_modal_input @name='Transporteur',@value = @TransComp OUT,@focus=1,@select=1 -- zoek veld\n*/\nEXEC sp_api_modal_text 'Van:'\nEXEC sp_api_modal_date @name='Date',@value = @date OUT,@class='w-24',@focus=1,@select=1  -- zoek veld\nEXEC sp_api_modal_text 'Tot en met:'\nEXEC sp_api_modal_date @name='Date2',@value = @date2 OUT,@class='w-24' -- zoek veld\n--SET @date2 = CONCAT(@date2,' 23:59:59.999')\nSET @button = 'Intrastat_Melding'\nEXEC sp_api_modal_button @name='button',@value = 'Intrastat_Melding',@valueout = @button OUT,@class = 'btn-primary',@key = 'Enter'\nEXEC sp_api_modal_button @name='button',@value = 'Excel_CSV',@valueout = @button OUT,@class = 'btn-primary',@key = 'F5'\nEXEC sp_api_modal_text @companyname,N'h4 text-muted',@printonly=1\nEXEC sp_api_modal_print\n\nIF @button =  'Intrastat_Melding'\nBEGIN\nSELECT distinct [QUANTITY@] = sum(QUANTITY@), [ARTICLE~col-sm-5] = ARTICLE, LAND, INTRASTAT_CODE, [NETT_WEIGHT@] = sum(NETT_WEIGHT@), ISO, [AMOUNT@] = sum(AMOUNT@)\nINTO #Intrastat_Melding\nFROM          RV_INTRASTAT_MELDING\nWHERE\t\t(INTRASTAT_CODE is not NULL) AND (CompanyID = @id) AND (TransactionDate BETWEEN @date AND @date2) AND (THTDT = 2)\nGROUP BY ARTICLE,LAND,INTRASTAT_CODE,ISO\nEXEC sp_api_modal_table @tmptable=N'#Intrastat_Melding',@orderby=N'ORDER BY 2 ASC',@print=1\n\nEND \n\t\n\nIF @button =  'Excel_CSV'\nBEGIN\nSELECT distinct [QUANTITY] = sum(QUANTITY@), [ARTICLE] = ARTICLE, LAND, INTRASTAT_CODE, [NETT_WEIGHT] = sum(NETT_WEIGHT@), ISO, [AMOUNT] = sum(AMOUNT@)\nINTO #Intrastat_CSV\nFROM          RV_INTRASTAT_MELDING\nWHERE\t\t(INTRASTAT_CODE is not NULL) AND (CompanyID = @id) AND (TransactionDate BETWEEN @date AND @date2) AND (THTDT = 2)\nGROUP BY ARTICLE,LAND,INTRASTAT_CODE,ISO\n--EXEC sp_api_modal_table @tmptable=N'#Intrastat_CSV',@print=1\n--EXEC sp_api_modal_csv\t@tmptable = '#Intrastat_CSV'\t,@filename = @filename\t,@sep = ';'\n\n--EXEC sp_api_modal_table @tmptable=N'#Intrastat_CSV'\nEXEC sp_api_modal_csv @tmptable=N'#Intrastat_CSV',@ansi =1,@filename=@FileName\n\nEND \n\n\n\n\n\n\n\n",
                    "action_id": 1,
                    "action_name": "INTRASTAT_MELDING",
                    "source_table": "api_card_actions"
                },
                {
                    "sql_source": "DECLARE @date nvarchar(128),@date2 nvarchar(128),@button nvarchar(128), @ProdCode nvarchar(128), @ProdCode2 nvarchar(128),@land nvarchar(128)\nset @date = dbo.workDate()\nset @date2 = dbo.workDate()\n--SET @button = 'StockSoldList'\n--EXEC sp_api_modal_modal @class = 'w75'\nEXEC sp_api_modal_text 'Lvo:'\nEXEC sp_api_modal_select @card_name = N'Country',@value = @land OUT, @focus=1\nEXEC sp_api_modal_text 'Van:'\nEXEC sp_api_modal_date @name='Date',@value = @date OUT,@class='w-24'  -- zoek veld\nEXEC sp_api_modal_text 'Tot en met:'\nEXEC sp_api_modal_date @name='Date2',@value = @date2 OUT,@class='w-24' -- zoek veld\n--SET @date2 = CONCAT(@date2,' 23:59:59.999')\n\nEXEC sp_api_modal_text 'Van ProdCode:'\n--EXEC sp_api_modal_select @card_name=N'xstock',@value = @ProdCode OUT,@placeholder=N'Zoek...'\nEXEC sp_api_modal_input @name='ProdCode',@value = @ProdCode OUT,@class='w-24' -- zoek veld\nEXEC sp_api_modal_text 'Tot en met ProdCode:'\n--EXEC sp_api_modal_select @card_name=N'xstock',@value = @ProdCode2 OUT,@placeholder=N'Zoek...'\nEXEC sp_api_modal_input @name='ProdCode2',@value = @ProdCode2 OUT,@class='w-24' -- zoek veld\n\nEXEC sp_api_modal_button @name='button',@value = 'StockSoldList',@valueout = @button OUT,@class = 'btn-primary',@key = 'F1'\nEXEC sp_api_modal_print @keycode='F9'\n\nIF @button =  'StockSoldList'\nBEGIN\nEXEC sp_api_toast @land\nSELECT [Amount@] = Amount, [Description*] = Description, [Contentdesc*] = ContentDesc, LVO, xProdCode, TransactionDate\nINTO #StockSoldList\nFROM          RV_StockSold\nWHERE\t\t(TDTDT = 2) \nAND (TransactionDate BETWEEN @date AND @date2) AND (Origin_ID = @land OR @land is null)\n\n\nAND ((@ProdCode is NULL OR @ProdCode = '') AND (@ProdCode2 is NULL OR @ProdCode2 = '') AND (Origin_ID = @land OR @land is null)\nOR (xProdCode between @ProdCode AND @ProdCode2) AND (Origin_ID = @land OR @land is null))\n\nEXEC sp_api_modal_table @tmptable=N'#StockSoldList',@orderby=N'ORDER BY 2,5,4 ASC',@print=1\nEND \n",
                    "action_id": 61,
                    "action_name": "StockSold",
                    "source_table": "api_card_actions"
                },
                {
                    "sql_source": "DECLARE @Code nvarchar(50) --CURRENCY, DIESEL, ...\nDECLARE @ContextID INT -- context van de huidige kaart\nDECLARE @mes nvarchar(200)--, @xDesc nvarchar(200)\nDECLARE @prijs nvarchar(20),@aantal nvarchar(20) --='100'\n\nDECLARE @xValRateID INT = {[xValRate].id}\n\nif isnull(@xValRateID,0) = 0 -- 0 bij splinternieuwe kaart, dan geen koersen zetten op deze manier\n\tBEGIN\n\n\t\t\n\n\t\t--EXEC SP_API_TOAST N'Er kan geen nieuwe waarde worden toegevoegd. Dit kan alleen op bestaande xValrate kaarten.'\n\t\t--RETURN;\n\t\tdeclare @xCURR_ID int = {[currency].id}\n\t\tdeclare @xVALID int \n\t\tif @xCURR_ID is not null\n\t\t\tselect @xVALID = id from xValue where code='CURRENCY' and ContextID=@xCURR_ID and returntype='F'\n\n\t\tif @xVALID is not null\n\t\t\tbegin\n\t\t\t\tINSERT INTO [dbo].[xValrate]\n        \t   ([xVal_ID]\n           \t\t,[code]\n           \t\t,[contextID]\n           \t\t,[F]\n           \t\t,[StartDate]\n           \t\t,[ReturnType]\n           \t\t,[EndDate])\nselect \t[ID]\n          ,[code]\n          ,[contextID]\n          ,[F]\n          ,@main_db.dbo.ABCBOM()\n          ,[ReturnType]\n          ,NULL\nfrom xvalue where id=@xVALID\n\n\t\nreturn; -- nieuw record. stoppen. Als men een koers wil ingeven, dan nog een keer klikken..\n\t\t-- we kunnen ook het nieuwe inserted ID  hier in @ContextID stoppen...\n\n\t\t\tend\n\n\t\t\t\t\n\tEND\n\n\nselect @Code=code\n\t\t, @ContextID=ContextID\n\t\t--, @CardStartDate =startdate \n\tfrom xvalrate where ID=@xValrateID\nexec sp_api_toast @code\n--return;\n\ndeclare @datum nvarchar(512)\t--input\nDECLARE @koers nvarchar(20)\t\t--input\nset @mes=N'Invoeren van een nieuwe waarde'\nEXEC sp_api_modal_text @text = @mes,@class = 'h3 text-muted'\nEXEC sp_api_modal_text 'Datum'\nSET @datum = dbo.strdate(getdate())--'2020-10-30'\nEXEC sp_api_modal_date @name='Ingangsdatum:',@value= @datum OUT,@class = 'w-25' ,@focus=1\nEXEC sp_api_toast @datum\n\nEXEC sp_api_modal_text 'Waarde op deze datum:'\nEXEC sp_api_modal_input @name='koers',@value = @koers OUT\nIF @Koers>N'' SET @Koers=replace(@Koers, ',', '.') -- zorg dat punten en komma's als dec. seperator zijn toegestaan..\n\n\nDECLARE @button nvarchar(128)\nEXEC sp_api_modal_button @name='button',@value = 'Toevoegen',@valueout = @button OUT,@class = 'btn-primary',@key = 'Enter'\nIF @button IS NOT NULL\n\tBEGIN\n\t\texec @main_db.dbo.SetxValRate_F \t@Code = @Code\t,@ContextID =@ContextID\t,@StartDate =@datum\t,@F =@koers\n\t\tEXEC sp_api_modal_clear\t\t\n\t\tif @Code=N'CURRENCY'\n\t\t\tbegin\n\t\t\t\tdeclare @TT nvarchar(200)=concat(N'CTHTOTALS: currency ',@ContextID,'  naar: ',@koers)\n\t\t\t\texec @main_db.dbo._Writelog @TT\n\t\t\t\tupdate T  set t.currencyXrate=@koers \n\t\t\t\tfrom xcthtotals T inner join xtransactionheader cth on cth.id=t.cth_id\n\t\t\t\twhere t.lfdate>=@datum and cth.currency_id=@contextID\n\t\t\tend\t\t\n\t\tRETURN\n\tEND\n",
                    "action_id": 67,
                    "action_name": "Nieuw Tarief",
                    "source_table": "api_card_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_modal_date_from_to",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@from",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@from n"
                },
                {
                    "name": "@to",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@to n"
                },
                {
                    "name": "@class",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "''",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@class n"
                },
                {
                    "name": "@seed",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@seed n"
                }
            ],
            "embedded_example": "DECLARE @from date,@to date\r\nEXEC sp_api_modal_date_from_to @from = @from OUT,@to = @to OUT",
            "embedded_description": null,
            "co_occurrence_stats": {
                "dbo.sp_api_modal_table": 32,
                "dbo.sp_api_modal_text": 22,
                "dbo.sp_api_modal_select": 6,
                "dbo.sp_api_modal_button": 29,
                "dbo.sp_api_modal_print": 8,
                "dbo.sp_api_modal_date": 24,
                "dbo.sp_api_modal_modal": 21,
                "dbo.sp_api_modal_csv": 10,
                "dbo.sp_api_modal_choose": 4,
                "dbo.ABCDATE": 3,
                "dbo.sp_api_modal_input": 1,
                "dbo.ABCWEEKNR": 1,
                "dbo.sp_api_modal_select_table": 1,
                "dbo.sp_api_email": 1,
                "dbo.sp_api_toast": 1,
                "dbo.sp_api_modal_clear": 1,
                "dbo.sp_api_modal_input_decimal": 1
            },
            "real_usage_examples": [
                {
                    "sql_source": "/* bla bla {[verkoop].id} */\nDECLARE @cid int,@reducer nvarchar(max),@value nvarchar(128), @button nvarchar(128)\n,@from nvarchar(128) = NULL -- maar dit legt hier weer meer complexiteit neer, wat mij betreft dus allemaal om het even... als het default (=null) naar 'vansdaag' gaat is best, maar als ik ook maak blanco (= N'') kan meegeven dan.. PRIMA, mooi want dan wijzigd er niets voor bestaande boel\n\n,@to nvarchar(128) = N'' -- N'2021-01-12'--? misschien try\nSELECT @cid = id FROM api_card WHERE name = 'klant'\n\nEXEC sp_api_modal_date_from_to @from = @from OUT,@to = @to OUT\nEXEC sp_api_modal_text @from\nEXEC sp_api_modal_text @to\nEXEC sp_api_modal_button @name='Sure',@value = 'Ja', @valueout = @button OUT,@class='btn-danger',@key='Enter'\nRETURN\nEXEC sp_api_modal_select @card_name = N'country',@value = @value OUT,@focus = 1\nIF @value IS NOT NULL\n\tBEGIN\n\t\tSET @reducer = N'Country_ID = ' + @value\n\t\tEXEC sp_api_modal_table @card_id = @cid ,@reducer = @reducer --'' ,@class = 'h-auto' ,@tmptable = '#modaltable' ,@orderby = ''\n\tEND\nRETURN\nDECLARE @json nvarchar(max)\nSET @json = (SELECT * FROM fn_api_get_related_items_json_list(383,NULL))\nEXEC sp_api_modal_text @json,N'json'",
                    "action_id": 53,
                    "action_name": "Show Related List",
                    "source_table": "api_card_actions"
                },
                {
                    "sql_source": "DECLARE @date nvarchar(128),@button nvarchar(128),@from nvarchar(128),@to nvarchar(128), @datumrange nvarchar(50)\nset @date = dbo.workDate()\n\n--EXEC sp_api_modal_date @name='Date',@value = @date OUT,@focus = 1,@select=1 -- zoek veld\nEXEC sp_api_modal_date_from_to @from=@from out, @to=@to out\nSET @button = 'OmzetLijst'\nSET @datumrange = concat(@from, ' - ', @to)\nEXEC sp_api_modal_text @datumrange, @printonly=1\nEXEC sp_api_modal_button @name='button',@value = 'OmzetLijst',@valueout = @button OUT,@class = 'btn-primary',@key = 'F1'\nEXEC sp_api_modal_print\n\n-- \tSELECT TransactionDate, TV_CompanyName,[currencyISO*] = currencyISO,id, [totalProductPrice@] = totalProductPrice, [DATE*] = concat(@from, ' - ', @to)\n\nIF @button =  'OmzetLijst'\nBEGIN\n\tSELECT distinct \n\t[Debtor Nr] = (select debtorNumber from xcompany where id = CounterParty_ID)\n\t, [TV_CompanyName] = concat((select code from xcompany where id = CounterParty_ID),' ',TV_CompanyName)\n\t, [currencyISO*] = currencyISO\n\t, [Sum Colli@] = sum(COLFTOTALCTH)\n\t, [Sum Palcalc@] = sum(ctrPalCalcTotal)\n\t,[ValutaPrice@:2] = isnull(sum(totalProductPrice) \n\t--kortingen\n\t/ 100 * \n\t--Factuur korting percentage\n\t(isnull((select setting from xCompanyCostSettings where description_ID = 1 AND GroupCode = 'KORTING_P' and xCompany_ID = q_xtransactionheader.CounterParty_ID),0) \n\t--Rabat korting percentage \n\t+ isnull((select setting from xCompanyCostSettings where xCompany_ID = q_xtransactionheader.CounterParty_ID and description_ID = 200),0) + 100)\n\t--Rabat per collo\n\t+ ISNULL(((select setting from xCompanyCostSettings where description_ID = 210 and xCompany_ID = CounterParty_ID) * \n\t(select sum(Amount) from Q_xTransactionDetail where Q_xTransactionDetail.Counterparty_ID = q_xtransactionheader.CounterParty_ID and TransactionDate BETWEEN @from AND @to)),0)\n\t--korting per collo\n\t+ ISNULL(((select setting from xCompanyCostSettings where description_ID = 8 and xCompany_ID = CounterParty_ID) * \n\t(select sum(Amount) from Q_xTransactionDetail where Q_xTransactionDetail.Counterparty_ID = q_xtransactionheader.CounterParty_ID and TransactionDate BETWEEN @from AND @to)),0)\n\t,ISNULL(sum(totalProductPrice),0))\n\t\n\t,[totalPriceEuro@:2] = isnull(sum(totalProductPrice * currency_rate) \n\t--kortingen\n\t/ 100 * \n\t--Factuur korting percentage\n\t(isnull((select setting from xCompanyCostSettings where description_ID = 1 AND GroupCode = 'KORTING_P' and xCompany_ID = q_xtransactionheader.CounterParty_ID),0) \n\t--Rabat korting percentage \n\t+ isnull((select setting from xCompanyCostSettings where xCompany_ID = q_xtransactionheader.CounterParty_ID and description_ID = 200),0) + 100)\n\t--Rabat per collo\n\t+ ISNULL(((select setting from xCompanyCostSettings where description_ID = 210 and xCompany_ID = CounterParty_ID) * \n\t(select sum(Amount) from Q_xTransactionDetail where Q_xTransactionDetail.Counterparty_ID = q_xtransactionheader.CounterParty_ID and TransactionDate BETWEEN @from AND @to)),0)\n\t--korting per collo\n\t+ ISNULL(((select setting from xCompanyCostSettings where description_ID = 8 and xCompany_ID = CounterParty_ID) * \n\t(select sum(Amount) from Q_xTransactionDetail where Q_xTransactionDetail.Counterparty_ID = q_xtransactionheader.CounterParty_ID and TransactionDate BETWEEN @from AND @to)),0)\n\t,ISNULL(sum(totalProductPrice),0))\n\t\n\n\tINTO #OmzetLijst\n\tfrom q_xtransactionheader \n\tCROSS APPLY(select currency_rate = F FROM @main_db.[dbo].[GETVALUE]('CURRENCY',currency_id,transactiondate)) rate\n\twhere TDT = 2 AND (specialType = 1001 OR specialType IS NULL) AND Repack_ID is null AND (TransactionDate BETWEEN @from AND @to)\n\tGROUP BY currencyISO,TV_CompanyName,CounterParty_ID\n\tEXEC sp_api_modal_table @tmptable=N'#OmzetLijst',@orderby=N'ORDER BY 3,2 ASC',@print=1\nEND \n",
                    "action_id": 547,
                    "action_name": "Omzet lijst",
                    "source_table": "api_card_actions"
                },
                {
                    "sql_source": "DECLARE @date nvarchar(128),@button nvarchar(128),@from nvarchar(128),@to nvarchar(128)\nset @date = dbo.workDate()\n\n--EXEC sp_api_modal_date @name='Date',@value = @date OUT,@focus = 1,@select=1 -- zoek veld\nEXEC sp_api_modal_date_from_to @from=@from out, @to=@to out,@class='w-24'\nSET @button = 'ColliVerkocht'\nEXEC sp_api_modal_button @name='button',@value = 'ColliVerkocht',@valueout = @button OUT,@class = 'btn-primary',@key = 'F1'\nEXEC sp_api_modal_print\n\nIF @button =  'ColliVerkocht'\nBEGIN\n\tSELECT [Aantal colli verkocht] = sum(Amount) \n\tINTO #ColliVerkocht\n\tfrom Q_xTransactionDetail \n\twhere (TransactionDate BETWEEN @from AND @to) and Repack_ID is null and TDT = 2\n\tEXEC sp_api_modal_table @tmptable=N'#ColliVerkocht',@print=1\nEND \n",
                    "action_id": 556,
                    "action_name": "Verkocht aantal colli",
                    "source_table": "api_card_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_modal_datetime",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 510,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@name n"
                },
                {
                    "name": "@value",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@value n"
                },
                {
                    "name": "@class",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "''",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@class n"
                },
                {
                    "name": "@focus",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@focus b"
                },
                {
                    "name": "@select",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@select b"
                },
                {
                    "name": "@inline",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "1",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@inline b"
                }
            ],
            "embedded_example": "EXEC sp_api_modal_datetime N'@datetime',@value = @datetime OUT",
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_modal_debug",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_modal_dispatch",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@dispatchjson",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@dispatchjson n"
                }
            ],
            "embedded_example": "EXEC sp_api_modal_dispatch N'{\"type\":\"reload_client\"}'\r\nEXEC sp_api_modal_dispatch N'{\"type\":\"logOut\"}'",
            "embedded_description": null,
            "co_occurrence_stats": {
                "dbo.sp_api_modal_button": 1,
                "dbo.sp_api_toast": 1
            },
            "real_usage_examples": [
                {
                    "sql_source": "DECLARE @finance_reference nvarchar(128)\n--BEGIN TRY\n\tEXEC @main_db.dbo.sp_iu_finance_account @id,@finance_reference OUT\n\tEXEC sp_api_toast @finance_reference\n/*END TRY BEGIN CATCH\n\t--SET @finance_reference = ERROR_NUMBER()\n\t--EXEC sp_api_toast @finance_reference\n\tIF ERROR_SEVERITY() = 17 -- redirect = 17!!!\n\t\tBEGIN\n\t\t\tDECLARE @valueout nvarchar(128)\n\t\t\t\t, @json nvarchar(max) = N'{\"type\":\"open_url_in_new_tab\",\"url\":\"'+ERROR_MESSAGE()+'\",\"windowFeatures\":\"width=500,height=500,scrollbars=on\"}'\n\t\t\tEXEC sp_api_modal_dispatch @json\n\t\t\tEXEC sp_api_modal_text N'Login to Exact Online, then try again',N'h4 mb-4'\n\t\t\tEXEC sp_api_modal_button @name='Retry',@value = 'Retry', @valueout = @valueout OUT,@class='btn-primary',@key='Enter'\n\t\tEND\nEND CATCH\n*/",
                    "action_id": 235,
                    "action_name": "Export naar Exact",
                    "source_table": "api_card_actions"
                },
                {
                    "sql_source": "\nDECLARE @hclass nvarchar(255) = N'h4 pt-4'\n\t,@subclass nvarchar(255) = N'text-muted blockquote mt-4'\n\t,@codeclass nvarchar(255) = N'code pre mb-2'\n\t,@valueout nvarchar(255)\n\nEXEC sp_api_modal_text 'Action Help','h3 text-muted'\n\nEXEC sp_api_modal_text 'Performance tips',@hclass\nEXEC sp_api_modal_text 'To disable triggers on temp inserts/updates:',@subclass\nEXEC sp_api_modal_text 'IF TRY_CAST(SESSION_CONTEXT(N''api_save_confirmed'') as INT) = 0 RETURN',@codeclass\n\nEXEC sp_api_modal_text 'Choose option',@hclass\n\n\n\n\nEXEC sp_api_modal_text 'Choose option',@hclass\n\n\tEXEC sp_api_modal_text N'EXEC sp_api_modal_choose @list = N''Predefined,Custom,Later, Maybe'',@value = @button_choose OUT,@startkey=NULL',@codeclass\n\n\n\tEXEC sp_api_modal_text @text = N'Kies een optie met F-toetsen (@startkey=3)',@class = N'm-4 text-muted'\n\tDECLARE @button_choose nvarchar(128)\n\tEXEC sp_api_modal_choose @list = N'Predefined,Custom,wert,wertr,wywer,tqyer,twertq,ewrt',@value = @button_choose OUT,@startkey=3\n\tEXEC sp_api_modal_text @button_choose\n\n\tEXEC sp_api_modal_text @text = N'Kies een optie met beginletter-toetsen (spatie = geen, @startkey=NULL)',@class = N'm-4 text-muted'\n\tDECLARE @button_choose2 nvarchar(128)\n\tEXEC sp_api_modal_choose @list = N'Predefined,Custom, wert,wertr, wywer,tqyer, twertq,ewrt2',@value = @button_choose2 OUT,@startkey=NULL\n\tEXEC sp_api_modal_text @button_choose2\n\n\nEXEC sp_api_modal_text 'pathname',@hclass\n\nEXEC sp_api_modal_text 'go to url:',@subclass\nEXEC sp_api_modal_text '{\"pathname\":\"/verkoop\"}',@codeclass\n\nEXEC sp_api_modal_text 'add to current url with optional {selectedId}:',@subclass\nEXEC sp_api_modal_text '{\"addto\":\"{selectedId}/CTR\"}',@codeclass\n\nEXEC sp_api_modal_text 'stored_procedure',@hclass\n\nEXEC sp_api_modal_text 'modal text:',@subclass\nEXEC sp_api_modal_text N'EXEC sp_api_modal_text @text = N''This is a success!''\n\t,@class = N''alert alert-primary'', @translate = 1',@codeclass\nEXEC sp_api_modal_text @text = N'This is a success!',@class = N'alert alert-primary', @translate = 1\n\nEXEC sp_api_modal_text 'modal input:',@subclass\nEXEC sp_api_modal_text N'EXEC sp_api_modal_input @name=''Naam'',@max=5, @value= @valueout OUT,@focus=1',@codeclass\nEXEC sp_api_modal_input @name='Naam',@max=5, @value= @valueout OUT,@focus=0\n\nEXEC sp_api_modal_text 'modal input decimal:',@subclass\nEXEC sp_api_modal_text N'EXEC sp_api_modal_input_decimal @name=''Percentage'',@value= @Percentage OUT,@focus=1 [,@precision=18,@scale=2]',@codeclass\nDECLARE @Percentage decimal(18,2)\nEXEC sp_api_modal_input_decimal @name='Percentage', @value= @Percentage OUT\n\n\n\nEXEC sp_api_modal_text 'modal date:',@subclass\nEXEC sp_api_modal_text N'EXEC sp_api_modal_date @name=''Datum''@value= @valueout OUT,@focus=1',@codeclass\nEXEC sp_api_modal_date @name='Datum', @value= @valueout OUT,@focus=0,@class='w-24'\n\n\nEXEC sp_api_modal_text 'modal button:',@subclass\nEXEC sp_api_modal_text N'DECLARE @button1 nvarchar(128),@button_text1 nvarchar(128) = ''Opslaan''\nEXEC sp_api_modal_button @name=''button1'',@value = @button_text1, @valueout = @button1 OUT ,@class=''btn-danger'',@key=''Enter''',@codeclass\nDECLARE @button1 nvarchar(128),@button_text1 nvarchar(128) = 'Opslaan'\nEXEC sp_api_modal_button @name='button1',@value = 'Opslaan', @valueout = @valueout OUT,@class='btn-danger',@key='Enter'\nIF @valueout = 'Opslaan'\n\tBEGIN\n\t\tEXEC sp_api_modal_clear\n\t\tEXEC sp_api_statusbar N'HELP F1 - JA gedrukt!' ,'bg-danger col-sm-2 text-truncate',1 --> 1 is rechts\n\t\tRETURN\n\tEND\n\nEXEC sp_api_modal_text 'modal route:',@subclass\nEXEC sp_api_modal_text N'EXEC  sp_api_modal_route @name = N''Verkoop Anaco'',@pathname=N''/verkoop''\n\t,@search =N''?id=2784'' ,@class = N''btn-success'' ,@key = N''F2''',@codeclass\nEXEC  sp_api_modal_route @name = N'Verkoop Anaco',@pathname=N'/verkoop',@search =N'?id=2784' ,@class = N'btn-success' ,@key = N'F2'\n\nEXEC sp_api_modal_text 'modal clear all previous components:',@subclass\nEXEC sp_api_modal_text N'EXEC sp_api_modal_clear',@codeclass\n\nEXEC sp_api_modal_text 'Alert box:',@subclass\nEXEC sp_api_modal_text N'EXEC sp_api_modal_alert N''Give me an alert''',@codeclass\n\nEXEC sp_api_modal_text 'modal get user setting:',@subclass\nEXEC sp_api_modal_text N'EXEC sp_api_modal_get N''my_fake_name'',@naam OUT',@codeclass\n\nEXEC sp_api_modal_text 'modal set user setting:',@subclass\nEXEC sp_api_modal_text N'EXEC sp_api_modal_set N''my_fake_name'',N''Jack van Vliet''',@codeclass\n\nEXEC sp_api_modal_text 'modal set modal value:',@subclass\nEXEC sp_api_modal_text N'EXEC sp_api_modal_value @name,NULL',@codeclass\n\n\nEXEC sp_api_modal_text 'modal set delete user setting:',@subclass\nEXEC sp_api_modal_text N'EXEC sp_api_modal_set N''my_fake_name'',NULL',@codeclass\n\nEXEC sp_api_modal_text 'modal set delete user setting:',@subclass\nEXEC sp_api_modal_text N'EXEC sp_api_modal_set N''my_fake_name'',NULL',@codeclass\n\nEXEC sp_api_modal_text 'Toast message:',@subclass\nEXEC sp_api_modal_text N'EXEC sp_api_toast @text = N''Toast message Toast message !!! ???''\n,@class=N''bg-danger text-white'',@translate=1,@seconds=2',@codeclass\nEXEC sp_api_toast @text = N'Toast message Toast message !!! ???',@class=N'bg-danger text-white',@translate=1,@seconds=2\n\nEXEC sp_api_modal_text 'Send dispatch to modal, to dispatch something on the client:',@subclass\nEXEC sp_api_modal_text N'EXEC sp_api_modal_dispatch N''{\"type\":\"stored_procedure\",\"name\":\"Choose columns\"}''',@codeclass\n\nEXEC sp_api_modal_text 'modal post and save to card example:',@subclass\nEXEC sp_api_modal_text N'IF TRY_CAST(@prijs as decimal) > 0 AND TRY_CAST(@aantal as int) > 0\n\tBEGIN\n\t\tEXEC sp_api_modal_post @card=''verkocht'',@column=''aantal'',@value=@aantal\n\t\tEXEC sp_api_modal_post @card=''verkocht'',@column=''prijs'',@value=@prijs\n\t\tEXEC sp_api_modal_post @card=''verkocht'',@column=''prosoort_id'',@value=@id\n\t\tEXEC sp_api_modal_save @card=''verkocht''\n\t\tEXEC sp_api_modal_clear\n\tEND',@codeclass\n\nEXEC sp_api_modal_text 'Push to statusbar:',@subclass\nEXEC sp_api_modal_text N'EXEC sp_api_statusbar N''HELP F1'' ,''bg-danger col-sm-1 text-truncate'',1 --> 1 is rechts',@codeclass\n\nEXEC sp_api_statusbar N'HELP F1' ,'bg-danger col-sm-1 text-truncate',0 --> 1 is rechts\n\nEXEC sp_api_modal_text 'Cursor for @ids:',@subclass\nEXEC sp_api_modal_text N'DECLARE @cursor CURSOR,@idval INT\nSET @cursor = CURSOR LOCAL FAST_FORWARD FOR SELECT value FROM string_split(@ids,'','')\nOPEN @cursor;\nFETCH NEXT FROM @cursor INTO @idval\nWHILE @@FETCH_STATUS = 0\n\tBEGIN\n\t\tEXEC sp_api_modal_text @idval\n\t\tFETCH NEXT FROM @cursor INTO @idval\n\tEND\nCLOSE @cursor;\nDEALLOCATE @cursor;\n',N'code'\n",
                    "action_id": 3,
                    "action_name": "sys_action_help",
                    "source_table": "api_actions"
                },
                {
                    "sql_source": "DECLARE @text nvarchar(max)\n,@hclass nvarchar(128) = 'h5 text-muted mt-3'\n,@bclass nvarchar(128) = 'btn-primary'\n\nEXEC sp_api_modal_modal @class = 'pt-5'\nIF dbo.hasRole('admin') > 0 BEGIN\n\tSET @text = N'You''re at ' + @hostname + ' [@main_db]'\n\tEXEC sp_api_toast @text=@text,@seconds=3\nEND\n\nDECLARE @colorblind BIT = 0\nIF dbo.hasClaims('sub=email@anacogreeve.nl') > 0\nBEGIN\nSET @colorblind = 1\nEND\n\nDECLARE @extendedMenu BIT = 0\nIF dbo.hasClaims('sub=email@anacogreeve.nl') > 0\nBEGIN\nSET @extendedMenu = 1\nEND\n\nDECLARE @loods BIT = 0\nIF dbo.hasRole('loodsbaas,loodsmedewerker,ompakker,keurmeester') > 0\nBEGIN\nSET @loods = 1\nEND\n\n--ALS EERSTE!\n--EXEC sp_api_modal_action N'Scanner Test',@class='btn-danger'\nEXEC sp_api_modal_action N'Scanner',@class='btn-danger'\nEXEC sp_api_modal_action N'Mobilephone',@class='btn-danger'\nEXEC sp_api_modal_action N'detepo',@class='btn-danger'\nEXEC sp_api_modal_action N'micro_check_scan',@class='btn-danger' --rh 230825\nEXEC sp_api_modal_action N'test_rick_2',@class='btn-danger' --rh 230825\nEXEC sp_api_modal_action N'NEOVO_PALLET_SCAN',@class='btn-danger'\nEXEC sp_api_modal_action N'Barcode Scanner',@class='btn-tracy'\nEXEC sp_api_modal_action N'check_serial_number' --rh231218\nEXEC sp_api_modal_action N'check_pallets' --241129\nEXEC sp_api_modal_action N'check_pallets_in_stock' --241129\nEXEC sp_api_modal_action N'check_data' --rh240719\nEXEC sp_api_modal_action @name='RWS-podcast'\nEXEC sp_api_modal_action @name='rick_delete'\n\n\n--START\n\nIF @button = 'Quick menu'\n\tBEGIN\n\t\tEXEC #sys_quick_menu @path\n\t\tRETURN\n\tEND\n\nEXEC sp_api_modal_text 'Hoofdmenu','h1'\n\nif  dbo.hasClaims(N'tenant=AGNEOVO') >0 or dbo.hasRole('admin,directie') > 0\n\tbegin \n\t\t--EXEC sp_api_modal_action @name='pallet_status_agneovo',@class = 'btn-white border-dark text-dark' --test 230808\n\t\tEXEC sp_api_modal_route @cardname='pallet_status_agneovo'\t\n\tend\n\nEXEC sp_api_modal_route @cardname='wms_micro_outbound'\n\nIF dbo.hasClaims('sub=mterlouw@rwsbv.com') > 0 or dbo.hasClaims('sub=kterlouw@rwsbv.com') > 0 --250415\n\tor dbo.hasClaims('sub=rick@tracy.nu') > 0 OR dbo.hasRole('admin,directie,barsan,barsan_bo') > 0\nBEGIN\n\tEXEC sp_api_modal_route @cardname='douanevoorraadmutatie'\nEND\t\n\nIF dbo.hasRole('admin,directie,loodsmedewerker') > 0\nBEGIN\n\tEXEC sp_api_modal_route @cardname='vehicle_export_staging',@search= '?red=open'\nEND\t\n\n BEGIN\n\t-----------------\n\t-- ADMIN QUICK LIJST\n\t-----------------\n\n\t\tIF dbo.hasRole('admin') > 0\n\t\tBEGIN\n--\t\tEXEC sp_api_modal_text 'Admin Knopjes',@hclass\n--\t\tSET @bclass = 'btn btn-linkt border-danger text-dark'\n\t\t/*\n\t\tEXEC sp_api_modal_route @name='Product (Hoofdgroup)',@pathname='/xproduct',@search= '?red=',@class=@bclass,@key='P',@group = 'Voorraadbeheer'\n\t\tEXEC sp_api_modal_route @name='Intrastat Fout of Geen',@pathname='/xproduct',@search= '?red=Intrastat_ID+Empty+OR+Wrong',@class=@bclass,@key='I',@group = 'Voorraadbeheer'\n\t\tEXEC sp_api_modal_route @name='Geen Customs Group',@pathname='/xproduct',@search= '?red=Geen+Douane+Groep',@class=@bclass,@key='D',@group = 'Voorraadbeheer'\n\t\tEXEC sp_api_modal_route @name='Onvolledig Customs Art',@pathname='/xproduct',@search= '?red=Niet+(Volledig)+in+Customs+Art',@class=@bclass,@key='L',@group = 'Voorraadbeheer'\n\t\t*/\n\t\t\n\t\tEXEC sp_api_modal_route @name='To Do',@pathname='/api_todo',@search= '?red=Niet+klaar',@class='btn btn-linkt border-danger text-dark',@key='T'\n\t\tEXEC sp_api_modal_route @name='API DATASET',@pathname='/api_data_set'\n\t\tEND\n\t\n\t--------------\n\t-- Warehouse\n\t--------------\n--\tEXEC sp_api_modal_text 'Warehouse',@hclass\n\n\tIF @colorblind = 1\n\t\tBEGIN\n\t\t\tSET @bclass = 'btn-primary'\n\t\tEND\n\tELSE\n\t\tBEGIN\n\t\t\tSET @bclass = 'btn-secondary'\n\t\tEND\nIF dbo.hasRole('user,admin,directie') > 0\n\tbegin\n\n\t\n\t\tEXEC sp_api_modal_route @name='Vessel',@pathname='/w_vessel',@class=@bclass,@key='V'--, @Search='?red=Open+en+Nieuw',@group = 'main'\n\t\tEXEC sp_api_modal_route @name='Bill of Lading',@pathname='/w_bl',@class=@bclass,@key='Alt+B'--, @Search='?red=recent'--,@group = 'main'\n\t\tEXEC sp_api_modal_route @name='Forecast',@pathname='/forecast',@class=@bclass,@key='F'--, @Search='?red=Open+en+Nieuw',@group = 'main'\n\t\t\n\n\t--\tEXEC sp_api_modal_route @name='Inbound',@pathname='/inbound',@class=@bclass,@key='I'--, @Search='?red=Open+en+Nieuw',@group = 'main'\n\t--\tEXEC sp_api_modal_route @name='Outbound Transport',@pathname='/wms_out_transport',@class=@bclass,@key='O'--, @Search='?red=Open+en+Nieuw',@group = 'main'\n--\t\tEXEC sp_api_modal_action @name='report_menu',@class = 'btn-white border-dark text-dark'\n\t\t\n\n\t\t\n\tend\n--@name='Inbound Transport.',\n--\t\tEXEC sp_api_modal_route @name='Inbound Transport',@pathname='/wms_in_transport',@class=@bclass,@key='T'--, @Search='?red=Open+en+Nieuw',@group = 'main'\n\t\tEXEC sp_api_modal_route @name='Inbound Transport',@cardname='wms_in_transport',@class=@bclass,@key='T'--, @Search='?red=Open+en+Nieuw',@group = 'main'\n\n--IF dbo.hasRole('viewer') > 0\n\t--begin\n\n  \n\n\t--220319 NIEUW: DE CARD BEPAALT ZELF AAN DE HAND VAN DE ROLLEN OF HIJ GERENDERD WORDT..\nIF dbo.hasRole('loodsmedewerker') = 0 --specifiek ** UITSLUITEN ** bij menu voor loodsmedewerker\n\tbegin\n\t\tEXEC sp_api_modal_route @name='Inbound',@cardname='inbound',@class=@bclass,@key='I'\n\t\tEXEC sp_api_modal_route @name='Outbound Transport',@cardname='wms_out_transport',@class=@bclass,@key='O',@group = 'outbound'\n\t\tEXEC sp_api_modal_route @name='Micro outbound form',@cardname='wms_micro_outbound',@class=@bclass,@key='O'\t,@group=N'micro_outbound'\t\n\t\t\n\tend\n--230306 specifiek uitsluiten voor ensign\nif  dbo.hasClaims(N'tenant=VIAROT') =0 \t--iedereen behalve viaensign\t\n\tEXEC sp_api_modal_route @name='Outbound orders',@cardname='outbound_form',@class=@bclass,@key='O',@group = 'outbound'\n\n\t\tIF dbo.hasRole('admin,directie') > 0 -- micro werk!\n\t\t\tbegin\n\t\t\t\tEXEC sp_api_modal_route @name='Micro outbound form',@cardname='wms_micro_outbound',@class=@bclass,@key='O'\t,@group=N'micro_outbound'\t\n\t\t\t\tEXEC sp_api_modal_route @name='Replenishment',@cardname='w_pallet_replenishment',@class=@bclass,@key='R'\t,@group=N'micro_outbound'\t\t\n--\t\t\t\tEXEC sp_api_modal_route @name='Micro item stock info',@cardname='wms_micro_item_stock_info',@class=@bclass,@key='R'\t,@group=N'micro_outbound',@search= '?red=selecteerbare_pallets'\n\t\t\t\tEXEC sp_api_modal_route @name='micro_totals',@cardname='micro_totals',@class=@bclass,@key='T'\t,@group=N'micro_outbound'\n\n\t\t\t\t--231024\n\t\t\t\tEXEC sp_api_modal_route @cardname='micro_items_stock_per_position_agneovo'\n\t\t\tend\t\n\t\tEXEC sp_api_modal_route @name='Stock by Client',@cardname='wms_rv_pal_stock',@class=@bclass,@key='C'\n\n--230306 specifiek uitsluiten voor ensign\nif  dbo.hasClaims(N'tenant=VIAROT') =0 \n\t--alleen viarot uitsluiten, dus als je de claim niet hebt mag je dit item zien\n\tEXEC sp_api_modal_route @name='Stock by BL',@cardname='wms_rv_pal_stock_bl',@class=@bclass,@key='B'\n\n\t\tEXEC sp_api_modal_route @name='Stock by Container',@cardname='wms_rv_pal_stock_cnt',@class=@bclass,@key='N'\n\t\t--micro stock info\n--\t\tEXEC sp_api_modal_route @name='Stock per micro item',@cardname='micro_totals',@class=@bclass,@key='T'\t\n--per lotnumber\nIF dbo.hasRole('loodsmedewerker') = 0\n\tbegin --specifiek uitsluiten bij menu voor loodsmedewerker\n\t\tEXEC sp_api_modal_route @name='Stock per micro item',@cardname='micro_totals_lotnr_w_lot',@class=@bclass,@key='T'\t\n\tend\t\n\n\t\t--230114\n\t\tEXEC sp_api_modal_route @cardname='wms_io'\t\n\t\t--230710 uitgezet, driver-screen wordt via link direct gestart EXEC sp_api_modal_route @cardname='driver_screen'\t\n\t\tEXEC sp_api_modal_route @cardname='inbound_form_barsan'\t\n\t\t\n--\tend\n\t\t\n\t--------------\n\t-- Rapportage\n\t--------------\n\tEXEC sp_api_modal_action @name='report_menu',@class = 'btn-success'--'btn-white border-dark text-dark'\n\n\tIF dbo.hasRole('user,admin,directie') > 0\n\t\tBEGIN\n\t\t\t--EXEC sp_api_modal_text 'Rapportage (Maand Afsluiten)',@hclass\n\t\t\t--EXEC sp_api_modal_route @name='Aangifte',@pathname='/aangifte',@search= '',@class = 'btn-white border-dark text-dark',@key='A'\n\t\t\tEXEC sp_api_modal_route @name='Crossdock',@pathname='/w_crossdock',@class=@bclass,@key='C'\n\t\t\t\n\t\tEND\n\n\n/*\n\t-----------------\n\t-- VOORRAAD LIJST\n\t-----------------\n--\tEXEC sp_api_modal_text 'Artikelbestand (Voorraad)',@hclass\n--\tSET @bclass = 'btn-secondary'\n\t--EXEC sp_api_modal_route @name='xstock',@pathname='/xstock',@search= '',@class=@bclass,@key='X'\n\n\tIF @colorblind = 1\n\t\tBEGIN\n\t\t\tEXEC sp_api_modal_route @name='Totaal Voorraad per lokatie',@pathname='/stocklocation',@search= '',@class='btn-primary',@key='T',@group = 'Voorraad'\n\t\t\tEXEC sp_api_modal_route @name='Voorraad per lokatie',@pathname='/voorraadlokatie',@search= '',@class='btn-primary',@key='X',@group = 'Voorraad'\n\t\t\tEXEC sp_api_modal_route @name='Voorraad [Artikelen]',@pathname='/xstock',@search= '?red=',@class='btn-primary',@key='S',@group = 'Voorraad'\n\t\t\t\n\t\tEND\n\tELSE\n\t\tBEGIN\n\t\tEXEC sp_api_modal_route @name='Totaal Voorraad per lokatie',@pathname='/stocklocation',@search= '',@class=@bclass,@key='T',@group = 'Voorraad'\n\t\t\tEXEC sp_api_modal_route @name='Voorraad per lokatie',@pathname='/voorraadlokatie',@search= '',@class=@bclass,@key='X',@group = 'Voorraad'\n\t\t\tEXEC sp_api_modal_route @name='Voorraad [Artikelen]',@pathname='/xstock',@search= '?red=',@class=@bclass,@key='S',@group = 'Voorraad'\n\t\t\t\n\t\tEND\n*/\n\n\t------------\n\t-- Transactions\n\t------------\n--\tEXEC sp_api_modal_text 'Transacties',@hclass\n/*\n\tBEGIN\n\n\tEXEC sp_api_modal_route @name='Verkoop [Pakbon Niet Geprint]',@pathname='/verkoop',@search= '?red=Pickbon+NOG+NIET+GEPRINT' ,@class='btn-primary',@key='V',@group = 'verkoop'\n\n\tEXEC sp_api_modal_route @name='Filter [Pickbon Geprint]',@pathname='/verkoop',@search= '?red=Pickbon+Geprint' ,@class='btn-primary',@key='P',@group = 'verkoop'\n\tEXEC sp_api_modal_route @name='Verkoop [Alles]',@pathname='/verkoop',@search= '?red=' ,@class='btn-primary',@key='A',@group = 'verkoop'\n\tEXEC sp_api_modal_route @name='Filter [Commission]',@pathname='/verkoop',@search= '?red=Commission+%5BopenPrice%5D' ,@class='btn-primary',@key='C',@group = 'verkoop'\n\n\t--EXEC sp_api_modal_route @name='Verkoop [Vandaag]',@pathname='/verkoop',@search= '?red=Werkdatum+openSale' ,@class='btn-primary',@key='Ctrl+V',@group = 'verkoop'\n\n\tEXEC sp_api_modal_route @name='Filter [Pickbon Veranderd]',@pathname='/verkoop',@search= '?red=Pickbon+VERANDERD' ,@class='btn-primary',@key='W',@group = 'verkoop'\n\tEXEC sp_api_modal_route @name='Filter [Klaar voor Factuur]',@pathname='/verkoop',@search= '?red=Fase+Klaar+voor+Factuur' ,@class='btn-primary',@key='K',@group = 'verkoop'\n\tEXEC sp_api_modal_route @name='Filter [Gefactureerd]',@pathname='/verkoop',@search= '?red=Orders%3A+gefactureerd' ,@class='btn-primary',@key='F',@group = 'verkoop'\n\tEXEC sp_api_modal_route @name='Filter [Nog Toewijzen]',@pathname='/verkoop',@search= '?red=Toewijzen' ,@class='btn-primary',@key='T',@group = 'verkoop'\n\tEXEC sp_api_modal_route @name='Inkoop',@pathname='/inkoop',@search= '?red=',@class='btn-warning',@key='I',@group = 'inkoop'\n\tEXEC sp_api_modal_route @name='Open inkopen',@pathname='/inkoop',@search= '?red=Open+inkopen',@class='btn-primary',@key='O',@group = 'inkoop'\n\tEXEC sp_api_modal_route @name='Gesloten inkopen',@pathname='/inkoop',@search= '?red=Gesloten+inkopen',@class='btn-primary',@key='G',@group = 'inkoop'\n\tEXEC sp_api_modal_route @name='Inkoop [Vandaag]',@pathname='/inkoop',@search= '?red=Werkdatum',@class='btn-warning',@key='Ctrl+I',@group = 'inkoop'\n\tEXEC sp_api_modal_route @name='Douane Actie Nodig',@pathname='/inkoop',@search= '?red=Actie+nodig+(douane+tafel)',@class='btn-warning',@key='D',@group = 'inkoop'\n\tEXEC sp_api_modal_route @name='Verkoop Claims [New]',@pathname='/xclaim',@search= '?red=Status+%3D+New',@class='btn-danger',@key='Alt+C',@group = 'verkoop'\n\tEXEC sp_api_modal_route @name='AccountSale [Open]',@pathname='/xcth_accountsale',@search= '?red=Open',@class='btn-warning',@key='A',@group = 'accountsale'\n\tEXEC sp_api_modal_route @name='AccountSale [Invoiced]',@pathname='/xcth_accountsale',@search= '?red=Factuur+gemaakt',@class='btn-warning',@key='F',@group = 'accountsale'\n\t--EXEC sp_api_modal_route @name='Fust Inname',@pathname='/xfustreturned',@search= '?red=',@class='btn-white border-dark text-dark',@key='F'\n\t\tIF @extendedMenu = 1\n\t\tBEGIN\n\t\tEXEC sp_api_modal_route @name='Verkoop [Gereserveerd]',@pathname='/verkoop',@search= '?red=Orders+Reserved' ,@class='btn-primary',@key='Ctrl+V',@group = 'verkoop'\n\t\tEXEC sp_api_modal_route @name='Inkoop [Gereserveerd]',@pathname='/inkoop',@search= '?red=Orders+Reserved',@class='btn-warning',@key='Ctrl+I',@group = 'inkoop'\n\t\tEND\n\t\t\n\tEND\n*/\t\n\t\n/*\t\n\tEXEC sp_api_modal_text '',@class='row'\n\tEXEC sp_api_modal_action @name='Nieuwe Verkoop',@class='btn-primary',@keycode='ArrowUp'\n\tEXEC sp_api_modal_action @name='Nieuwe Inkoop',@class='btn-warning',@keycode='ArrowDown'\n*/\n\n/*\n\tIF dbo.hasRole('douane,admin') > 0\n\t\tBEGIN\n\t\t\n\t\t--------------\n\t\t-- Douane\n\t\t--------------\n\t\tEXEC sp_api_modal_text 'Douane',@hclass\n\t\t\n\t\tSET @bclass = 'btn-dark'\n\t\t\n\t\t\tIF EXISTS (SELECT * FROM check_lfctr_at_entrepot)\n\t\t\t\tBEGIN\n\t\t\t\t\tEXEC sp_api_modal_route @name='Verkoop Correctie',@pathname='/check_lfctr_at_entrepot',@search= '',@class='btn-danger',@key='E'\n\t\t\t\tEND\n\t\t\n\t\t\tEXEC sp_api_modal_route @name='Douane Saldo',@pathname='/douanesaldo',@search= '',@class=@bclass,@key='S',@group = 'Douaneoverzicht'--,@group = 'Container'\n\t\t\tEXEC sp_api_modal_route @name='Contingent',@pathname='/sf_femimp',@search= '',@class=@bclass,@key='C',@group = 'Douaneoverzicht'\n\t\t\t\n\t\t\tEXEC sp_api_modal_route @name='Import',@pathname='/xvessel',@search= '?red=Nog+Niet+Uitgelost&ord=22636,26417,22107',@class=@bclass,@key='B',@group = 'Container'\n\t\t\tEXEC sp_api_modal_route @name='Inslag document',@pathname='/xbol',@class=@bclass,@key='D',@group = 'Container'\n\t\t\tEXEC sp_api_modal_route @name='Containers',@pathname='/xcontainer',@class=@bclass,@key='C',@group = 'Container'\n\t\t\tEXEC sp_api_modal_route @name='Partij Douane Artikelen',@pathname='/xcthcustomsrows',@class=@bclass,@key='P',@group = 'Container'\n\t\t\t\n\t\t\t\n\t\t\tEXEC sp_api_modal_route @name='Douane Artikelen',@pathname='/xproductcustomsgroup',@search= '',@class=@bclass,@key='D',@group = 'DouaneArtikelGroup'\n\t\t\tEXEC sp_api_modal_route @name='Douane Artikelen Per Land',@pathname='/xcthcustomsart',@search= '',@class=@bclass,@key='A',@group = 'DouaneArtikelGroup'\n\t\t\tEXEC sp_api_modal_route @name='E-cert Groep',@pathname='/xclientbotanic',@search= '',@class=@bclass,@key='G',@group = 'DouaneArtikelGroup'\n\t\t\tEXEC sp_api_modal_route @name='E-cert Vari\u00ebteit',@pathname='/xclientexport',@search= '',@class=@bclass,@key='V',@group = 'DouaneArtikelGroup'\n\t\t\tEXEC sp_api_modal_route @name='Product (Hoofdgroup)',@pathname='/xproduct',@search= '?red=',@class=@bclass,@key='P',@group = 'DouaneArtikelGroup'\n\t\t\t\n\t\t\t--EXEC sp_api_modal_route @name='Binnenkomend (LF)',@pathname='/lf_aanvoer_inkomend',@search= '',@class=@bclass,@key='I',@group = 'Container'\n\t\t\t--EXEC sp_api_modal_route @name='Uitgaand (LF)',@pathname='/lf_aanvoer_uitgaand',@search= '',@class=@bclass,@key='U',@group = 'Container'\n\t\t\t\n\t\t\t\n\t\tEND\n*/\n\n\t--------------\n\t-- Facturatie\n\t--------------\n--\tEXEC sp_api_modal_text 'Facturatie',@hclass\n\n\tIF @colorblind = 1\n\t\tBEGIN\n\t\t\tSET @bclass = 'btn-primary'\n\t\tEND\n\tELSE\n\t\tBEGIN\n\t\t\tSET @bclass = 'btn-secondary'\n\t\tEND\nIF dbo.hasRole('user,admin,directie') > 0\n\tbegin\n\t--\tEXEC sp_api_modal_route @name='Uitgaande facturen',@pathname='/invoice',@class=@bclass,@key='Alt+U', @Search='?red=Open+en+Nieuw',@group = 'Factuuruit'\n\t\tEXEC sp_api_modal_route @name='Uitgaande facturen',@pathname='/invoice_wms',@class=@bclass,@key='Alt+U', @Search='?red=Open+en+Nieuw',@group = 'Factuuruit'\n\t\tEXEC sp_api_modal_route @name='Filter [Klaar voor Export]',@pathname='/invoice_wms',@class=@bclass,@key='', @Search='?red=Klaar+voor+Export',@group = 'Factuuruit'\n\t\tEXEC sp_api_modal_route @name='Voorbereiding weekfacturen',@pathname='/wms_week_data_for_invoice',@class=@bclass,@key='' ,@group = 'Factuuruit'--, @Search='?red=Klaar+voor+Export'\n\t\tEXEC sp_api_modal_route @name='Inslagen',@pathname='/w_applied_actions',@class=@bclass,@key='' ,@group = 'Factuuruit'--, @Search='?red=Klaar+voor+Export'\t\t\n\t\t\n\t\tEXEC sp_api_modal_route @name='Inkoopfacturen',@pathname='/incoming_invoice',@class=@bclass,@key='Alt+I',@group = 'Factuurin'\n\t\tEXEC sp_api_modal_route @name='Status Exact',@pathname='/incoming_invoice',@class=@bclass,@key='Alt+I',@Search='?red=Status+Exact',@group = 'Factuurin'\n\t\tEXEC sp_api_modal_route @name='Status Draft / Empty',@pathname='/incoming_invoice',@class=@bclass,@key='Alt+I',@Search='?red=Draft+%2F+Empty',@group = 'Factuurin'\n\tend\n\t------------\n\t-- ADRESSEN\n\t------------\n--\tEXEC sp_api_modal_text 'Adressen',@hclass\n\n\tIF @colorblind = 1\n\t\tBEGIN\n\t\t\tSET @bclass = 'btn-primary'\n\t\tEND\n\tELSE\n\t\tBEGIN\n\t\t\tSET @bclass = 'btn-success'\n\t\tEND\n\n\nIF dbo.hasRole('user,admin,directie') > 0\n\tbegin\n\t\t\t\n\t\tEXEC sp_api_modal_route @name='Alle bedrijven',@pathname='/adres',@search= '',@class=@bclass,@key='F1',@group = 'stamgegevens'\n\t\tEXEC sp_api_modal_route @name='Leveranciers',@pathname='/leverancier',@search= '',@class=@bclass,@key='F2',@group = 'stamgegevens'\n\t\tEXEC sp_api_modal_route @name='Klanten',@pathname='/klant',@search= '?ord=23124,27062',@class=@bclass,@key='F3',@group = 'stamgegevens'\n\t\tEXEC sp_api_modal_route @name='Transporteurs',@pathname='/transporteur',@search= '',@class=@bclass,@key='F4',@group = 'stamgegevens'\n\t\t\n\t\tEXEC sp_api_modal_route @name='Lokaties',@pathname='/xlocation',@search= '',@class=@bclass,@key='L',@group = 'Locaties'\n\t\tEXEC sp_api_modal_route @name='Pickup lokaties',@pathname='/wms_pickup_location',@search= '',@class=@bclass,@key='P',@group = 'Locaties'\n\n\tend\t\n\nIF dbo.hasRole('barsan_bo') > 0\n\tbegin\n\t\t--BARSAN_BO OOK DEZE LOKATIE OPTIE\n\t\tEXEC sp_api_modal_route @name='Lokaties',@pathname='/xlocation',@search= '',@class=@bclass,@key='L'\t\n\t\t\n\tend\t\n\nIF dbo.hasRole('barsan,barsan_bo,loodsmedewerker,directie') > 0 OR @user='alex_dong_nl@ensignfreight.com' --231110 alex specifiek OOK\n\tbegin\n\t\tEXEC sp_api_modal_route @cardname='barsan_micro_out'\n\tend\t\n\nIF dbo.hasRole('admin,directie') > 0\n\tbegin\n\t\t\t\n\t\tEXEC sp_api_modal_route @name='wms_artikelen',@pathname='/wms_item',@search= '',@class=@bclass,@key='Alt+A',@group = 'base'\n\t\tEXEC sp_api_modal_route @name='wms_groepen',@pathname='/xproduct',@search= '',@class=@bclass,@key='ALT+G',@group = 'base'\n\t\tEXEC sp_api_modal_route @name='wms_loodshuur_artikel',@pathname='/wms_price_per_week',@search= '',@class=@bclass,@key='ALT+W',@group = 'base'\t\n\t\tEXEC sp_api_modal_route @name='wms_tarief_inslag',@pathname='/w_action_tariff',@search= '',@class=@bclass,@key='ALT+i',@group = 'base'\t\n\t\tEXEC sp_api_modal_route @name='wms_notification_settings',@pathname='/wms_notification_settings',@search= '',@class=@bclass,@key='ALT+N',@group = 'base'\t\n\t\tEXEC sp_api_modal_route @name='wms_invoice_method',@pathname='/wms_invoice_method',@search= '',@class=@bclass,@key='ALT+M',@group = 'base'\t\n\t\tEXEC sp_api_modal_route @name='wms_verpakking_micro_items',@pathname='/fust',@search= '',@class=@bclass,@key='ALT+V',@group = 'base'\t\n\t\tEXEC sp_api_modal_route @name='pallets toevoegen',@pathname='/wms_purchase',@search= '',@class=@bclass,@key='ALT+P',@group = 'base'\t\n\t\t--https://rws.tsql.app/wms_notification_settings\t\n\tend\t\n\n\nEND\n------------\n-- GEBRUIKER\n------------\n--EXEC sp_api_modal_menu_user\t@user_id,@path\nDECLARE @key nvarchar(128) = IIF(@path='/','Escape','Home')\nSET @bclass = 'btn-tracy'\n\nEXEC sp_api_modal_route @name='Home',@pathname='/',@search= '',@class=@bclass,@key=@key\n\nEXEC sp_api_modal_button @name='logout',@value='Log Out',@valueout = @b_logout OUT,@class=@bclass,@key='End'\n\tIF @b_logout = 'Log Out'\n\t\tBEGIN\n\t\t\tEXEC sp_api_modal_dispatch N'{\"type\":\"logOut\"}'\n\t\t\tRETURN\n\t\tEND\n\n\n\n\n-----------\n-- ADMIN --\n-----------\n--if @user_name<>'rick@tracy.nu' \nEXEC sp_sys_admin_main_menu @hclass\n--https://rws.tsql.app/api_actions/32\n\ndeclare @T nvarchar(512)=N'&nbsp;'\nexec sp_api_modal_html @T\nexec sp_api_modal_html @T\nexec sp_api_modal_html @T\nset @T =concat(N'<a href=\"https://tracy.nu\" target=_blank>Solution &copy;',year(getdate()),' TDS B.V.</a><br/><a href=\"https://www.ux1.nl\" target=_blank>Technology &copy;',year(getdate()),' UX1 B.V.</a>'   \t)\nexec sp_api_modal_html @T, @class='m-1 w-24 btn btn-link2 btn-sm float-right' ",
                    "action_id": 32,
                    "action_name": "main_menu",
                    "source_table": "api_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_modal_download",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@filename",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 4096,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@filename n"
                },
                {
                    "name": "@mimetype",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 2048,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@mimetype n"
                },
                {
                    "name": "@rawdata",
                    "type_from_sys": "varbinary",
                    "type_from_def": "v",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@rawdata  v"
                },
                {
                    "name": "@base64",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@base64  n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {
                "dbo.sp_api_modal_field_insert": 1,
                "dbo.sp_api_modal_select_curly": 1,
                "dbo.sp_api_modal_text": 3,
                "dbo.sp_api_modal_button": 2,
                "dbo.sp_api_card_curly_replace": 1,
                "dbo.sp_api_modal_download_report": 1,
                "dbo.sp_api_report_server_download": 1,
                "dbo.sp_api_modal_table": 1,
                "dbo.sp_api_modal_csv": 1,
                "dbo.sp_api_modal_input": 1
            },
            "real_usage_examples": [
                {
                    "sql_source": "DECLARE @search nvarchar(2000) = N'',@button nvarchar(128)\n--SELECT * INTO #modaltable FROM fn_api_get_curly_params_by_search(@search)\nEXEC sp_api_modal_select_curly @value = @search OUT\nEXEC sp_api_modal_button @name='button',@value=N'Parse',@valueout=@button OUT,@key='Insert'\nIF @button IS NOT NULL\n\tBEGIN\n\t\tDECLARE @sql nvarchar(max) = N'{'+@search+'}'\n\t\tEXEC sp_api_card_curly_replace @card_id = @card_id, @string = @sql OUT\n\t\tEXEC sp_api_modal_text @sql,N'code'\n--\t\tEXEC sp_api_modal_field_insert @card_field_id,@search\n--\t\tEXEC sp_api_modal_clear\n\tEND\n--EXEC sp_api_modal_field_insert @card_field_id,N'Afleveren bij loods 5'\n/*\nreturn\n--DECLARE @rawdata varbinary(max) = (SELECT * FROM OPENROWSET(BULK 'C:\\Beheer\\backup\\tracy_fka_proj.bak', SINGLE_BLOB) as f)\nDECLARE @rawdata varbinary(max) = (SELECT * FROM OPENROWSET(BULK 'C:\\Windows\\explorer.exe', SINGLE_BLOB) as f)\nEXEC sp_api_modal_download @rawdata=@rawdata,@filename=N'abc.zip'\n*/",
                    "action_id": 184,
                    "action_name": "dl file",
                    "source_table": "api_card_actions"
                },
                {
                    "sql_source": "\nEXEC sp_api_modal_download_report @context = 'anaco_invoice_FV',@context_id = @id\n\n/*SELECT @RequestKey = RequestKey FROM api_report_server_log WHERE MetaReportName LIKE 'anaco_invoice_FV' AND MetaContextID = @id\nEXEC sp_api_modal_text @RequestKey\nDECLARE @file varbinary(max)\nEXEC sp_api_report_server_download 'b7cb4d42-4245-43a0-b74f-55f2f96b35ce',@file OUT\n*/\n--EXEC sp_api_report_server_download @RequestKey,@file OUT\n\n--EXEC sp_api_modal_download @filename='geert.pdf',@mimetype='application/pdf',@rawdata = @rawdata",
                    "action_id": 767,
                    "action_name": "Download invoice",
                    "source_table": "api_card_actions"
                },
                {
                    "sql_source": "DECLARE @xml varbinary(max) = CONVERT(varbinary(max),(SELECT\n\t (SELECT\n\n\t\t----------------\n\t\t -- General --\n\t\t----------------\n\n\t\t(SELECT * FROM (SELECT\n\t\t\tCustomerID = '100058'\n\t\t\t,MessageID = id\n\t\t\t,OrderReference = concat([Orders].id ,'-', [Order].id)\n\t\t\t,StatusOrder = 'New'\n\t\t\t,Documents = (SELECT \n\t\t\t\tDocumentType = doctype \n\t\t\t\t,DocumentName = ''\n\t\t\t\t,DocumentFileLocation = ''\n\t\t\t\t,DocumentNumber = id\n\t\t\t\tFROM xTransportDoc [Document] WHERE TDocSet_ID IN (SELECT id FROM xTransportDocSet\n\t\t\t\t\tWHERE id IN (SELECT xTransportDocSet_ID FROm xTransportDocSetxLandfreight WHERE xLandfreight_ID = [Order].id))\n\t\t\t\tFOR XML AUTO, TYPE,ELEMENTS)\n\t\t\t,Remarks = ''\n\t\t\t,CustomsAgent = ''\n\t\t\t,CustomsAgentImport = ''\n\t\t\t,MRNNumber = ''\n\t\t\t,IncoTerms = 'DDP'\n\t\t\t,IncoTermsCity= (SELECT Name FROM xCity WHERE id = (SELECT City_ID FROM xLocation WHERE id = [Order].To_Location_ID))\n\t\t) General\n\t\tFOR XML AUTO, TYPE,ELEMENTS)\n\n\t\t----------------\n\t\t-- Pickupdata --\n\t\t----------------\n\n\t\t,(SELECT * FROM (SELECT\n\t\t\tPickupName = (SELECT companyname FROM xcompany WHERE id = (SELECT Company_ID FROM xLocation WHERE id = [Order].From_Location_ID))\n\t\t\t,PickupAddress = 'PickupAddress12345'--(SELECT completeAddress FROM xLocation WHERE id IN (SELECT From_Location_ID FROM xLandfreight where id = [Order].id))\n\t\t\t,PickupPostcode = '1234 AB'\n\t\t\t,PickupCity = (SELECT [Name] FROM xCity WHERE id = (SELECT City_ID FROM xLocation WHERE id = [Order].From_Location_ID))\n\t\t\t,PickupCountry = (SELECT IsoCode FROM xCountry WHERE CountryId = (SELECT Country_ID FROM xLocation WHERE id = [Order].From_Location_ID))\n\t\t\t,PickupUNLoCode = ''\n\t\t\t,PickupEORI = ''\n\t\t\t,PickupReference  = ''\n\t\t\t,PickupDate = format([Order].Pickup, 'yyyy-MM-dd')\n\t\t) PickupData\n\t\tFOR XML AUTO, TYPE,ELEMENTS)\n\n\t\t----------------\n\t   -- Deliverydata --\n\t\t----------------\n\n\t\t,(SELECT * FROM (SELECT\n\t\t\tDeliveryName = (SELECT companyname FROM xcompany WHERE id = (SELECT Counterparty_ID FROM xLocation WHERE id = [Order].To_Location_ID))\n\t\t\t,DeliveryAddress = 'DeliveryAddress12345'--(SELECT completeAddress FROM xLocation WHERE id IN (SELECT To_Location_ID FROM xLandfreight where id = [Order].id))\n\t\t\t,DeliveryPostcode = '1234 AB'\n\t\t\t,DeliveryCity = (SELECT [Name] FROM xCity WHERE id = (SELECT City_ID FROM xLocation WHERE id = [Order].To_Location_ID))\n\t\t\t,DeliveryCountry = (SELECT IsoCode FROM xCountry WHERE CountryId = (SELECT Country_ID FROM xLocation WHERE [id] = [Order].To_Location_ID))\n\t\t\t,DeliveryUNLoCode = ''\n\t\t\t,DeliveryEORI = ''\n\t\t\t,DeliveryReference = ''\n\t\t\t,DeliveryDate = format([Order].Delivery, 'yyyy-MM-dd')\n\t\t) DeliveryData\n\t\tFOR XML AUTO, TYPE,ELEMENTS)\n\n\t\t----------------\n\t    -- Orderlines --\n\t\t----------------\n\n\t\t,Orderlines = (SELECT \n\t\t\tMessageIDOrderLine = CONCAT('NR_' , [Orderline].id, '_' , ROW_NUMBER() over (ORDER BY (select 1)))\n\t\t\t,Quantity = case when [Orderline].Blok > 0 and [Orderline].Euro = 0 then [order].Blok \n\t\t\t\t\t\t\t when [Orderline].Blok = 0 and [Orderline].Euro > 0 then [order].Euro\n\t\t\t\t\t\t\t when [Orderline].Blok > 0 and [Orderline].Euro > 0 then [order].Euro + [order].Blok\n\t\t\t\t\t\t\t when [Orderline].Blok = 0 and [Orderline].Euro = 0 then 0\n\t\t\t\t\t\tEND\n\t\t\t,PackageID = case when [Orderline].Blok > 0 and [Orderline].Euro = 0 then 'Blok'\n\t\t\t\t\t\t\t  when [Orderline].Blok = 0 and [Orderline].Euro > 0 then 'Euro'\n\t\t\t\t\t\t\t  when [Orderline].Blok > 0 and [Orderline].Euro > 0 then 'Blok / Euro'\n\t\t\t\t\t\t\t  when [Orderline].Blok = 0 and [Orderline].Euro = 0 then 'Not specified'\n\t\t\t\t\t\t END\n\t\t\t,PalletType = ''\n\t\t\t,StatusOrderLine = 'New'\n\n\t\t----------------\n\t    -- Goodslines --\n\t\t----------------\n\n\t\t\t,Goodslines = (SELECT \n\t\t\t\tMessageIDGoodsline = CONCAT('NR_' , [Goodsline].id, '_' , ROW_NUMBER() over (ORDER BY (select 1)))\n\t\t\t\t,GoodsDesc = [Goodsline].docDescription\n\t\t\t\t,NumberOfBoxes = [Goodsline].LFCTR_Amount\n\t\t\t\t,UNCodeBox = 'BX'\n\t\t\t\t,Temp = ''\n\t\t\t\t,GrossWeight = CONVERT(DECIMAL(10,2),(SELECT ltrKGB FROM totals_lfctr WHERE xLFCTR_id = (SELECT id FROM xLFCTR WHERE id = [Goodsline].id)))\n\t\t\t\t,NettWeight = CONVERT(DECIMAL(10,2),(SELECT ltrKGN FROM totals_lfctr WHERE xLFCTR_id = (SELECT id FROM xLFCTR where id = [Goodsline].id)))\n\t\t\t\t,GoodsCode = (SELECT [ProductGN] = convert(nvarchar(8),ProdGN) FROM xProduct WHERE id = \n\t\t\t\t(SELECT xProduct_ID FROM xStock WHERE id =\n\t\t\t\t(SELECT Stock_ID FROM xTransactionDetail where id =\n\t\t\t\t(SELECT CTR_ID FROM xLFCTR WHERE id = (SELECT id FROM xLFCTR WHERE id = [Goodsline].id)\n\t\t\t\t))))\n\t\t\t\t,CountryOfOrigin = (SELECT IsoCode from xCountry WHERE CountryId = \n\t\t\t\t(select Origin_ID FROM xStock WHERE id =\n\t\t\t\t(SELECT Stock_ID FROM xTransactionDetail WHERE id =\n\t\t\t\t(SELECT CTR_ID FROM xLFCTR WHERE id = (SELECT id FROM xLFCTR WHERE id = [Goodsline].id)\n\t\t\t\t))))\n\t\t\t\t,Value = CONVERT(DECIMAL(10,2),(SELECT ctrAmount * ctrPrice AS Totalvalue from xCTRTotals where ctr_ID =\n\t\t\t\t(SELECT CTR_ID FROM xLFCTR WHERE id = (SELECT id FROM xLFCTR WHERE id = [Goodsline].id))))\n\t\t\t\t,ValueCurrency = (SELECT codeISO FROM xCurrency WHERE id = \n\t\t\t\t(SELECT Currency_ID FROM xTransactionHeader WHERE id =\n\t\t\t\t(SELECT TransactionHeader_ID from xTransactionDetail where id =\n\t\t\t\t(SELECT CTR_ID FROM xLFCTR WHERE id = (SELECT id FROM xLFCTR WHERE id = [Goodsline].id)\n\t\t\t\t))))\n\t\t\t\t,ItemDocuments = (SELECT\n\t\t\t\t\tItemDocumentType = ''\n\t\t\t\t\t,ItemDocumentName = ''\n\t\t\t\t\t,ItemDocumentFileLocation = ''\n\t\t\t\t\t,DocumentNumber = ''\n\t\t\t\tFROM xTransportDoc [ItemDocument] WHERE TDocSet_ID IN (SELECT id FROM xTransportDocSet WHERE id IN (\n\t\t\t\t\t\tSELECT xTransportDocSet_ID FROm xTransportDocSetxLandfreight WHERE xLandfreight_ID = [Orderline].id)\n\t\t\t\t\t)\n\t\t\t\tFOR XML AUTO, TYPE,ELEMENTS)\n\t\t\tFROM xLFCTR [Goodsline] WHERE [Orderline].id = [Goodsline].LF_ID FOR XML AUTO, TYPE,ELEMENTS)\n\t\tFROM xLandfreight [Orderline] WHERE [Order].id = [Orderline].id FOR XML AUTO, TYPE,ELEMENTS)\n\t FROM xLandfreight [Order] WHERE [Order].Transport_ID = [Orders].id FOR XML AUTO, TYPE,ELEMENTS)\nFROM xTransport [Orders] WHERE id = @id\nFOR XML AUTO,TYPE,ELEMENTS))\n\n\nDECLARE @filename nvarchar(1024) = dbo.strdate(NULL)+'_'+@id+'_'+'transport.xml'\nEXEC sp_api_modal_download @filename = @filename ,@mimetype = N'application/xml',@rawdata = @xml",
                    "action_id": 1153,
                    "action_name": "XML export Daily",
                    "source_table": "api_card_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_modal_download_report",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@context",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@context n"
                },
                {
                    "name": "@context_id",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 64,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@context_id n"
                }
            ],
            "embedded_example": "EXEC sp_api_modal_download_report @context = 'invoice_out' ,@context_id = 1234",
            "embedded_description": null,
            "co_occurrence_stats": {
                "dbo.sp_api_report_server_download": 1,
                "dbo.sp_api_modal_text": 1,
                "dbo.sp_api_modal_download": 1,
                "dbo.sp_api_modal_modal": 1
            },
            "real_usage_examples": [
                {
                    "sql_source": "\nEXEC sp_api_modal_download_report @context = 'anaco_invoice_FV',@context_id = @id\n\n/*SELECT @RequestKey = RequestKey FROM api_report_server_log WHERE MetaReportName LIKE 'anaco_invoice_FV' AND MetaContextID = @id\nEXEC sp_api_modal_text @RequestKey\nDECLARE @file varbinary(max)\nEXEC sp_api_report_server_download 'b7cb4d42-4245-43a0-b74f-55f2f96b35ce',@file OUT\n*/\n--EXEC sp_api_report_server_download @RequestKey,@file OUT\n\n--EXEC sp_api_modal_download @filename='geert.pdf',@mimetype='application/pdf',@rawdata = @rawdata",
                    "action_id": 767,
                    "action_name": "Download invoice",
                    "source_table": "api_card_actions"
                },
                {
                    "sql_source": "EXEC sp_api_modal_post N'xcthcustomsrows',N'KGDoc_Brut','13678.67',0\n--EXEC sp_api_modal_modal @style=N' .container{background-color: white !important;}'\n--EXEC sp_api_modal_text N'test',@print=1\n--EXEC sp_api_modal_download_report @context = 'invoice',@context_id = 1200",
                    "action_id": 914,
                    "action_name": "Download Report",
                    "source_table": "api_card_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_modal_download_reports",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@context",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@context n"
                },
                {
                    "name": "@context_ids",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@context_ids n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_modal_editor",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@name n"
                },
                {
                    "name": "@value",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@value n"
                },
                {
                    "name": "@class",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "''",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@class n"
                },
                {
                    "name": "@identifier",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@identifier n"
                },
                {
                    "name": "@placeholder",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@placeholder n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_modal_end",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@alert_text",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@alert_text n"
                },
                {
                    "name": "@sub_text",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@sub_text n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_modal_field_insert",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@card_field_id",
                    "type_from_sys": "int",
                    "type_from_def": "I",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@card_field_id I"
                },
                {
                    "name": "@text",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "N''",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@text n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {
                "dbo.sp_api_modal_select_curly": 3,
                "dbo.sp_api_modal_download": 1,
                "dbo.sp_api_modal_text": 1,
                "dbo.sp_api_modal_button": 3,
                "dbo.sp_api_card_curly_replace": 1
            },
            "real_usage_examples": [
                {
                    "sql_source": "DECLARE @search nvarchar(2000) = N'',@button nvarchar(128)\n--SELECT * INTO #modaltable FROM fn_api_get_curly_params_by_search(@search)\nEXEC sp_api_modal_select_curly @value = @search OUT\nEXEC sp_api_modal_button @name='button',@value=N'Parse',@valueout=@button OUT,@key='Insert'\nIF @button IS NOT NULL\n\tBEGIN\n\t\tDECLARE @sql nvarchar(max) = N'{'+@search+'}'\n\t\tEXEC sp_api_card_curly_replace @card_id = @card_id, @string = @sql OUT\n\t\tEXEC sp_api_modal_text @sql,N'code'\n--\t\tEXEC sp_api_modal_field_insert @card_field_id,@search\n--\t\tEXEC sp_api_modal_clear\n\tEND\n--EXEC sp_api_modal_field_insert @card_field_id,N'Afleveren bij loods 5'\n/*\nreturn\n--DECLARE @rawdata varbinary(max) = (SELECT * FROM OPENROWSET(BULK 'C:\\Beheer\\backup\\tracy_fka_proj.bak', SINGLE_BLOB) as f)\nDECLARE @rawdata varbinary(max) = (SELECT * FROM OPENROWSET(BULK 'C:\\Windows\\explorer.exe', SINGLE_BLOB) as f)\nEXEC sp_api_modal_download @rawdata=@rawdata,@filename=N'abc.zip'\n*/",
                    "action_id": 184,
                    "action_name": "dl file",
                    "source_table": "api_card_actions"
                },
                {
                    "sql_source": "SET @referenced_card_id = {[api_card_templates].referenced_card_id.name}\nDECLARE @search nvarchar(2000) = CONCAT('[',@referenced_card_id,'].'),@button nvarchar(128)\n\nEXEC sp_api_modal_select_curly @value = @search OUT\nEXEC sp_api_modal_text N'',@class=N'm-3'\nEXEC sp_api_modal_button @name='button',@value=N'Insert',@valueout=@button OUT,@key='Insert'\nIF @button IS NOT NULL\n\tBEGIN\n\t\tEXEC sp_api_modal_clear\n\t\tSET @search=N'{'+@search+'}'\n\t\tEXEC sp_api_modal_field_insert @card_field_id,@search\n\tEND",
                    "action_id": 754,
                    "action_name": "Curly insert",
                    "source_table": "api_card_actions"
                },
                {
                    "sql_source": "DECLARE @search nvarchar(2000) = N'',@button nvarchar(128)\nEXEC sp_api_modal_select_curly @value = @search OUT\nEXEC sp_api_modal_text N'',@class=N'm-3'\nEXEC sp_api_modal_button @name='button',@value=N'Insert',@valueout=@button OUT,@key='Insert'\nIF @button IS NOT NULL\n\tBEGIN\n\t\tEXEC sp_api_modal_clear\n\t\tSET @search=N'{'+@search+'}'\n\t\tEXEC sp_api_modal_field_insert @card_field_id,@search\n\tEND",
                    "action_id": 54,
                    "action_name": "sys_curly_search_and_insert",
                    "source_table": "api_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_modal_file",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@name n"
                },
                {
                    "name": "@to_file_context",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@to_file_context n"
                },
                {
                    "name": "@to_file_context_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@to_file_context_id i"
                },
                {
                    "name": "@description",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "null",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@description n"
                },
                {
                    "name": "@api_files_id",
                    "type_from_sys": "int",
                    "type_from_def": "I",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "null OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@api_files_id I"
                },
                {
                    "name": "@url",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "null OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@url n"
                },
                {
                    "name": "@use_placeholder",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 7,
                    "full_declaration_from_def": "@use_placeholder n"
                },
                {
                    "name": "@category",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 8,
                    "full_declaration_from_def": "@category n"
                },
                {
                    "name": "@resize_max",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "2048",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 9,
                    "full_declaration_from_def": "@resize_max i"
                },
                {
                    "name": "@resize_quality",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "75",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 10,
                    "full_declaration_from_def": "@resize_quality i"
                },
                {
                    "name": "@filename",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 11,
                    "full_declaration_from_def": "@filename n"
                }
            ],
            "embedded_example": "EXEC sp_api_modal_file @name = N'file1', @to_file_context = @card_name, @to_file_context_id = @id, @category = 'image' ,@resize_max = 2048, @resize_quality = 75\r\n\t--,@description = 'Some description'\r\n\t--,@api_files_id = @api_files_id OUT\r\n\t--,@url = @url OUT",
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": [
                {
                    "sql_source": "---------------------------------------------------------------\n-- #qr_action_verwerk_outbound_transport scanner action handler \n-- pre declare: @uuid int, @button_choose nvarchar(max)= null ,@origin nvarchar(1024), @sampleqrscanner nvarchar(max)= null\n-- 230510 uitbreiden met altijd foto's kunnen toevoegen aan outbound transport files\n---------------------------------------------------------------\ndeclare @hTML nvarchar(4000) \ndeclare @link_tracy nvarchar(4000)=NULL\ndeclare @gofoto nvarchar(4000)=concat(N'/wms_out_transport/',@uuid)\ndeclare @pal_id int\nexec sp_api_modal_text @uuid --230706 toon transport_id\nEXEC sp_api_modal_choose @list = N'Conform,Not_Conform,Add_Photo,Barcodes,Pallet_Sample',@value = @button_choose OUT,@startkey=3\nif @button_choose is null return\n\n if @button_choose ='Add_Photo'\n\tbegin\n\t\t--230703 dit stukje is er voor gezet om af te dwingen dat er eerst een geldige SAMPLE wordt gemaakt d.m.v. PALLET LABEL SCAN\n\t\t--230706 aangepast, controleert of er minimaal 1 geldige scan is met container, artikel en w_lot overeenkomst\n\t\tif not exists(select 1 from wms_micro_outbound where transport_id=@uuid) \n\t\t\tbegin --deze outbound is geen micro outbound, dus een normale outbound => dwing af dat er eerst een pallet scan wordt gedaan\n\t\t\t\tif not exists(select * from q_wms_out_samples \n\t\t\t\t\t\t\t\twhere xtransport_id=@uuid \n\t\t\t\t\t\t\t\t\tand out_stock_id in (select xstock_id from q_wms_out_requested where xtransport_id=@uuid) -- zelfde artikel !\n\t\t\t\t\t\t\t\t\tand w_lot_id in(select w_lot_id from q_wms_out_requested where xtransport_id=@uuid) --minimaal zelfde container\n\t\t\t\t\t\t\t\t\tand bl_id in(select bl_id from q_wms_out_requested where xtransport_id=@uuid) --minimaal zelfde BL !\n\n\t\t\t\t\t\t\t) --and info='oke') --TMP !!\n\t\t\t\t\tBEGIN --kennelijk (nog) geen correcte pallet gecand..\n\t\t\t\t\t\texec sp_api_toast N'NO VALIDATION YET; SCAN THE PALLET-LABEL FIRST! (SAMPLE)'\n\t\t\t\t\t\treturn\n\t\t\t\t\tEND\n\t\t\tend\n\n\t\tELSE --het is een micro outbound\n\t\t\tBEGIN\n\t\t\t\texec sp_api_toast N'micro outbound'\n\t\t\tEND\t\n\n\t\t-------------------------------------\n\t\t-- add_document_or_foto\n\t\t-- pre declare @api_files_id,@filename,@trans_out_id\n\t\t-------------------------------------\n\t\t/*\n\t\t(context = 'wms_out_transport' AND context_id = {[wms_out_transport].id})\n\t\tor \n\t\t(context = 'wms_out_transport' AND context_id = {[ffa_transport_out].id})\n\t\tor \n\t\t(context = 'wms_out_transport' AND context_id = {[wms_io].out_transport_id})\n\t\t*/\n\t\tdeclare @api_files_id int\n\t\tdeclare @filename nvarchar(200)\n\t\tdeclare @trans_out_id int\n\t\t\n\t\tset @trans_out_id=@uuid\n\t\t--set @trans_out_id = 1 --@uuid\n\t\tif @trans_out_id is null \n\t\t\tbegin\n\t\t\t\texec sp_api_modal_alert N'Er is geen correcte transport out referentie. (neem evt. contact op met uw consultant)'\n\t\t\t\texec sp_api_modal_clear\n\t\t\t\treturn\n\t\t\tend\n\t\tset @filename=concat('foto_',@main_db.dbo.char_left(@user,'@'),'_',@main_db.dbo.DT_FILENAME(GETDATE()))\n\t\t--exec sp_api_toast @filename\n\t\tEXEC @main_db.dbo.sp_api_modal_file @name = N'@filename', @to_file_context = 'wms_out_transport', @to_file_context_id = @trans_out_id,@filename = @filename\n\t\t\t, @category = 'pallet_foto' ,@resize_max = 2048, @resize_quality = 45,@api_files_id = @api_files_id OUT\n\t\tIF @api_files_id > 0 EXEC sp_api_modal_value N'@filename'\n\t\treturn\n\tend\n \n if @button_choose ='Conform'\n\tbegin\n\t\t--230703 dit stukje is er voor gezet om af te dwingen dat er eerst een geldige SAMPLE wordt gemaakt d.m.v. PALLET LABEL SCAN\n\t\t--230706 aangepast, controleert of er minimaal 1 geldige scan is met container, artikel en w_lot overeenkomst\n\t\tif not exists(select 1 from wms_micro_outbound where transport_id=@uuid) \n\t\t\tbegin --deze outbound is geen micro outbound, dus een normale outbound => dwing af dat er eerst een pallt scan wordt gedaan\n\t\t\t\tif not exists(select * from q_wms_out_samples \n\t\t\t\t\t\t\t\twhere xtransport_id=@uuid \n\t\t\t\t\t\t\t\t\tand out_stock_id in (select xstock_id from q_wms_out_requested where xtransport_id=@uuid) -- zelfde artikel !\n\t\t\t\t\t\t\t\t\tand w_lot_id in(select w_lot_id from q_wms_out_requested where xtransport_id=@uuid) --minimaal zelfde container\n\t\t\t\t\t\t\t\t\tand bl_id in(select bl_id from q_wms_out_requested where xtransport_id=@uuid) --minimaal zelfde BL !\n\n\t\t\t\t\t\t\t) --and info='oke') --TMP !!\n\t\t\t\t\tBEGIN --kennelijk (nog) geen correcte pallet gecand..\n\t\t\t\t\t\texec sp_api_toast N'NO VALIDATION YET; SCAN THE PALLET-LABEL FIRST! (SAMPLE)'\n\t\t\t\t\t\treturn\n\t\t\t\t\tEND\n\t\t\tend\n\n\t\tELSE --het is een micro outbound\n\t\t\tBEGIN\n\t\t\t\texec sp_api_toast N'micro outbound'\n\t\t\tEND\t\n\n\n\t\n\t\tupdate wms_io \n\t\t\tset status='CONFORM' \n\t\t\t\t,conform_user=@USER\t\t--230626\n\t\t\t\t,conform_dt=getdate()\t--230626\n\t\twhere out_transport_id=@uuid and in_out='OUT' --230316 dit kunnen meerdere regels zijn (bij multi-item-outbound)\n\t\tupdate xtransport set completed=1 where id=@uuid\n\t\tset @link_tracy=concat(@origin,N'/wms_out_transport?id=',@uuid,' ') --meegegeven parameter\n\t\tset @html=concat(N'De outbound met referentie ',(select transportinfo from xtransport where id=@uuid),' / ',(select top 1 transport_details from dbo.tr_stuff \nwhere transport_id=@uuid),' is conform verwachting verladen naar de klant. '\n\t\t\t\t\t\t,'<p><a href=\"',@link_tracy,'\" target=_blank>click hier</a>'\n\t\t\t\t\t\t)\n\n\t  \t--PROJECT CALL !!\n  \t\t--230428 GEEN OUTBOUND MAIL MEER NAAR RWS =>    EXEC sp_api_email @to = N'outbound@rwsbv.com',@subject = N'outbound conform & completed....',@body = N'tracy is the best',@html = @html\n\n\n\t\t--voeg evt foto toe\t\t\n--\t\tdeclare @gofoto nvarchar(4000)=concat(N'/wms_out_transport/',@uuid)\n\t\texec sp_api_goto @path=@gofoto\n\n\t\texec sp_api_modal_clear\n\t\treturn\n\tend\n\n\n if @button_choose ='Not_Conform'\n\tbegin\n\t\tDECLARE @opmerking nvarchar(max),@button22 nvarchar(128)\n\t\texec sp_api_modal_text N'What is wrong with this outbound loading?'\n\t\tEXEC sp_api_modal_input @name = '@opmerking', @value = @opmerking OUT --,@inline = 1\n\t\tEXEC sp_api_modal_button @name='@button22',@value = 'Save', @valueout = @button22 OUT,@class='btn-danger',@key='Enter'\n\t\tIF @button22 IS NULL RETURN\n\t\t\n\t\t\n\t\tupdate wms_io set status='NOT CONFORM' where out_transport_id=@uuid and in_out='OUT' --out check extra zekerheid, hoewel er maar 1 id is natuurlijk\n\t\tupdate xtransport set completed=0 where id=@uuid\n\t\tset @link_tracy=concat(@origin,N'/wms_out_transport?id=',@uuid,' ') --meegegeven parameter\n\t\tset @html=concat(N'Er zijn verschillen bij de outbound met referentie ',(select transportinfo from xtransport where id=@uuid),' / ',(select top 1 transport_details from dbo.tr_stuff \nwhere transport_id=@uuid),'. '\n\t\t\t\t\t\t,'<p>De opmerking is :',@opmerking,'<p>'\n\t\t\t\t\t\t,'<p><a href=\"',@link_tracy,'\" target=_blank>click hier</a>'\n\t\t\t\t\t\t)\n\n\t  \t--PROJECT CALL !!\n  \t\t--230428 GEEN OUTBOUND MAIL MEER NAAR RWS =>      \t\tEXEC sp_api_email @to = N'outbound@rwsbv.com',@subject = N'outbound NOT COFORM....',@body = N'tracy is the best',@html = @html\n\n\t\texec sp_api_modal_clear\n\t\treturn\n\tend\n\nif @button_choose ='Pallet_Sample'\n\tbegin\n\t\tEXEC sp_api_modal_qr_scanner @name=N'@sampleqrscanner',@value = @sampleqrscanner OUT\n\t\tIF @sampleqrscanner IS NULL RETURN\n\t\texec sp_api_modal_text @sampleqrscanner\n\t\tIF left(@sampleqrscanner,3) = 'ps:'\n\t\t\tBEGIN\n\t\t\t\tset @pal_id=right(@sampleqrscanner,len(@sampleqrscanner)-3) \n\t\t\t\t--230701 registreer sample\n\t\t\t\texec IINE_wms_out_samples   \n\t\t\t\t\t@user=@user\n    \t\t\t\t,@w_pallet_id =@pal_id\n    \t\t\t\t,@xTransport_id =@uuid\n\n\t\t\t\t\n\t\t\t\tif exists(select * from pallet_status \n\t\t\t\t\t\t\twhere --id=@pal_id\tAND -- ff niet lullig doen als het een andere pallet uit dezelfde container is..\n\t\t\t\t\t\t\t\tout_transport_id=@uuid \n\t\t\t\t\t\t\t\t--and artikel is oke\n\t\t\t\t\t\t)\n\t\t\t\t\tEXEC sp_api_modal_text N'GOED',N'h1'\n\t\t\t\tELSE\n\t\t\t\t\tEXEC sp_api_modal_text N'VERKEERDE PALLET!',N'h1'\n\t\t\t\t\n\t\t\tEND\n\t\tELSE\n\t\t\tBEGIN\n\t\t\t\tEXEC sp_api_modal_text N'SCAN A PALLET LABEL!',N'h1'\n\t\t\t\t--EXEC sp_api_modal_text @sampleqrscanner,N'h1'\n\t\t\t\t\n\t\t\tEND\n\tend\n\nif @button_choose ='Barcodes' --230705 verzamelde codes voor de klant in extene textfile\n\tbegin\n\t\tdeclare @barcodes nvarchar(max)\n\t\t--231017 was:\n\t\t--EXEC sp_api_modal_scanner @barcodes = 1, @value = @barcodes OUT\n\n\t\t--231017 nw\n\t\t\t-- @button_choose_2 nvarchar(max)= null, @button_laser_klaar nvarchar(max)= null\n\t\t\n\t\texec sp_api_modal_text N'Select your \"Scan Device\"'\n\t\tEXEC sp_api_modal_choose @list = N'use_camera,use_laser_scanner',@value = @button_choose_2 OUT, @button_class='secondary'\n\t\tif @button_choose_2 is null RETURN\n\t\tif @button_choose_2 = N'use_camera'\n\t\t\tEXEC sp_api_modal_scanner @barcodes = 1, @value = @barcodes OUT, @video_width= 1200\n\t\tif @button_choose_2 = N'use_laser_scanner'\n\t\tbegin\t\n\t\t\tEXEC sp_api_modal_input @name = '@Pallet_serials', @value = @barcodes OUT ,@type = 'textarea', @focus=1 --,@inline = 1\n\t\t\tEXEC sp_api_modal_button @name='@button_laser_klaar',@value = 'Save Pallet Scans', @valueout = @button_laser_klaar OUT,@class='btn-danger',@key='Enter'\n\t\t\tif @button_laser_klaar is null return\n\t\tend\t\t\n\n\n\n\n\t\tIF NULLIF(@barcodes,'') IS NOT NULL\n\t\t\tBEGIN\n\t\t\t\tset @barcodes=concat('Scanned codes at ',getdate(),char(13),@barcodes,'')\n\t\t\t\tDECLARE @name nvarchar(128) = N'outbound_barcodes.txt'\n\t\t\t\t\t,@base64data nvarchar(max) = dbo.base64encode(CONVERT(varbinary(max),CONVERT(varchar(max),@barcodes)))\n\t\t\t\tEXEC sp_sys_file_upload_base64 @base64data = @base64data,@name = @name\n\t\t\t\t\t,@description = N'Scanned barcodes at outbound'\n\t\t\t\t\t,@mimetype = N'text/plain'\n\t\t\t\t\t,@context = N'wms_out_transport'\n\t\t\t\t\t,@context_id = @uuid\n\t\t\t\t\t,@category = N'extern' --6 (maar in wms is dat 3 dus oppassen met id's!!)\n\n\t\t\t\tEXEC sp_api_modal_clear\n\t\t\tEND \n\tend\t",
                    "action_id": 491,
                    "action_name": "#qr_action_verwerk_outbound_transport",
                    "source_table": "api_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_modal_file_multi",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@name n"
                },
                {
                    "name": "@to_file_context",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@to_file_context n"
                },
                {
                    "name": "@to_file_context_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@to_file_context_id i"
                },
                {
                    "name": "@description",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "null",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@description n"
                },
                {
                    "name": "@api_files_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@api_files_id i"
                },
                {
                    "name": "@url",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "null OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@url n"
                },
                {
                    "name": "@use_placeholder",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 7,
                    "full_declaration_from_def": "@use_placeholder n"
                },
                {
                    "name": "@category",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 8,
                    "full_declaration_from_def": "@category n"
                },
                {
                    "name": "@resize_max",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "2048",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 9,
                    "full_declaration_from_def": "@resize_max i"
                },
                {
                    "name": "@resize_quality",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "75",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 10,
                    "full_declaration_from_def": "@resize_quality i"
                },
                {
                    "name": "@filename",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 11,
                    "full_declaration_from_def": "@filename n"
                },
                {
                    "name": "@filesize_limit",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 12,
                    "full_declaration_from_def": "@filesize_limit i"
                },
                {
                    "name": "@api_files_ids",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 13,
                    "full_declaration_from_def": "@api_files_ids n"
                },
                {
                    "name": "@files_ready_for_use",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "0 OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 14,
                    "full_declaration_from_def": "@files_ready_for_use b"
                },
                {
                    "name": "@message",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 15,
                    "full_declaration_from_def": "@message n"
                },
                {
                    "name": "@upload_finished",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "0 OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 16,
                    "full_declaration_from_def": "@upload_finished b"
                },
                {
                    "name": "@multiple",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "1",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 17,
                    "full_declaration_from_def": "@multiple b"
                }
            ],
            "embedded_example": "EXEC sp_api_modal_file_multi @to_file_context = @card_name, @to_file_context_id = @id, @category = 'image',@files_ready_for_use = @files_ready_for_use OUT\r\n\t--,@description = 'Some description'\r\n\t--,@api_files_id = @api_files_id OUT\r\n\t--,@url = @url OUT",
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_modal_file_multi_test",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@name n"
                },
                {
                    "name": "@to_file_context",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@to_file_context n"
                },
                {
                    "name": "@to_file_context_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@to_file_context_id i"
                },
                {
                    "name": "@description",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "null",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@description n"
                },
                {
                    "name": "@api_files_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@api_files_id i"
                },
                {
                    "name": "@url",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "null OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@url n"
                },
                {
                    "name": "@use_placeholder",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 7,
                    "full_declaration_from_def": "@use_placeholder n"
                },
                {
                    "name": "@category",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 8,
                    "full_declaration_from_def": "@category n"
                },
                {
                    "name": "@resize_max",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "2048",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 9,
                    "full_declaration_from_def": "@resize_max i"
                },
                {
                    "name": "@resize_quality",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "75",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 10,
                    "full_declaration_from_def": "@resize_quality i"
                },
                {
                    "name": "@filename",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 11,
                    "full_declaration_from_def": "@filename n"
                },
                {
                    "name": "@filesize_limit",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 12,
                    "full_declaration_from_def": "@filesize_limit i"
                },
                {
                    "name": "@api_files_ids",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 13,
                    "full_declaration_from_def": "@api_files_ids n"
                },
                {
                    "name": "@files_ready_for_use",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "0 OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 14,
                    "full_declaration_from_def": "@files_ready_for_use b"
                },
                {
                    "name": "@message",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 15,
                    "full_declaration_from_def": "@message n"
                },
                {
                    "name": "@upload_finished",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "0 OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 16,
                    "full_declaration_from_def": "@upload_finished b"
                },
                {
                    "name": "@multiple",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "1",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 17,
                    "full_declaration_from_def": "@multiple b"
                }
            ],
            "embedded_example": "EXEC sp_api_modal_file_multi @to_file_context = @card_name, @to_file_context_id = @id, @category = 'image',@files_ready_for_use = @files_ready_for_use OUT\r\n\t--,@description = 'Some description'\r\n\t--,@api_files_id = @api_files_id OUT\r\n\t--,@url = @url OUT",
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_modal_file_thumbnails",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@context",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@context n"
                },
                {
                    "name": "@context_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@context_id i"
                },
                {
                    "name": "@api_files_ids",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@api_files_ids n"
                },
                {
                    "name": "@width",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@width i"
                },
                {
                    "name": "@height",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@height i"
                },
                {
                    "name": "@quality",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@quality i"
                },
                {
                    "name": "@fit",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 7,
                    "full_declaration_from_def": "@fit n"
                },
                {
                    "name": "@background",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 8,
                    "full_declaration_from_def": "@background n"
                }
            ],
            "embedded_example": "EXEC sp_api_modal_file_thumbnails @context = @card_name, @context_id = @id --, @api_files_ids = @ids, @width = 256, @quality = 15, @fit = 'cover|contain|fill|inside|outside', @background = '#FFFFFF'",
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_modal_focus",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@name n"
                }
            ],
            "embedded_example": "EXEC sp_api_modal_focus @name = N'@lastname'",
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": [
                {
                    "sql_source": "\nEXEC sp_api_modal_choose @list = N'Leverancier,Periode,Beide',@value = @button_choose OUT--,@startkey=NULL\n\nDECLARE @company_id nvarchar(32)\n\n\nDECLARE @date nvarchar(128),@button nvarchar(128)/*,@from nvarchar(128),@to nvarchar(128),*/\n\t,@datumrange nvarchar(50)\nset @date = dbo.workDate()\n\n--EXEC sp_api_modal_date @name='Date',@value = @date OUT,@focus = 1,@select=1 -- zoek veld\nIF @button_choose IN ('Beide','Periode')\n\tBEGIN\n\t\tIF @startdate IS NULL SET @startdate = @main_db.dbo.abcbom()\n\t\t--IF @enddate IS NULL SET @startdate = @main_db.dbo.abceom()\n\t\tEXEC sp_api_modal_date_from_to @from=@startdate out, @to=@enddate out,@class='w-24'\n\tEND\nIF @button_choose IN ('Beide','Leverancier')\n\tBEGIN\n\t\tEXEC sp_api_modal_select @card_name = N'leverancier',@value = @company_id OUT ,@focus = 1,@top = 3--,@select = 1\n\t\tIF @company_id IS NULL RETURN\n\tEND\n--IF @company_id IS NOT NULL EXEC sp_api_modal_focus N'geert' --blurr\nSET @button = '*KIES*'\nSET @datumrange = concat(@startdate, ' - ', @enddate)\nEXEC sp_api_modal_text @datumrange, @printonly=1\n--EXEC sp_api_modal_button @name='button',@value = 'SalesPerLot',@valueout = @button OUT,@class = 'btn-primary',@key = 'F1'\nEXEC sp_api_modal_print @keycode = N'Ctrl+P'\n\n-- \tSELECT TransactionDate, TV_CompanyName,[currencyISO*] = currencyISO,id, [totalProductPrice@] = totalProductPrice, [DATE*] = concat(@from, ' - ', @to)\n\nIF @button_choose IS NOT NULL --=  'SalesPerLot'\nBEGIN\n\n\n\nSELECT \n\n--HENK: KOLOMMEN\nRegionName as [Regio*], Variety_0 , VTH_CODE as [VTH_CODE] ,\tContentDesc,\tSize,Detail_0\t,KGN,Origin_Code,V_AMT_IV as [Aantal@:0],V_EUR,\tFustCode\n--,\tLFDate,ITH_CODE, VTH_CODE,\tITHDT,VTHDT,\tStock_ID,\tcompleteAddress as V_ADDR\t,\t\tI_RATE,\tV_RATE, i_comp_id, V_Comp_ID,I_AMT_CTR, I_EUR\n\n\n\tINTO #RV_SalesPerLot_base\n\nFROM [dbo].[RV_SalesPerLot_base] \n\twhere ithdt=1 \n\t\tand ((@Company_ID is NULL) OR i_comp_ID=@Company_ID) --counter_code like '%looy%'\n\t\tand ((@startdate IS NULL AND @enddate IS NULL) OR (LFDATE BETWEEN @startdate AND @enddate))\n\torder by RegionName,VTH_CODE, Variety_0,ContentDesc\t\n\t\n\tSET @filename = CONCAT(N'SalesPerLot',@datumrange,'.csv')\n--to csv\n\tEXEC sp_api_modal_button @name='@button_csv',@value = N'CSV', @valueout = @button_csv OUT ,@class='btn-danger',@key='F4'\n\tIF @button_csv IS NOT NULL EXEC sp_api_modal_csv @tmptable = N'#RV_SalesPerLot_base',@filename=@filename\n--print\n\tEXEC sp_api_modal_table @tmptable=N'#RV_SalesPerLot_base',@print=1 ,@orderby=N'ORDER BY 1,2,3 ASC'\nEND \n",
                    "action_id": 934,
                    "action_name": "Verkoop van Leverancier",
                    "source_table": "api_card_actions"
                },
                {
                    "sql_source": "\n--EXEC sp_api_modal_choose @list = N'Transporteur',@value = @button_choose OUT--,@startkey=NULL\n\nDECLARE @company_id nvarchar(32)\n\n\nDECLARE @date nvarchar(128),@button nvarchar(128)/*,@from nvarchar(128),@to nvarchar(128),*/\n\t,@datumrange nvarchar(50)\nset @date = dbo.workDate()\n\n--EXEC sp_api_modal_date @name='Date',@value = @date OUT,@focus = 1,@select=1 -- zoek veld\n--IF @button_choose IN ('Beide','Periode')\n--\tBEGIN\n--\t\tIF @startdate IS NULL SET @startdate = @main_db.dbo.abcbom()\n--\t\t--IF @enddate IS NULL SET @startdate = @main_db.dbo.abceom()\n--\t\tEXEC sp_api_modal_date_from_to @from=@startdate out, @to=@enddate out,@class='w-24'\n--\tEND\n\t\nIF 1=1 --@button_choose IN ('Transporteur')\n\tBEGIN\n\t\tEXEC sp_api_modal_select @card_name = N'transporteur',@value = @company_id OUT ,@focus = 1,@top = 3--,@select = 1\n\t\tIF @company_id IS NULL RETURN\n\tEND\n--IF @company_id IS NOT NULL EXEC sp_api_modal_focus N'geert' --blurr\n\nSET @button = '*KIES*'\n--SET @datumrange = concat(@startdate, ' - ', @enddate)\n--EXEC sp_api_modal_text @datumrange, @printonly=1\n\nEXEC sp_api_modal_button @name='button',@value = 'Toon de lijst',@valueout = @button OUT,@class = 'btn-primary',@key = 'F1'\nEXEC sp_api_modal_print @keycode = N'Ctrl+P'\n\n-- \tSELECT TransactionDate, TV_CompanyName,[currencyISO*] = currencyISO,id, [totalProductPrice@] = totalProductPrice, [DATE*] = concat(@from, ' - ', @to)\n\nIF --@button_choose IS NOT NULL --=  'SalesPerLot'\n\t-- simpel: \n\t@Button='Toon de lijst'\nBEGIN\n\n\n\nSELECT \n\n--HENK: KOLOMMEN\n--select * from  tracy_fkt.dbo.Oprijvracht_fn(dbo.abcdate()-27,NULL,159794,NULL)\nN'INKOOP: ' as [O*],CTH1_ID as [Order*],\tN'LOKATIE: ' as [L*], LocationCode as [LOK*], N'LAADREF: ' as [LR*],\tPickupRef as [Pickupref*],\t'TEL:' as [t*],\tphone as [phone*],\tchar(13)+char(10) as [ch13*], N'TRANSPORTEUR: ' as [TRAN*],Transp_Code as [Transp*],\tN'BLOK: ' as [BL*], Blok as [Blok*], \tN'EURO: ' as [EU*],Euro as [EUR*],\tN'EXTRA OPMERKING: '\tas [extra*], pickupRemarks as [Rem*~wrap], LEFT(CONVERT(VARCHAR, [datum] , 106), 13) as [Datum*], LFCTR_Amount,\tDescription, ContentDesc\tSize,\tKGN,\tDetail_0,\tOrigin_Code as[oc~center],Fustcode\n\n\n\tINTO #Oprijvracht_fn\n\nFROM @main_db.dbo.Oprijvracht_fn(@date,NULL,@company_id,NULL)\n--\torder by VTH_CODE, Stock_ID,  Variety_0,ContentDesc\t,RegionCode\n\t\n\tSET @filename = CONCAT(N'Oprijvracht_fn',@date,'.csv')\n--to csv\n\tEXEC sp_api_modal_button @name='@button_csv',@value = N'CSV', @valueout = @button_csv OUT ,@class='btn-danger',@key='F4'\n\tIF @button_csv IS NOT NULL EXEC sp_api_modal_csv @tmptable = N'#Oprijvracht_fn',@filename=@filename\n--print\n\tEXEC sp_api_modal_table @tmptable=N'#Oprijvracht_fn',@print=1 ,@orderby=N'ORDER BY 1,2,3 ASC'\nEND \n",
                    "action_id": 941,
                    "action_name": "Oprijvracht",
                    "source_table": "api_card_actions"
                },
                {
                    "sql_source": "\n--EXEC sp_api_modal_choose @list = N'Transporteur',@value = @button_choose OUT--,@startkey=NULL\n\nDECLARE @company_id nvarchar(32)\n\n\nDECLARE @date nvarchar(128),@button nvarchar(128)/*,@from nvarchar(128),@to nvarchar(128),*/\n\t,@datumrange nvarchar(50)\nset @date = dbo.workDate()\n\n--EXEC sp_api_modal_date @name='Date',@value = @date OUT,@focus = 1,@select=1 -- zoek veld\n--IF @button_choose IN ('Beide','Periode')\n--\tBEGIN\n--\t\tIF @startdate IS NULL SET @startdate = @main_db.dbo.abcbom()\n--\t\t--IF @enddate IS NULL SET @startdate = @main_db.dbo.abceom()\n--\t\tEXEC sp_api_modal_date_from_to @from=@startdate out, @to=@enddate out,@class='w-24'\n--\tEND\n\t\nIF 1=1 --@button_choose IN ('Transporteur')\n\tBEGIN\n\t\tEXEC sp_api_modal_select @card_name = N'transporteur',@value = @company_id OUT ,@focus = 1,@top = 3--,@select = 1\n\t\tIF @company_id IS NULL RETURN\n\tEND\n--IF @company_id IS NOT NULL EXEC sp_api_modal_focus N'geert' --blurr\n\nSET @button = '*KIES*'\n--SET @datumrange = concat(@startdate, ' - ', @enddate)\n--EXEC sp_api_modal_text @datumrange, @printonly=1\n\nEXEC sp_api_modal_button @name='button',@value = 'Toon de lijst',@valueout = @button OUT,@class = 'btn-primary',@key = 'F1'\nEXEC sp_api_modal_print @keycode = N'Ctrl+P'\n\n-- \tSELECT TransactionDate, TV_CompanyName,[currencyISO*] = currencyISO,id, [totalProductPrice@] = totalProductPrice, [DATE*] = concat(@from, ' - ', @to)\n\nIF --@button_choose IS NOT NULL --=  'SalesPerLot'\n\t-- simpel: \n\t@Button='Toon de lijst'\nBEGIN\n\n\n\nSELECT \n\n--HENK: KOLOMMEN\n--select * from  tracy_fkt.dbo.Oprijvracht_fn(dbo.abcdate()-27,NULL,159794,NULL)\nN'INKOOP: ' as [O*],CTH1_ID as [Order*],\tN'LOKATIE: ' as [L*], LocationCode as [LOK*], N'LAADREF: ' as [LR*],\tPickupRef as [Pickupref*],\t'TEL:' as [t*],\tphone as [phone*],\tchar(13)+char(10) as [ch13*], N'TRANSPORTEUR: ' as [TRAN*],Transp_Code as [Transp*],\tN'BLOK: ' as [BL*], Blok as [Blok*], \tN'EURO: ' as [EU*],Euro as [EUR*],\tN'EXTRA OPMERKING: '\tas [extra*], pickupRemarks as [Rem*~wrap], LEFT(CONVERT(VARCHAR, [datum] , 106), 13) as [Datum*], LFCTR_Amount,\tDescription, ContentDesc\tSize,\tKGN,\tDetail_0,\tOrigin_Code as[oc~center],Fustcode\n\n\n\tINTO #Oprijvracht_fn\n\nFROM @main_db.dbo.Oprijvracht_fn(@date,NULL,@company_id,NULL)\n--\torder by VTH_CODE, Stock_ID,  Variety_0,ContentDesc\t,RegionCode\n\t\n\tSET @filename = CONCAT(N'Oprijvracht_fn',@date,'.csv')\n--to csv\n\tEXEC sp_api_modal_button @name='@button_csv',@value = N'CSV', @valueout = @button_csv OUT ,@class='btn-danger',@key='F4'\n\tIF @button_csv IS NOT NULL EXEC sp_api_modal_csv @tmptable = N'#Oprijvracht_fn',@filename=@filename\n--print\n\tEXEC sp_api_modal_table @tmptable=N'#Oprijvracht_fn',@print=1 ,@orderby=N'ORDER BY 1,2,3 ASC'\nEND \n",
                    "action_id": 1099,
                    "action_name": "Oprijvracht",
                    "source_table": "api_card_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_modal_get",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@key",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 510,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@key n"
                },
                {
                    "name": "@value",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@value n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": [
                {
                    "sql_source": "DECLARE @clone_id INT, @sure nvarchar(255), @text nvarchar(255)\r\nEXEC sp_api_modal_get N'my_last_clone_id',@text OUT\r\nEXEC sp_api_modal_text @text,'h1'\r\nEXEC sp_api_modal_text @basetable,'h1'\r\nEXEC sp_api_modal_button @name='Sure',@value = 'Clone? (Esc=Nee)', @valueout = @sure OUT,@class='btn-danger',@key='Enter'\r\nIF @sure is not null\r\n\tBEGIN\r\n\t\tEXEC sp_api_modal_clear\r\n\t\t--EXEC @clone_id = sp_clone_record @basetable,@ids\r\n\t\tEXEC @clone_id = sp_clone_record @basetable,@ids,N'size=''EDIT'', stock=0'\r\n\t\tSET @path = @path+'/'+dbo.nv(@clone_id)\r\n\t\tEXEC sp_api_toast @text = N'Record cloned'\r\n\t\tEXEC sp_api_modal_route @name = N'Ga met Enter naar de kopie en vul de nieuwe maat in',@pathname=@path,@search='?focus=7377' ,@class = N'btn-danger' ,@key='Enter'\r\n\tEND\r\n",
                    "action_id": 6,
                    "action_name": "kopieer-artikel",
                    "source_table": "api_card_actions"
                },
                {
                    "sql_source": "EXEC sp_api_modal_get N'bewaar_kruimel_path',@p1 OUT --@path\nEXEC sp_api_modal_get N'bewaar_kruimel_search',@s1 OUT\nEXEC sp_api_modal_set N'bewaar_kruimel_path' --CLEAR\nEXEC sp_api_modal_set N'bewaar_kruimel_search' --CLEAR\nIF @p1 IS NOT NULL EXEC sp_api_goto @p1,@s1\n",
                    "action_id": 613,
                    "action_name": "kruimel test",
                    "source_table": "api_card_actions"
                },
                {
                    "sql_source": "--maak een tdt=2 tegenboeking op de inkoop (zelfde partij)\ndeclare @ivtotal int, @amount int, @bronCTR int, @retourCTR int, @stockid int, @rest int, @bronCTH int\nset @ivtotal=isnull({[ctr1].ivtotal},0)\nset  @amount=isnull({[ctr1].amount},0)\nset @rest=@amount-@ivtotal\nset @bronCTR={[ctr1].id}\nset\t@stockid={[ctr1].stock_id}\nset\t@bronCTH ={[ctr1].transactionheader_id}\n\nexecute sp_api_toast @ivtotal\n\n--clone regel met rest retour\nDECLARE @sure nvarchar(255), @text nvarchar(255)\nEXEC sp_api_modal_get N'my_last_clone_id',@text OUT\n--EXEC sp_api_modal_text @text,'h1'\nEXEC sp_api_modal_text N'Als u de rest voorraad van deze inkoopregel wilt retourneren naar de leverancier, klik dan op ''Returneren'', anders ESC.','h2'\nEXEC sp_api_modal_button @name='Sure',@value = 'Retourneren', @valueout = @sure OUT,@class='btn-danger',@key='Enter'\nIF @sure is not null \n\tBEGIN\n\t\tif @rest <= 0 \n\t\t\tbegin\n\t\t\t\texec sp_api_modal_clear\n\t\t\t\treturn --afkappen, niets te doen..\n\t\t\tend\t\n\t\tEXEC sp_api_modal_clear\n\t\t\n\t\t\n\t\t\n\t\t--MAAK RETURN KOP 101\n\t\tDeclare @CTH101 int\n\t\texecute @CTH101 = @main_db.dbo.CreateCTH101 @Base_CTH_ID=@bronCTH\t\n\t\tif @cth101 is null\n\t\t\tbegin\n\t\t\t\texec sp_api_modal_alert N'GEEN CTH AANGEMAAKT..'\n\t\t\t\treturn\n\t\t\tend\n\t\t\n\t\t\n\t\t\n\t\t\n\t\t--DE REGEL\n\t\tdeclare @ResultTDT int = 2 \t\t\t\t--210422 was 2\n\t\tdeclare @ResultRest int =  @Rest\t--210422 was @Rest\n\t\t\n\t\tdeclare @ChangeFields nvarchar(512) =concat(N'TDT=',@ResultTDT,' ,Amount=', @ResultRest, ' , transactionheader_id=',@CTH101,' , advMapCtr_ID=',@bronctr)\n\t\t\n\t\tEXEC @retourCTR = sp_clone_record @tablename=@basetable,@ids=@ids,@set=@ChangeFields\n\t\t--SET @path = @path+'/'+dbo.nv(@clone_id)\n\t\t--EXEC sp_api_toast @text = N'Record cloned'\n\t\t--EXEC sp_api_modal_route @name = N'Ga met Enter naar de kopie en vul de nieuwe maat in',@pathname=@path,@search='?focus=7377' ,@class = N'btn-danger' ,@key='Enter'\n\t\tif @retourCTR is not NULL \n\t\t\tinsert into xivlink (stock_id,linkaantal,vtd,itd) values (@stockid,@ResultRest,@bronCTR,@retourCTR) -- 210422 nu resultrest!\t\n\tEND\n--execute sp_api_modal_clear\t",
                    "action_id": 1098,
                    "action_name": "Rest Retour",
                    "source_table": "api_card_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_modal_get_listview_reducer",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@reducer",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@reducer n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_modal_get_value",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@name n"
                },
                {
                    "name": "@value",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@value n"
                }
            ],
            "embedded_example": "DECLARE @lastname nvarchar(max)\r\nEXEC sp_api_modal_get_value '@lastname',@value = @lastname OUT",
            "embedded_description": null,
            "co_occurrence_stats": {
                "dbo.sp_api_modal_input": 4,
                "dbo.sp_api_toast": 4,
                "dbo.sp_api_modal_text": 3,
                "dbo.sp_api_modal_html": 2,
                "dbo.sp_api_modal_clear": 4,
                "dbo.sp_api_modal_button": 6,
                "dbo.sp_api_modal_alert": 2,
                "dbo.sp_api_email": 1,
                "dbo.sp_api_modal_table": 4,
                "dbo.sp_api_modal_value": 1,
                "dbo.sp_api_modal_values_clear": 1,
                "dbo.sp_api_modal_restart": 1,
                "dbo.sp_api_modal_choose_list": 1,
                "dbo.sp_api_modal_choose": 2,
                "dbo.sp_api_modal_action": 1,
                "dbo.sp_api_modal_audio": 1,
                "dbo.sp_api_modal_select_table": 1,
                "dbo.sp_api_modal_select": 1,
                "dbo.sp_api_modal_modal": 1
            },
            "real_usage_examples": [
                {
                    "sql_source": "--241213 @GB: let op @origin gebruiken we hier niet.. maar dat is niet het probleem\r\n\r\n-------------------------------------------------------\r\n--\t#qr_action_verwerk_micro_pick_v11\r\n--\tversie met herschikking van gekoppelde miscro-items na scannen van een pallet (scanned_pallet-id) \r\n--\tPRE DECLARE: \r\n/*\r\n@uuid int ,@origin nvarchar(1024), @button_choose nvarchar(max) = null , @sampleqrscanner nvarchar(max)= null, @button5 nvarchar(max) = null, @button_choose2 nvarchar(max) = NULL, @b6 nvarchar(128) = NULL\r\n,@button nvarchar(max) = NULL,@mol nvarchar(max) = NULL,@button2 nvarchar(max) = NULL,@T nvarchar(max) = NULL,@sku_check nvarchar(max) = NULL\r\n,@button3 nvarchar(max) = NULL,@xstock_id nvarchar(max) = NULL,@aantal_serials_nodig nvarchar(max) = NULL,@sku_oke nvarchar(max) = NULL,@button4 nvarchar(max) = NULL\r\n,@pal_select_button nvarchar(128)=NULL,@pal_select nvarchar(128)=NULL,@button_choose_pal nvarchar(128)=NULL,@button_scan_serials_for_mol nvarchar(128)=NULL,@button_replenish nvarchar(128)=NULL,@replenish_loc nvarchar(128)=NULL\r\n,@ps nvarchar(128)=NULL, @pallet_mol_id int = NULL, @this_SP int = null, @pipa int = null\r\n,@but_10 nvarchar(128)=NULL\r\n\r\n*/\r\nexec sp_api_toast N'micro pick V11'\r\ndeclare @scanned_codes nvarchar(max) ; EXEC sp_api_modal_get_value @name='@scanned_codes',@value = @scanned_codes OUT --231211 IPV PREDECLARED\r\n-------------------------------------------------------\r\ndeclare @mob int = @uuid --opgeschoond scan ID \r\ndeclare @no_serials bit = null\r\ndeclare @this_pallet_id int =0 \r\ndeclare @this_pallet_nr int =0\r\ndeclare @this_pal_colli int =0\r\ndeclare @this_xstock_id int =0\r\ndeclare @this_item_lotnr nvarchar(128)\r\ndeclare @this_sku nvarchar(128)\r\ndeclare @this_pallet_type nvarchar(128) --'full, pick, replenish'\r\ndeclare @this_id int --temp table cursor\r\n--execute sp_api_toast '111111111'\r\n----------------------------------------------------------\r\n--\tafdwingen eerst replenishpallets halen en replenishen!\r\n----------------------------------------------------------\r\n\r\n\r\ndrop table if exists #mr \r\ndrop table if exists #list\r\ndeclare @button_gearriveerd_bij_pallet nvarchar(128)\r\n--declare @mob int=(select top 1 id from wms_micro_outbound order by id desc)\r\n--declare @T nvarchar(2000)\r\n\r\nselect --231130 TOP 1, zodat je per container goed bezig bent!\r\n\tp_pick.w_lot_id\r\n\t,pick_pal_id=p_pick.id\r\n\t,w_lot.container_number\r\n\t,adv_full_pos\r\n\t,p_pick.pallet_nr \r\n\t,mol.xstock_id\r\n\t,mol.id\r\n\t,mol.preferred_pallet_ids\r\n\t,mol.scanned_pallet_id\r\n\t,T=concat(N'Ga naar lokatie ',upper(mol.adv_full_pos), ' en haal daar'\r\n\t\t\t\t\t--,' en haal daar Pallet ',p_pick.pallet_nr\r\n\t\t\t\t\t--240122 eventueel willekeurig als de preferred_pallet al in gebruik is.. \r\n\t\t\t\t\t, case \r\n\t\t\t\t\t\twhen exists(select 1 from wms_micro_outbound_lines where scanned_pallet_id=mol.preferred_pallet_ids)\r\n\t\t\t\t\t\tthen ' een Pallet'\r\n\t\t\t\t\t\telse concat(' Pallet ',p_pick.pallet_nr)\r\n\t\t\t\t\t\tend\r\n\t\t\t\t\t\r\n\t\t\t\t\t,' met ',p_pick.colli,' colli' --231130\r\n\t\t\t\t\t,' van container ',upper(w_lot.container_number)\r\n\t\t\t\t\t,'. Artikel: ', upper(mol.lookupcode) \r\n\t\t\t\t\t)--* \r\n\t,remark --is dus 'replenish'\t\t\t\t\r\n\t,mol_amount=mol.amount --231130\r\ninto #mr \r\nfrom q_wms_micro_outbound_lines mol\r\n\t\t\tjoin w_lot on w_lot.id=mol.w_lot_id\r\n\t\t\tjoin w_pallet p_pick \r\n\t\t\t\t\ton p_pick.id=try_cast(preferred_pallet_ids as int) \r\n\t\t\t\t\t\t--dwing af dat de pallet uit de opgegeven mol-container komt\r\n\t\t\t\t\t\tand p_pick.w_lot_id=mol.w_lot_id\r\n\t\t\twhere mol.wms_micro_outbound_id=@mob \r\n\t\t\t\tand remark='replenish' \r\n\t\t\t\tand (\r\n\t\t\t\t\tscanned_pallet_id is null \r\n\t\t\t\t\tor NOT exists( select 1 from w_pallet where id=scanned_pallet_id and micro_pick_allowed=1)\r\n\t\t\t\t\t)\r\n\t\t\t\t\r\n\t\t\t\t--231020 met DENNIS LIVE IN MESONINE !!! (als de items al op de mol zijn toegekend, dan niet meer replenishen , want er waren er kennelijk genoeg\r\n\t\t\t\t-- nu wordt alles tegengehouden.. ook de pallets die wel gereplenished moeten worden..\r\n\t\t\t\tAND\tmol.linked_amount <> mol.amount\r\n\r\n--dev test select * from #modal_report \r\n--live \r\nselect * into #list from #mr\r\nif exists(select 1 from #list) exec sp_api_modal_text N'REPLENISH PALLETS',@class='h1'\r\nset @T = NULL\r\nif exists(select 1 from #mr)\r\nBEGIN\r\n\tSet @T='<ul>'--start lijst\r\nEND\r\n\r\nwhile exists(select 1 from #mr)\r\nBEGIN\r\n\tset @this_id=(select top 1 id from #mr)\r\n\tset @T=concat(@T,'<li>',(select T from #mr where id=@this_id),'</li>')\r\n\tdelete from #mr where id=@this_id\r\nEND\r\nif @T >''--lijst afsluiten\r\nBEGIN\r\nset @t=concat(@T,'</ul>')\r\nexec sp_api_modal_html @T\r\nEND\r\n\r\nWHILE exists(select 1 from #list) --bevat te replenishen pallets\r\nBEGIN -- 231004 REPLENISH PART\r\n\t--exec sp_api_modal_table @tmptable=N'#mr',@print=1,@excel=1 -- output to react client\r\n\tEXEC sp_api_modal_button @name='@button_gearriveerd_bij_pallet',@value = 'Ik ben bij de pallet', @valueout = @button_gearriveerd_bij_pallet OUT,@class='btn-danger',@key='Enter'\r\n\tif @button_gearriveerd_bij_pallet is null RETURN\r\n\t--scan pallet-sticker\r\n\texec sp_api_modal_text N'scan pallet sticker'\r\n\tEXEC sp_api_modal_input @name = '@ps', @value = @ps OUT ,@focus=1\r\n\r\n\tif @ps is null return\r\n\tif left(@ps,3)<>'ps:'\r\n\tBEGIN\r\n\t\texec sp_api_modal_text N'Dit is geen Tracy pallet sticker QR code'\r\n\t\t--exec sp_api_modal_restart--231130\r\n\r\n\t\tRETURN\r\n\tEND\t\r\n\r\n\r\n\tset @this_pallet_id=right(@ps,len(@ps)-3)\r\n\tif  not exists(select * from w_pallet where id=@this_pallet_id and w_lot_id in(select w_lot_id from #list) )\r\n\tBEGIN\r\n\t\tif  exists(select * from wms_micro_outbound_lines where scanned_pallet_id=@this_pallet_id )\r\n\t\tBEGIN --231009 pallet is er al.\r\n\t\t\texec sp_api_modal_text N'Deze pallet is al gescand en toegevoegd.'\r\n\t\tEND\t\r\n\t\telse BEGIN\t\r\n\t\t\texec sp_api_modal_text N'Dit is een pallet uit een ** VERKEERDE ** container'\r\n\t\tEND\r\n\t\texec sp_api_modal_beep 1100, 500 --error !\r\n\t\t--set @T=concat('pallet lot: ',(select w_lot_id from w_pallet where id=@this_pallet_id and w_lot_id in(select w_lot_id from #list) ))\r\n\t\t--exec sp_api_modal_text @T\r\n\t\t--exec sp_api_modal_table @tmptable=N'#modal_report',@print=1,@excel=1 -- output to react client\r\n\t\texec sp_api_modal_restart--231130\r\n\t\tRETURN\r\n\tEND\r\n\r\n\tif  not exists(select * from w_pallet p\r\n\t\t\t\t\twhere p.id=@this_pallet_id \r\n\t\t\t\t\t\t--\tand xstock_id in(select xstock_id from #list) \r\n\t\t\t\t\t\tand exists(select 1 from #list where #list.xstock_id=p.xstock_id and #list.mol_amount <= p.colli) --de gekozen pallet moet voor replenishen voldoende colli hebben 231130!!\r\n\t\t\t\t)\r\n\tBEGIN\r\n\t\texec sp_api_modal_text N'(1)Dit is ** NIET ** de juiste pallet. => Wel juiste container, maar verkeerd artikel of verkeerd colli aantal op de pallet!'\r\n\t\texec sp_api_modal_beep 1100, 500 --error !\r\n\t\t--set @T=concat('pallet lot: ',(select w_lot_id from w_pallet where id=@this_pallet_id and w_lot_id in(select w_lot_id from #list) ))\r\n\t\t--exec sp_api_modal_text @T\r\n\t\t--exec sp_api_modal_table @tmptable=N'#modal_report',@print=1,@excel=1 -- output to react client\r\n\t\t\t--exec sp_api_modal_restart--231130\r\n\t\t\t--EXEC sp_api_modal_values_clear @ignore='@uuid' --231130 KEEP SCANNED QR\r\n\t\t\texec sp_api_modal_value @name=N'@button_gearriveerd_bij_pallet'\r\n\t\t\texec sp_api_modal_value @name=N'@ps' -- er bij\r\n\t\tRETURN\r\n\tEND\r\n\tdeclare @foutinfo nvarchar(max)\r\n\t-- extra check 241213  -------------------------------------\r\n\tif exists(select 1 from mol where scanned_pallet_id=@this_pallet_id and mob_id<>@mob)\r\n\tBEGIN\r\n\t\texec sp_api_modal_ALERT N'FOUT','Deze pallet is al gekoppeld aan een andere outbound!'\r\n\t\texec sp_api_modal_beep 1100, 500 --error !\r\n\t\tdeclare @FOUT_bound int =(select top 1 mob_id from mol where scanned_pallet_id=@this_pallet_id and mob_id<>@mob)-- foute outbound..\r\n\r\n\r\n\t\tSET @foutinfo =\r\n\t\t\tconcat('Bij Outbound met ref: '\r\n\t\t\t\t\t,(select out_ref from mob where id=@mob)\r\n\t\t\t\t\t,' werd pallet id: ', @this_pallet_id\r\n\t\t\t\t\t,' (pal_nr: ', (select pallet_nr from w_pallet where id=@this_pallet_id),' )'\r\n\t\t\t\t\t,' gescand, maar die is (onjuist) gelinkt aan outbound : '\r\n\t\t\t\t\t,(select out_ref from mob where id=@FOUT_bound))\r\n\t\t-- Verstuur de e-mail\r\n\t\tEXEC sp_api_email \r\n\t\t\t@To = 'rick@tracy.nu + mterlouw@rwsbv.com',\r\n\t\t\t@Subject = 'Pallet FOUT ontdekt bij Replenish Scan',\r\n\t\t\t@Body = @foutinfo;\r\n\t\t\r\n\t\texec sp_api_modal_value @name=N'@button_gearriveerd_bij_pallet'\r\n\t\texec sp_api_modal_value @name=N'@ps' -- er bij\r\n\t\tRETURN\r\n\tEND\r\n\t-- einde  241213 extra check------------------------------- \r\n\r\n\r\n\t--we zitten nu absoluut op een pallet uit de juiste container en met het juiste artikel\r\n\t-- voorbereiden op replenishen\r\n\tset @this_pallet_type=N'REPLENISH'\r\n\tset @this_xstock_id=(select xstock_id from w_pallet where id=@this_pallet_id)\r\n\t--#list bevat hier alleen maar replenish regels\r\n\r\n/*\tif exists(select id from #list where scanned_pallet_id=@this_pallet_id) -- de pallet moet nog op MICRO_PICK_ALLOWED worden gezet\r\n\tBEGIN\r\n\t\texec sp_api_modal_text N'zet deze geselecteerde pallet op micro pick allowed....'\r\n\t\treturn\r\n\tEND\r\n*/\r\n/*\tif exists(select id from #list where @this_pallet_id in (select value from string_split(preferred_pallet_ids,','))) -- gewenst\r\n\tBEGIN\r\n\t\tset @T=N'Zet deze gewenste pallet definitief naar \"scanned_pallet_id\" en micro pick allowed....'\r\n\t\texec sp_api_modal_text @T\r\n\t\treturn\r\n\tEND\r\n*/\r\n\tif exists(select id from #list where scanned_pallet_id=@this_pallet_id) -- de pallet moet nog op MICRO_PICK_ALLOWED worden gezet\r\n\t\tOR exists(select id from #list where @this_pallet_id in (select value from string_split(preferred_pallet_ids,','))) -- gewenst\r\n\t\tOR exists(select id from #list where xstock_id=@this_xstock_id and @this_pallet_id not in (select value from string_split(preferred_pallet_ids,','))  ) -- alternatief\r\n\t--*************************\r\n\t-- HET RESPLENISHEN IS HIER\r\n\t--************************* \r\n\tBEGIN\r\n\t\t--231006 zorg dat er een pick pallet is\r\n\t\t--declare @pipa int = null\r\n\t\texec create_outbound_pickpallet --SELECTEERT OF MAAKT NIEUW..\r\n\t\t\t@wms_micro_outbound_id = @mob\r\n\t\t\t,@pallet_id  =@pipa output\r\n\t\t--print @pipa\r\n\r\n\t\tset @pallet_mol_id=(select top 1 id from #list where xstock_id=@this_xstock_id and scanned_pallet_id is null) -- er kan maar 1 replenish zijn voor 1 artikel !\r\n\t\t--set @T=concat(N'Deze pallet (pal.nr. ',(select pallet_nr from w_pallet where id=@this_pallet_id),') als alternatief gebruiken en definitief naar \"scanned_pallet_id\" en micro pick allowed....ipv prefrerred ', (select string_agg(preferred_pallet_ids,' *** ') from #list))\r\n\t\t--exec sp_api_modal_text @T\r\n\r\n\t\tif @replenish_loc is null \r\n\t\tBEGIN\r\n\t\t\tset @replenish_loc=(select pick_position from xstock where id=@this_xstock_id)\r\n\t\tEND\t\r\n\t\t--check of de replenishment al is geregistreerd op de pallet\r\n\t\t-- losse items picken en darvan serienummers scannen is niet hier. dit is alleen replenishen!\r\n\t\tif not exists( select * from w_pallet where id=@this_pallet_id and micro_pick_allowed=1)\r\n\t\tBEGIN\r\n\t\t\tEXEC sp_api_modal_input @name = '@replenish_loc', @value = @replenish_loc OUT \r\n\t\t\tEXEC sp_api_modal_button @name='@button_replenish',@value = 'Replenish NOW', @valueout = @button_replenish OUT,@class='btn-danger'\r\n\t\t\tif @button_replenish is null return\t\r\n\t\t\tif @replenish_loc is NULL\r\n\t\t\tBEGIN\r\n\t\t\t\texec sp_api_modal_text N'De POSITIE CODE voor de replenishmentlokatie is verplicht!'\r\n\t\t\t\treturn\r\n\t\t\tEND\r\n\t\t\t\r\n\t\t\t--update w_pallet set micro_pick_allowed=1,position_code=@replenish_loc where id=@this_pallet_id\r\n\t\t\t--update wms_micro_outbound_lines set scanned_pallet_id=@this_pallet_id where id=@pallet_mol_id\r\n\t\t\t-- is hieronder\r\n\t\t\texec sp_api_modal_clear\r\n\t\t\r\n\t\tEND\r\n\r\n\r\n\t\tupdate top(1) wms_micro_outbound_lines \r\n\t\t\tset scanned_pallet_id = @this_pallet_id\r\n\t\t\t\t,chk=1\r\n\t\t\t\t,remark='pick' --231006 van replenish naar pick\r\n\t\t\twhere ( scanned_pallet_id is null or scanned_pallet_id=@this_pallet_id)\r\n\t\t\t\tand id = @pallet_mol_id\r\n\t\t\r\n\t\tupdate w_pallet \r\n\t\t\tset micro_pick_allowed=1 \r\n\t\t\t\t,position_code=@replenish_loc--'rick'\r\n\t\t\twhere id=@this_pallet_id\t\t\r\n\r\n\t\tdeclare @assign_micro_items int =(select amount from wms_micro_outbound_lines where id=@pallet_mol_id)\r\n\t\twhile isnull(@assign_micro_items,0) >0\r\n\t\tBEGIN\r\n\t\t\tupdate top(1) wms_micro_item set w_pallet_pick_id=@pipa, wms_MICRO_OUTBOUND_LINES_ID=@pallet_mol_id where wms_micro_item.w_pallet_id=@this_pallet_id and w_pallet_pick_id is null\r\n\t\t\t--exec sp_api_toast N'  ** ITEM **'\r\n\t\t\t--exec sp_api_toast @this_pallet_id\r\n\t\t\t--exec sp_api_toast @pipa\r\n\t\t\tset @assign_micro_items = @assign_micro_items -1\r\n\t\tEND\t\r\n\t\treturn\r\n\tEND\r\n\r\n\texec sp_api_modal_text N'gelukt'\r\n\t\r\n\r\n\r\n\tset @this_SP= (select scanned_pallet_id from q_wms_micro_outbound_lines \r\n\t\t\t\t\twhere wms_micro_outbound_id=@mob \r\n\t\t\t\t\t\tand remark='replenish' \r\n\t\t\t\t\t\tand exists( select 1 from w_pallet where id=scanned_pallet_id and micro_pick_allowed=1)\r\n\t\t\t\t\t) \r\n\tif @this_SP is not NULL\r\n\tBEGIN\r\n\t\tdelete from #list where scanned_pallet_id=@this_SP and remark='replenish'\t\t\t\r\n\tEND\t\t\r\n\t\t\t\t\r\n\t\r\n\t----------------------------------------------------------------------------------------------------\r\n\t-- 231002 ALS ER NOG IETS GEREGELD MOET WORDEN BIJ REPLENISHMENT, DAN NIET VERDER. => EERST REGELEN! \r\n\t----------------------------------------------------------------------------------------------------\t\t\t\t\t\r\n\t--exec sp_api_modal_restart--231130\r\n\tEXEC sp_api_modal_value @name='@button_gearriveerd_bij_pallet' --231130 wis allleen deze waarde\r\n\tEXEC sp_api_modal_value @name='@ps' --231130 wis allleen deze waarde\r\n\t--exec sp_api_modal_restart--231130\r\n\treturn\r\nEND --REPLENISH PALLETS HALEN VAN BULK\r\n\r\n\r\n----------------------------------------------------------------------------------------------------\r\n-- 231010 VOLLE PALLETS PAKKEN VAN BULK EN KOPPELEN AAN DE MOL VAN DEZE OUTBOUND\r\n----------------------------------------------------------------------------------------------------\t\t\t\t\t\r\n\r\ndrop table if exists #fpa \r\ndrop table if exists #fpalist\r\n\r\nselect top 1 --231130 2x top 1 !!!\r\n\tp_pick.w_lot_id\r\n\t,pick_pal_id=p_pick.id\r\n\t,w_lot.container_number\r\n\t,adv_full_pos\r\n\t,p_pick.pallet_nr \r\n\t,mol.xstock_id\r\n\t,mol.id\r\n\t,mol.preferred_pallet_ids\r\n\t,mol.scanned_pallet_id\r\n\t,T=concat(N'Ga naar lokatie '\r\n\t\t\t\t--240826,upper(mol.adv_full_pos) --240826 voorheen: dit is een lokatie van een pallet die uit de container komt \r\n\t\t\t\t,isnull ((select position_code from w_pallet where id=p_pick.id) --niew: dit er voor gezet..12:05\r\n\t\t\t\t\t\t,upper(mol.adv_full_pos) --240826 nu baseren op de prefrerred pallet!\r\n\t\t\t\t\t\t)\r\n\t\t\t\t,' en haal daar'\r\n\t\t\t\t\t--240122 was,' en haal daar Pallet ',p_pick.pallet_nr\r\n\t\t\t\t\t--eventueel willekeurig als de preferred_pallet al in gebruik is.. \r\n\t\t\t\t\t, case \r\n\t\t\t\t\t\twhen exists(select 1 from wms_micro_outbound_lines where scanned_pallet_id=mol.preferred_pallet_ids)\r\n\t\t\t\t\t\tthen ' een Pallet'\r\n\t\t\t\t\t\telse concat(' Pallet ',p_pick.pallet_nr)\r\n\t\t\t\t\t\tend\r\n\t\t\t\t\t\r\n\t\t\t\t\t,' met ',p_pick.colli,' colli'--231130\r\n\t\t\t\t\t,' van container ',upper(w_lot.container_number)\r\n\t\t\t\t\t,'. Artikel: ', upper(mol.lookupcode) \r\n\t\t\t\t\t)--* \r\n\t,remark --is dus 'full'\t\t\t\t\t\t\t\r\n\t,mol_amount=mol.amount\t\t--231130\r\ninto #fpa \r\nfrom q_wms_micro_outbound_lines mol\r\n\t\t\tjoin w_lot on w_lot.id=mol.w_lot_id\r\n\t\t\tjoin w_pallet p_pick \r\n\t\t\t\t\ton p_pick.id=try_cast(preferred_pallet_ids as int) \r\n\t\t\t\t\t\t--dwing af dat de pallet uit de opgegeven mol-container komt\r\n\t\t\t\t\t\tand p_pick.w_lot_id=mol.w_lot_id\r\n\t\t\twhere mol.wms_micro_outbound_id=@mob \r\n\t\t\t\tand remark='full' \r\n\t\t\t\tand (\r\n\t\t\t\t\tscanned_pallet_id is null \r\n\t\t\t\t\t-- dit is alleen bij replenishment pallets !!!or NOT exists( select 1 from w_pallet where id=scanned_pallet_id and micro_pick_allowed=1)\r\n\t\t\t\t\t)\r\n--dev test select * from #modal_report \r\n--live \r\nselect * into #fpalist from #fpa  --FULL PALLET LIST\r\nif exists(select 1 from #fpalist) exec sp_api_modal_text N'VOLLE PALLETS OUTBOUND',@class='h1'\r\nset @T = NULL\r\nif exists(select 1 from #fpa)\r\nBEGIN\r\n\tSet @T='<ul>'--start lijst\r\nEND\r\n\r\nwhile exists(select 1 from #fpa)\r\nBEGIN\r\n\tset @this_id=(select top 1 id from #fpa)\r\n\tset @T=concat(@T,'<li>',(select T from #fpa where id=@this_id),'</li>')\r\n\tdelete from #fpa where id=@this_id\r\nEND\r\nif @T >''--lijst afsluiten\r\nBEGIN\r\nset @t=concat(@T,'</ul>')\r\nexec sp_api_modal_html @T\r\nEND\r\n\r\nWHILE exists(select 1 from #fpalist) --bevat volle pallets die op de outbound mee gaan\r\nBEGIN -- 231004 REPLENISH PART\r\n\t--exec sp_api_modal_table @tmptable=N'#mr',@print=1,@excel=1 -- output to react client\r\n\tEXEC sp_api_modal_button @name='@button_gearriveerd_bij_pallet',@value = 'Ik ben bij de pallet', @valueout = @button_gearriveerd_bij_pallet OUT,@class='btn-danger',@key='Enter'\r\n\tif @button_gearriveerd_bij_pallet is null RETURN\r\n\t--scan pallet-sticker\r\n\texec sp_api_modal_text N'scan pallet sticker'\r\n\tEXEC sp_api_modal_input @name = '@ps', @value = @ps OUT ,@focus=1\r\n\r\n\tif @ps is null return\r\n\tif left(@ps,3)<>'ps:'\r\n\tBEGIN\r\n\t\texec sp_api_modal_text N'Dit is geen Tracy pallet sticker QR code'\r\n\t\tRETURN\r\n\tEND\t\r\n\r\n\r\n\tset @this_pallet_id=right(@ps,len(@ps)-3)\r\n\tif  not exists(select * from w_pallet where id=@this_pallet_id and w_lot_id in(select w_lot_id from #fpalist) )\r\n\tBEGIN\r\n\t\tif  exists(select * from wms_micro_outbound_lines where scanned_pallet_id=@this_pallet_id )\r\n\t\tBEGIN --231009 pallet is er al.\r\n\t\t\texec sp_api_modal_text N'Deze pallet is al gescand en toegevoegd.'\r\n\t\tEND\t\r\n\t\telse BEGIN\t\r\n\t\t\texec sp_api_modal_text N'Dit is een pallet uit een ** VERKEERDE ** container'\r\n\t\tEND\r\n\t\texec sp_api_modal_beep 1100, 500 --error !\r\n\t\t--set @T=concat('pallet lot: ',(select w_lot_id from w_pallet where id=@this_pallet_id and w_lot_id in(select w_lot_id from #fpalist) ))\r\n\t\t--exec sp_api_modal_text @T\r\n\t\t--exec sp_api_modal_table @tmptable=N'#modal_report',@print=1,@excel=1 -- output to react client\r\n\t\tRETURN\r\n\tEND\r\n\r\n\tif  not exists(select * from w_pallet p where p.id=@this_pallet_id \r\n\t\t\t\t\t\t--  and xstock_id in(select xstock_id from #fpalist) \r\n\t\t\t\t\t\t--\tand xstock_id in(select xstock_id from #list) \r\n\t\t\t\t\t\tand exists(select 1 from #fpalist where #fpalist.xstock_id=p.xstock_id and #fpalist.mol_amount = p.colli) --de gekozen FULL PALLET pallet exact het opgegeven colli-aantal hebben 231130!!\r\n\t\t\t\t\t)\r\n\tBEGIN\r\n\t\texec sp_api_modal_text N'(2)Dit is ** NIET ** de juiste pallet. => Wel juiste container, maar verkeerd artikel (of CPP onjuist)!'\r\n\t\texec sp_api_modal_beep 1100, 500 --error !\r\n\t\t--set @T=concat('pallet lot: ',(select w_lot_id from w_pallet where id=@this_pallet_id and w_lot_id in(select w_lot_id from #fpalist) ))\r\n\t\t--exec sp_api_modal_text @T\r\n\t\t--exec sp_api_modal_table @tmptable=N'#modal_report',@print=1,@excel=1 -- output to react client\r\n\t\t\t\t\t--exec sp_api_modal_restart --2311390 extra probeersel..\r\n\t\t\t\t\t--EXEC sp_api_modal_values_clear @ignore='@uuid' --231130 KEEP SCANNED QR\r\n\t\t\t\t\texec sp_api_modal_value @name=N'@button_gearriveerd_bij_pallet'\r\n\t\t\t\t\texec sp_api_modal_value @name=N'@ps'\r\n\t\t\t\t\t--exec sp_api_modal_restart--231130 --er bij proberen!!\r\n\t\tRETURN\r\n\tEND\r\n\r\n\r\n\t--we zitten nu absoluut op een pallet uit de juiste container en met het juiste artikel\r\n\t-- voorbereiden op replenishen\r\n\texec sp_api_modal_beep 1800, 200\r\n\tset @this_pallet_type=N'FULL'\r\n\tset @this_xstock_id=(select xstock_id from w_pallet where id=@this_pallet_id)\r\n\tset @this_pal_colli=(select colli from w_pallet where id=@this_pallet_id) -- pallet heeft altijd colli en niet altijd 'items' \r\n\t--#fpalist bevat hier alleen maar full pallet regels (full pallets assignment)\r\n\r\n\r\n\tif  exists(select id from #fpalist where @this_pallet_id in (select value from string_split(preferred_pallet_ids,','))) -- gewenst\r\n\t\tOR exists(select id from #fpalist where xstock_id=@this_xstock_id and @this_pallet_id not in (select value from string_split(preferred_pallet_ids,','))  ) -- alternatief\r\n\t--***********************************\r\n\t-- HET FULL PALLET ASSIGNMENT IS HIER\r\n\t--*********************************** \r\n\tBEGIN\r\n\t\tset @pallet_mol_id=(select top 1 id from #fpalist where xstock_id=@this_xstock_id \r\n\t\t\t\t\t\t\t\tand scanned_pallet_id is null \r\n\t\t\t\t\t\t\t\tand mol_amount=@this_pal_colli --231130 collicheck er bij!\r\n\t\t\t\t\t\t\t) -- er mag maar 1 full pallet zijn voor 1 MOL\r\n\t\t--set @T=concat(N'Deze pallet (pal.nr. ',(select pallet_nr from w_pallet where id=@this_pallet_id),') als alternatief gebruiken en definitief naar \"scanned_pallet_id\" en micro pick allowed....ipv prefrerred ', (select string_agg(preferred_pallet_ids,' *** ') from #fpalist))\r\n\t\t--exec sp_api_modal_text @T\r\n\r\n\t\tif exists( select 1 from wms_micro_outbound_lines where scanned_pallet_id=@this_pallet_id)\r\n\t\tBEGIN --afbreken\r\n\t\t\tset @T=concat('Pallet nummer ',(select pallet_nr from w_pallet where id=@this_pallet_id),' is al gescand')\r\n\t\t\texec sp_api_modal_text @T\r\n\t\t\treturn\r\n\t\tend\r\n\r\n\t\t--=======================================extra 250502============================================================================\r\n\t\tif exists( select 1 from w_pallet_out po where w_pallet_id=@this_pallet_id and xlandfreight_id <> (select lf_id from mob where id=@mob))\r\n\t\tBEGIN --afbreken\r\n\t\t\tset @T=concat('Pallet nummer ',(select pallet_nr from w_pallet where id=@this_pallet_id),' staat gekoppeld aan een andere outbound vracht.')\r\n\t\t\texec sp_api_modal_text @T\r\n\r\n\t\t\t--rick een mailtje!\r\n\t\t\tSET @foutinfo = CONCAT(N'Mob: ',@mob, ' MOL: ',@mol, 'ScannedPallet: ',@this_pallet_id)\r\n\t\t\t\tEXEC sp_api_email @to = 'rick@tracy.nu,gb@tracy.nu',\r\n\t\t\t\t\t@subject = 'RWS - pallet geweigerd. Scanned pallet staat al op andere outbound vracht!',\r\n\t\t\t\t\t@Body = @foutinfo;\r\n\r\n\t\t\treturn\r\n\t\tend\r\n\t\t--=======================================extra 250502============================================================================\r\n\r\n\t\t-------------------------------------------------------------------------------------- A S S I G N   S C A N N E D    P A L L E T\r\n\t\t--oke verder\r\n\t\tupdate top(1) wms_micro_outbound_lines \r\n\t\t\tset scanned_pallet_id = @this_pallet_id\r\n\t\t\t\t,chk=1\r\n\t\t\t\t\r\n\t\t\twhere ( scanned_pallet_id is null or scanned_pallet_id=@this_pallet_id)\r\n\t\t\t\tand id = @pallet_mol_id\r\n\t\t\t\tand remark ='full' -- moet altijd al zo zijn\r\n\t\t--oude items van prefrerred pallet weghalen\r\n\t\t\r\n\t\tIF EXISTS( --GB241216\r\n\t\t\tSELECT * FROM wms_micro_outbound_lines WHERE id <> @pallet_mol_id AND preferred_pallet_ids =\r\n\t\t\t(select preferred_pallet_ids from wms_micro_outbound_lines where id=@pallet_mol_id)\r\n\t\t\t)\r\n\t\t\tBEGIN\r\n\t\t\t\tSET @foutinfo = CONCAT(N'SELECT * FROM wms_micro_outbound_lines WHERE preferred_pallet_ids = ''',\r\n\t\t\t\t\t\t(select preferred_pallet_ids from wms_micro_outbound_lines where id=@pallet_mol_id)\r\n\t\t\t\t\t,'''')\r\n\t\t\t\tEXEC sp_api_email @to = 'rick@tracy.nu,gb@tracy.nu',\r\n\t\t\t\t\t@subject = 'RWS - preferred_pallet_ids probleem!',\r\n\t\t\t\t\t@Body = @foutinfo;\r\n\r\n\t\t\t\t--250408 EVEN niet verder !\r\n\t\t\t\t--EXEC SP_API_MODAL_ALERT N'We breken even af!. Tracy heeft nu een mail om te kijken wat er is' \r\n\t\t\t\t--             RETURN \r\n\t\t\t\t-- 250408--------------------------\r\n\t\t\tEND\r\n\r\n\r\n\t\tupdate w_pallet set wms_micro_outbound_id=null\r\n\t\twhere wms_micro_outbound_id=@mob \r\n\t\tand id in (select preferred_pallet_ids from wms_micro_outbound_lines where id=@pallet_mol_id)\r\n\t\tupdate wms_micro_item \r\n\t\t\tset w_pallet_pick_id=NULL\r\n\t\t\t\t, wms_MICRO_OUTBOUND_LINES_ID=NULL\r\n\t\t\t\t,item_serial_number = null \r\n\t\t\twhere wms_MICRO_OUTBOUND_LINES_ID=@pallet_mol_id \r\n\t\t\t\r\n\r\n\t\t--nieuwe items van gekozen pallet\r\n\t\tupdate w_pallet set wms_micro_outbound_id=@mob where id =@this_pallet_id  --231108 IK NEEM AAN MOB! (er stond MOL )\r\n\t\tupdate wms_micro_item \r\n\t\t\tset w_pallet_pick_id=w_pallet_id\r\n\t\t\t\t, wms_MICRO_OUTBOUND_LINES_ID=@pallet_mol_id \r\n\t\t\twhere wms_micro_item.w_pallet_id=@this_pallet_id\r\n\t\t\t\t and w_pallet_pick_id is null -- in een heel fout geval zou er al een paar items aan een andere outbound kunnen zijn gekoppeld\r\n\t\t-- ?? return\r\n\tEND\r\n\r\n\texec sp_api_modal_text N'gelukt'\r\n\tdelete from #fpalist where id=@pallet_mol_id\r\n\t\r\n\tEXEC sp_api_modal_value @name='@button_gearriveerd_bij_pallet' --231130 wis alleen deze\r\n\tEXEC sp_api_modal_value @name='@ps' --231130 wis allleen deze waarde\r\n\t--exec sp_api_modal_restart--231130 --er bij proberen!!\r\n\treturn\r\n\t--exec sp_api_modal_restart\r\n\t\r\n\t\t\t\t\r\n\t\r\n\t----------------------------------------------------------------------------------------------------\r\n\t-- 231002 ALS ER NOG IETS GEREGELD MOET WORDEN BIJ REPLENISHMENT, DAN NIET VERDER. => EERST REGELEN! \r\n\t----------------------------------------------------------------------------------------------------\t\t\t\t\t\r\n\r\nEND --FULL PALLETS HALEN VOOR DE MICRO OUTBOUND\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n--afkappen na replenish pallets en volle pallets toekennen aan de MOL\r\n--RETURN\r\n\r\n/*\r\n\t--poortwachter\r\n\tif exists(select 1 from q_wms_micro_outbound_lines \r\n\t\t\t\twhere wms_micro_outbound_id=@mob \r\n\t\t\t\t\tand remark='replenish' \r\n\t\t\t\t\tand (\r\n\t\t\t\t\t\tscanned_pallet_id is null \r\n\t\t\t\t\t\tor NOT exists( select 1 from w_pallet where id=scanned_pallet_id and micro_pick_allowed=1)\r\n\t\t\t\t\t\t) \r\n\t\t\t)\r\n\tRETURN -- 231002 ALS ER NOG IETS GEREGELD MOET WORDEN BIJ REPLENISHMENT, DAN NIET VERDER.. EERST REGELEN! \t\t\t\r\n*/\r\n\r\n\r\n--check of er nog VOLLE PALLETS GEHAALD MOETEN WORDEN:\r\n\r\n\r\n--231006\r\nif exists(select 1 from @main_db.dbo.mob_pallets(@mob) where chk=0 or is_processed=0)\r\nbegin\r\n\t--hieronder misschien niet meer nodig.. tot NORMAAL\r\n\t--exec sp_api_toast N'n o r m a a l'\r\n\tgoto NORMAAL --231009 nu gan we serials toevoegen!!!\r\nend\t\r\n\r\n\r\n\r\n\r\n--exec sp_api_toast N'V6'\r\nif exists(select 1 from @main_db.dbo.mob_pallets(@mob) where chk=0 or is_processed=0)\r\nBEGIN\r\n--was\r\n\t--set @T=concat(N'Nog te scannen pallets: ',(select string_agg(concat(plts,' pallets op locatie ',position_code, ' met sku: ',sku, ' en cpp= ',cpp),' - ') from @main_db.dbo.mob_pallets(@mob) where chk=0 ))\r\n\t--exec sp_api_modal_text @T\r\n\t--set @T=concat(N'Scan een opgegeven pallet van de pick-instruction met ref: ',(select UPPER(out_ref) from wms_micro_outbound where id=@mob))\r\n\t--exec sp_api_modal_text @T\r\n--nu\r\n\tif exists(select 1 from wms_micro_outbound_lines where wms_micro_outbound_id=@mob and scanned_pallet_id is null) --231006 was is_processed=0)\r\n\tBEGIN\r\n\t\t--231013 was set @T=concat('Deze pallets zijn nog niet (volledig) op serienummers gescand. Haal de pallet op en Scan de pallet-stickers..','')\r\n\t\tset @T=concat('Deze pallets zijn nog opgehaald en pallet-sticker gescand.','Haal de pallet eerst op. Serienummers scannen komt later.')--niet (volledig) op serienummers gescand. Haal de pallet op en Scan de pallet-stickers..','')\r\n\t\texec sp_api_modal_text @T\r\n\t\tselect [nr~col-1]=pallet_nr\r\n\t\t\t\t,[sku~col-3]= sku\r\n\t\t\t\t--,[lookupcode~col-5]=lookupcode\r\n\t\t\t\t,[amt~col-2]=amount\r\n\t\t\t\t,[st~col-1]=chk\r\n\t\t\t\t,[ser.~col-2]=linked_serials\t\r\n\t\t\t\t,[remark~col-3]=remark\r\n\t\t\t\t\r\n\t\tinto #palnoser from q_wms_micro_outbound_lines where wms_micro_outbound_id=@mob and chk=0 --231013 was (is_processed=0 or chk=0) maar serienummers komen later!\r\n\t\texec sp_api_modal_table @tmptable=N'#palnoser'\r\n\t\t\r\n\r\n\tEND\r\n\r\n\r\nif NOT  exists(select 1 from wms_micro_outbound_lines where wms_micro_outbound_id=@mob and scanned_pallet_id is null) --231006 was is_processed=0)\r\nBEGIN\r\n\t--exec sp_api_modal_alert N'klaar (not)'\r\n\tgoto NORMAAL\r\n\treturn\r\nEND\t\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\tif 1=1\r\n\tbegin\r\n\t\t\r\n\t\tEXEC sp_api_modal_input @name = '@pal_select', @value = @pal_select OUT,@hidden=0,@select=1\r\n\t\tEXEC sp_api_modal_button @name='@pal_select_button',@value = N'Check', @valueout = @pal_select_button OUT,@class='btn-danger',@key='F5' --Enter kan niet verstoort de flow\r\n\t\tif @pal_select_button is null return\r\n\t\tif @pal_select is null return\r\n\t\tif left(@pal_select,3) <> N'ps:'\r\n\t\tBEGIN\r\n\t\t\texec sp_api_modal_text N'Dit is geen palletsticker'\r\n\t\t\treturn\r\n\t\tEND\r\n\t\t\r\n\t\t--oke verder\r\n\t\tset @this_pallet_id=right(@pal_select,len(@pal_select)-3)\r\n\t\tselect \r\n\t\t\t@this_pallet_nr=pallet_nr\r\n\t\t\t,@this_xstock_id=xStock_id\r\n\t\t\t,@this_item_lotnr=pallet_art_lotnr\r\n\t\t\t,@this_pal_colli=colli\r\n\t\tfrom w_pallet where id=@this_pallet_id\r\n\t\t--set @T=concat('scanned pallet stockid: ',@this_xstock_id)\r\n\t\t--exec sp_api_toast @T --231001\r\n\t\tset @this_sku=(select sku from xstock where id=@this_xstock_id)\r\n\t\t--set @T=concat('U heeft gekozen pallet nr: ',@this_pallet_nr)\r\n\t\t--exec sp_api_modal_text @T\r\n\r\n\t\t--declare @pallet_mol_id int =0 -- zoek het mol id die deze pallet als preferred heeft staan \r\n\t\tset @pallet_mol_id=( select top 1 id from wms_micro_outbound_lines \r\n\t\t\t\t\t\t\twhere wms_micro_outbound_id=@uuid \r\n\t\t\t\t\t\t\t\tand (@this_pallet_id in ([preferred_pallet_ids]) \r\n\t\t\t\t\t\t\t\t\tOR @this_pallet_id=[scanned_pallet_id] --(als hij al gekoppeld is aan een MOL)\r\n\t\t\t\t\t\t\t\t\t) \r\n\t\t\t\t\t\t\t)\r\n\t\t\r\n\t\tif @pallet_mol_id is not NULL -- het is een bekende pallet (id stemt overeen met preferred)!\r\n\t\tbegin\r\n\t\t\tset @mol=@pallet_mol_id\r\n\t\t\t----------------------------PICK / FULL / REPLENISH PALLET ?? -------------------\r\n\t\t\tSET @this_pallet_type=(select upper(remark) from wms_micro_outbound_lines where id=@mol)\r\n\t\t\t---------------------------------------------------------------------------------\r\n\t\t\tif (select chk from wms_micro_outbound_lines where id=@pallet_mol_id) =1\r\n\t\t\tBEGIN\r\n\t\t\t\t-- opmerking\r\n\t\t\t\tset @T=concat(N'Deze '\r\n\t\t\t\t\t\t\t\t--,( select UPPER(remark) from wms_micro_outbound_lines where wms_micro_outbound_id=@uuid and @this_pallet_id in ([preferred_pallet_ids]))\r\n\t\t\t\t\t\t\t\t,@this_pallet_type\r\n\t\t\t\t\t\t\t\t,' pallet is al definitief geselecteerd bij deze micro outbound.'\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\texec sp_api_modal_text @T\r\n\t\t\t\t\r\n\r\n\t\t\t\t--inserted 231001 gelijk hier mogelijkheid om serienummers te scannen:\r\n\t\t\t\tif (select is_processed from wms_micro_outbound_lines where id=@pallet_mol_id) =1\r\n\t\t\t\tBEGIN\r\n\t\t\t\t\tset @T=concat(N'Deze pallet is volledig gescand (inc. ',(select count(*) from wms_micro_item where wms_micro_outbound_lines_id=@pallet_mol_id and item_serial_number >N''),' serienummers)')\r\n\t\t\t\t\texec sp_api_modal_text @T\r\n\t\t\t\tEND\r\n\t\t\t\telse BEGIN -- go to scan\r\n\t\t\t\t\t\r\n\t\t\t\t\tif @this_pallet_type ='FULL' --> SHOW SCAN BUTTON!\r\n\t\t\t\t\t\tgoto GOFULL\r\n\t\t\t\t\t/*\t\r\n\t\t\t\t\tBEGIN\r\n\t\t\t\t\t\tEXEC sp_api_modal_button @name='@button_scan_serials_for_mol',@value = 'Scan serials', @valueout = @button_scan_serials_for_mol OUT,@class='btn-danger'\r\n\t\t\t\t\t\t--tot hier inserted 231001 gelijk hier mogelijkheid om serienummers te scannen:\r\n\t\t\t\t\t\tif @button_scan_serials_for_mol is null return\t\r\n\t\t\t\t\t\tif @button_scan_serials_for_mol='Scan serials' goto add_serials_to_mol --231001\r\n\t\t\t\t\tEND\r\n\t\t\t\t\t*/\t\r\n\r\n\t\t\t\t\tif @this_pallet_type ='REPLENISH' --> SHOW REPLENISH BUTTON!\r\n\t\t\t\t\t\tGOTO GOREPLENISH\r\n\t\t\t\t\t/*\r\n\t\t\t\t\tBEGIN\r\n\t\t\t\t\t\tif @replenish_loc is null \r\n\t\t\t\t\t\tBEGIN\r\n\t\t\t\t\t\t\tset @replenish_loc=(select pick_position from xstock where id=@this_xstock_id)\r\n\t\t\t\t\t\tEND\t\r\n\t\t\t\t\t\t--check of de replenishment al is geregistreerd op de pallet\r\n\t\t\t\t\t\t-- losse items picken en darvan serienummers scannen is niet hier. dit is alleen replenishen!\r\n\t\t\t\t\t\tif not exists( select * from w_pallet where id=@this_pallet_id and micro_pick_allowed=1)\r\n\t\t\t\t\t\tBEGIN\r\n\t\t\t\t\t\t\tEXEC sp_api_modal_input @name = '@replenish_loc', @value = @replenish_loc OUT \r\n\t\t\t\t\t\t\tEXEC sp_api_modal_button @name='@button_replenish',@value = 'Replenish NOW', @valueout = @button_replenish OUT,@class='btn-danger'\r\n\t\t\t\t\t\t\tif @button_replenish is null return\t\r\n\t\t\t\t\t\t\tif @button_replenish='Replenish NOW' --hier evt jump naar separaat replenishment\r\n\t\t\t\t\t\t\tBEGIN\r\n\t\t\t\t\t\t\t\tupdate w_pallet set micro_pick_allowed=1,position_code=@replenish_loc where id=@this_pallet_id\r\n\t\t\t\t\t\t\t\tupdate wms_micro_outbound_lines set scanned_pallet_id=@this_pallet_id where id=@pallet_mol_id\r\n\t\t\t\t\t\t\t\texec sp_api_modal_clear\r\n\t\t\t\t\t\t\t\t--PICKLOKATIE !!\r\n\t\t\t\t\t\t\t\t--TODO...\r\n\t\t\t\t\t\t\t\t--+ EVENTUEEL HELE REPLENISH KOP\r\n\t\t\t\t\t\t\tEND\r\n\t\t\t\t\t\tEND\r\n\r\n\t\t\t\t\tEND\r\n\t\t\t\t\t*/\r\n\r\n\r\n\r\n\t\t\t\tEND\r\n\r\n\r\n\r\n\r\n\t\t\tEND\r\n\t\t\tELSE BEGIN -- dus als CHK=0\r\n\t\t\t\tset @T=concat(N'Deze ',( select UPPER(remark) from wms_micro_outbound_lines where wms_micro_outbound_id=@uuid and @this_pallet_id in ([preferred_pallet_ids])),' pallet wordt nu definitief geselecteerd voor deze micro outbound.')\r\n\t\t\t\texec sp_api_modal_text @T\r\n\t\t\t\tupdate wms_micro_outbound_lines \r\n\t\t\t\t\tset chk=1 \r\n\t\t\t\t\t\t,scanned_pallet_id = @this_pallet_id\r\n\t\t\t\twhere id=@pallet_mol_id\r\n\r\n\t\t\t\t--BUSY !\r\n\t\t\t\t--if full dan optioneel serienummers\r\n\t\t\t\t--if replenish dan lokatie\r\n\t\t\t\t\r\n\t\t\t\tEXEC sp_api_modal_button @name='@button_scan_serials_for_mol',@value = 'Scan serials', @valueout = @button_scan_serials_for_mol OUT,@class='btn-danger'\r\n\t\t\t\t\t--tot hier inserted 231001 gelijk hier mogelijkheid om serienummers te scannen:\r\n\t\t\t\t\tif @button_scan_serials_for_mol is null return\t\r\n\t\t\t\t\tif @button_scan_serials_for_mol='Scan serials' goto add_serials_to_mol --231001\r\n\t\t\t\t----231001 JUMP: (2)\r\n\t\t\t\t--set @mol=@pallet_mol_id\r\n\t\t\t\t--goto add_serials_to_mol\r\n\t\t\t\r\n\t\t\tEND\r\n\t\tend\t\r\n\t\telse begin \r\n\t\t\t--\tPallet_mol_id is null, dus gescande pallet-sticker komt niet voor op de instructie.\r\n\t\t\t--\tHet gescande pallet_id komt niet voor in preferred_pallet_id's; kijk of er een mol vrij is om gewisseld te worden\r\n\t\t\t\r\n\t\t\t--\tCheck of er nog wel 'un-assigned' pallets zijn...\r\n\t\t\tif (select count(*) from q_wms_micro_outbound_lines where wms_micro_outbound_id=@mob and isnull(chk,0)=0) =0 --240607 isnull(chk,0)\r\n\t\t\t--alle pallets zijn al toegekend\r\n\t\t\tBEGIN\r\n\t\t\t\texec sp_api_modal_text N'Alle pallets zijn al toegekend, scan de palletsticker om serienummers toe te voegen',@class='h1'\r\n\t\t\tEND\t\r\n\t\t\telse BEGIN\r\n\t\t\t\texec sp_api_modal_text N'Deze pallet staat ** NIET ** in de instructie. Kies de juiste pallet of geef aan welke pallet van de pick-instructie u wilt vervangen.'\r\n\t\t\t\tif NOT exists(select * from wms_micro_outbound_lines where wms_micro_outbound_id=@mob and chk=0 and xstock_id=@this_xstock_id ) --230930 toon alleen een vervangbare pallet_mol als deze hetzelfde artikel heeft!\r\n\t\t\t\tBEGIN\r\n\t\t\t\t\t--set @T=concat(N'Er is ** GEEN ** vervangbare pallet, bevat de zojuist gescande pallet wel het bedoelde artikel? (vergelijk met de pick-instructie)','' )\r\n\t\t\t\t\tset @T=concat(N'Onjuiste pallet!. Scan een ** ANDERE PALLET ** (zie de pick-instructie)','' )\r\n\t\t\t\t\texec sp_api_modal_text @T\r\n\t\t\t\t\treturn --231001\r\n\t\t\t\tEND\r\n\t\t\t\telse BEGIN\r\n\t\t\t\t\tdeclare @replacement_mol_id int --op deze mol wordt een andere pallet uitgeboekt dan oorspronkelijk 'preferred'\r\n\t\t\t\t\t--laat de user een pallet kiezen die op de mol vervangen wordt door de gecande pallet\r\n\t\t\t\t\t/*\t\t--toon tabel:\r\n\t\t\t\t\t\t\texec sp_api_modal_text N'Kies de pallet die u vervangt door de nu gescande pallet:'\r\n\t\t\t\t\t\t\tselect \r\n\t\t\t\t\t\t\t[sku~col-sm-2]=sku\r\n\t\t\t\t\t\t\t,[lookupcode~col-sm-2]=lookupcode\r\n\t\t\t\t\t\t\t,[remark~col-sm-2]=remark\r\n\t\t\t\t\t\t\t,pos=case remark when 'full' then adv_full_pos else adv_pick_pos end\r\n\t\t\t\t\t\t\t,pal_nr=(select pallet_nr from w_pallet where id in (select value from string_split(preferred_pallet_ids,',')))\r\n\t\t\t\t\t\t\tinto #mol \r\n\t\t\t\t\t\t\t\tfrom q_wms_micro_outbound_lines \r\n\t\t\t\t\t\t\t\twhere wms_micro_outbound_id=@mob \r\n\t\t\t\t\t\t\t\t\tand chk=0 \r\n\t\t\t\t\t\t\t\t\tand xstock_id=@this_xstock_id --230930 toon alleen een vervangbare pallet_mol als deze hetzelfde artikel heeft!\r\n\t\t\t\t\t\t\texec sp_api_modal_table @tmptable=N'#mol'\r\n\t\t\t\t\t--*/\t\t\r\n\t\t\t\t\t--/*\r\n\t\t\t\t\t-- maak de keuzelijst van beschikbare micro_outbound_lines die een zelfde artikel bevatten als de gescande pallet en die nog niet aangescand zijn (chk=0)\r\n\t\t\t\t\tdeclare @list nvarchar(4000)\r\n\t\t\t\t\tset @T=concat('thispalcolli: ',@this_pal_colli)\r\n\t\t\t\t\texec sp_api_toast @T\r\n\t\t\t\t\tset @list=(\r\n\t\t\t\t\t\t\tSELECT STRING_AGG(concat(left(concat(mol.id,'          '),10)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t, ' ',upper(mol.remark)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t, ' ',replace(mol.sku,',',';'),' - ',replace(mol.lookupcode,',',';')\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t,' pal.nr: ',p.pallet_nr\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t,' colli: ',p.colli\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t, ','\r\n\t\t\t\t\t\t\t\t\t\t\t) --LET OP: GEEN KOMMA GEBRUIKEN !!!\r\n\t\t\t\t\t\t\tFROM q_wms_micro_outbound_lines mol\r\n\t\t\t\t\t\t\tCROSS APPLY STRING_SPLIT(mol.preferred_pallet_ids, ',') split_val\r\n\t\t\t\t\t\t\tJOIN w_pallet p ON p.id = CAST(split_val.value AS INT)\r\n\t\t\t\t\t\t\tWHERE mol.chk = 0 \r\n\t\t\t\t\t\t\t\tAND mol.wms_micro_outbound_id =@mob \r\n\t\t\t\t\t\t\t\t--? dit check ik zondag wel als ik het niet vergeet, want ik moet nu bikkelen met sassie \r\n\t\t\t\t\t\t\t\t--231001\r\n\t\t\t\t\t\t\t\tAND mol.xstock_id =@this_xstock_id --is not null --=@this_xstock_id --230930 toon alleen een vervangbare pallet_mol als deze hetzelfde artikel heeft!\r\n\t\t\t\t\t\t\t\tAND (mol.remark='replenish' OR (mol.amount=@this_pal_colli))\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\r\n\t\t\t\t\t--pre declare: @button_choose_pal\r\n\t\t\t\t\tEXEC sp_api_modal_text N'Kies een pallet die vervangen wordt door de gescande pallet:',@class='h1'  --je zie de pallet die oorspronkelijk op de mol bedoeld was; maar eigenlijk kiezen we de MOL om er vervolgens de gescande (alternatieve) pallet aan te koppelen\r\n\t\t\t\t\t\r\n\t\t\t\t\t--/*\r\n\t\t\t\t\t\t-- LIST:EXEC sp_api_modal_choose_list @list = @list\r\n\t\t\t\t\t\t--BUTTONS:\r\n\t\t\t\t\t\tEXEC sp_api_modal_choose @list = @list\r\n\t\t\t\t\t\t,@value = @button_choose_pal OUT\r\n\t\t\t\t\t\t--,@startkey=3 --function key starting number\r\n\t\t\t\t\t\tif @button_choose_pal is not NULL\r\n\t\t\t\t\t\tBEGIN\t\r\n\t\t\t\t\t\t\tset @replacement_mol_id=left(@button_choose_pal,10) --eerste stukje is het mol_id\r\n\t\t\t\t\t\t\t--exec sp_api_toast @button_choose_pal\r\n\t\t\t\t\t\t\tif not exists(select 1 from wms_micro_outbound_lines where id=@replacement_mol_id)\r\n\t\t\t\t\t\t\tBEGIN\r\n\t\t\t\t\t\t\t\texec sp_api_modal_alert N'Er is iets verkeerd gegaan met de selectie!!'\r\n\t\t\t\t\t\t\t\treturn\r\n\t\t\t\t\t\t\tEND\r\n\t\t\t\t\t\t\t--oke verder\r\n\t\t\t\t\t\t\tupdate wms_micro_outbound_lines \r\n\t\t\t\t\t\t\t\tset chk=1 \r\n\t\t\t\t\t\t\t\t,scanned_pallet_id = @this_pallet_id\r\n\t\t\t\t\t\t\twhere id=@replacement_mol_id\r\n\t\t\t\t\t\t\tset @mol=@replacement_mol_id\r\n\r\n\t\t\t\t\t\t\tset @this_pallet_type=(select UPPER(remark) from wms_micro_outbound_lines where id=@replacement_mol_id)\r\n\r\n\t\t\t\t\t\tEND\t\r\n\t\t\t\t\t--*/\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\tEND\t\r\n\t\t\tEND --de else\r\n\t\tend\t\r\n\t\t--exec sp_api_modal_alert @this_pallet_id --231001 TEST !!\r\n\t\treturn\r\n\tend\t\t\r\nEND\r\n\r\n\r\n--240607 was: \r\nRETURN -- EVEN AFKAPPEN ..........\r\n--nu:\r\n--if not exists(select 1 from code_mob_serials where mob_id=@uuid and amount<>codes) RETURN\r\n\r\n--240607 nu dus dus doorgaan naar scannen als er nog serienummers niet gekoppeld zijn..\r\n\r\n\r\nNORMAAL:\r\nexec sp_api_modal_text N'Scannen van items:'\r\nEXEC sp_api_modal_choose @list = N'alles,onvoltooid,volle_pallets',@value = @button_choose2 OUT\r\nif @button_choose2 is null return--set @button_choose2='onvoltooid'\t\r\n--exec sp_api_toast @uuid\r\n--MOBILE ACTION EXTRA CODE\r\n--set @button_choose2='onvoltooid'\r\nif @button_choose2='volle_pallets'\r\n\tbegin\r\n\t\texec sp_api_modal_text N'scan de labels van deze volle pallets: '\r\n\t\tselect id, pallet_label into #sfp from pallet_status where id in (select preferred_pallet_ids from wms_micro_outbound_lines where wms_micro_outbound_id=@uuid) --scanned full pallets\r\n\t\texec sp_api_modal_table @tmptable=N'#sfp'\r\n\t\treturn\r\n\tEND\r\nif @button_choose2='alles'\r\n\tbegin\r\n\t\t\r\n/*\t\tset @mol=(select top 1 id from q_wms_micro_outbound_lines mol\r\n\t\t\twhere mol.wms_micro_outbound_id =@uuid\r\n\t\t\t --AND\t(select count(*) from wms_micro_outbound_line_barcode where wms_micro_outbound_lines_id=mol.id)<mol.Amount\r\n\t\t\tand (select scan_serial_number_outbound from xstock where id=(mol.xstock_id)) = 1 -- ER MOET SERIAL GESCAND WORDEN\r\n\t\t\t--ALLES and mol.is_processed =0 -- als deze door de loods op 1 wordt gezet\r\n\t\t\torder by adv_pick_pos\r\n\t\t)  \r\n\t\t\r\n\t\tset @t=concat('mol:',@mol,N' alles')\r\n\t\texec sp_api_modal_text @t\r\n*/\r\n\t\t--exec sp_api_modal_alert @UUID\r\n\t\t--select * into #mol from Q_wms_micro_outbound_lines where wms_micro_outbound_id = @uuid\r\n\t\t/*\r\n\t\tselect  \r\n\t\t\t--is_processed,\r\n\t\t\t--container_number,\r\n\t\t\t--linked_amount,\r\n\t\t\tlinked_SERIALS as [serials@~col-sm-1],\r\n\t\t\tsku\r\n\t\t\t--lookupcode,\r\n\t\t\t\r\n\t\t\t into #mol \r\n\t\t\tfrom q_wms_micro_outbound_lines where wms_micro_outbound_id=@uuid--3297\r\n\t\texec sp_api_modal_table @tmptable=N'#mol'\t,@print=1\r\n\t\treturn\r\n\t\t*/\r\n\r\n\t\tselect [amt~col-2]=items, [sku~col-6]=sku, [ser_head~col-4]=left5 into #mob_info from mob_scan_info where mob_id=@uuid\r\n\t\texec sp_api_modal_table @tmptable=N'#mob_info'\t,@print=1, @orderby=N' order by 2'\r\n\t\treturn\r\n\r\n\t\t--exec sp_api_modal_clear\r\n\r\n\tend\r\n\r\nif @button_choose2='onvoltooid'\r\n\tbegin\r\n\t\t--infolijstje\r\n\t\tselect [mol_id~col-3]=ID -- nozzels per 240611\r\n\t\t\t\t,[pal_nr~col-3]=(select pallet_nr from w_pallet where id=scanned_pallet_id)\r\n\t\t\t\t,[scanned_pallet_id~col-6]=scanned_pallet_id\r\n\t\t\t\tinto #lijstje_onvoltooid\r\n\t\t\t\tfrom q_wms_micro_outbound_lines mol\r\n\t\t\twhere scanned_pallet_id is not NULL --240611 ! erbij moet een scanned pallet zijn voor deze mol selectie!\r\n\t\t\t\tAND remark <> 'pick' --240611 1433\r\n\t\t\t\tAND mol.wms_micro_outbound_id =@uuid\r\n\t\t\t--AND\t(select count(*) from wms_micro_outbound_line_barcode where wms_micro_outbound_lines_id=mol.id)<mol.Amount\r\n\t\t\t-- 230907 items zonder serienummer moeten wel SKU SCAN KRIJGEN... and (select scan_serial_number_outbound from xstock where id=(mol.xstock_id)) = 1 -- ER MOET SERIAL GESCAND WORDEN\r\n\t\t\tand (\r\n\t\t\t\t\tmol.is_processed =0 -- als deze door de loods op 1 wordt gezet\r\n\t\t\t\t\tOR\r\n\t\t\t\t\t--linked_serials <> amount\r\n\t\t\t\t\tlinked_amount <> amount --230901 dit betekent dat de (auto)assign nog niet compleet is (misschien nor replenish pallet maken etc.)\r\n\t\t\t\t)\t\r\n\t\tif (select count(*) from #lijstje_onvoltooid)>0 --if er voorgezet 240611\t\t\r\n\t\tBEGIN\r\n\t\t\texec sp_api_modal_table @tmptable=N'#lijstje_onvoltooid',@print=0\t\t\r\n\t\t\r\n\r\n\t\t\t--scan pallet-sticker\r\n\t\t\texec sp_api_modal_text N'scan de pallet sticker een van de genoemde pallets'\r\n\t\t\tEXEC sp_api_modal_input @name = '@ps', @value = @ps OUT ,@focus=1\r\n\t\t\t--but_10 er bij\r\n\t\t\tEXEC sp_api_modal_button @name='@but_10',@value = 'Check', @valueout = @but_10 OUT,@class='btn-danger',@key='Enter'; if @but_10 is NULL return\r\n\t\t\tif @ps is null return\r\n\t\t\tif left(@ps,3)<>'ps:'\r\n\t\t\tBEGIN\r\n\t\t\t\texec sp_api_modal_text N'Dit is geen Tracy pallet sticker QR code'\r\n\t\t\t\t--exec sp_api_modal_restart--231130\r\n\r\n\t\t\t\tRETURN\r\n\t\t\tEND\t\r\n\t\t\r\n\r\n\t\t\tset @this_pallet_id=right(@ps,len(@ps)-3)\r\n\t\t\tif not exists(select 1 from #lijstje_onvoltooid where [scanned_pallet_id~col-6]=@this_pallet_id)\r\n\t\t\tBEGIN\r\n\t\t\t\texec sp_api_modal_text 'Fout, deze pallet staat niet in de lijst..'\r\n\t\t\t\treturn\r\n\t\t\tEND\r\n\t\t\tELSE\r\n\t\t\tBEGIN\r\n\t\t\t\t-- zet @mol\r\n\t\t\t\tset @mol=(select [mol_id~col-3] from #lijstje_onvoltooid where [scanned_pallet_id~col-6]=@this_pallet_id )\r\n\t\t\tEND\r\n\t\t\t\r\n\t\t\t--einde infolijstje\r\n\t\tEND\r\n\t\tif @mol is null --fallback naar top 1 \r\n\r\n\t\tset @mol=(select top 1 id from q_wms_micro_outbound_lines mol\r\n\t\t\twhere mol.wms_micro_outbound_id =@uuid\r\n\t\t\t--AND\t(select count(*) from wms_micro_outbound_line_barcode where wms_micro_outbound_lines_id=mol.id)<mol.Amount\r\n\t\t\t-- 230907 items zonder serienummer moeten wel SKU SCAN KRIJGEN... and (select scan_serial_number_outbound from xstock where id=(mol.xstock_id)) = 1 -- ER MOET SERIAL GESCAND WORDEN\r\n\t\t\tand (\r\n\t\t\t\t\tmol.is_processed =0 -- als deze door de loods op 1 wordt gezet\r\n\t\t\t\t\tOR\r\n\t\t\t\t\t--linked_serials <> amount\r\n\t\t\t\t\tlinked_amount <> amount --230901 dit betekent dat de (auto)assign nog niet compleet is (misschien nor replenish pallet maken etc.)\r\n\t\t\t\t)\t\r\n\t\t\torder by adv_pick_pos\r\n\t\t)\r\n\t\t--set @t=concat('1:',@mol); exec sp_api_toast @T\r\n\t\tset @no_serials =(select case (select scan_serial_number_outbound from xstock where id=(select xstock_id from wms_micro_outbound_lines where id=@mol)) when 1 then 0 else 1 end)\r\n\t\t\r\n\t\t--set @t=concat('mol:',@mol,N' nog verwerken..',case when @no_serials=1 then '**NO SERIALS**' else '' end) --indicator dat er geen serienummers nodig zijn\r\n\t\t--240610\r\n\t\tset @t=concat('mol:',@mol,N' pallet nr: ',(select pallet_nr from w_pallet where id=(select scanned_pallet_id from wms_micro_outbound_lines where id=@mol)),N' op deze pallet nog ',(select l_items\t- isnull(serial_items,0) from mol where mol_id=@mol),' verwerken..',case when @no_serials=1 then '**NO SERIALS**' else '' end) --indicator dat er geen serienummers nodig zijn\r\n\t\t\r\n\t\texec sp_api_modal_text @T\r\n\t\t \r\n\tend\r\n\r\n\r\n\r\nif @mol is null \r\n\tbegin\r\n\t\texec sp_api_modal_alert N'Scan serienummers is voltooid.' --231130 was sp_api_modal_text\r\n\t\texec sp_api_modal_clear\r\n\t\tRETURN\r\n\tend\t\r\n\r\n--230918 extra dummyscan voor deze @mol, want inmiddels kan een pallet ge-replenished zijn waardoor het aantal micro-items inmiddels volledig beschikbaar is\r\n\texec auto_assign_wms_micro_items_to_wms_micro_outbound_line @LINE_id=@mol\r\n\texec assign_pallets_to_micro_outbound_from_line\t@Line =@mol\r\n------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n\r\nselect @xstock_id=xstock_id, @aantal_serials_nodig = amount  from wms_micro_outbound_lines where id=@mol\r\n\r\nselect * into #registered_serials from wms_micro_outbound_line_barcode where wms_micro_outbound_lines_id=@mol\r\nif (select count(*) from #registered_serials)>=@aantal_serials_nodig\r\n\tbegin\r\n\t\tset @T=concat(N'Er is al gescand.','')\r\n\t\texec sp_api_modal_text @T\r\n\t\tset @T=concat(N'Aantal gescande codes:',(select count(*) from wms_micro_outbound_line_barcode where wms_micro_outbound_lines_id=@mol))\r\n\t\texec sp_api_modal_text @T\r\n\t\t--exec sp_api_modal_table @tmptable=N'#registered_serials'\r\n\t\t--exec sp_api_modal_alert @uuid\r\n\t\tEXEC sp_api_modal_button @name='@button5',@value = 'Meer Scannen', @valueout = @button5 OUT,@class='btn-danger',@key='F9'\r\n\t\tif isnull(@button5,N'')<>N'Meer Scannen'\r\n\t\treturn\r\n\tend\t\r\n\r\n \r\n\r\n\r\nif isnull(@sku_oke,0)\t=0\r\n\tbegin\r\n\t\tset @T=concat(N'pickpositie: ',(select top 1 position_code from pallet_status where micro_pick_allowed=1 and xstock_id=@xstock_id and out_completed is null))\r\n\t\texec sp_api_modal_text @T, @class='h1'\r\n\t\tSET @T=concat(N'Aantal: ',@aantal_serials_nodig,'. Artikelomschrijving: ',(select lookupcode from xstock where id=@xstock_id))\r\n\t\texec sp_api_modal_text @T\r\n\t\tSET @T=concat(N'Scan de SKU: ',(select sku from xstock where id=@xstock_id))--, ' en ', @aantal_serials_nodig,' serienummers'\t)\r\n\t\texec sp_api_modal_text @T\r\n\t\t\r\n\t\tEXEC sp_api_modal_input @name = '@sku_check', @value = @sku_check OUT,@hidden=0,@focus=1 --, @type='textarea',@rows=20--,@inline = 1 -- (multi line input)\r\n\t\tEXEC sp_api_modal_button @name='@button3',@value = N'Check', @valueout = @button3 OUT,@class='btn-danger',@key='F5' --Enter kan niet verstoort de flow\r\n\t\tif @button3 is null return\r\n\t\tif @sku_check is null return\r\n\t\texec sp_api_modal_text @sku_check\r\n\t\t\r\n\tend\t\t\r\nif not exists(select 1 from wms_micro_outbound_lines mol \r\n\t\t\t\tjoin xstock s on s.id= mol.xStock_id \r\n\t\t\t\twhere mol.id=@mol and \r\n\t\t\t\t\t(\r\n\t\t\t\t\t\ttrim(s.sku)=trim(@sku_check) \r\n\t\t\t\t\t\tor \r\n\t\t\t\t\t\t--230912 OOK EAN TOESTAAN I.P.V. SKU ALS ER GEEN SERIENUMMERS GESCAND HOEVEN TE WORDEN\r\n\t\t\t\t\t\t( trim(s.EAN_CODE)>N'' AND @no_serials =1 AND trim(s.EAN_CODE)=trim(@sku_check) )\r\n\t\t\t\t\t)\r\n\t\t\t\t)\r\n\tBEGIN\r\n\t\tset @T=concat(@sku_check,' is de SKU van een verkeerd artikel.')\r\n\t\t--231128 beep er bij\r\n\t\texec sp_api_modal_beep 1100, 500 --error !\r\n\r\n\t\texec sp_api_toast @T --N'* VERKEERD ARTIKEL ! *'\r\n\t\tEXEC sp_api_modal_value @name = '@sku_check',@value = NULL\r\n\t\tEXEC sp_api_modal_value @name = '@button3',@value = NULL\r\n\t\tset @SKU_OKE=0\r\n\t\treturn\r\n\tEND\r\nset @sku_oke=1\r\n\r\n\r\n------231001-------\r\nadd_serials_to_mol:\r\n---- L A B E L ----\r\n--exec sp_api_toast N'serials to mol...'--231130\r\n--231001 als hier heen wordt gesprongen kan het zijn dat @no_serials onbekend is..\r\nset @no_serials =(select case (select scan_serial_number_outbound from xstock where id=(select xstock_id from wms_micro_outbound_lines where id=@mol)) when 1 then 0 else 1 end)\r\n\r\n\r\nset @T=concat(N'NOG: ',@aantal_serials_nodig - (select count(*) from wms_micro_outbound_line_barcode where wms_micro_outbound_lines_id=@mol),' serienummers. (save=bijwerken)')\r\nexec sp_api_modal_text @T\r\n\r\n\r\n--extra 230907\r\nif @no_serials =1 \r\n\tBEGIN\r\n\t\tset @scanned_codes='no serials required'\r\n\t\t--set @button =N'Save'\r\n\tEND\r\n\t\t--oud: voor 230907\r\n--> set @scanned_codes= (select serialnumbers from wms_micro_outbound_lines where id=@mol)\t\t--231211 NIEUW ER VOOR..\r\nEXEC sp_api_modal_input @name = '@scanned_codes', @value = @scanned_codes OUT , @type='textarea',@rows=8, @focus=1 --,@inline = 1 -- (multi line input)\r\nEXEC sp_api_modal_button @name='@button',@value = 'Save', @valueout = @button OUT,@class='btn-danger',@key='F6'\r\nif @button is null return; --231211 extra wacht op button\r\n\r\nif @button='Save' -- opslaan, zodat je ze niet kwijt raakt \r\n\tBEGIN\r\n\t\tif @scanned_codes > N''\r\n\t\t\tBEGIN\r\n\t\t\t\tif @no_serials =0 --NORMALE SITUATIE MET SERIENUMMERS VERPLICHTING\r\n\t\t\t\t\tBEGIN\r\n\t\t\t\t\t\t-- log, is al 2x een lifesaver geweest!\r\n\t\t\t\t\t\tupdate wms_micro_outbound_lines set serialnumbers=concat(serialnumbers,@scanned_codes) where id=@mol--=@ID\r\n\r\n\t\t\t\t\t\t-- unieke barcodes registreren bij de micro outbound line\r\n\t\t\t\t\t\t--declare @scanned_codes nvarchar(max) = (select top 1 serialnumbers from wms_micro_outbound_lines where nullif(trim(serialnumbers),N'') is not null)\r\n\t\t\t\t\t\t--select serialnumbers,*  from wms_micro_outbound_lines where nullif(trim(serialnumbers),N'') is not null\r\n\t\t\t\t\t\t/*\r\n\t\t\t\t\t\t--krijg de unieke codes uit de scans en \r\n\t\t\t\t\t\tselect line from scanresult_as_table(@scanned_codes) \r\n\t\t\t\t\t\t\twhere nullif(trim(line),N'') is not NULL --\tzonder blanco regels!\r\n\t\t\t\t\t\t\t\t-- evt lengrte afdwingen and len(line) >15\r\n\t\t\t\t\t\t\tgroup by line -- maak uniek\r\n\t\t\t\t\t\t*/\r\n\t\t\t\t\t\t--select * from \r\n\t\t\t\t\t\t--declare @mol int=297\r\n\t\t\t\t\t\tinsert into wms_micro_outbound_line_barcode(wms_micro_outbound_lines_id,Line)\r\n\t\t\t\t\t\t\tselect @mol, line\r\n\t\t\t\t\t\t\tfrom _1\r\n\t\t\t\t\t\t\tcross apply ( select line from scanresult_as_table(@scanned_codes) \r\n\t\t\t\t\t\t\t\t\t\t\twhere nullif(trim(line),N'') is not NULL --\tzonder blanco regels!\r\n\t\t\t\t\t\t\t\t\t\t\t\t-- evt lengte afdwingen and len(line) >15\r\n\t\t\t\t\t\t\t\t\t\t\tgroup by line -- maak uniek\r\n\t\t\t\t\t\t\t\t\t\t) sr\r\n\t\t\t\t\t\t\twhere --beter pas bij toekennen beperken, want zo blijft deze scan-actie redelijk universeel  len(sr.line) >13 and --230823 zo hebben we geen last van de EAN CODES VAN AGNEOVO\r\n\t\t\t\t\t\t\t\tnot exists(select 1 from wms_micro_outbound_line_barcode where Line=sr.line)\r\n\r\n\t\t\t\t\t\t-- select * from wms_micro_outbound_line_barcode\r\n\t\t\t\t\t\t\r\n\r\n\t\t\t\t\t\t--EXEC sp_api_modal_button @name='@button2',@value = 'Klaar', @valueout = @button2 OUT,@class='btn-danger',@key='F7'\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t--set @T=concat(N'Aantal gescande codes:',(select count(*) from wms_micro_outbound_line_barcode where wms_micro_outbound_lines_id=@mol))\r\n\t\t\t\t\t\t--exec sp_api_modal_text @T\r\n\t\t\t\t\t\t\t--select * into #unique from wms_micro_outbound_line_barcode where wms_micro_outbound_lines_id=@mol\r\n\t\t\t\t\t\t\t--exec sp_api_modal_table @tmptable=N'#unique'\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t--GELIJK TOEKENNEN\r\n\t\t\t\t\t\texec assign_scanned_serials_to_micro_items \r\n\t\t\t\t\t\t\t\t@mob=@uuid -- KOPPEL DE MICRO ITEMS (en verwijder eventueel de overscans)\r\n\t\t\t\t\t\t\t\t,@remove_unassigned =1\r\n\t\t\t\t\t\t\r\n\t\t\t\t\tEND\t--(OPLSAAN MET SERIENUMMER VERWERKEN)\r\n\t\t\t\t--AUTOMATISCH KLAARBOEKEN PER MOL\r\n\t\t\t\tif @no_serials =1 --230907 altijd conform bij NO SERIALS\r\n\t\t\t\t\t--bijserienummers moet het aantal overeenkomen\r\n\t\t\t\t\tor exists (select 1 from q_wms_micro_outbound_lines where id=@mol and linked_serials=Amount) -- volledig toegekend! was: @button2=N'Klaar' \r\n\t\t\t\t\tbegin\r\n\t\t\t\t\t\tupdate wms_micro_outbound_lines set is_processed =1 where id=@mol  -- 230824 op processed zetten,zodat de volgende gekozen kan worden..\r\n\t\t\t\t\t\t--230828 dit verwijdert de scans die niet geloppeld zijn aan items.\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t--exec sp_api_modal_alert N'items volledig gescand, scan QR voor eventueel volgende items.'\t\r\n\t\t\t\t\t\texec sp_api_toast N'items volledig gescand, scan QR voor eventueel volgende items.'\t\r\n\t\t\t\t\t\t--exec sp_api_modal_restart --231130 ipv clear\r\n\t\t\t\t\t\t--exec sp_api_modal_value @name=N'@button_gearriveerd_bij_pallet'\r\n\t\t\t\t\t\texec sp_api_modal_clear --231211 er bij\r\n\t\t\t\t\t\treturn\r\n\t\t\t\t\t\t--EXEC sp_api_modal_values_clear -- @ignore = N'company'\r\n\t\t\t\t\t\t-- voor alert gezet exec sp_api_modal_clear\r\n\t\t\t\t\t\t--EXEC sp_api_modal_restart --230907 proberen..\r\n\t\t\t\t\tend\t\r\n\t\t\t\t\r\n\t\t\tEND\r\n\t\t--EXEC sp_api_modal_value @name = '@button',@value = NULL \t\t--231211 save button un-clicken\t\r\n\t\t--EXEC sp_api_modal_value @name = '@sku_ok',@value = NULL\t\t\t--231211\r\n\t\t--EXEC sp_api_modal_value @name = '@sku_check',@value = NULL\t\t--231211\r\n\t\t--EXEC sp_api_modal_value @name = '@scanned_codes',@value = NULL\t--231211\r\n\t\t--return\t\r\n\t\texec sp_api_modal_clear --restart--231211 test restart ! clear --230907\t--als je hier niet cleart, dan kan je tussendoor opslaan..\r\n\t\treturn\r\n\tend\r\n\r\n----------------------\r\n-- LABELS\r\n----------------------\r\nexec sp_api_modal_clear -- 231211 TEST ER BIJ \r\nRETURN\r\nGOFULL:\r\nif @this_pallet_type ='FULL' --> SHOW SCAN BUTTON!\r\nBEGIN\r\n\tEXEC sp_api_modal_button @name='@button_scan_serials_for_mol',@value = 'Scan serials', @valueout = @button_scan_serials_for_mol OUT,@class='btn-danger'\r\n\t--tot hier inserted 231001 gelijk hier mogelijkheid om serienummers te scannen:\r\n\tif @button_scan_serials_for_mol is null return\t\r\n\tif @button_scan_serials_for_mol='Scan serials' goto add_serials_to_mol --231001\r\nEND\r\nRETURN --GOFULL\r\n\r\nGOREPLENISH:\r\nif @this_pallet_type ='REPLENISH' --> SHOW REPLENISH BUTTON!\r\nBEGIN\r\n\tif @replenish_loc is null \r\n\tBEGIN\r\n\t\tset @replenish_loc=(select pick_position from xstock where id=@this_xstock_id)\r\n\tEND\t\r\n\t--check of de replenishment al is geregistreerd op de pallet\r\n\t-- losse items picken en darvan serienummers scannen is niet hier. dit is alleen replenishen!\r\n\tif not exists( select * from w_pallet where id=@this_pallet_id and micro_pick_allowed=1)\r\n\tBEGIN\r\n\t\tEXEC sp_api_modal_input @name = '@replenish_loc', @value = @replenish_loc OUT \r\n\t\tEXEC sp_api_modal_button @name='@button_replenish',@value = 'Replenish NOW', @valueout = @button_replenish OUT,@class='btn-danger'\r\n\t\tif @button_replenish is null return\t\r\n\t\tif @button_replenish='Replenish NOW' --hier evt jump naar separaat replenishment\r\n\t\tBEGIN\r\n\t\t\tif nullif(trim(@replenish_loc),N'') is NULL\r\n\t\t\tBEGIN\r\n\t\t\t\texec sp_api_modal_text N'REPLENISHMENT LOCATION REQUIRED'\r\n\t\t\t\tRETURN\r\n\t\t\tEND\r\n\t\t\tupdate w_pallet set micro_pick_allowed=1,position_code=@replenish_loc where id=@this_pallet_id\r\n\t\t\tupdate wms_micro_outbound_lines set scanned_pallet_id=@this_pallet_id where id=@pallet_mol_id\r\n\t\t\texec sp_api_modal_clear\r\n\t\t\t--PICKLOKATIE !!\r\n\t\t\t--TODO...\r\n\t\t\t--+ EVENTUEEL HELE REPLENISH KOP\r\n\t\tEND\r\n\tEND\r\nEND\t\r\nRETURN --GOREPLENISH\r\n\r\n\r\n\t\t\t\t\r\n\r\n\r\n/*\r\n----231001----\r\nreplenish_mol:\r\n----LABEL-----\r\nupdate w_pallet set micro_pick_allowed=1 where id=\r\nreturn\r\n*/\r\n\r\n/* --230821 RESET UITGESCHAKELD\r\nEXEC sp_api_modal_button @name='@button4',@value = 'Reset', @valueout = @button4 OUT,@class='btn-danger',@key='F8'\r\n\r\nif @button4=N'Reset'\r\n\tBEGIN\r\n\t\tdelete from wms_micro_outbound_line_barcode where wms_micro_outbound_lines_id=@mol\r\n\t\tEXEC SP_API_MODAL_CLEAR\r\n\t\tEXEC sp_api_modal_value @name = '@button4',@value = NULL\r\n\tend\r\n*/\r\n-- als het aantal in #unique overeenkomt met het aantal nog te vullen serienummers dan kunnen ze worden toegekend\r\n\t",
                    "action_id": 692,
                    "action_name": "#qr_action_verwerk_micro_pick_v11",
                    "source_table": "api_actions"
                },
                {
                    "sql_source": "--\t_tracy_outbound-scanner-podcast\r\n--\tin main menu, add this: \t```  EXEC sp_api_modal_action @name='RWS-podcast'  ```\r\nexec sp_api_modal_text N'Listen to the deep dive podcast about Rotterdam Warehouse Solutions',@class='h4'\r\nEXEC sp_api_modal_audio @url = N'https://apis.tsql.app/storage/fn7sbi8mls7stkabcoxwpzmukhqwpzh3', @autoplay = 0, @controls = 1\r\n\r\nEXEC sp_api_modal_text N'click Quit/Exit button to end the action.'\r\nDECLARE @ButtonQuit nvarchar(128)\r\nEXEC sp_api_modal_get_value @name='@ButtonQuit', @value=@ButtonQuit OUT;\r\nEXEC sp_api_modal_button \r\n\t@name='quit',\r\n\t@value='Quit this Action', \r\n\t@class='btn-secondary', \r\n\t@valueout=@ButtonQuit OUT;\r\n\r\nIF @ButtonQuit IS NOT NULL\r\nBEGIN\r\n\t--SET @Quit = 1;\r\n\tEXEC sp_api_modal_clear;\r\n\tRETURN;\r\nEND",
                    "action_id": 723,
                    "action_name": "RWS-podcast",
                    "source_table": "api_actions"
                },
                {
                    "sql_source": "--241018 niet compleet...\r\n-- 2 bewerkingsactie zijn uitgeschakeld (loskoppelen items en instructie glad trekken)\r\n-- error met select..\r\n\r\n\r\n\r\nEXEC sp_api_modal_text @text=N'TSQL.APP Verwijder micro items van gereedstaande micro outbound',@class='h4'\r\n\r\n\r\n\tEXEC sp_api_modal_text N'kies een outbound'\r\n\tDECLARE @mob_id -- please rename @mob_id to your situation\r\n\t\tNVARCHAR(MAX); EXEC sp_api_modal_get_value @name='@mob_id', @value=@mob_id OUT;\t\r\n\t\r\n\tSELECT id, name=out_ref INTO #tmp FROM wms_micro_outbound\r\n\tEXEC sp_api_modal_select_table @tmptable = '#tmp', @value = @mob_id OUT ,@no_isam = 1\r\n\t\t\r\n/*\t\r\n\tDECLARE @but_mob --(ctrl-f to rename)\r\n\t\t\tNVARCHAR(MAX); EXEC sp_api_modal_get_value @name='@but_mob', @value=@but_mob OUT; \t\t\t\r\n\t\t\r\n\t-- do something and wait for button\r\n\t\t\r\n\tEXEC sp_api_modal_button @name='@but_mob',@value = 'verder...', @valueout = @but_mob OUT, @class='btn-danger' \r\n\t\t--,@key='Enter'\t\t\r\n\tIF @but_mob IS NULL RETURN\t--button needs to be clicked to continue, otherwise action code ends here..\r\n*/\t\t\r\n\t--exec sp_api_modal_alert N'kappen'\r\n\t--er is nu een mob, kies een mol\r\n\tEXEC sp_api_modal_text N'kies een regel van de outbound'\r\n\tDECLARE @mol_id \tNVARCHAR(MAX); EXEC sp_api_modal_get_value @name='@mol_id', @value=@mol_id OUT;\t\r\n\t\r\n\tSELECT id, name=concat(Amount,' - ',sku) INTO #mol FROM q_wms_micro_outbound_lines where wms_micro_outbound_id=@mob_id\r\n\tEXEC sp_api_modal_select_table @tmptable = '#mol', @value = @mol_id OUT ,@no_isam = 1\r\n\t\t\r\n\t\r\n\tDECLARE @but_mol\t\tNVARCHAR(MAX); EXEC sp_api_modal_get_value @name='@but_mol', @value=@but_mol OUT; \t\t\t\r\n\t\t\r\n/*\t\t\r\n\tEXEC sp_api_modal_button @name='@but_mol',@value = 'verder na mol kiezen...', @valueout = @but_mol OUT, @class='btn-danger' \r\n\t\t--,@key='Enter'\t\t\r\n\tIF @but_mol IS NULL RETURN\t--button needs to be clicked to continue, otherwise action code ends here..\r\n*/\t\r\n\r\n\r\n\r\n\r\n\r\n\tDECLARE @t NVARCHAR(MAX) = CONCAT('Selected outbound is : ',(SELECT concat(id,' ',out_ref) from wms_micro_outbound where id=@mob_id))\r\n\tEXEC sp_api_modal_text @text=@t, @class='h2'\r\n\r\n\tIF @mol_id is null -- niet direct een mob geselecteerdopgegeven\r\n\tBEGIN\r\n\t\tEXEC sp_api_modal_text N'of geef een gescand serienummer'\r\n\t\tDECLARE @input nvarchar(max); EXEC sp_api_modal_get_value @name='@input', @value=@input OUT;\t\r\n\t\tDECLARE @input_button \tnvarchar(max); EXEC sp_api_modal_get_value @name='@input_button', @value=@input_button OUT;\t\t\t\r\n\t\tEXEC sp_api_modal_input @name = '@input', @value = @input OUT \r\n\r\n\t\tEXEC sp_api_modal_button @name='@input_button',@value = 'Confirm input', @valueout = @input_button OUT,@class='btn-danger'--,@key='Enter'\t\t\r\n\t\tIF @input_button IS NULL RETURN\t--input is required, otherwise action code ends here..\r\n\t\tEXEC sp_api_toast @input--, @speech=@input\r\n\t\t--input snippet ends here\r\n\r\n\t\t\r\n\t\tselect @mol_id=(select top 1 wms_micro_outbound_lines_id from wms_micro_item where item_serial_number=@input)\r\n\t\t\r\n\t\tif @mol_id is null return\r\n\t\t--exec sp_api_modal_alert @mol_id\r\n\tEND\r\n\tselect * into #u from wms_micro_item where wms_micro_outbound_lines_id=@mol_id\r\n\t--test exec sp_api_modal_table @tmptable=N'#u',@print=1\r\n\r\n\r\n\r\nDECLARE @var01 \r\n\t\tNVARCHAR(MAX); EXEC sp_api_modal_get_value @name='@var01', @value=@var01 OUT;\t\r\nDECLARE @selected_ids nvarchar(128)\r\n\r\nDECLARE @multi bit = 1\r\nDECLARE @use_table bit = 1\r\n\r\n--exit button (action ends)\r\nDECLARE @exit nvarchar(max); EXEC sp_api_modal_get_value @name='@exit',@value = @exit OUT \r\nEXEC sp_api_modal_button @name='@exit',@value = 'Exit', @valueout = @exit OUT,@class='btn-danger',@key='Esc'\r\nIF @exit is not NULL\r\nBEGIN\r\n\tEXEC sp_api_modal_clear\r\nEND\t\r\n--prepare table and list\r\nSELECT id=id, name=item_serial_number, selected=0  INTO #tmptable FROM #u order by item_serial_number\r\n\r\n\r\n\r\nif @use_table =1 -- gebruik dan de table\r\nBEGIN\r\n\tEXEC sp_api_modal_choose \r\n\t\t@value = @var01 OUT \r\n\t\t,@multi = @multi --1 --allow multiple values\r\n\t\t,@tmptable = '#tmptable'\r\n\tSET @T=concat('selected: ',@var01)\r\n\tEXEC sp_api_modal_text @T\t\r\n\tEXEC sp_api_modal_table @tmptable=N'#tmptable'\r\nEND\r\n\r\nIF exists (select 1 from #tmptable where selected=1) \r\nBEGIN\r\n\tDECLARE @but_del_micro \tNVARCHAR(MAX); EXEC sp_api_modal_get_value @name='@but_del_micro', @value=@but_del_micro OUT; \t\t\t\r\n\t\t\r\n\tEXEC sp_api_modal_button @name='@but_del_micro',@value = 'verwijder de geselecteerde micro items van de outbound', @valueout = @but_del_micro OUT, @class='btn-danger' \r\n\t\t--,@key='Enter'\t\t\r\n\tIF @but_del_micro IS NOT NULL\r\n\tBEGIN\r\n\t\tEXEC sp_api_modal_alert N'zeker weten???'\r\n\t\tdeclare @IDS_lijst nvarchar(max)=(select concat(id,',') from #tmptable where selected=1)\r\n\t\tEXEC sp_api_modal_alert @t\r\n\t\t\r\n\t\t\r\n\t\t--------------------------------------------------------------\r\n\t\t-- koppeling_intrekken\r\n\t\t-- action: https://rws.tsql.app/apicard/3545/card_actions/4809\r\n\t\t--\r\n\t\t--------------------------------------------------------------\r\n\t\t/* --aan/uit\r\n\t\tupdate wms_micro_item \r\n\t\t\tset w_pallet_pick_id = NULL\t\r\n\t\t\t\t,wms_micro_outbound_lines_id = NULL\r\n\t\t\t\t,item_serial_number =null\r\n\t\twhere id in ({@IDS_lijst})\t\r\n\t\t--*/\r\n\t\t-- en tevens:\r\n\r\n\t\t--------------------------------------------------------------\r\n\t\t--\thttps://rws.tsql.app/apicard/3570/card_actions/6014\r\n\t\t-- change_amount (met terugkoppeling naar de mob_instruction)\r\n\t\t--\tlet op : mag alleen maar op deze manier!\r\n\t\t-- 240328 open voor directie\r\n\t\t--------------------------------------------------------------\r\n\r\n\t\tif (select remark from wms_micro_outbound_lines where id=@mol_id) = N'full' --@user <> N'rick@tracy.nu'\r\n\t\tbegin\r\n\t\t\texec sp_api_modal_alert N'Mag alleen bij losse items; geen volle pallets...'\r\n\t\t\treturn\r\n\t\tend\t\r\n\r\n\r\n\t\tdeclare @amount int\r\n\t\tif @mob_id is NULL\r\n\t\tBEGIN\r\n\t\t\texec sp_api_toast N'GEEN MICRO OUTBOUND'\r\n\t\t\treturn\r\n\t\tEND\r\n\r\n\t\tset @amount=(select amount from wms_micro_outbound_lines where id=@mol_id) - (select af=count(*) from #tmptable where selected=1)\r\n\t\texec sp_api_modal_alert @amount\r\n\t\tRETURN\r\n\r\n\r\n\t\t--execute sp_api_toast @amount\r\n\t\t/* --TEST !!!!\r\n\t\tif @amount>=0\r\n\t\tBEGIN\r\n\t\t\tupdate wms_micro_outbound_lines set  amount =@amount where id=@id\r\n\t\t\tupdate q_mob_instruction set amount=amount-mol_diff where amount >= 0 AND mol_diff<>0 AND wms_micro_outbound_id=@mob_id\r\n\t\tEND\r\n\t\t*/\r\n\r\n\t\tEXEC sp_api_modal_clear\r\n\t\tRETURN\r\n\r\n\t\t\r\n\tEND\r\n\r\nEND\r\n\r\n\r\n\r\n\r\n\r\n-- Add 'Quit' button\r\nexec sp_api_modal_text N'click Quit/Exit button to end the action.'\r\nDECLARE @ButtonQuit nvarchar(128)\r\nEXEC sp_api_modal_get_value @name='@ButtonQuit', @value=@ButtonQuit OUT;\r\nEXEC sp_api_modal_button \r\n\t@name='quit',\r\n\t@value='Quit this Action', \r\n\t@class='btn-secondary', \r\n\t@valueout=@ButtonQuit OUT;\r\n\r\nIF @ButtonQuit IS NOT NULL\r\nBEGIN\r\n\t--SET @Quit = 1;\r\n\tEXEC sp_api_modal_clear;\r\n\tRETURN;\r\nEND\r\n\t",
                    "action_id": 730,
                    "action_name": "rick_delete",
                    "source_table": "api_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_modal_html",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@html",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "N''",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@html n"
                },
                {
                    "name": "@class",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@class n"
                },
                {
                    "name": "@use_placeholder",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@use_placeholder n"
                },
                {
                    "name": "@print",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@print b"
                },
                {
                    "name": "@printonly",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@printonly b"
                },
                {
                    "name": "@iframe",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@iframe b"
                },
                {
                    "name": "@name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 7,
                    "full_declaration_from_def": "@name n"
                },
                {
                    "name": "@iframe_src",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 8,
                    "full_declaration_from_def": "@iframe_src n"
                },
                {
                    "name": "@height",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 9,
                    "full_declaration_from_def": "@height n"
                },
                {
                    "name": "@direct_post",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 10,
                    "full_declaration_from_def": "@direct_post b"
                },
                {
                    "name": "@value",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 11,
                    "full_declaration_from_def": "@value n"
                },
                {
                    "name": "@iframe_message_data",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 12,
                    "full_declaration_from_def": "@iframe_message_data n"
                },
                {
                    "name": "@inline",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 13,
                    "full_declaration_from_def": "@inline b"
                },
                {
                    "name": "@type",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 14,
                    "full_declaration_from_def": "@type n"
                }
            ],
            "embedded_example": "EXEC sp_api_modal_html @html = N'<i>bold</i>',@class = N'h1' --\r\n\t--,@use_placeholder nvarchar(128) = NULL\r\n\t--,@iframe = 1",
            "embedded_description": null,
            "co_occurrence_stats": {
                "dbo.sp_api_modal_menu_user": 1,
                "dbo.sp_api_toast": 3,
                "dbo.sp_api_modal_action": 1,
                "dbo.sp_api_modal_route": 1,
                "dbo.sp_api_modal_text": 3,
                "dbo.sp_api_modal_button": 3,
                "dbo.sp_api_modal_modal": 2,
                "dbo.sp_sys_admin_main_menu": 1,
                "dbo.hasRole": 1,
                "dbo.sp_api_modal_input": 1,
                "dbo.sp_api_modal_clear": 2,
                "dbo.sp_api_modal_alert": 1,
                "dbo.sp_api_email": 1,
                "dbo.sp_api_modal_table": 1,
                "dbo.sp_api_modal_value": 1,
                "dbo.sp_api_modal_values_clear": 1,
                "dbo.sp_api_modal_restart": 1,
                "dbo.sp_api_modal_get_value": 2,
                "dbo.sp_api_modal_choose_list": 1,
                "dbo.sp_api_modal_choose": 1
            },
            "real_usage_examples": [
                {
                    "sql_source": "DECLARE @text nvarchar(max)\n,@hclass nvarchar(128) = 'h5 text-muted mt-3'\n,@bclass nvarchar(128) = 'btn-primary'\n\nEXEC sp_api_modal_modal @class = 'pt-5'\nIF dbo.hasRole('admin') > 0 BEGIN\n\tSET @text = N'You''re at ' + @hostname + ' [@main_db]'\n\tEXEC sp_api_toast @text=@text,@seconds=3\nEND\n\nDECLARE @colorblind BIT = 0\nIF dbo.hasClaims('sub=email@anacogreeve.nl') > 0\nBEGIN\nSET @colorblind = 1\nEND\n\nDECLARE @extendedMenu BIT = 0\nIF dbo.hasClaims('sub=email@anacogreeve.nl') > 0\nBEGIN\nSET @extendedMenu = 1\nEND\n\nDECLARE @loods BIT = 0\nIF dbo.hasRole('loodsbaas,loodsmedewerker,ompakker,keurmeester') > 0\nBEGIN\nSET @loods = 1\nEND\n\n--ALS EERSTE!\n--EXEC sp_api_modal_action N'Scanner Test',@class='btn-danger'\nEXEC sp_api_modal_action N'Scanner',@class='btn-danger'\nEXEC sp_api_modal_action N'Mobilephone',@class='btn-danger'\nEXEC sp_api_modal_action N'detepo',@class='btn-danger'\nEXEC sp_api_modal_action N'micro_check_scan',@class='btn-danger' --rh 230825\nEXEC sp_api_modal_action N'test_rick_2',@class='btn-danger' --rh 230825\nEXEC sp_api_modal_action N'NEOVO_PALLET_SCAN',@class='btn-danger'\nEXEC sp_api_modal_action N'Barcode Scanner',@class='btn-tracy'\nEXEC sp_api_modal_action N'check_serial_number' --rh231218\nEXEC sp_api_modal_action N'check_pallets' --241129\nEXEC sp_api_modal_action N'check_pallets_in_stock' --241129\nEXEC sp_api_modal_action N'check_data' --rh240719\nEXEC sp_api_modal_action @name='RWS-podcast'\nEXEC sp_api_modal_action @name='rick_delete'\n\n\n--START\n\nIF @button = 'Quick menu'\n\tBEGIN\n\t\tEXEC #sys_quick_menu @path\n\t\tRETURN\n\tEND\n\nEXEC sp_api_modal_text 'Hoofdmenu','h1'\n\nif  dbo.hasClaims(N'tenant=AGNEOVO') >0 or dbo.hasRole('admin,directie') > 0\n\tbegin \n\t\t--EXEC sp_api_modal_action @name='pallet_status_agneovo',@class = 'btn-white border-dark text-dark' --test 230808\n\t\tEXEC sp_api_modal_route @cardname='pallet_status_agneovo'\t\n\tend\n\nEXEC sp_api_modal_route @cardname='wms_micro_outbound'\n\nIF dbo.hasClaims('sub=mterlouw@rwsbv.com') > 0 or dbo.hasClaims('sub=kterlouw@rwsbv.com') > 0 --250415\n\tor dbo.hasClaims('sub=rick@tracy.nu') > 0 OR dbo.hasRole('admin,directie,barsan,barsan_bo') > 0\nBEGIN\n\tEXEC sp_api_modal_route @cardname='douanevoorraadmutatie'\nEND\t\n\nIF dbo.hasRole('admin,directie,loodsmedewerker') > 0\nBEGIN\n\tEXEC sp_api_modal_route @cardname='vehicle_export_staging',@search= '?red=open'\nEND\t\n\n BEGIN\n\t-----------------\n\t-- ADMIN QUICK LIJST\n\t-----------------\n\n\t\tIF dbo.hasRole('admin') > 0\n\t\tBEGIN\n--\t\tEXEC sp_api_modal_text 'Admin Knopjes',@hclass\n--\t\tSET @bclass = 'btn btn-linkt border-danger text-dark'\n\t\t/*\n\t\tEXEC sp_api_modal_route @name='Product (Hoofdgroup)',@pathname='/xproduct',@search= '?red=',@class=@bclass,@key='P',@group = 'Voorraadbeheer'\n\t\tEXEC sp_api_modal_route @name='Intrastat Fout of Geen',@pathname='/xproduct',@search= '?red=Intrastat_ID+Empty+OR+Wrong',@class=@bclass,@key='I',@group = 'Voorraadbeheer'\n\t\tEXEC sp_api_modal_route @name='Geen Customs Group',@pathname='/xproduct',@search= '?red=Geen+Douane+Groep',@class=@bclass,@key='D',@group = 'Voorraadbeheer'\n\t\tEXEC sp_api_modal_route @name='Onvolledig Customs Art',@pathname='/xproduct',@search= '?red=Niet+(Volledig)+in+Customs+Art',@class=@bclass,@key='L',@group = 'Voorraadbeheer'\n\t\t*/\n\t\t\n\t\tEXEC sp_api_modal_route @name='To Do',@pathname='/api_todo',@search= '?red=Niet+klaar',@class='btn btn-linkt border-danger text-dark',@key='T'\n\t\tEXEC sp_api_modal_route @name='API DATASET',@pathname='/api_data_set'\n\t\tEND\n\t\n\t--------------\n\t-- Warehouse\n\t--------------\n--\tEXEC sp_api_modal_text 'Warehouse',@hclass\n\n\tIF @colorblind = 1\n\t\tBEGIN\n\t\t\tSET @bclass = 'btn-primary'\n\t\tEND\n\tELSE\n\t\tBEGIN\n\t\t\tSET @bclass = 'btn-secondary'\n\t\tEND\nIF dbo.hasRole('user,admin,directie') > 0\n\tbegin\n\n\t\n\t\tEXEC sp_api_modal_route @name='Vessel',@pathname='/w_vessel',@class=@bclass,@key='V'--, @Search='?red=Open+en+Nieuw',@group = 'main'\n\t\tEXEC sp_api_modal_route @name='Bill of Lading',@pathname='/w_bl',@class=@bclass,@key='Alt+B'--, @Search='?red=recent'--,@group = 'main'\n\t\tEXEC sp_api_modal_route @name='Forecast',@pathname='/forecast',@class=@bclass,@key='F'--, @Search='?red=Open+en+Nieuw',@group = 'main'\n\t\t\n\n\t--\tEXEC sp_api_modal_route @name='Inbound',@pathname='/inbound',@class=@bclass,@key='I'--, @Search='?red=Open+en+Nieuw',@group = 'main'\n\t--\tEXEC sp_api_modal_route @name='Outbound Transport',@pathname='/wms_out_transport',@class=@bclass,@key='O'--, @Search='?red=Open+en+Nieuw',@group = 'main'\n--\t\tEXEC sp_api_modal_action @name='report_menu',@class = 'btn-white border-dark text-dark'\n\t\t\n\n\t\t\n\tend\n--@name='Inbound Transport.',\n--\t\tEXEC sp_api_modal_route @name='Inbound Transport',@pathname='/wms_in_transport',@class=@bclass,@key='T'--, @Search='?red=Open+en+Nieuw',@group = 'main'\n\t\tEXEC sp_api_modal_route @name='Inbound Transport',@cardname='wms_in_transport',@class=@bclass,@key='T'--, @Search='?red=Open+en+Nieuw',@group = 'main'\n\n--IF dbo.hasRole('viewer') > 0\n\t--begin\n\n  \n\n\t--220319 NIEUW: DE CARD BEPAALT ZELF AAN DE HAND VAN DE ROLLEN OF HIJ GERENDERD WORDT..\nIF dbo.hasRole('loodsmedewerker') = 0 --specifiek ** UITSLUITEN ** bij menu voor loodsmedewerker\n\tbegin\n\t\tEXEC sp_api_modal_route @name='Inbound',@cardname='inbound',@class=@bclass,@key='I'\n\t\tEXEC sp_api_modal_route @name='Outbound Transport',@cardname='wms_out_transport',@class=@bclass,@key='O',@group = 'outbound'\n\t\tEXEC sp_api_modal_route @name='Micro outbound form',@cardname='wms_micro_outbound',@class=@bclass,@key='O'\t,@group=N'micro_outbound'\t\n\t\t\n\tend\n--230306 specifiek uitsluiten voor ensign\nif  dbo.hasClaims(N'tenant=VIAROT') =0 \t--iedereen behalve viaensign\t\n\tEXEC sp_api_modal_route @name='Outbound orders',@cardname='outbound_form',@class=@bclass,@key='O',@group = 'outbound'\n\n\t\tIF dbo.hasRole('admin,directie') > 0 -- micro werk!\n\t\t\tbegin\n\t\t\t\tEXEC sp_api_modal_route @name='Micro outbound form',@cardname='wms_micro_outbound',@class=@bclass,@key='O'\t,@group=N'micro_outbound'\t\n\t\t\t\tEXEC sp_api_modal_route @name='Replenishment',@cardname='w_pallet_replenishment',@class=@bclass,@key='R'\t,@group=N'micro_outbound'\t\t\n--\t\t\t\tEXEC sp_api_modal_route @name='Micro item stock info',@cardname='wms_micro_item_stock_info',@class=@bclass,@key='R'\t,@group=N'micro_outbound',@search= '?red=selecteerbare_pallets'\n\t\t\t\tEXEC sp_api_modal_route @name='micro_totals',@cardname='micro_totals',@class=@bclass,@key='T'\t,@group=N'micro_outbound'\n\n\t\t\t\t--231024\n\t\t\t\tEXEC sp_api_modal_route @cardname='micro_items_stock_per_position_agneovo'\n\t\t\tend\t\n\t\tEXEC sp_api_modal_route @name='Stock by Client',@cardname='wms_rv_pal_stock',@class=@bclass,@key='C'\n\n--230306 specifiek uitsluiten voor ensign\nif  dbo.hasClaims(N'tenant=VIAROT') =0 \n\t--alleen viarot uitsluiten, dus als je de claim niet hebt mag je dit item zien\n\tEXEC sp_api_modal_route @name='Stock by BL',@cardname='wms_rv_pal_stock_bl',@class=@bclass,@key='B'\n\n\t\tEXEC sp_api_modal_route @name='Stock by Container',@cardname='wms_rv_pal_stock_cnt',@class=@bclass,@key='N'\n\t\t--micro stock info\n--\t\tEXEC sp_api_modal_route @name='Stock per micro item',@cardname='micro_totals',@class=@bclass,@key='T'\t\n--per lotnumber\nIF dbo.hasRole('loodsmedewerker') = 0\n\tbegin --specifiek uitsluiten bij menu voor loodsmedewerker\n\t\tEXEC sp_api_modal_route @name='Stock per micro item',@cardname='micro_totals_lotnr_w_lot',@class=@bclass,@key='T'\t\n\tend\t\n\n\t\t--230114\n\t\tEXEC sp_api_modal_route @cardname='wms_io'\t\n\t\t--230710 uitgezet, driver-screen wordt via link direct gestart EXEC sp_api_modal_route @cardname='driver_screen'\t\n\t\tEXEC sp_api_modal_route @cardname='inbound_form_barsan'\t\n\t\t\n--\tend\n\t\t\n\t--------------\n\t-- Rapportage\n\t--------------\n\tEXEC sp_api_modal_action @name='report_menu',@class = 'btn-success'--'btn-white border-dark text-dark'\n\n\tIF dbo.hasRole('user,admin,directie') > 0\n\t\tBEGIN\n\t\t\t--EXEC sp_api_modal_text 'Rapportage (Maand Afsluiten)',@hclass\n\t\t\t--EXEC sp_api_modal_route @name='Aangifte',@pathname='/aangifte',@search= '',@class = 'btn-white border-dark text-dark',@key='A'\n\t\t\tEXEC sp_api_modal_route @name='Crossdock',@pathname='/w_crossdock',@class=@bclass,@key='C'\n\t\t\t\n\t\tEND\n\n\n/*\n\t-----------------\n\t-- VOORRAAD LIJST\n\t-----------------\n--\tEXEC sp_api_modal_text 'Artikelbestand (Voorraad)',@hclass\n--\tSET @bclass = 'btn-secondary'\n\t--EXEC sp_api_modal_route @name='xstock',@pathname='/xstock',@search= '',@class=@bclass,@key='X'\n\n\tIF @colorblind = 1\n\t\tBEGIN\n\t\t\tEXEC sp_api_modal_route @name='Totaal Voorraad per lokatie',@pathname='/stocklocation',@search= '',@class='btn-primary',@key='T',@group = 'Voorraad'\n\t\t\tEXEC sp_api_modal_route @name='Voorraad per lokatie',@pathname='/voorraadlokatie',@search= '',@class='btn-primary',@key='X',@group = 'Voorraad'\n\t\t\tEXEC sp_api_modal_route @name='Voorraad [Artikelen]',@pathname='/xstock',@search= '?red=',@class='btn-primary',@key='S',@group = 'Voorraad'\n\t\t\t\n\t\tEND\n\tELSE\n\t\tBEGIN\n\t\tEXEC sp_api_modal_route @name='Totaal Voorraad per lokatie',@pathname='/stocklocation',@search= '',@class=@bclass,@key='T',@group = 'Voorraad'\n\t\t\tEXEC sp_api_modal_route @name='Voorraad per lokatie',@pathname='/voorraadlokatie',@search= '',@class=@bclass,@key='X',@group = 'Voorraad'\n\t\t\tEXEC sp_api_modal_route @name='Voorraad [Artikelen]',@pathname='/xstock',@search= '?red=',@class=@bclass,@key='S',@group = 'Voorraad'\n\t\t\t\n\t\tEND\n*/\n\n\t------------\n\t-- Transactions\n\t------------\n--\tEXEC sp_api_modal_text 'Transacties',@hclass\n/*\n\tBEGIN\n\n\tEXEC sp_api_modal_route @name='Verkoop [Pakbon Niet Geprint]',@pathname='/verkoop',@search= '?red=Pickbon+NOG+NIET+GEPRINT' ,@class='btn-primary',@key='V',@group = 'verkoop'\n\n\tEXEC sp_api_modal_route @name='Filter [Pickbon Geprint]',@pathname='/verkoop',@search= '?red=Pickbon+Geprint' ,@class='btn-primary',@key='P',@group = 'verkoop'\n\tEXEC sp_api_modal_route @name='Verkoop [Alles]',@pathname='/verkoop',@search= '?red=' ,@class='btn-primary',@key='A',@group = 'verkoop'\n\tEXEC sp_api_modal_route @name='Filter [Commission]',@pathname='/verkoop',@search= '?red=Commission+%5BopenPrice%5D' ,@class='btn-primary',@key='C',@group = 'verkoop'\n\n\t--EXEC sp_api_modal_route @name='Verkoop [Vandaag]',@pathname='/verkoop',@search= '?red=Werkdatum+openSale' ,@class='btn-primary',@key='Ctrl+V',@group = 'verkoop'\n\n\tEXEC sp_api_modal_route @name='Filter [Pickbon Veranderd]',@pathname='/verkoop',@search= '?red=Pickbon+VERANDERD' ,@class='btn-primary',@key='W',@group = 'verkoop'\n\tEXEC sp_api_modal_route @name='Filter [Klaar voor Factuur]',@pathname='/verkoop',@search= '?red=Fase+Klaar+voor+Factuur' ,@class='btn-primary',@key='K',@group = 'verkoop'\n\tEXEC sp_api_modal_route @name='Filter [Gefactureerd]',@pathname='/verkoop',@search= '?red=Orders%3A+gefactureerd' ,@class='btn-primary',@key='F',@group = 'verkoop'\n\tEXEC sp_api_modal_route @name='Filter [Nog Toewijzen]',@pathname='/verkoop',@search= '?red=Toewijzen' ,@class='btn-primary',@key='T',@group = 'verkoop'\n\tEXEC sp_api_modal_route @name='Inkoop',@pathname='/inkoop',@search= '?red=',@class='btn-warning',@key='I',@group = 'inkoop'\n\tEXEC sp_api_modal_route @name='Open inkopen',@pathname='/inkoop',@search= '?red=Open+inkopen',@class='btn-primary',@key='O',@group = 'inkoop'\n\tEXEC sp_api_modal_route @name='Gesloten inkopen',@pathname='/inkoop',@search= '?red=Gesloten+inkopen',@class='btn-primary',@key='G',@group = 'inkoop'\n\tEXEC sp_api_modal_route @name='Inkoop [Vandaag]',@pathname='/inkoop',@search= '?red=Werkdatum',@class='btn-warning',@key='Ctrl+I',@group = 'inkoop'\n\tEXEC sp_api_modal_route @name='Douane Actie Nodig',@pathname='/inkoop',@search= '?red=Actie+nodig+(douane+tafel)',@class='btn-warning',@key='D',@group = 'inkoop'\n\tEXEC sp_api_modal_route @name='Verkoop Claims [New]',@pathname='/xclaim',@search= '?red=Status+%3D+New',@class='btn-danger',@key='Alt+C',@group = 'verkoop'\n\tEXEC sp_api_modal_route @name='AccountSale [Open]',@pathname='/xcth_accountsale',@search= '?red=Open',@class='btn-warning',@key='A',@group = 'accountsale'\n\tEXEC sp_api_modal_route @name='AccountSale [Invoiced]',@pathname='/xcth_accountsale',@search= '?red=Factuur+gemaakt',@class='btn-warning',@key='F',@group = 'accountsale'\n\t--EXEC sp_api_modal_route @name='Fust Inname',@pathname='/xfustreturned',@search= '?red=',@class='btn-white border-dark text-dark',@key='F'\n\t\tIF @extendedMenu = 1\n\t\tBEGIN\n\t\tEXEC sp_api_modal_route @name='Verkoop [Gereserveerd]',@pathname='/verkoop',@search= '?red=Orders+Reserved' ,@class='btn-primary',@key='Ctrl+V',@group = 'verkoop'\n\t\tEXEC sp_api_modal_route @name='Inkoop [Gereserveerd]',@pathname='/inkoop',@search= '?red=Orders+Reserved',@class='btn-warning',@key='Ctrl+I',@group = 'inkoop'\n\t\tEND\n\t\t\n\tEND\n*/\t\n\t\n/*\t\n\tEXEC sp_api_modal_text '',@class='row'\n\tEXEC sp_api_modal_action @name='Nieuwe Verkoop',@class='btn-primary',@keycode='ArrowUp'\n\tEXEC sp_api_modal_action @name='Nieuwe Inkoop',@class='btn-warning',@keycode='ArrowDown'\n*/\n\n/*\n\tIF dbo.hasRole('douane,admin') > 0\n\t\tBEGIN\n\t\t\n\t\t--------------\n\t\t-- Douane\n\t\t--------------\n\t\tEXEC sp_api_modal_text 'Douane',@hclass\n\t\t\n\t\tSET @bclass = 'btn-dark'\n\t\t\n\t\t\tIF EXISTS (SELECT * FROM check_lfctr_at_entrepot)\n\t\t\t\tBEGIN\n\t\t\t\t\tEXEC sp_api_modal_route @name='Verkoop Correctie',@pathname='/check_lfctr_at_entrepot',@search= '',@class='btn-danger',@key='E'\n\t\t\t\tEND\n\t\t\n\t\t\tEXEC sp_api_modal_route @name='Douane Saldo',@pathname='/douanesaldo',@search= '',@class=@bclass,@key='S',@group = 'Douaneoverzicht'--,@group = 'Container'\n\t\t\tEXEC sp_api_modal_route @name='Contingent',@pathname='/sf_femimp',@search= '',@class=@bclass,@key='C',@group = 'Douaneoverzicht'\n\t\t\t\n\t\t\tEXEC sp_api_modal_route @name='Import',@pathname='/xvessel',@search= '?red=Nog+Niet+Uitgelost&ord=22636,26417,22107',@class=@bclass,@key='B',@group = 'Container'\n\t\t\tEXEC sp_api_modal_route @name='Inslag document',@pathname='/xbol',@class=@bclass,@key='D',@group = 'Container'\n\t\t\tEXEC sp_api_modal_route @name='Containers',@pathname='/xcontainer',@class=@bclass,@key='C',@group = 'Container'\n\t\t\tEXEC sp_api_modal_route @name='Partij Douane Artikelen',@pathname='/xcthcustomsrows',@class=@bclass,@key='P',@group = 'Container'\n\t\t\t\n\t\t\t\n\t\t\tEXEC sp_api_modal_route @name='Douane Artikelen',@pathname='/xproductcustomsgroup',@search= '',@class=@bclass,@key='D',@group = 'DouaneArtikelGroup'\n\t\t\tEXEC sp_api_modal_route @name='Douane Artikelen Per Land',@pathname='/xcthcustomsart',@search= '',@class=@bclass,@key='A',@group = 'DouaneArtikelGroup'\n\t\t\tEXEC sp_api_modal_route @name='E-cert Groep',@pathname='/xclientbotanic',@search= '',@class=@bclass,@key='G',@group = 'DouaneArtikelGroup'\n\t\t\tEXEC sp_api_modal_route @name='E-cert Vari\u00ebteit',@pathname='/xclientexport',@search= '',@class=@bclass,@key='V',@group = 'DouaneArtikelGroup'\n\t\t\tEXEC sp_api_modal_route @name='Product (Hoofdgroup)',@pathname='/xproduct',@search= '?red=',@class=@bclass,@key='P',@group = 'DouaneArtikelGroup'\n\t\t\t\n\t\t\t--EXEC sp_api_modal_route @name='Binnenkomend (LF)',@pathname='/lf_aanvoer_inkomend',@search= '',@class=@bclass,@key='I',@group = 'Container'\n\t\t\t--EXEC sp_api_modal_route @name='Uitgaand (LF)',@pathname='/lf_aanvoer_uitgaand',@search= '',@class=@bclass,@key='U',@group = 'Container'\n\t\t\t\n\t\t\t\n\t\tEND\n*/\n\n\t--------------\n\t-- Facturatie\n\t--------------\n--\tEXEC sp_api_modal_text 'Facturatie',@hclass\n\n\tIF @colorblind = 1\n\t\tBEGIN\n\t\t\tSET @bclass = 'btn-primary'\n\t\tEND\n\tELSE\n\t\tBEGIN\n\t\t\tSET @bclass = 'btn-secondary'\n\t\tEND\nIF dbo.hasRole('user,admin,directie') > 0\n\tbegin\n\t--\tEXEC sp_api_modal_route @name='Uitgaande facturen',@pathname='/invoice',@class=@bclass,@key='Alt+U', @Search='?red=Open+en+Nieuw',@group = 'Factuuruit'\n\t\tEXEC sp_api_modal_route @name='Uitgaande facturen',@pathname='/invoice_wms',@class=@bclass,@key='Alt+U', @Search='?red=Open+en+Nieuw',@group = 'Factuuruit'\n\t\tEXEC sp_api_modal_route @name='Filter [Klaar voor Export]',@pathname='/invoice_wms',@class=@bclass,@key='', @Search='?red=Klaar+voor+Export',@group = 'Factuuruit'\n\t\tEXEC sp_api_modal_route @name='Voorbereiding weekfacturen',@pathname='/wms_week_data_for_invoice',@class=@bclass,@key='' ,@group = 'Factuuruit'--, @Search='?red=Klaar+voor+Export'\n\t\tEXEC sp_api_modal_route @name='Inslagen',@pathname='/w_applied_actions',@class=@bclass,@key='' ,@group = 'Factuuruit'--, @Search='?red=Klaar+voor+Export'\t\t\n\t\t\n\t\tEXEC sp_api_modal_route @name='Inkoopfacturen',@pathname='/incoming_invoice',@class=@bclass,@key='Alt+I',@group = 'Factuurin'\n\t\tEXEC sp_api_modal_route @name='Status Exact',@pathname='/incoming_invoice',@class=@bclass,@key='Alt+I',@Search='?red=Status+Exact',@group = 'Factuurin'\n\t\tEXEC sp_api_modal_route @name='Status Draft / Empty',@pathname='/incoming_invoice',@class=@bclass,@key='Alt+I',@Search='?red=Draft+%2F+Empty',@group = 'Factuurin'\n\tend\n\t------------\n\t-- ADRESSEN\n\t------------\n--\tEXEC sp_api_modal_text 'Adressen',@hclass\n\n\tIF @colorblind = 1\n\t\tBEGIN\n\t\t\tSET @bclass = 'btn-primary'\n\t\tEND\n\tELSE\n\t\tBEGIN\n\t\t\tSET @bclass = 'btn-success'\n\t\tEND\n\n\nIF dbo.hasRole('user,admin,directie') > 0\n\tbegin\n\t\t\t\n\t\tEXEC sp_api_modal_route @name='Alle bedrijven',@pathname='/adres',@search= '',@class=@bclass,@key='F1',@group = 'stamgegevens'\n\t\tEXEC sp_api_modal_route @name='Leveranciers',@pathname='/leverancier',@search= '',@class=@bclass,@key='F2',@group = 'stamgegevens'\n\t\tEXEC sp_api_modal_route @name='Klanten',@pathname='/klant',@search= '?ord=23124,27062',@class=@bclass,@key='F3',@group = 'stamgegevens'\n\t\tEXEC sp_api_modal_route @name='Transporteurs',@pathname='/transporteur',@search= '',@class=@bclass,@key='F4',@group = 'stamgegevens'\n\t\t\n\t\tEXEC sp_api_modal_route @name='Lokaties',@pathname='/xlocation',@search= '',@class=@bclass,@key='L',@group = 'Locaties'\n\t\tEXEC sp_api_modal_route @name='Pickup lokaties',@pathname='/wms_pickup_location',@search= '',@class=@bclass,@key='P',@group = 'Locaties'\n\n\tend\t\n\nIF dbo.hasRole('barsan_bo') > 0\n\tbegin\n\t\t--BARSAN_BO OOK DEZE LOKATIE OPTIE\n\t\tEXEC sp_api_modal_route @name='Lokaties',@pathname='/xlocation',@search= '',@class=@bclass,@key='L'\t\n\t\t\n\tend\t\n\nIF dbo.hasRole('barsan,barsan_bo,loodsmedewerker,directie') > 0 OR @user='alex_dong_nl@ensignfreight.com' --231110 alex specifiek OOK\n\tbegin\n\t\tEXEC sp_api_modal_route @cardname='barsan_micro_out'\n\tend\t\n\nIF dbo.hasRole('admin,directie') > 0\n\tbegin\n\t\t\t\n\t\tEXEC sp_api_modal_route @name='wms_artikelen',@pathname='/wms_item',@search= '',@class=@bclass,@key='Alt+A',@group = 'base'\n\t\tEXEC sp_api_modal_route @name='wms_groepen',@pathname='/xproduct',@search= '',@class=@bclass,@key='ALT+G',@group = 'base'\n\t\tEXEC sp_api_modal_route @name='wms_loodshuur_artikel',@pathname='/wms_price_per_week',@search= '',@class=@bclass,@key='ALT+W',@group = 'base'\t\n\t\tEXEC sp_api_modal_route @name='wms_tarief_inslag',@pathname='/w_action_tariff',@search= '',@class=@bclass,@key='ALT+i',@group = 'base'\t\n\t\tEXEC sp_api_modal_route @name='wms_notification_settings',@pathname='/wms_notification_settings',@search= '',@class=@bclass,@key='ALT+N',@group = 'base'\t\n\t\tEXEC sp_api_modal_route @name='wms_invoice_method',@pathname='/wms_invoice_method',@search= '',@class=@bclass,@key='ALT+M',@group = 'base'\t\n\t\tEXEC sp_api_modal_route @name='wms_verpakking_micro_items',@pathname='/fust',@search= '',@class=@bclass,@key='ALT+V',@group = 'base'\t\n\t\tEXEC sp_api_modal_route @name='pallets toevoegen',@pathname='/wms_purchase',@search= '',@class=@bclass,@key='ALT+P',@group = 'base'\t\n\t\t--https://rws.tsql.app/wms_notification_settings\t\n\tend\t\n\n\nEND\n------------\n-- GEBRUIKER\n------------\n--EXEC sp_api_modal_menu_user\t@user_id,@path\nDECLARE @key nvarchar(128) = IIF(@path='/','Escape','Home')\nSET @bclass = 'btn-tracy'\n\nEXEC sp_api_modal_route @name='Home',@pathname='/',@search= '',@class=@bclass,@key=@key\n\nEXEC sp_api_modal_button @name='logout',@value='Log Out',@valueout = @b_logout OUT,@class=@bclass,@key='End'\n\tIF @b_logout = 'Log Out'\n\t\tBEGIN\n\t\t\tEXEC sp_api_modal_dispatch N'{\"type\":\"logOut\"}'\n\t\t\tRETURN\n\t\tEND\n\n\n\n\n-----------\n-- ADMIN --\n-----------\n--if @user_name<>'rick@tracy.nu' \nEXEC sp_sys_admin_main_menu @hclass\n--https://rws.tsql.app/api_actions/32\n\ndeclare @T nvarchar(512)=N'&nbsp;'\nexec sp_api_modal_html @T\nexec sp_api_modal_html @T\nexec sp_api_modal_html @T\nset @T =concat(N'<a href=\"https://tracy.nu\" target=_blank>Solution &copy;',year(getdate()),' TDS B.V.</a><br/><a href=\"https://www.ux1.nl\" target=_blank>Technology &copy;',year(getdate()),' UX1 B.V.</a>'   \t)\nexec sp_api_modal_html @T, @class='m-1 w-24 btn btn-link2 btn-sm float-right' ",
                    "action_id": 32,
                    "action_name": "main_menu",
                    "source_table": "api_actions"
                },
                {
                    "sql_source": "--241213 @GB: let op @origin gebruiken we hier niet.. maar dat is niet het probleem\r\n\r\n-------------------------------------------------------\r\n--\t#qr_action_verwerk_micro_pick_v11\r\n--\tversie met herschikking van gekoppelde miscro-items na scannen van een pallet (scanned_pallet-id) \r\n--\tPRE DECLARE: \r\n/*\r\n@uuid int ,@origin nvarchar(1024), @button_choose nvarchar(max) = null , @sampleqrscanner nvarchar(max)= null, @button5 nvarchar(max) = null, @button_choose2 nvarchar(max) = NULL, @b6 nvarchar(128) = NULL\r\n,@button nvarchar(max) = NULL,@mol nvarchar(max) = NULL,@button2 nvarchar(max) = NULL,@T nvarchar(max) = NULL,@sku_check nvarchar(max) = NULL\r\n,@button3 nvarchar(max) = NULL,@xstock_id nvarchar(max) = NULL,@aantal_serials_nodig nvarchar(max) = NULL,@sku_oke nvarchar(max) = NULL,@button4 nvarchar(max) = NULL\r\n,@pal_select_button nvarchar(128)=NULL,@pal_select nvarchar(128)=NULL,@button_choose_pal nvarchar(128)=NULL,@button_scan_serials_for_mol nvarchar(128)=NULL,@button_replenish nvarchar(128)=NULL,@replenish_loc nvarchar(128)=NULL\r\n,@ps nvarchar(128)=NULL, @pallet_mol_id int = NULL, @this_SP int = null, @pipa int = null\r\n,@but_10 nvarchar(128)=NULL\r\n\r\n*/\r\nexec sp_api_toast N'micro pick V11'\r\ndeclare @scanned_codes nvarchar(max) ; EXEC sp_api_modal_get_value @name='@scanned_codes',@value = @scanned_codes OUT --231211 IPV PREDECLARED\r\n-------------------------------------------------------\r\ndeclare @mob int = @uuid --opgeschoond scan ID \r\ndeclare @no_serials bit = null\r\ndeclare @this_pallet_id int =0 \r\ndeclare @this_pallet_nr int =0\r\ndeclare @this_pal_colli int =0\r\ndeclare @this_xstock_id int =0\r\ndeclare @this_item_lotnr nvarchar(128)\r\ndeclare @this_sku nvarchar(128)\r\ndeclare @this_pallet_type nvarchar(128) --'full, pick, replenish'\r\ndeclare @this_id int --temp table cursor\r\n--execute sp_api_toast '111111111'\r\n----------------------------------------------------------\r\n--\tafdwingen eerst replenishpallets halen en replenishen!\r\n----------------------------------------------------------\r\n\r\n\r\ndrop table if exists #mr \r\ndrop table if exists #list\r\ndeclare @button_gearriveerd_bij_pallet nvarchar(128)\r\n--declare @mob int=(select top 1 id from wms_micro_outbound order by id desc)\r\n--declare @T nvarchar(2000)\r\n\r\nselect --231130 TOP 1, zodat je per container goed bezig bent!\r\n\tp_pick.w_lot_id\r\n\t,pick_pal_id=p_pick.id\r\n\t,w_lot.container_number\r\n\t,adv_full_pos\r\n\t,p_pick.pallet_nr \r\n\t,mol.xstock_id\r\n\t,mol.id\r\n\t,mol.preferred_pallet_ids\r\n\t,mol.scanned_pallet_id\r\n\t,T=concat(N'Ga naar lokatie ',upper(mol.adv_full_pos), ' en haal daar'\r\n\t\t\t\t\t--,' en haal daar Pallet ',p_pick.pallet_nr\r\n\t\t\t\t\t--240122 eventueel willekeurig als de preferred_pallet al in gebruik is.. \r\n\t\t\t\t\t, case \r\n\t\t\t\t\t\twhen exists(select 1 from wms_micro_outbound_lines where scanned_pallet_id=mol.preferred_pallet_ids)\r\n\t\t\t\t\t\tthen ' een Pallet'\r\n\t\t\t\t\t\telse concat(' Pallet ',p_pick.pallet_nr)\r\n\t\t\t\t\t\tend\r\n\t\t\t\t\t\r\n\t\t\t\t\t,' met ',p_pick.colli,' colli' --231130\r\n\t\t\t\t\t,' van container ',upper(w_lot.container_number)\r\n\t\t\t\t\t,'. Artikel: ', upper(mol.lookupcode) \r\n\t\t\t\t\t)--* \r\n\t,remark --is dus 'replenish'\t\t\t\t\r\n\t,mol_amount=mol.amount --231130\r\ninto #mr \r\nfrom q_wms_micro_outbound_lines mol\r\n\t\t\tjoin w_lot on w_lot.id=mol.w_lot_id\r\n\t\t\tjoin w_pallet p_pick \r\n\t\t\t\t\ton p_pick.id=try_cast(preferred_pallet_ids as int) \r\n\t\t\t\t\t\t--dwing af dat de pallet uit de opgegeven mol-container komt\r\n\t\t\t\t\t\tand p_pick.w_lot_id=mol.w_lot_id\r\n\t\t\twhere mol.wms_micro_outbound_id=@mob \r\n\t\t\t\tand remark='replenish' \r\n\t\t\t\tand (\r\n\t\t\t\t\tscanned_pallet_id is null \r\n\t\t\t\t\tor NOT exists( select 1 from w_pallet where id=scanned_pallet_id and micro_pick_allowed=1)\r\n\t\t\t\t\t)\r\n\t\t\t\t\r\n\t\t\t\t--231020 met DENNIS LIVE IN MESONINE !!! (als de items al op de mol zijn toegekend, dan niet meer replenishen , want er waren er kennelijk genoeg\r\n\t\t\t\t-- nu wordt alles tegengehouden.. ook de pallets die wel gereplenished moeten worden..\r\n\t\t\t\tAND\tmol.linked_amount <> mol.amount\r\n\r\n--dev test select * from #modal_report \r\n--live \r\nselect * into #list from #mr\r\nif exists(select 1 from #list) exec sp_api_modal_text N'REPLENISH PALLETS',@class='h1'\r\nset @T = NULL\r\nif exists(select 1 from #mr)\r\nBEGIN\r\n\tSet @T='<ul>'--start lijst\r\nEND\r\n\r\nwhile exists(select 1 from #mr)\r\nBEGIN\r\n\tset @this_id=(select top 1 id from #mr)\r\n\tset @T=concat(@T,'<li>',(select T from #mr where id=@this_id),'</li>')\r\n\tdelete from #mr where id=@this_id\r\nEND\r\nif @T >''--lijst afsluiten\r\nBEGIN\r\nset @t=concat(@T,'</ul>')\r\nexec sp_api_modal_html @T\r\nEND\r\n\r\nWHILE exists(select 1 from #list) --bevat te replenishen pallets\r\nBEGIN -- 231004 REPLENISH PART\r\n\t--exec sp_api_modal_table @tmptable=N'#mr',@print=1,@excel=1 -- output to react client\r\n\tEXEC sp_api_modal_button @name='@button_gearriveerd_bij_pallet',@value = 'Ik ben bij de pallet', @valueout = @button_gearriveerd_bij_pallet OUT,@class='btn-danger',@key='Enter'\r\n\tif @button_gearriveerd_bij_pallet is null RETURN\r\n\t--scan pallet-sticker\r\n\texec sp_api_modal_text N'scan pallet sticker'\r\n\tEXEC sp_api_modal_input @name = '@ps', @value = @ps OUT ,@focus=1\r\n\r\n\tif @ps is null return\r\n\tif left(@ps,3)<>'ps:'\r\n\tBEGIN\r\n\t\texec sp_api_modal_text N'Dit is geen Tracy pallet sticker QR code'\r\n\t\t--exec sp_api_modal_restart--231130\r\n\r\n\t\tRETURN\r\n\tEND\t\r\n\r\n\r\n\tset @this_pallet_id=right(@ps,len(@ps)-3)\r\n\tif  not exists(select * from w_pallet where id=@this_pallet_id and w_lot_id in(select w_lot_id from #list) )\r\n\tBEGIN\r\n\t\tif  exists(select * from wms_micro_outbound_lines where scanned_pallet_id=@this_pallet_id )\r\n\t\tBEGIN --231009 pallet is er al.\r\n\t\t\texec sp_api_modal_text N'Deze pallet is al gescand en toegevoegd.'\r\n\t\tEND\t\r\n\t\telse BEGIN\t\r\n\t\t\texec sp_api_modal_text N'Dit is een pallet uit een ** VERKEERDE ** container'\r\n\t\tEND\r\n\t\texec sp_api_modal_beep 1100, 500 --error !\r\n\t\t--set @T=concat('pallet lot: ',(select w_lot_id from w_pallet where id=@this_pallet_id and w_lot_id in(select w_lot_id from #list) ))\r\n\t\t--exec sp_api_modal_text @T\r\n\t\t--exec sp_api_modal_table @tmptable=N'#modal_report',@print=1,@excel=1 -- output to react client\r\n\t\texec sp_api_modal_restart--231130\r\n\t\tRETURN\r\n\tEND\r\n\r\n\tif  not exists(select * from w_pallet p\r\n\t\t\t\t\twhere p.id=@this_pallet_id \r\n\t\t\t\t\t\t--\tand xstock_id in(select xstock_id from #list) \r\n\t\t\t\t\t\tand exists(select 1 from #list where #list.xstock_id=p.xstock_id and #list.mol_amount <= p.colli) --de gekozen pallet moet voor replenishen voldoende colli hebben 231130!!\r\n\t\t\t\t)\r\n\tBEGIN\r\n\t\texec sp_api_modal_text N'(1)Dit is ** NIET ** de juiste pallet. => Wel juiste container, maar verkeerd artikel of verkeerd colli aantal op de pallet!'\r\n\t\texec sp_api_modal_beep 1100, 500 --error !\r\n\t\t--set @T=concat('pallet lot: ',(select w_lot_id from w_pallet where id=@this_pallet_id and w_lot_id in(select w_lot_id from #list) ))\r\n\t\t--exec sp_api_modal_text @T\r\n\t\t--exec sp_api_modal_table @tmptable=N'#modal_report',@print=1,@excel=1 -- output to react client\r\n\t\t\t--exec sp_api_modal_restart--231130\r\n\t\t\t--EXEC sp_api_modal_values_clear @ignore='@uuid' --231130 KEEP SCANNED QR\r\n\t\t\texec sp_api_modal_value @name=N'@button_gearriveerd_bij_pallet'\r\n\t\t\texec sp_api_modal_value @name=N'@ps' -- er bij\r\n\t\tRETURN\r\n\tEND\r\n\tdeclare @foutinfo nvarchar(max)\r\n\t-- extra check 241213  -------------------------------------\r\n\tif exists(select 1 from mol where scanned_pallet_id=@this_pallet_id and mob_id<>@mob)\r\n\tBEGIN\r\n\t\texec sp_api_modal_ALERT N'FOUT','Deze pallet is al gekoppeld aan een andere outbound!'\r\n\t\texec sp_api_modal_beep 1100, 500 --error !\r\n\t\tdeclare @FOUT_bound int =(select top 1 mob_id from mol where scanned_pallet_id=@this_pallet_id and mob_id<>@mob)-- foute outbound..\r\n\r\n\r\n\t\tSET @foutinfo =\r\n\t\t\tconcat('Bij Outbound met ref: '\r\n\t\t\t\t\t,(select out_ref from mob where id=@mob)\r\n\t\t\t\t\t,' werd pallet id: ', @this_pallet_id\r\n\t\t\t\t\t,' (pal_nr: ', (select pallet_nr from w_pallet where id=@this_pallet_id),' )'\r\n\t\t\t\t\t,' gescand, maar die is (onjuist) gelinkt aan outbound : '\r\n\t\t\t\t\t,(select out_ref from mob where id=@FOUT_bound))\r\n\t\t-- Verstuur de e-mail\r\n\t\tEXEC sp_api_email \r\n\t\t\t@To = 'rick@tracy.nu + mterlouw@rwsbv.com',\r\n\t\t\t@Subject = 'Pallet FOUT ontdekt bij Replenish Scan',\r\n\t\t\t@Body = @foutinfo;\r\n\t\t\r\n\t\texec sp_api_modal_value @name=N'@button_gearriveerd_bij_pallet'\r\n\t\texec sp_api_modal_value @name=N'@ps' -- er bij\r\n\t\tRETURN\r\n\tEND\r\n\t-- einde  241213 extra check------------------------------- \r\n\r\n\r\n\t--we zitten nu absoluut op een pallet uit de juiste container en met het juiste artikel\r\n\t-- voorbereiden op replenishen\r\n\tset @this_pallet_type=N'REPLENISH'\r\n\tset @this_xstock_id=(select xstock_id from w_pallet where id=@this_pallet_id)\r\n\t--#list bevat hier alleen maar replenish regels\r\n\r\n/*\tif exists(select id from #list where scanned_pallet_id=@this_pallet_id) -- de pallet moet nog op MICRO_PICK_ALLOWED worden gezet\r\n\tBEGIN\r\n\t\texec sp_api_modal_text N'zet deze geselecteerde pallet op micro pick allowed....'\r\n\t\treturn\r\n\tEND\r\n*/\r\n/*\tif exists(select id from #list where @this_pallet_id in (select value from string_split(preferred_pallet_ids,','))) -- gewenst\r\n\tBEGIN\r\n\t\tset @T=N'Zet deze gewenste pallet definitief naar \"scanned_pallet_id\" en micro pick allowed....'\r\n\t\texec sp_api_modal_text @T\r\n\t\treturn\r\n\tEND\r\n*/\r\n\tif exists(select id from #list where scanned_pallet_id=@this_pallet_id) -- de pallet moet nog op MICRO_PICK_ALLOWED worden gezet\r\n\t\tOR exists(select id from #list where @this_pallet_id in (select value from string_split(preferred_pallet_ids,','))) -- gewenst\r\n\t\tOR exists(select id from #list where xstock_id=@this_xstock_id and @this_pallet_id not in (select value from string_split(preferred_pallet_ids,','))  ) -- alternatief\r\n\t--*************************\r\n\t-- HET RESPLENISHEN IS HIER\r\n\t--************************* \r\n\tBEGIN\r\n\t\t--231006 zorg dat er een pick pallet is\r\n\t\t--declare @pipa int = null\r\n\t\texec create_outbound_pickpallet --SELECTEERT OF MAAKT NIEUW..\r\n\t\t\t@wms_micro_outbound_id = @mob\r\n\t\t\t,@pallet_id  =@pipa output\r\n\t\t--print @pipa\r\n\r\n\t\tset @pallet_mol_id=(select top 1 id from #list where xstock_id=@this_xstock_id and scanned_pallet_id is null) -- er kan maar 1 replenish zijn voor 1 artikel !\r\n\t\t--set @T=concat(N'Deze pallet (pal.nr. ',(select pallet_nr from w_pallet where id=@this_pallet_id),') als alternatief gebruiken en definitief naar \"scanned_pallet_id\" en micro pick allowed....ipv prefrerred ', (select string_agg(preferred_pallet_ids,' *** ') from #list))\r\n\t\t--exec sp_api_modal_text @T\r\n\r\n\t\tif @replenish_loc is null \r\n\t\tBEGIN\r\n\t\t\tset @replenish_loc=(select pick_position from xstock where id=@this_xstock_id)\r\n\t\tEND\t\r\n\t\t--check of de replenishment al is geregistreerd op de pallet\r\n\t\t-- losse items picken en darvan serienummers scannen is niet hier. dit is alleen replenishen!\r\n\t\tif not exists( select * from w_pallet where id=@this_pallet_id and micro_pick_allowed=1)\r\n\t\tBEGIN\r\n\t\t\tEXEC sp_api_modal_input @name = '@replenish_loc', @value = @replenish_loc OUT \r\n\t\t\tEXEC sp_api_modal_button @name='@button_replenish',@value = 'Replenish NOW', @valueout = @button_replenish OUT,@class='btn-danger'\r\n\t\t\tif @button_replenish is null return\t\r\n\t\t\tif @replenish_loc is NULL\r\n\t\t\tBEGIN\r\n\t\t\t\texec sp_api_modal_text N'De POSITIE CODE voor de replenishmentlokatie is verplicht!'\r\n\t\t\t\treturn\r\n\t\t\tEND\r\n\t\t\t\r\n\t\t\t--update w_pallet set micro_pick_allowed=1,position_code=@replenish_loc where id=@this_pallet_id\r\n\t\t\t--update wms_micro_outbound_lines set scanned_pallet_id=@this_pallet_id where id=@pallet_mol_id\r\n\t\t\t-- is hieronder\r\n\t\t\texec sp_api_modal_clear\r\n\t\t\r\n\t\tEND\r\n\r\n\r\n\t\tupdate top(1) wms_micro_outbound_lines \r\n\t\t\tset scanned_pallet_id = @this_pallet_id\r\n\t\t\t\t,chk=1\r\n\t\t\t\t,remark='pick' --231006 van replenish naar pick\r\n\t\t\twhere ( scanned_pallet_id is null or scanned_pallet_id=@this_pallet_id)\r\n\t\t\t\tand id = @pallet_mol_id\r\n\t\t\r\n\t\tupdate w_pallet \r\n\t\t\tset micro_pick_allowed=1 \r\n\t\t\t\t,position_code=@replenish_loc--'rick'\r\n\t\t\twhere id=@this_pallet_id\t\t\r\n\r\n\t\tdeclare @assign_micro_items int =(select amount from wms_micro_outbound_lines where id=@pallet_mol_id)\r\n\t\twhile isnull(@assign_micro_items,0) >0\r\n\t\tBEGIN\r\n\t\t\tupdate top(1) wms_micro_item set w_pallet_pick_id=@pipa, wms_MICRO_OUTBOUND_LINES_ID=@pallet_mol_id where wms_micro_item.w_pallet_id=@this_pallet_id and w_pallet_pick_id is null\r\n\t\t\t--exec sp_api_toast N'  ** ITEM **'\r\n\t\t\t--exec sp_api_toast @this_pallet_id\r\n\t\t\t--exec sp_api_toast @pipa\r\n\t\t\tset @assign_micro_items = @assign_micro_items -1\r\n\t\tEND\t\r\n\t\treturn\r\n\tEND\r\n\r\n\texec sp_api_modal_text N'gelukt'\r\n\t\r\n\r\n\r\n\tset @this_SP= (select scanned_pallet_id from q_wms_micro_outbound_lines \r\n\t\t\t\t\twhere wms_micro_outbound_id=@mob \r\n\t\t\t\t\t\tand remark='replenish' \r\n\t\t\t\t\t\tand exists( select 1 from w_pallet where id=scanned_pallet_id and micro_pick_allowed=1)\r\n\t\t\t\t\t) \r\n\tif @this_SP is not NULL\r\n\tBEGIN\r\n\t\tdelete from #list where scanned_pallet_id=@this_SP and remark='replenish'\t\t\t\r\n\tEND\t\t\r\n\t\t\t\t\r\n\t\r\n\t----------------------------------------------------------------------------------------------------\r\n\t-- 231002 ALS ER NOG IETS GEREGELD MOET WORDEN BIJ REPLENISHMENT, DAN NIET VERDER. => EERST REGELEN! \r\n\t----------------------------------------------------------------------------------------------------\t\t\t\t\t\r\n\t--exec sp_api_modal_restart--231130\r\n\tEXEC sp_api_modal_value @name='@button_gearriveerd_bij_pallet' --231130 wis allleen deze waarde\r\n\tEXEC sp_api_modal_value @name='@ps' --231130 wis allleen deze waarde\r\n\t--exec sp_api_modal_restart--231130\r\n\treturn\r\nEND --REPLENISH PALLETS HALEN VAN BULK\r\n\r\n\r\n----------------------------------------------------------------------------------------------------\r\n-- 231010 VOLLE PALLETS PAKKEN VAN BULK EN KOPPELEN AAN DE MOL VAN DEZE OUTBOUND\r\n----------------------------------------------------------------------------------------------------\t\t\t\t\t\r\n\r\ndrop table if exists #fpa \r\ndrop table if exists #fpalist\r\n\r\nselect top 1 --231130 2x top 1 !!!\r\n\tp_pick.w_lot_id\r\n\t,pick_pal_id=p_pick.id\r\n\t,w_lot.container_number\r\n\t,adv_full_pos\r\n\t,p_pick.pallet_nr \r\n\t,mol.xstock_id\r\n\t,mol.id\r\n\t,mol.preferred_pallet_ids\r\n\t,mol.scanned_pallet_id\r\n\t,T=concat(N'Ga naar lokatie '\r\n\t\t\t\t--240826,upper(mol.adv_full_pos) --240826 voorheen: dit is een lokatie van een pallet die uit de container komt \r\n\t\t\t\t,isnull ((select position_code from w_pallet where id=p_pick.id) --niew: dit er voor gezet..12:05\r\n\t\t\t\t\t\t,upper(mol.adv_full_pos) --240826 nu baseren op de prefrerred pallet!\r\n\t\t\t\t\t\t)\r\n\t\t\t\t,' en haal daar'\r\n\t\t\t\t\t--240122 was,' en haal daar Pallet ',p_pick.pallet_nr\r\n\t\t\t\t\t--eventueel willekeurig als de preferred_pallet al in gebruik is.. \r\n\t\t\t\t\t, case \r\n\t\t\t\t\t\twhen exists(select 1 from wms_micro_outbound_lines where scanned_pallet_id=mol.preferred_pallet_ids)\r\n\t\t\t\t\t\tthen ' een Pallet'\r\n\t\t\t\t\t\telse concat(' Pallet ',p_pick.pallet_nr)\r\n\t\t\t\t\t\tend\r\n\t\t\t\t\t\r\n\t\t\t\t\t,' met ',p_pick.colli,' colli'--231130\r\n\t\t\t\t\t,' van container ',upper(w_lot.container_number)\r\n\t\t\t\t\t,'. Artikel: ', upper(mol.lookupcode) \r\n\t\t\t\t\t)--* \r\n\t,remark --is dus 'full'\t\t\t\t\t\t\t\r\n\t,mol_amount=mol.amount\t\t--231130\r\ninto #fpa \r\nfrom q_wms_micro_outbound_lines mol\r\n\t\t\tjoin w_lot on w_lot.id=mol.w_lot_id\r\n\t\t\tjoin w_pallet p_pick \r\n\t\t\t\t\ton p_pick.id=try_cast(preferred_pallet_ids as int) \r\n\t\t\t\t\t\t--dwing af dat de pallet uit de opgegeven mol-container komt\r\n\t\t\t\t\t\tand p_pick.w_lot_id=mol.w_lot_id\r\n\t\t\twhere mol.wms_micro_outbound_id=@mob \r\n\t\t\t\tand remark='full' \r\n\t\t\t\tand (\r\n\t\t\t\t\tscanned_pallet_id is null \r\n\t\t\t\t\t-- dit is alleen bij replenishment pallets !!!or NOT exists( select 1 from w_pallet where id=scanned_pallet_id and micro_pick_allowed=1)\r\n\t\t\t\t\t)\r\n--dev test select * from #modal_report \r\n--live \r\nselect * into #fpalist from #fpa  --FULL PALLET LIST\r\nif exists(select 1 from #fpalist) exec sp_api_modal_text N'VOLLE PALLETS OUTBOUND',@class='h1'\r\nset @T = NULL\r\nif exists(select 1 from #fpa)\r\nBEGIN\r\n\tSet @T='<ul>'--start lijst\r\nEND\r\n\r\nwhile exists(select 1 from #fpa)\r\nBEGIN\r\n\tset @this_id=(select top 1 id from #fpa)\r\n\tset @T=concat(@T,'<li>',(select T from #fpa where id=@this_id),'</li>')\r\n\tdelete from #fpa where id=@this_id\r\nEND\r\nif @T >''--lijst afsluiten\r\nBEGIN\r\nset @t=concat(@T,'</ul>')\r\nexec sp_api_modal_html @T\r\nEND\r\n\r\nWHILE exists(select 1 from #fpalist) --bevat volle pallets die op de outbound mee gaan\r\nBEGIN -- 231004 REPLENISH PART\r\n\t--exec sp_api_modal_table @tmptable=N'#mr',@print=1,@excel=1 -- output to react client\r\n\tEXEC sp_api_modal_button @name='@button_gearriveerd_bij_pallet',@value = 'Ik ben bij de pallet', @valueout = @button_gearriveerd_bij_pallet OUT,@class='btn-danger',@key='Enter'\r\n\tif @button_gearriveerd_bij_pallet is null RETURN\r\n\t--scan pallet-sticker\r\n\texec sp_api_modal_text N'scan pallet sticker'\r\n\tEXEC sp_api_modal_input @name = '@ps', @value = @ps OUT ,@focus=1\r\n\r\n\tif @ps is null return\r\n\tif left(@ps,3)<>'ps:'\r\n\tBEGIN\r\n\t\texec sp_api_modal_text N'Dit is geen Tracy pallet sticker QR code'\r\n\t\tRETURN\r\n\tEND\t\r\n\r\n\r\n\tset @this_pallet_id=right(@ps,len(@ps)-3)\r\n\tif  not exists(select * from w_pallet where id=@this_pallet_id and w_lot_id in(select w_lot_id from #fpalist) )\r\n\tBEGIN\r\n\t\tif  exists(select * from wms_micro_outbound_lines where scanned_pallet_id=@this_pallet_id )\r\n\t\tBEGIN --231009 pallet is er al.\r\n\t\t\texec sp_api_modal_text N'Deze pallet is al gescand en toegevoegd.'\r\n\t\tEND\t\r\n\t\telse BEGIN\t\r\n\t\t\texec sp_api_modal_text N'Dit is een pallet uit een ** VERKEERDE ** container'\r\n\t\tEND\r\n\t\texec sp_api_modal_beep 1100, 500 --error !\r\n\t\t--set @T=concat('pallet lot: ',(select w_lot_id from w_pallet where id=@this_pallet_id and w_lot_id in(select w_lot_id from #fpalist) ))\r\n\t\t--exec sp_api_modal_text @T\r\n\t\t--exec sp_api_modal_table @tmptable=N'#modal_report',@print=1,@excel=1 -- output to react client\r\n\t\tRETURN\r\n\tEND\r\n\r\n\tif  not exists(select * from w_pallet p where p.id=@this_pallet_id \r\n\t\t\t\t\t\t--  and xstock_id in(select xstock_id from #fpalist) \r\n\t\t\t\t\t\t--\tand xstock_id in(select xstock_id from #list) \r\n\t\t\t\t\t\tand exists(select 1 from #fpalist where #fpalist.xstock_id=p.xstock_id and #fpalist.mol_amount = p.colli) --de gekozen FULL PALLET pallet exact het opgegeven colli-aantal hebben 231130!!\r\n\t\t\t\t\t)\r\n\tBEGIN\r\n\t\texec sp_api_modal_text N'(2)Dit is ** NIET ** de juiste pallet. => Wel juiste container, maar verkeerd artikel (of CPP onjuist)!'\r\n\t\texec sp_api_modal_beep 1100, 500 --error !\r\n\t\t--set @T=concat('pallet lot: ',(select w_lot_id from w_pallet where id=@this_pallet_id and w_lot_id in(select w_lot_id from #fpalist) ))\r\n\t\t--exec sp_api_modal_text @T\r\n\t\t--exec sp_api_modal_table @tmptable=N'#modal_report',@print=1,@excel=1 -- output to react client\r\n\t\t\t\t\t--exec sp_api_modal_restart --2311390 extra probeersel..\r\n\t\t\t\t\t--EXEC sp_api_modal_values_clear @ignore='@uuid' --231130 KEEP SCANNED QR\r\n\t\t\t\t\texec sp_api_modal_value @name=N'@button_gearriveerd_bij_pallet'\r\n\t\t\t\t\texec sp_api_modal_value @name=N'@ps'\r\n\t\t\t\t\t--exec sp_api_modal_restart--231130 --er bij proberen!!\r\n\t\tRETURN\r\n\tEND\r\n\r\n\r\n\t--we zitten nu absoluut op een pallet uit de juiste container en met het juiste artikel\r\n\t-- voorbereiden op replenishen\r\n\texec sp_api_modal_beep 1800, 200\r\n\tset @this_pallet_type=N'FULL'\r\n\tset @this_xstock_id=(select xstock_id from w_pallet where id=@this_pallet_id)\r\n\tset @this_pal_colli=(select colli from w_pallet where id=@this_pallet_id) -- pallet heeft altijd colli en niet altijd 'items' \r\n\t--#fpalist bevat hier alleen maar full pallet regels (full pallets assignment)\r\n\r\n\r\n\tif  exists(select id from #fpalist where @this_pallet_id in (select value from string_split(preferred_pallet_ids,','))) -- gewenst\r\n\t\tOR exists(select id from #fpalist where xstock_id=@this_xstock_id and @this_pallet_id not in (select value from string_split(preferred_pallet_ids,','))  ) -- alternatief\r\n\t--***********************************\r\n\t-- HET FULL PALLET ASSIGNMENT IS HIER\r\n\t--*********************************** \r\n\tBEGIN\r\n\t\tset @pallet_mol_id=(select top 1 id from #fpalist where xstock_id=@this_xstock_id \r\n\t\t\t\t\t\t\t\tand scanned_pallet_id is null \r\n\t\t\t\t\t\t\t\tand mol_amount=@this_pal_colli --231130 collicheck er bij!\r\n\t\t\t\t\t\t\t) -- er mag maar 1 full pallet zijn voor 1 MOL\r\n\t\t--set @T=concat(N'Deze pallet (pal.nr. ',(select pallet_nr from w_pallet where id=@this_pallet_id),') als alternatief gebruiken en definitief naar \"scanned_pallet_id\" en micro pick allowed....ipv prefrerred ', (select string_agg(preferred_pallet_ids,' *** ') from #fpalist))\r\n\t\t--exec sp_api_modal_text @T\r\n\r\n\t\tif exists( select 1 from wms_micro_outbound_lines where scanned_pallet_id=@this_pallet_id)\r\n\t\tBEGIN --afbreken\r\n\t\t\tset @T=concat('Pallet nummer ',(select pallet_nr from w_pallet where id=@this_pallet_id),' is al gescand')\r\n\t\t\texec sp_api_modal_text @T\r\n\t\t\treturn\r\n\t\tend\r\n\r\n\t\t--=======================================extra 250502============================================================================\r\n\t\tif exists( select 1 from w_pallet_out po where w_pallet_id=@this_pallet_id and xlandfreight_id <> (select lf_id from mob where id=@mob))\r\n\t\tBEGIN --afbreken\r\n\t\t\tset @T=concat('Pallet nummer ',(select pallet_nr from w_pallet where id=@this_pallet_id),' staat gekoppeld aan een andere outbound vracht.')\r\n\t\t\texec sp_api_modal_text @T\r\n\r\n\t\t\t--rick een mailtje!\r\n\t\t\tSET @foutinfo = CONCAT(N'Mob: ',@mob, ' MOL: ',@mol, 'ScannedPallet: ',@this_pallet_id)\r\n\t\t\t\tEXEC sp_api_email @to = 'rick@tracy.nu,gb@tracy.nu',\r\n\t\t\t\t\t@subject = 'RWS - pallet geweigerd. Scanned pallet staat al op andere outbound vracht!',\r\n\t\t\t\t\t@Body = @foutinfo;\r\n\r\n\t\t\treturn\r\n\t\tend\r\n\t\t--=======================================extra 250502============================================================================\r\n\r\n\t\t-------------------------------------------------------------------------------------- A S S I G N   S C A N N E D    P A L L E T\r\n\t\t--oke verder\r\n\t\tupdate top(1) wms_micro_outbound_lines \r\n\t\t\tset scanned_pallet_id = @this_pallet_id\r\n\t\t\t\t,chk=1\r\n\t\t\t\t\r\n\t\t\twhere ( scanned_pallet_id is null or scanned_pallet_id=@this_pallet_id)\r\n\t\t\t\tand id = @pallet_mol_id\r\n\t\t\t\tand remark ='full' -- moet altijd al zo zijn\r\n\t\t--oude items van prefrerred pallet weghalen\r\n\t\t\r\n\t\tIF EXISTS( --GB241216\r\n\t\t\tSELECT * FROM wms_micro_outbound_lines WHERE id <> @pallet_mol_id AND preferred_pallet_ids =\r\n\t\t\t(select preferred_pallet_ids from wms_micro_outbound_lines where id=@pallet_mol_id)\r\n\t\t\t)\r\n\t\t\tBEGIN\r\n\t\t\t\tSET @foutinfo = CONCAT(N'SELECT * FROM wms_micro_outbound_lines WHERE preferred_pallet_ids = ''',\r\n\t\t\t\t\t\t(select preferred_pallet_ids from wms_micro_outbound_lines where id=@pallet_mol_id)\r\n\t\t\t\t\t,'''')\r\n\t\t\t\tEXEC sp_api_email @to = 'rick@tracy.nu,gb@tracy.nu',\r\n\t\t\t\t\t@subject = 'RWS - preferred_pallet_ids probleem!',\r\n\t\t\t\t\t@Body = @foutinfo;\r\n\r\n\t\t\t\t--250408 EVEN niet verder !\r\n\t\t\t\t--EXEC SP_API_MODAL_ALERT N'We breken even af!. Tracy heeft nu een mail om te kijken wat er is' \r\n\t\t\t\t--             RETURN \r\n\t\t\t\t-- 250408--------------------------\r\n\t\t\tEND\r\n\r\n\r\n\t\tupdate w_pallet set wms_micro_outbound_id=null\r\n\t\twhere wms_micro_outbound_id=@mob \r\n\t\tand id in (select preferred_pallet_ids from wms_micro_outbound_lines where id=@pallet_mol_id)\r\n\t\tupdate wms_micro_item \r\n\t\t\tset w_pallet_pick_id=NULL\r\n\t\t\t\t, wms_MICRO_OUTBOUND_LINES_ID=NULL\r\n\t\t\t\t,item_serial_number = null \r\n\t\t\twhere wms_MICRO_OUTBOUND_LINES_ID=@pallet_mol_id \r\n\t\t\t\r\n\r\n\t\t--nieuwe items van gekozen pallet\r\n\t\tupdate w_pallet set wms_micro_outbound_id=@mob where id =@this_pallet_id  --231108 IK NEEM AAN MOB! (er stond MOL )\r\n\t\tupdate wms_micro_item \r\n\t\t\tset w_pallet_pick_id=w_pallet_id\r\n\t\t\t\t, wms_MICRO_OUTBOUND_LINES_ID=@pallet_mol_id \r\n\t\t\twhere wms_micro_item.w_pallet_id=@this_pallet_id\r\n\t\t\t\t and w_pallet_pick_id is null -- in een heel fout geval zou er al een paar items aan een andere outbound kunnen zijn gekoppeld\r\n\t\t-- ?? return\r\n\tEND\r\n\r\n\texec sp_api_modal_text N'gelukt'\r\n\tdelete from #fpalist where id=@pallet_mol_id\r\n\t\r\n\tEXEC sp_api_modal_value @name='@button_gearriveerd_bij_pallet' --231130 wis alleen deze\r\n\tEXEC sp_api_modal_value @name='@ps' --231130 wis allleen deze waarde\r\n\t--exec sp_api_modal_restart--231130 --er bij proberen!!\r\n\treturn\r\n\t--exec sp_api_modal_restart\r\n\t\r\n\t\t\t\t\r\n\t\r\n\t----------------------------------------------------------------------------------------------------\r\n\t-- 231002 ALS ER NOG IETS GEREGELD MOET WORDEN BIJ REPLENISHMENT, DAN NIET VERDER. => EERST REGELEN! \r\n\t----------------------------------------------------------------------------------------------------\t\t\t\t\t\r\n\r\nEND --FULL PALLETS HALEN VOOR DE MICRO OUTBOUND\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n--afkappen na replenish pallets en volle pallets toekennen aan de MOL\r\n--RETURN\r\n\r\n/*\r\n\t--poortwachter\r\n\tif exists(select 1 from q_wms_micro_outbound_lines \r\n\t\t\t\twhere wms_micro_outbound_id=@mob \r\n\t\t\t\t\tand remark='replenish' \r\n\t\t\t\t\tand (\r\n\t\t\t\t\t\tscanned_pallet_id is null \r\n\t\t\t\t\t\tor NOT exists( select 1 from w_pallet where id=scanned_pallet_id and micro_pick_allowed=1)\r\n\t\t\t\t\t\t) \r\n\t\t\t)\r\n\tRETURN -- 231002 ALS ER NOG IETS GEREGELD MOET WORDEN BIJ REPLENISHMENT, DAN NIET VERDER.. EERST REGELEN! \t\t\t\r\n*/\r\n\r\n\r\n--check of er nog VOLLE PALLETS GEHAALD MOETEN WORDEN:\r\n\r\n\r\n--231006\r\nif exists(select 1 from @main_db.dbo.mob_pallets(@mob) where chk=0 or is_processed=0)\r\nbegin\r\n\t--hieronder misschien niet meer nodig.. tot NORMAAL\r\n\t--exec sp_api_toast N'n o r m a a l'\r\n\tgoto NORMAAL --231009 nu gan we serials toevoegen!!!\r\nend\t\r\n\r\n\r\n\r\n\r\n--exec sp_api_toast N'V6'\r\nif exists(select 1 from @main_db.dbo.mob_pallets(@mob) where chk=0 or is_processed=0)\r\nBEGIN\r\n--was\r\n\t--set @T=concat(N'Nog te scannen pallets: ',(select string_agg(concat(plts,' pallets op locatie ',position_code, ' met sku: ',sku, ' en cpp= ',cpp),' - ') from @main_db.dbo.mob_pallets(@mob) where chk=0 ))\r\n\t--exec sp_api_modal_text @T\r\n\t--set @T=concat(N'Scan een opgegeven pallet van de pick-instruction met ref: ',(select UPPER(out_ref) from wms_micro_outbound where id=@mob))\r\n\t--exec sp_api_modal_text @T\r\n--nu\r\n\tif exists(select 1 from wms_micro_outbound_lines where wms_micro_outbound_id=@mob and scanned_pallet_id is null) --231006 was is_processed=0)\r\n\tBEGIN\r\n\t\t--231013 was set @T=concat('Deze pallets zijn nog niet (volledig) op serienummers gescand. Haal de pallet op en Scan de pallet-stickers..','')\r\n\t\tset @T=concat('Deze pallets zijn nog opgehaald en pallet-sticker gescand.','Haal de pallet eerst op. Serienummers scannen komt later.')--niet (volledig) op serienummers gescand. Haal de pallet op en Scan de pallet-stickers..','')\r\n\t\texec sp_api_modal_text @T\r\n\t\tselect [nr~col-1]=pallet_nr\r\n\t\t\t\t,[sku~col-3]= sku\r\n\t\t\t\t--,[lookupcode~col-5]=lookupcode\r\n\t\t\t\t,[amt~col-2]=amount\r\n\t\t\t\t,[st~col-1]=chk\r\n\t\t\t\t,[ser.~col-2]=linked_serials\t\r\n\t\t\t\t,[remark~col-3]=remark\r\n\t\t\t\t\r\n\t\tinto #palnoser from q_wms_micro_outbound_lines where wms_micro_outbound_id=@mob and chk=0 --231013 was (is_processed=0 or chk=0) maar serienummers komen later!\r\n\t\texec sp_api_modal_table @tmptable=N'#palnoser'\r\n\t\t\r\n\r\n\tEND\r\n\r\n\r\nif NOT  exists(select 1 from wms_micro_outbound_lines where wms_micro_outbound_id=@mob and scanned_pallet_id is null) --231006 was is_processed=0)\r\nBEGIN\r\n\t--exec sp_api_modal_alert N'klaar (not)'\r\n\tgoto NORMAAL\r\n\treturn\r\nEND\t\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\tif 1=1\r\n\tbegin\r\n\t\t\r\n\t\tEXEC sp_api_modal_input @name = '@pal_select', @value = @pal_select OUT,@hidden=0,@select=1\r\n\t\tEXEC sp_api_modal_button @name='@pal_select_button',@value = N'Check', @valueout = @pal_select_button OUT,@class='btn-danger',@key='F5' --Enter kan niet verstoort de flow\r\n\t\tif @pal_select_button is null return\r\n\t\tif @pal_select is null return\r\n\t\tif left(@pal_select,3) <> N'ps:'\r\n\t\tBEGIN\r\n\t\t\texec sp_api_modal_text N'Dit is geen palletsticker'\r\n\t\t\treturn\r\n\t\tEND\r\n\t\t\r\n\t\t--oke verder\r\n\t\tset @this_pallet_id=right(@pal_select,len(@pal_select)-3)\r\n\t\tselect \r\n\t\t\t@this_pallet_nr=pallet_nr\r\n\t\t\t,@this_xstock_id=xStock_id\r\n\t\t\t,@this_item_lotnr=pallet_art_lotnr\r\n\t\t\t,@this_pal_colli=colli\r\n\t\tfrom w_pallet where id=@this_pallet_id\r\n\t\t--set @T=concat('scanned pallet stockid: ',@this_xstock_id)\r\n\t\t--exec sp_api_toast @T --231001\r\n\t\tset @this_sku=(select sku from xstock where id=@this_xstock_id)\r\n\t\t--set @T=concat('U heeft gekozen pallet nr: ',@this_pallet_nr)\r\n\t\t--exec sp_api_modal_text @T\r\n\r\n\t\t--declare @pallet_mol_id int =0 -- zoek het mol id die deze pallet als preferred heeft staan \r\n\t\tset @pallet_mol_id=( select top 1 id from wms_micro_outbound_lines \r\n\t\t\t\t\t\t\twhere wms_micro_outbound_id=@uuid \r\n\t\t\t\t\t\t\t\tand (@this_pallet_id in ([preferred_pallet_ids]) \r\n\t\t\t\t\t\t\t\t\tOR @this_pallet_id=[scanned_pallet_id] --(als hij al gekoppeld is aan een MOL)\r\n\t\t\t\t\t\t\t\t\t) \r\n\t\t\t\t\t\t\t)\r\n\t\t\r\n\t\tif @pallet_mol_id is not NULL -- het is een bekende pallet (id stemt overeen met preferred)!\r\n\t\tbegin\r\n\t\t\tset @mol=@pallet_mol_id\r\n\t\t\t----------------------------PICK / FULL / REPLENISH PALLET ?? -------------------\r\n\t\t\tSET @this_pallet_type=(select upper(remark) from wms_micro_outbound_lines where id=@mol)\r\n\t\t\t---------------------------------------------------------------------------------\r\n\t\t\tif (select chk from wms_micro_outbound_lines where id=@pallet_mol_id) =1\r\n\t\t\tBEGIN\r\n\t\t\t\t-- opmerking\r\n\t\t\t\tset @T=concat(N'Deze '\r\n\t\t\t\t\t\t\t\t--,( select UPPER(remark) from wms_micro_outbound_lines where wms_micro_outbound_id=@uuid and @this_pallet_id in ([preferred_pallet_ids]))\r\n\t\t\t\t\t\t\t\t,@this_pallet_type\r\n\t\t\t\t\t\t\t\t,' pallet is al definitief geselecteerd bij deze micro outbound.'\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\texec sp_api_modal_text @T\r\n\t\t\t\t\r\n\r\n\t\t\t\t--inserted 231001 gelijk hier mogelijkheid om serienummers te scannen:\r\n\t\t\t\tif (select is_processed from wms_micro_outbound_lines where id=@pallet_mol_id) =1\r\n\t\t\t\tBEGIN\r\n\t\t\t\t\tset @T=concat(N'Deze pallet is volledig gescand (inc. ',(select count(*) from wms_micro_item where wms_micro_outbound_lines_id=@pallet_mol_id and item_serial_number >N''),' serienummers)')\r\n\t\t\t\t\texec sp_api_modal_text @T\r\n\t\t\t\tEND\r\n\t\t\t\telse BEGIN -- go to scan\r\n\t\t\t\t\t\r\n\t\t\t\t\tif @this_pallet_type ='FULL' --> SHOW SCAN BUTTON!\r\n\t\t\t\t\t\tgoto GOFULL\r\n\t\t\t\t\t/*\t\r\n\t\t\t\t\tBEGIN\r\n\t\t\t\t\t\tEXEC sp_api_modal_button @name='@button_scan_serials_for_mol',@value = 'Scan serials', @valueout = @button_scan_serials_for_mol OUT,@class='btn-danger'\r\n\t\t\t\t\t\t--tot hier inserted 231001 gelijk hier mogelijkheid om serienummers te scannen:\r\n\t\t\t\t\t\tif @button_scan_serials_for_mol is null return\t\r\n\t\t\t\t\t\tif @button_scan_serials_for_mol='Scan serials' goto add_serials_to_mol --231001\r\n\t\t\t\t\tEND\r\n\t\t\t\t\t*/\t\r\n\r\n\t\t\t\t\tif @this_pallet_type ='REPLENISH' --> SHOW REPLENISH BUTTON!\r\n\t\t\t\t\t\tGOTO GOREPLENISH\r\n\t\t\t\t\t/*\r\n\t\t\t\t\tBEGIN\r\n\t\t\t\t\t\tif @replenish_loc is null \r\n\t\t\t\t\t\tBEGIN\r\n\t\t\t\t\t\t\tset @replenish_loc=(select pick_position from xstock where id=@this_xstock_id)\r\n\t\t\t\t\t\tEND\t\r\n\t\t\t\t\t\t--check of de replenishment al is geregistreerd op de pallet\r\n\t\t\t\t\t\t-- losse items picken en darvan serienummers scannen is niet hier. dit is alleen replenishen!\r\n\t\t\t\t\t\tif not exists( select * from w_pallet where id=@this_pallet_id and micro_pick_allowed=1)\r\n\t\t\t\t\t\tBEGIN\r\n\t\t\t\t\t\t\tEXEC sp_api_modal_input @name = '@replenish_loc', @value = @replenish_loc OUT \r\n\t\t\t\t\t\t\tEXEC sp_api_modal_button @name='@button_replenish',@value = 'Replenish NOW', @valueout = @button_replenish OUT,@class='btn-danger'\r\n\t\t\t\t\t\t\tif @button_replenish is null return\t\r\n\t\t\t\t\t\t\tif @button_replenish='Replenish NOW' --hier evt jump naar separaat replenishment\r\n\t\t\t\t\t\t\tBEGIN\r\n\t\t\t\t\t\t\t\tupdate w_pallet set micro_pick_allowed=1,position_code=@replenish_loc where id=@this_pallet_id\r\n\t\t\t\t\t\t\t\tupdate wms_micro_outbound_lines set scanned_pallet_id=@this_pallet_id where id=@pallet_mol_id\r\n\t\t\t\t\t\t\t\texec sp_api_modal_clear\r\n\t\t\t\t\t\t\t\t--PICKLOKATIE !!\r\n\t\t\t\t\t\t\t\t--TODO...\r\n\t\t\t\t\t\t\t\t--+ EVENTUEEL HELE REPLENISH KOP\r\n\t\t\t\t\t\t\tEND\r\n\t\t\t\t\t\tEND\r\n\r\n\t\t\t\t\tEND\r\n\t\t\t\t\t*/\r\n\r\n\r\n\r\n\t\t\t\tEND\r\n\r\n\r\n\r\n\r\n\t\t\tEND\r\n\t\t\tELSE BEGIN -- dus als CHK=0\r\n\t\t\t\tset @T=concat(N'Deze ',( select UPPER(remark) from wms_micro_outbound_lines where wms_micro_outbound_id=@uuid and @this_pallet_id in ([preferred_pallet_ids])),' pallet wordt nu definitief geselecteerd voor deze micro outbound.')\r\n\t\t\t\texec sp_api_modal_text @T\r\n\t\t\t\tupdate wms_micro_outbound_lines \r\n\t\t\t\t\tset chk=1 \r\n\t\t\t\t\t\t,scanned_pallet_id = @this_pallet_id\r\n\t\t\t\twhere id=@pallet_mol_id\r\n\r\n\t\t\t\t--BUSY !\r\n\t\t\t\t--if full dan optioneel serienummers\r\n\t\t\t\t--if replenish dan lokatie\r\n\t\t\t\t\r\n\t\t\t\tEXEC sp_api_modal_button @name='@button_scan_serials_for_mol',@value = 'Scan serials', @valueout = @button_scan_serials_for_mol OUT,@class='btn-danger'\r\n\t\t\t\t\t--tot hier inserted 231001 gelijk hier mogelijkheid om serienummers te scannen:\r\n\t\t\t\t\tif @button_scan_serials_for_mol is null return\t\r\n\t\t\t\t\tif @button_scan_serials_for_mol='Scan serials' goto add_serials_to_mol --231001\r\n\t\t\t\t----231001 JUMP: (2)\r\n\t\t\t\t--set @mol=@pallet_mol_id\r\n\t\t\t\t--goto add_serials_to_mol\r\n\t\t\t\r\n\t\t\tEND\r\n\t\tend\t\r\n\t\telse begin \r\n\t\t\t--\tPallet_mol_id is null, dus gescande pallet-sticker komt niet voor op de instructie.\r\n\t\t\t--\tHet gescande pallet_id komt niet voor in preferred_pallet_id's; kijk of er een mol vrij is om gewisseld te worden\r\n\t\t\t\r\n\t\t\t--\tCheck of er nog wel 'un-assigned' pallets zijn...\r\n\t\t\tif (select count(*) from q_wms_micro_outbound_lines where wms_micro_outbound_id=@mob and isnull(chk,0)=0) =0 --240607 isnull(chk,0)\r\n\t\t\t--alle pallets zijn al toegekend\r\n\t\t\tBEGIN\r\n\t\t\t\texec sp_api_modal_text N'Alle pallets zijn al toegekend, scan de palletsticker om serienummers toe te voegen',@class='h1'\r\n\t\t\tEND\t\r\n\t\t\telse BEGIN\r\n\t\t\t\texec sp_api_modal_text N'Deze pallet staat ** NIET ** in de instructie. Kies de juiste pallet of geef aan welke pallet van de pick-instructie u wilt vervangen.'\r\n\t\t\t\tif NOT exists(select * from wms_micro_outbound_lines where wms_micro_outbound_id=@mob and chk=0 and xstock_id=@this_xstock_id ) --230930 toon alleen een vervangbare pallet_mol als deze hetzelfde artikel heeft!\r\n\t\t\t\tBEGIN\r\n\t\t\t\t\t--set @T=concat(N'Er is ** GEEN ** vervangbare pallet, bevat de zojuist gescande pallet wel het bedoelde artikel? (vergelijk met de pick-instructie)','' )\r\n\t\t\t\t\tset @T=concat(N'Onjuiste pallet!. Scan een ** ANDERE PALLET ** (zie de pick-instructie)','' )\r\n\t\t\t\t\texec sp_api_modal_text @T\r\n\t\t\t\t\treturn --231001\r\n\t\t\t\tEND\r\n\t\t\t\telse BEGIN\r\n\t\t\t\t\tdeclare @replacement_mol_id int --op deze mol wordt een andere pallet uitgeboekt dan oorspronkelijk 'preferred'\r\n\t\t\t\t\t--laat de user een pallet kiezen die op de mol vervangen wordt door de gecande pallet\r\n\t\t\t\t\t/*\t\t--toon tabel:\r\n\t\t\t\t\t\t\texec sp_api_modal_text N'Kies de pallet die u vervangt door de nu gescande pallet:'\r\n\t\t\t\t\t\t\tselect \r\n\t\t\t\t\t\t\t[sku~col-sm-2]=sku\r\n\t\t\t\t\t\t\t,[lookupcode~col-sm-2]=lookupcode\r\n\t\t\t\t\t\t\t,[remark~col-sm-2]=remark\r\n\t\t\t\t\t\t\t,pos=case remark when 'full' then adv_full_pos else adv_pick_pos end\r\n\t\t\t\t\t\t\t,pal_nr=(select pallet_nr from w_pallet where id in (select value from string_split(preferred_pallet_ids,',')))\r\n\t\t\t\t\t\t\tinto #mol \r\n\t\t\t\t\t\t\t\tfrom q_wms_micro_outbound_lines \r\n\t\t\t\t\t\t\t\twhere wms_micro_outbound_id=@mob \r\n\t\t\t\t\t\t\t\t\tand chk=0 \r\n\t\t\t\t\t\t\t\t\tand xstock_id=@this_xstock_id --230930 toon alleen een vervangbare pallet_mol als deze hetzelfde artikel heeft!\r\n\t\t\t\t\t\t\texec sp_api_modal_table @tmptable=N'#mol'\r\n\t\t\t\t\t--*/\t\t\r\n\t\t\t\t\t--/*\r\n\t\t\t\t\t-- maak de keuzelijst van beschikbare micro_outbound_lines die een zelfde artikel bevatten als de gescande pallet en die nog niet aangescand zijn (chk=0)\r\n\t\t\t\t\tdeclare @list nvarchar(4000)\r\n\t\t\t\t\tset @T=concat('thispalcolli: ',@this_pal_colli)\r\n\t\t\t\t\texec sp_api_toast @T\r\n\t\t\t\t\tset @list=(\r\n\t\t\t\t\t\t\tSELECT STRING_AGG(concat(left(concat(mol.id,'          '),10)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t, ' ',upper(mol.remark)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t, ' ',replace(mol.sku,',',';'),' - ',replace(mol.lookupcode,',',';')\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t,' pal.nr: ',p.pallet_nr\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t,' colli: ',p.colli\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t, ','\r\n\t\t\t\t\t\t\t\t\t\t\t) --LET OP: GEEN KOMMA GEBRUIKEN !!!\r\n\t\t\t\t\t\t\tFROM q_wms_micro_outbound_lines mol\r\n\t\t\t\t\t\t\tCROSS APPLY STRING_SPLIT(mol.preferred_pallet_ids, ',') split_val\r\n\t\t\t\t\t\t\tJOIN w_pallet p ON p.id = CAST(split_val.value AS INT)\r\n\t\t\t\t\t\t\tWHERE mol.chk = 0 \r\n\t\t\t\t\t\t\t\tAND mol.wms_micro_outbound_id =@mob \r\n\t\t\t\t\t\t\t\t--? dit check ik zondag wel als ik het niet vergeet, want ik moet nu bikkelen met sassie \r\n\t\t\t\t\t\t\t\t--231001\r\n\t\t\t\t\t\t\t\tAND mol.xstock_id =@this_xstock_id --is not null --=@this_xstock_id --230930 toon alleen een vervangbare pallet_mol als deze hetzelfde artikel heeft!\r\n\t\t\t\t\t\t\t\tAND (mol.remark='replenish' OR (mol.amount=@this_pal_colli))\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\r\n\t\t\t\t\t--pre declare: @button_choose_pal\r\n\t\t\t\t\tEXEC sp_api_modal_text N'Kies een pallet die vervangen wordt door de gescande pallet:',@class='h1'  --je zie de pallet die oorspronkelijk op de mol bedoeld was; maar eigenlijk kiezen we de MOL om er vervolgens de gescande (alternatieve) pallet aan te koppelen\r\n\t\t\t\t\t\r\n\t\t\t\t\t--/*\r\n\t\t\t\t\t\t-- LIST:EXEC sp_api_modal_choose_list @list = @list\r\n\t\t\t\t\t\t--BUTTONS:\r\n\t\t\t\t\t\tEXEC sp_api_modal_choose @list = @list\r\n\t\t\t\t\t\t,@value = @button_choose_pal OUT\r\n\t\t\t\t\t\t--,@startkey=3 --function key starting number\r\n\t\t\t\t\t\tif @button_choose_pal is not NULL\r\n\t\t\t\t\t\tBEGIN\t\r\n\t\t\t\t\t\t\tset @replacement_mol_id=left(@button_choose_pal,10) --eerste stukje is het mol_id\r\n\t\t\t\t\t\t\t--exec sp_api_toast @button_choose_pal\r\n\t\t\t\t\t\t\tif not exists(select 1 from wms_micro_outbound_lines where id=@replacement_mol_id)\r\n\t\t\t\t\t\t\tBEGIN\r\n\t\t\t\t\t\t\t\texec sp_api_modal_alert N'Er is iets verkeerd gegaan met de selectie!!'\r\n\t\t\t\t\t\t\t\treturn\r\n\t\t\t\t\t\t\tEND\r\n\t\t\t\t\t\t\t--oke verder\r\n\t\t\t\t\t\t\tupdate wms_micro_outbound_lines \r\n\t\t\t\t\t\t\t\tset chk=1 \r\n\t\t\t\t\t\t\t\t,scanned_pallet_id = @this_pallet_id\r\n\t\t\t\t\t\t\twhere id=@replacement_mol_id\r\n\t\t\t\t\t\t\tset @mol=@replacement_mol_id\r\n\r\n\t\t\t\t\t\t\tset @this_pallet_type=(select UPPER(remark) from wms_micro_outbound_lines where id=@replacement_mol_id)\r\n\r\n\t\t\t\t\t\tEND\t\r\n\t\t\t\t\t--*/\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\tEND\t\r\n\t\t\tEND --de else\r\n\t\tend\t\r\n\t\t--exec sp_api_modal_alert @this_pallet_id --231001 TEST !!\r\n\t\treturn\r\n\tend\t\t\r\nEND\r\n\r\n\r\n--240607 was: \r\nRETURN -- EVEN AFKAPPEN ..........\r\n--nu:\r\n--if not exists(select 1 from code_mob_serials where mob_id=@uuid and amount<>codes) RETURN\r\n\r\n--240607 nu dus dus doorgaan naar scannen als er nog serienummers niet gekoppeld zijn..\r\n\r\n\r\nNORMAAL:\r\nexec sp_api_modal_text N'Scannen van items:'\r\nEXEC sp_api_modal_choose @list = N'alles,onvoltooid,volle_pallets',@value = @button_choose2 OUT\r\nif @button_choose2 is null return--set @button_choose2='onvoltooid'\t\r\n--exec sp_api_toast @uuid\r\n--MOBILE ACTION EXTRA CODE\r\n--set @button_choose2='onvoltooid'\r\nif @button_choose2='volle_pallets'\r\n\tbegin\r\n\t\texec sp_api_modal_text N'scan de labels van deze volle pallets: '\r\n\t\tselect id, pallet_label into #sfp from pallet_status where id in (select preferred_pallet_ids from wms_micro_outbound_lines where wms_micro_outbound_id=@uuid) --scanned full pallets\r\n\t\texec sp_api_modal_table @tmptable=N'#sfp'\r\n\t\treturn\r\n\tEND\r\nif @button_choose2='alles'\r\n\tbegin\r\n\t\t\r\n/*\t\tset @mol=(select top 1 id from q_wms_micro_outbound_lines mol\r\n\t\t\twhere mol.wms_micro_outbound_id =@uuid\r\n\t\t\t --AND\t(select count(*) from wms_micro_outbound_line_barcode where wms_micro_outbound_lines_id=mol.id)<mol.Amount\r\n\t\t\tand (select scan_serial_number_outbound from xstock where id=(mol.xstock_id)) = 1 -- ER MOET SERIAL GESCAND WORDEN\r\n\t\t\t--ALLES and mol.is_processed =0 -- als deze door de loods op 1 wordt gezet\r\n\t\t\torder by adv_pick_pos\r\n\t\t)  \r\n\t\t\r\n\t\tset @t=concat('mol:',@mol,N' alles')\r\n\t\texec sp_api_modal_text @t\r\n*/\r\n\t\t--exec sp_api_modal_alert @UUID\r\n\t\t--select * into #mol from Q_wms_micro_outbound_lines where wms_micro_outbound_id = @uuid\r\n\t\t/*\r\n\t\tselect  \r\n\t\t\t--is_processed,\r\n\t\t\t--container_number,\r\n\t\t\t--linked_amount,\r\n\t\t\tlinked_SERIALS as [serials@~col-sm-1],\r\n\t\t\tsku\r\n\t\t\t--lookupcode,\r\n\t\t\t\r\n\t\t\t into #mol \r\n\t\t\tfrom q_wms_micro_outbound_lines where wms_micro_outbound_id=@uuid--3297\r\n\t\texec sp_api_modal_table @tmptable=N'#mol'\t,@print=1\r\n\t\treturn\r\n\t\t*/\r\n\r\n\t\tselect [amt~col-2]=items, [sku~col-6]=sku, [ser_head~col-4]=left5 into #mob_info from mob_scan_info where mob_id=@uuid\r\n\t\texec sp_api_modal_table @tmptable=N'#mob_info'\t,@print=1, @orderby=N' order by 2'\r\n\t\treturn\r\n\r\n\t\t--exec sp_api_modal_clear\r\n\r\n\tend\r\n\r\nif @button_choose2='onvoltooid'\r\n\tbegin\r\n\t\t--infolijstje\r\n\t\tselect [mol_id~col-3]=ID -- nozzels per 240611\r\n\t\t\t\t,[pal_nr~col-3]=(select pallet_nr from w_pallet where id=scanned_pallet_id)\r\n\t\t\t\t,[scanned_pallet_id~col-6]=scanned_pallet_id\r\n\t\t\t\tinto #lijstje_onvoltooid\r\n\t\t\t\tfrom q_wms_micro_outbound_lines mol\r\n\t\t\twhere scanned_pallet_id is not NULL --240611 ! erbij moet een scanned pallet zijn voor deze mol selectie!\r\n\t\t\t\tAND remark <> 'pick' --240611 1433\r\n\t\t\t\tAND mol.wms_micro_outbound_id =@uuid\r\n\t\t\t--AND\t(select count(*) from wms_micro_outbound_line_barcode where wms_micro_outbound_lines_id=mol.id)<mol.Amount\r\n\t\t\t-- 230907 items zonder serienummer moeten wel SKU SCAN KRIJGEN... and (select scan_serial_number_outbound from xstock where id=(mol.xstock_id)) = 1 -- ER MOET SERIAL GESCAND WORDEN\r\n\t\t\tand (\r\n\t\t\t\t\tmol.is_processed =0 -- als deze door de loods op 1 wordt gezet\r\n\t\t\t\t\tOR\r\n\t\t\t\t\t--linked_serials <> amount\r\n\t\t\t\t\tlinked_amount <> amount --230901 dit betekent dat de (auto)assign nog niet compleet is (misschien nor replenish pallet maken etc.)\r\n\t\t\t\t)\t\r\n\t\tif (select count(*) from #lijstje_onvoltooid)>0 --if er voorgezet 240611\t\t\r\n\t\tBEGIN\r\n\t\t\texec sp_api_modal_table @tmptable=N'#lijstje_onvoltooid',@print=0\t\t\r\n\t\t\r\n\r\n\t\t\t--scan pallet-sticker\r\n\t\t\texec sp_api_modal_text N'scan de pallet sticker een van de genoemde pallets'\r\n\t\t\tEXEC sp_api_modal_input @name = '@ps', @value = @ps OUT ,@focus=1\r\n\t\t\t--but_10 er bij\r\n\t\t\tEXEC sp_api_modal_button @name='@but_10',@value = 'Check', @valueout = @but_10 OUT,@class='btn-danger',@key='Enter'; if @but_10 is NULL return\r\n\t\t\tif @ps is null return\r\n\t\t\tif left(@ps,3)<>'ps:'\r\n\t\t\tBEGIN\r\n\t\t\t\texec sp_api_modal_text N'Dit is geen Tracy pallet sticker QR code'\r\n\t\t\t\t--exec sp_api_modal_restart--231130\r\n\r\n\t\t\t\tRETURN\r\n\t\t\tEND\t\r\n\t\t\r\n\r\n\t\t\tset @this_pallet_id=right(@ps,len(@ps)-3)\r\n\t\t\tif not exists(select 1 from #lijstje_onvoltooid where [scanned_pallet_id~col-6]=@this_pallet_id)\r\n\t\t\tBEGIN\r\n\t\t\t\texec sp_api_modal_text 'Fout, deze pallet staat niet in de lijst..'\r\n\t\t\t\treturn\r\n\t\t\tEND\r\n\t\t\tELSE\r\n\t\t\tBEGIN\r\n\t\t\t\t-- zet @mol\r\n\t\t\t\tset @mol=(select [mol_id~col-3] from #lijstje_onvoltooid where [scanned_pallet_id~col-6]=@this_pallet_id )\r\n\t\t\tEND\r\n\t\t\t\r\n\t\t\t--einde infolijstje\r\n\t\tEND\r\n\t\tif @mol is null --fallback naar top 1 \r\n\r\n\t\tset @mol=(select top 1 id from q_wms_micro_outbound_lines mol\r\n\t\t\twhere mol.wms_micro_outbound_id =@uuid\r\n\t\t\t--AND\t(select count(*) from wms_micro_outbound_line_barcode where wms_micro_outbound_lines_id=mol.id)<mol.Amount\r\n\t\t\t-- 230907 items zonder serienummer moeten wel SKU SCAN KRIJGEN... and (select scan_serial_number_outbound from xstock where id=(mol.xstock_id)) = 1 -- ER MOET SERIAL GESCAND WORDEN\r\n\t\t\tand (\r\n\t\t\t\t\tmol.is_processed =0 -- als deze door de loods op 1 wordt gezet\r\n\t\t\t\t\tOR\r\n\t\t\t\t\t--linked_serials <> amount\r\n\t\t\t\t\tlinked_amount <> amount --230901 dit betekent dat de (auto)assign nog niet compleet is (misschien nor replenish pallet maken etc.)\r\n\t\t\t\t)\t\r\n\t\t\torder by adv_pick_pos\r\n\t\t)\r\n\t\t--set @t=concat('1:',@mol); exec sp_api_toast @T\r\n\t\tset @no_serials =(select case (select scan_serial_number_outbound from xstock where id=(select xstock_id from wms_micro_outbound_lines where id=@mol)) when 1 then 0 else 1 end)\r\n\t\t\r\n\t\t--set @t=concat('mol:',@mol,N' nog verwerken..',case when @no_serials=1 then '**NO SERIALS**' else '' end) --indicator dat er geen serienummers nodig zijn\r\n\t\t--240610\r\n\t\tset @t=concat('mol:',@mol,N' pallet nr: ',(select pallet_nr from w_pallet where id=(select scanned_pallet_id from wms_micro_outbound_lines where id=@mol)),N' op deze pallet nog ',(select l_items\t- isnull(serial_items,0) from mol where mol_id=@mol),' verwerken..',case when @no_serials=1 then '**NO SERIALS**' else '' end) --indicator dat er geen serienummers nodig zijn\r\n\t\t\r\n\t\texec sp_api_modal_text @T\r\n\t\t \r\n\tend\r\n\r\n\r\n\r\nif @mol is null \r\n\tbegin\r\n\t\texec sp_api_modal_alert N'Scan serienummers is voltooid.' --231130 was sp_api_modal_text\r\n\t\texec sp_api_modal_clear\r\n\t\tRETURN\r\n\tend\t\r\n\r\n--230918 extra dummyscan voor deze @mol, want inmiddels kan een pallet ge-replenished zijn waardoor het aantal micro-items inmiddels volledig beschikbaar is\r\n\texec auto_assign_wms_micro_items_to_wms_micro_outbound_line @LINE_id=@mol\r\n\texec assign_pallets_to_micro_outbound_from_line\t@Line =@mol\r\n------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n\r\nselect @xstock_id=xstock_id, @aantal_serials_nodig = amount  from wms_micro_outbound_lines where id=@mol\r\n\r\nselect * into #registered_serials from wms_micro_outbound_line_barcode where wms_micro_outbound_lines_id=@mol\r\nif (select count(*) from #registered_serials)>=@aantal_serials_nodig\r\n\tbegin\r\n\t\tset @T=concat(N'Er is al gescand.','')\r\n\t\texec sp_api_modal_text @T\r\n\t\tset @T=concat(N'Aantal gescande codes:',(select count(*) from wms_micro_outbound_line_barcode where wms_micro_outbound_lines_id=@mol))\r\n\t\texec sp_api_modal_text @T\r\n\t\t--exec sp_api_modal_table @tmptable=N'#registered_serials'\r\n\t\t--exec sp_api_modal_alert @uuid\r\n\t\tEXEC sp_api_modal_button @name='@button5',@value = 'Meer Scannen', @valueout = @button5 OUT,@class='btn-danger',@key='F9'\r\n\t\tif isnull(@button5,N'')<>N'Meer Scannen'\r\n\t\treturn\r\n\tend\t\r\n\r\n \r\n\r\n\r\nif isnull(@sku_oke,0)\t=0\r\n\tbegin\r\n\t\tset @T=concat(N'pickpositie: ',(select top 1 position_code from pallet_status where micro_pick_allowed=1 and xstock_id=@xstock_id and out_completed is null))\r\n\t\texec sp_api_modal_text @T, @class='h1'\r\n\t\tSET @T=concat(N'Aantal: ',@aantal_serials_nodig,'. Artikelomschrijving: ',(select lookupcode from xstock where id=@xstock_id))\r\n\t\texec sp_api_modal_text @T\r\n\t\tSET @T=concat(N'Scan de SKU: ',(select sku from xstock where id=@xstock_id))--, ' en ', @aantal_serials_nodig,' serienummers'\t)\r\n\t\texec sp_api_modal_text @T\r\n\t\t\r\n\t\tEXEC sp_api_modal_input @name = '@sku_check', @value = @sku_check OUT,@hidden=0,@focus=1 --, @type='textarea',@rows=20--,@inline = 1 -- (multi line input)\r\n\t\tEXEC sp_api_modal_button @name='@button3',@value = N'Check', @valueout = @button3 OUT,@class='btn-danger',@key='F5' --Enter kan niet verstoort de flow\r\n\t\tif @button3 is null return\r\n\t\tif @sku_check is null return\r\n\t\texec sp_api_modal_text @sku_check\r\n\t\t\r\n\tend\t\t\r\nif not exists(select 1 from wms_micro_outbound_lines mol \r\n\t\t\t\tjoin xstock s on s.id= mol.xStock_id \r\n\t\t\t\twhere mol.id=@mol and \r\n\t\t\t\t\t(\r\n\t\t\t\t\t\ttrim(s.sku)=trim(@sku_check) \r\n\t\t\t\t\t\tor \r\n\t\t\t\t\t\t--230912 OOK EAN TOESTAAN I.P.V. SKU ALS ER GEEN SERIENUMMERS GESCAND HOEVEN TE WORDEN\r\n\t\t\t\t\t\t( trim(s.EAN_CODE)>N'' AND @no_serials =1 AND trim(s.EAN_CODE)=trim(@sku_check) )\r\n\t\t\t\t\t)\r\n\t\t\t\t)\r\n\tBEGIN\r\n\t\tset @T=concat(@sku_check,' is de SKU van een verkeerd artikel.')\r\n\t\t--231128 beep er bij\r\n\t\texec sp_api_modal_beep 1100, 500 --error !\r\n\r\n\t\texec sp_api_toast @T --N'* VERKEERD ARTIKEL ! *'\r\n\t\tEXEC sp_api_modal_value @name = '@sku_check',@value = NULL\r\n\t\tEXEC sp_api_modal_value @name = '@button3',@value = NULL\r\n\t\tset @SKU_OKE=0\r\n\t\treturn\r\n\tEND\r\nset @sku_oke=1\r\n\r\n\r\n------231001-------\r\nadd_serials_to_mol:\r\n---- L A B E L ----\r\n--exec sp_api_toast N'serials to mol...'--231130\r\n--231001 als hier heen wordt gesprongen kan het zijn dat @no_serials onbekend is..\r\nset @no_serials =(select case (select scan_serial_number_outbound from xstock where id=(select xstock_id from wms_micro_outbound_lines where id=@mol)) when 1 then 0 else 1 end)\r\n\r\n\r\nset @T=concat(N'NOG: ',@aantal_serials_nodig - (select count(*) from wms_micro_outbound_line_barcode where wms_micro_outbound_lines_id=@mol),' serienummers. (save=bijwerken)')\r\nexec sp_api_modal_text @T\r\n\r\n\r\n--extra 230907\r\nif @no_serials =1 \r\n\tBEGIN\r\n\t\tset @scanned_codes='no serials required'\r\n\t\t--set @button =N'Save'\r\n\tEND\r\n\t\t--oud: voor 230907\r\n--> set @scanned_codes= (select serialnumbers from wms_micro_outbound_lines where id=@mol)\t\t--231211 NIEUW ER VOOR..\r\nEXEC sp_api_modal_input @name = '@scanned_codes', @value = @scanned_codes OUT , @type='textarea',@rows=8, @focus=1 --,@inline = 1 -- (multi line input)\r\nEXEC sp_api_modal_button @name='@button',@value = 'Save', @valueout = @button OUT,@class='btn-danger',@key='F6'\r\nif @button is null return; --231211 extra wacht op button\r\n\r\nif @button='Save' -- opslaan, zodat je ze niet kwijt raakt \r\n\tBEGIN\r\n\t\tif @scanned_codes > N''\r\n\t\t\tBEGIN\r\n\t\t\t\tif @no_serials =0 --NORMALE SITUATIE MET SERIENUMMERS VERPLICHTING\r\n\t\t\t\t\tBEGIN\r\n\t\t\t\t\t\t-- log, is al 2x een lifesaver geweest!\r\n\t\t\t\t\t\tupdate wms_micro_outbound_lines set serialnumbers=concat(serialnumbers,@scanned_codes) where id=@mol--=@ID\r\n\r\n\t\t\t\t\t\t-- unieke barcodes registreren bij de micro outbound line\r\n\t\t\t\t\t\t--declare @scanned_codes nvarchar(max) = (select top 1 serialnumbers from wms_micro_outbound_lines where nullif(trim(serialnumbers),N'') is not null)\r\n\t\t\t\t\t\t--select serialnumbers,*  from wms_micro_outbound_lines where nullif(trim(serialnumbers),N'') is not null\r\n\t\t\t\t\t\t/*\r\n\t\t\t\t\t\t--krijg de unieke codes uit de scans en \r\n\t\t\t\t\t\tselect line from scanresult_as_table(@scanned_codes) \r\n\t\t\t\t\t\t\twhere nullif(trim(line),N'') is not NULL --\tzonder blanco regels!\r\n\t\t\t\t\t\t\t\t-- evt lengrte afdwingen and len(line) >15\r\n\t\t\t\t\t\t\tgroup by line -- maak uniek\r\n\t\t\t\t\t\t*/\r\n\t\t\t\t\t\t--select * from \r\n\t\t\t\t\t\t--declare @mol int=297\r\n\t\t\t\t\t\tinsert into wms_micro_outbound_line_barcode(wms_micro_outbound_lines_id,Line)\r\n\t\t\t\t\t\t\tselect @mol, line\r\n\t\t\t\t\t\t\tfrom _1\r\n\t\t\t\t\t\t\tcross apply ( select line from scanresult_as_table(@scanned_codes) \r\n\t\t\t\t\t\t\t\t\t\t\twhere nullif(trim(line),N'') is not NULL --\tzonder blanco regels!\r\n\t\t\t\t\t\t\t\t\t\t\t\t-- evt lengte afdwingen and len(line) >15\r\n\t\t\t\t\t\t\t\t\t\t\tgroup by line -- maak uniek\r\n\t\t\t\t\t\t\t\t\t\t) sr\r\n\t\t\t\t\t\t\twhere --beter pas bij toekennen beperken, want zo blijft deze scan-actie redelijk universeel  len(sr.line) >13 and --230823 zo hebben we geen last van de EAN CODES VAN AGNEOVO\r\n\t\t\t\t\t\t\t\tnot exists(select 1 from wms_micro_outbound_line_barcode where Line=sr.line)\r\n\r\n\t\t\t\t\t\t-- select * from wms_micro_outbound_line_barcode\r\n\t\t\t\t\t\t\r\n\r\n\t\t\t\t\t\t--EXEC sp_api_modal_button @name='@button2',@value = 'Klaar', @valueout = @button2 OUT,@class='btn-danger',@key='F7'\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t--set @T=concat(N'Aantal gescande codes:',(select count(*) from wms_micro_outbound_line_barcode where wms_micro_outbound_lines_id=@mol))\r\n\t\t\t\t\t\t--exec sp_api_modal_text @T\r\n\t\t\t\t\t\t\t--select * into #unique from wms_micro_outbound_line_barcode where wms_micro_outbound_lines_id=@mol\r\n\t\t\t\t\t\t\t--exec sp_api_modal_table @tmptable=N'#unique'\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t--GELIJK TOEKENNEN\r\n\t\t\t\t\t\texec assign_scanned_serials_to_micro_items \r\n\t\t\t\t\t\t\t\t@mob=@uuid -- KOPPEL DE MICRO ITEMS (en verwijder eventueel de overscans)\r\n\t\t\t\t\t\t\t\t,@remove_unassigned =1\r\n\t\t\t\t\t\t\r\n\t\t\t\t\tEND\t--(OPLSAAN MET SERIENUMMER VERWERKEN)\r\n\t\t\t\t--AUTOMATISCH KLAARBOEKEN PER MOL\r\n\t\t\t\tif @no_serials =1 --230907 altijd conform bij NO SERIALS\r\n\t\t\t\t\t--bijserienummers moet het aantal overeenkomen\r\n\t\t\t\t\tor exists (select 1 from q_wms_micro_outbound_lines where id=@mol and linked_serials=Amount) -- volledig toegekend! was: @button2=N'Klaar' \r\n\t\t\t\t\tbegin\r\n\t\t\t\t\t\tupdate wms_micro_outbound_lines set is_processed =1 where id=@mol  -- 230824 op processed zetten,zodat de volgende gekozen kan worden..\r\n\t\t\t\t\t\t--230828 dit verwijdert de scans die niet geloppeld zijn aan items.\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t--exec sp_api_modal_alert N'items volledig gescand, scan QR voor eventueel volgende items.'\t\r\n\t\t\t\t\t\texec sp_api_toast N'items volledig gescand, scan QR voor eventueel volgende items.'\t\r\n\t\t\t\t\t\t--exec sp_api_modal_restart --231130 ipv clear\r\n\t\t\t\t\t\t--exec sp_api_modal_value @name=N'@button_gearriveerd_bij_pallet'\r\n\t\t\t\t\t\texec sp_api_modal_clear --231211 er bij\r\n\t\t\t\t\t\treturn\r\n\t\t\t\t\t\t--EXEC sp_api_modal_values_clear -- @ignore = N'company'\r\n\t\t\t\t\t\t-- voor alert gezet exec sp_api_modal_clear\r\n\t\t\t\t\t\t--EXEC sp_api_modal_restart --230907 proberen..\r\n\t\t\t\t\tend\t\r\n\t\t\t\t\r\n\t\t\tEND\r\n\t\t--EXEC sp_api_modal_value @name = '@button',@value = NULL \t\t--231211 save button un-clicken\t\r\n\t\t--EXEC sp_api_modal_value @name = '@sku_ok',@value = NULL\t\t\t--231211\r\n\t\t--EXEC sp_api_modal_value @name = '@sku_check',@value = NULL\t\t--231211\r\n\t\t--EXEC sp_api_modal_value @name = '@scanned_codes',@value = NULL\t--231211\r\n\t\t--return\t\r\n\t\texec sp_api_modal_clear --restart--231211 test restart ! clear --230907\t--als je hier niet cleart, dan kan je tussendoor opslaan..\r\n\t\treturn\r\n\tend\r\n\r\n----------------------\r\n-- LABELS\r\n----------------------\r\nexec sp_api_modal_clear -- 231211 TEST ER BIJ \r\nRETURN\r\nGOFULL:\r\nif @this_pallet_type ='FULL' --> SHOW SCAN BUTTON!\r\nBEGIN\r\n\tEXEC sp_api_modal_button @name='@button_scan_serials_for_mol',@value = 'Scan serials', @valueout = @button_scan_serials_for_mol OUT,@class='btn-danger'\r\n\t--tot hier inserted 231001 gelijk hier mogelijkheid om serienummers te scannen:\r\n\tif @button_scan_serials_for_mol is null return\t\r\n\tif @button_scan_serials_for_mol='Scan serials' goto add_serials_to_mol --231001\r\nEND\r\nRETURN --GOFULL\r\n\r\nGOREPLENISH:\r\nif @this_pallet_type ='REPLENISH' --> SHOW REPLENISH BUTTON!\r\nBEGIN\r\n\tif @replenish_loc is null \r\n\tBEGIN\r\n\t\tset @replenish_loc=(select pick_position from xstock where id=@this_xstock_id)\r\n\tEND\t\r\n\t--check of de replenishment al is geregistreerd op de pallet\r\n\t-- losse items picken en darvan serienummers scannen is niet hier. dit is alleen replenishen!\r\n\tif not exists( select * from w_pallet where id=@this_pallet_id and micro_pick_allowed=1)\r\n\tBEGIN\r\n\t\tEXEC sp_api_modal_input @name = '@replenish_loc', @value = @replenish_loc OUT \r\n\t\tEXEC sp_api_modal_button @name='@button_replenish',@value = 'Replenish NOW', @valueout = @button_replenish OUT,@class='btn-danger'\r\n\t\tif @button_replenish is null return\t\r\n\t\tif @button_replenish='Replenish NOW' --hier evt jump naar separaat replenishment\r\n\t\tBEGIN\r\n\t\t\tif nullif(trim(@replenish_loc),N'') is NULL\r\n\t\t\tBEGIN\r\n\t\t\t\texec sp_api_modal_text N'REPLENISHMENT LOCATION REQUIRED'\r\n\t\t\t\tRETURN\r\n\t\t\tEND\r\n\t\t\tupdate w_pallet set micro_pick_allowed=1,position_code=@replenish_loc where id=@this_pallet_id\r\n\t\t\tupdate wms_micro_outbound_lines set scanned_pallet_id=@this_pallet_id where id=@pallet_mol_id\r\n\t\t\texec sp_api_modal_clear\r\n\t\t\t--PICKLOKATIE !!\r\n\t\t\t--TODO...\r\n\t\t\t--+ EVENTUEEL HELE REPLENISH KOP\r\n\t\tEND\r\n\tEND\r\nEND\t\r\nRETURN --GOREPLENISH\r\n\r\n\r\n\t\t\t\t\r\n\r\n\r\n/*\r\n----231001----\r\nreplenish_mol:\r\n----LABEL-----\r\nupdate w_pallet set micro_pick_allowed=1 where id=\r\nreturn\r\n*/\r\n\r\n/* --230821 RESET UITGESCHAKELD\r\nEXEC sp_api_modal_button @name='@button4',@value = 'Reset', @valueout = @button4 OUT,@class='btn-danger',@key='F8'\r\n\r\nif @button4=N'Reset'\r\n\tBEGIN\r\n\t\tdelete from wms_micro_outbound_line_barcode where wms_micro_outbound_lines_id=@mol\r\n\t\tEXEC SP_API_MODAL_CLEAR\r\n\t\tEXEC sp_api_modal_value @name = '@button4',@value = NULL\r\n\tend\r\n*/\r\n-- als het aantal in #unique overeenkomt met het aantal nog te vullen serienummers dan kunnen ze worden toegekend\r\n\t",
                    "action_id": 692,
                    "action_name": "#qr_action_verwerk_micro_pick_v11",
                    "source_table": "api_actions"
                },
                {
                    "sql_source": "-----------------------------------------------------------------------------\r\n-- global action check_serial_number; kijkt of een serienummer al is gebruikt\r\n/*\r\n\tpre declare:\r\n\t@item_serial_number, @button\r\n*/\r\n-----------------------------------------------------------------------------\r\nexec #breed100\r\nEXEC sp_api_modal_input @name = '@item_serial_number', @value = @item_serial_number OUT --,@inline = 1\r\nselect w_pallet_id, a=count(*) into #double_out from w_pallet_out group by w_pallet_id having count(*) >1\r\nif exists(select 1 from #double_out)\r\nBEGIN\r\n\texec sp_api_modal_html N'<h2>Er zijn dubbele out-registraties, dan kan/mag nooit</h2>'\r\n\texec sp_api_modal_table @tmptable=N'#double_out' ,@print=1\r\nEND\r\n\r\n\r\nEXEC sp_api_modal_button @name='@button',@value = 'Check', @valueout = @button OUT,@class='btn-danger',@key='Enter'\r\nif @button is not NULL\r\nBEGIN\r\n\tselect top 20\r\n\ti.lookupcode,\ti.sku,\ti.position_code,\ti.container_number,\ti.wms_micro_outbound_id,\ti.out_ref,\ti.item_serial_number,\ti.remark,\ti.item_lotnr,mob.date as out_date\r\n\tinto #T\r\n\tfrom q_wms_micro_item i\r\n\t\tleft join q_wms_micro_outbound mob on mob.id=wms_micro_outbound_id\r\n\twhere item_serial_number like concat(@item_serial_number,'%')\r\n\t \r\n\texec sp_api_modal_table @tmptable=N'#T'\r\nEND\t",
                    "action_id": 714,
                    "action_name": "check_data",
                    "source_table": "api_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_modal_html2pdf",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@html",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@html n"
                },
                {
                    "name": "@filename",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 4096,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@filename n"
                },
                {
                    "name": "@margin",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@margin i"
                },
                {
                    "name": "@top",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@top i"
                },
                {
                    "name": "@left",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@left i"
                },
                {
                    "name": "@right",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@right i"
                },
                {
                    "name": "@bottom",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 7,
                    "full_declaration_from_def": "@bottom i"
                },
                {
                    "name": "@store",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 8,
                    "full_declaration_from_def": "@store b"
                },
                {
                    "name": "@api_files_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 9,
                    "full_declaration_from_def": "@api_files_id i"
                },
                {
                    "name": "@context",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 10,
                    "full_declaration_from_def": "@context n"
                },
                {
                    "name": "@context_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 11,
                    "full_declaration_from_def": "@context_id i"
                },
                {
                    "name": "@omitBackground",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 12,
                    "full_declaration_from_def": "@omitBackground b"
                },
                {
                    "name": "@printBackground",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "1",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 13,
                    "full_declaration_from_def": "@printBackground b"
                },
                {
                    "name": "@category",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 14,
                    "full_declaration_from_def": "@category n"
                },
                {
                    "name": "@cssfile",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 15,
                    "full_declaration_from_def": "@cssfile n"
                },
                {
                    "name": "@waitfor",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "400",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 16,
                    "full_declaration_from_def": "@waitfor i"
                }
            ],
            "embedded_example": "EXEC sp_api_modal_html2pdf @html = N'<i>bold</i>'",
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_modal_image",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@src",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@src n"
                },
                {
                    "name": "@class",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "'text-center'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@class n"
                },
                {
                    "name": "@inline",
                    "type_from_sys": "bit",
                    "type_from_def": "B",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@inline B"
                },
                {
                    "name": "@print",
                    "type_from_sys": "bit",
                    "type_from_def": "B",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@print B"
                },
                {
                    "name": "@printonly",
                    "type_from_sys": "bit",
                    "type_from_def": "B",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@printonly B"
                },
                {
                    "name": "@width",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 40,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@width n"
                },
                {
                    "name": "@imageclass",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "'mw-100'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 7,
                    "full_declaration_from_def": "@imageclass n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_modal_input",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@name n"
                },
                {
                    "name": "@value",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@value n"
                },
                {
                    "name": "@class",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "''",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@class n"
                },
                {
                    "name": "@max",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@max i"
                },
                {
                    "name": "@focus",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@focus b"
                },
                {
                    "name": "@select",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@select b"
                },
                {
                    "name": "@inline",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 7,
                    "full_declaration_from_def": "@inline b"
                },
                {
                    "name": "@hidden",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 8,
                    "full_declaration_from_def": "@hidden b"
                },
                {
                    "name": "@identifier",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 9,
                    "full_declaration_from_def": "@identifier n"
                },
                {
                    "name": "@class_updated",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 10,
                    "full_declaration_from_def": "@class_updated n"
                },
                {
                    "name": "@type",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 11,
                    "full_declaration_from_def": "@type n"
                },
                {
                    "name": "@placeholder",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 12,
                    "full_declaration_from_def": "@placeholder n"
                },
                {
                    "name": "@rows",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 13,
                    "full_declaration_from_def": "@rows i"
                },
                {
                    "name": "@scanner",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 14,
                    "full_declaration_from_def": "@scanner b"
                },
                {
                    "name": "@scanner_visible",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 15,
                    "full_declaration_from_def": "@scanner_visible b"
                },
                {
                    "name": "@scanner_action_prefix",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 512,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 16,
                    "full_declaration_from_def": "@scanner_action_prefix n"
                },
                {
                    "name": "@scanner_items_text",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 17,
                    "full_declaration_from_def": "@scanner_items_text  n"
                },
                {
                    "name": "@scanner_direct_post",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 18,
                    "full_declaration_from_def": "@scanner_direct_post b"
                },
                {
                    "name": "@use_placeholder",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 19,
                    "full_declaration_from_def": "@use_placeholder n"
                },
                {
                    "name": "@seed",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 20,
                    "full_declaration_from_def": "@seed n"
                },
                {
                    "name": "@number_min",
                    "type_from_sys": "float",
                    "type_from_def": "f",
                    "max_length_bytes": 8,
                    "precision": 53,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 21,
                    "full_declaration_from_def": "@number_min f"
                },
                {
                    "name": "@number_max",
                    "type_from_sys": "float",
                    "type_from_def": "f",
                    "max_length_bytes": 8,
                    "precision": 53,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "100",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 22,
                    "full_declaration_from_def": "@number_max f"
                },
                {
                    "name": "@number_step",
                    "type_from_sys": "float",
                    "type_from_def": "f",
                    "max_length_bytes": 8,
                    "precision": 53,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 23,
                    "full_declaration_from_def": "@number_step f"
                },
                {
                    "name": "@ignore_keys",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 24,
                    "full_declaration_from_def": "@ignore_keys n"
                },
                {
                    "name": "@autocomplete",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 25,
                    "full_declaration_from_def": "@autocomplete n"
                },
                {
                    "name": "@lang",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 16,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 26,
                    "full_declaration_from_def": "@lang n"
                }
            ],
            "embedded_example": "EXEC sp_api_modal_input @name = '@lastname', @value = @lastname OUT --,@inline = 1\r\n\t--,@class = ''\r\n\t--,@max = 8 -- max chars\r\n\t--,@focus = 0\r\n\t--,@select = NULL\r\n\t--,@inline = 0\r\n\t--,@hidden = 0\r\n\t--,@identifier = NULL\r\n\t--,@class_updated = NULL\r\n\t--,@type = 'textarea'\r\n\t--,@placeholder nvarchar(128) = NULL\r\n\t--,@rows = NULL --when @type = 'textarea'\r\n\t--,@use_placeholder = NULL\r\n\t--,@ignore_keys nvarchar(max) = NULL --ignore key codes from buttons",
            "embedded_description": null,
            "co_occurrence_stats": {
                "dbo.sp_api_modal_table": 55,
                "dbo.sp_api_modal_csv": 12,
                "dbo.sp_api_modal_text": 102,
                "dbo.sp_api_modal_date": 24,
                "dbo.sp_api_modal_button": 115,
                "dbo.sp_api_goto": 13,
                "dbo.sp_api_toast": 47,
                "dbo.sp_api_modal_alert": 27,
                "dbo.sp_api_modal_select": 16,
                "dbo.sp_api_modal_modal": 18,
                "dbo.sp_api_modal_print": 7,
                "dbo.ABCDATE": 13,
                "dbo.sp_api_modal_pathname": 1,
                "dbo.sp_api_modal_select_table": 8,
                "dbo.sp_api_modal_clear": 13,
                "dbo.abcLeft": 1,
                "dbo.sp_api_modal_save": 5,
                "dbo.sp_api_modal_table_update": 8,
                "dbo.sp_api_modal_post": 5,
                "dbo.sp_api_populate_card": 2,
                "dbo.ABCWEEKNR": 3,
                "dbo.hasRole": 1,
                "dbo.sp_api_modal_input_decimal": 3,
                "dbo.sp_api_modal_download": 1,
                "dbo.sp_api_modal_date_from_to": 1,
                "dbo.sp_api_modal_route": 1,
                "dbo.sp_api_modal_value": 2,
                "dbo.sp_api_modal_choose": 8,
                "dbo.sp_api_populate_card_views": 1,
                "dbo.sp_api_email": 4,
                "dbo.sp_api_push_bullet": 1,
                "dbo.sp_api_modal_scanner": 1,
                "dbo.sp_sys_file_upload_base64": 1,
                "dbo.sp_api_modal_qr_scanner": 1,
                "dbo.sp_api_modal_restart": 2,
                "dbo.sp_api_modal_html": 1,
                "dbo.sp_api_modal_values_clear": 1,
                "dbo.sp_api_modal_get_value": 4,
                "dbo.sp_api_modal_choose_list": 1
            },
            "real_usage_examples": [
                {
                    "sql_source": "--RH210215 BEZIG DOWNLOAD ALS CSV ER BIJ.. lukt nofg niet..\nDECLARE @date nvarchar(128),@date2 nvarchar(128),@button nvarchar(128),@button2 nvarchar(128),@companyname nvarchar(128), @FileName nvarchar(128)\nset @date = dbo.workDate()\nset @date2 = dbo.workDate()\nSET @companyname = (select CompanyName from xcompany where id = @id)\nset @Filename=concat(@Companyname,'.csv')\n/*EXEC sp_api_modal_text 'Zoek op transport bedrijf'\nEXEC sp_api_modal_input @name='Transporteur',@value = @TransComp OUT,@focus=1,@select=1 -- zoek veld\n*/\nEXEC sp_api_modal_text 'Van:'\nEXEC sp_api_modal_date @name='Date',@value = @date OUT,@class='w-24',@focus=1,@select=1  -- zoek veld\nEXEC sp_api_modal_text 'Tot en met:'\nEXEC sp_api_modal_date @name='Date2',@value = @date2 OUT,@class='w-24' -- zoek veld\n--SET @date2 = CONCAT(@date2,' 23:59:59.999')\nSET @button = 'Intrastat_Melding'\nEXEC sp_api_modal_button @name='button',@value = 'Intrastat_Melding',@valueout = @button OUT,@class = 'btn-primary',@key = 'Enter'\nEXEC sp_api_modal_button @name='button',@value = 'Excel_CSV',@valueout = @button OUT,@class = 'btn-primary',@key = 'F5'\nEXEC sp_api_modal_text @companyname,N'h4 text-muted',@printonly=1\nEXEC sp_api_modal_print\n\nIF @button =  'Intrastat_Melding'\nBEGIN\nSELECT distinct [QUANTITY@] = sum(QUANTITY@), [ARTICLE~col-sm-5] = ARTICLE, LAND, INTRASTAT_CODE, [NETT_WEIGHT@] = sum(NETT_WEIGHT@), ISO, [AMOUNT@] = sum(AMOUNT@)\nINTO #Intrastat_Melding\nFROM          RV_INTRASTAT_MELDING\nWHERE\t\t(INTRASTAT_CODE is not NULL) AND (CompanyID = @id) AND (TransactionDate BETWEEN @date AND @date2) AND (THTDT = 2)\nGROUP BY ARTICLE,LAND,INTRASTAT_CODE,ISO\nEXEC sp_api_modal_table @tmptable=N'#Intrastat_Melding',@orderby=N'ORDER BY 2 ASC',@print=1\n\nEND \n\t\n\nIF @button =  'Excel_CSV'\nBEGIN\nSELECT distinct [QUANTITY] = sum(QUANTITY@), [ARTICLE] = ARTICLE, LAND, INTRASTAT_CODE, [NETT_WEIGHT] = sum(NETT_WEIGHT@), ISO, [AMOUNT] = sum(AMOUNT@)\nINTO #Intrastat_CSV\nFROM          RV_INTRASTAT_MELDING\nWHERE\t\t(INTRASTAT_CODE is not NULL) AND (CompanyID = @id) AND (TransactionDate BETWEEN @date AND @date2) AND (THTDT = 2)\nGROUP BY ARTICLE,LAND,INTRASTAT_CODE,ISO\n--EXEC sp_api_modal_table @tmptable=N'#Intrastat_CSV',@print=1\n--EXEC sp_api_modal_csv\t@tmptable = '#Intrastat_CSV'\t,@filename = @filename\t,@sep = ';'\n\n--EXEC sp_api_modal_table @tmptable=N'#Intrastat_CSV'\nEXEC sp_api_modal_csv @tmptable=N'#Intrastat_CSV',@ansi =1,@filename=@FileName\n\nEND \n\n\n\n\n\n\n\n",
                    "action_id": 1,
                    "action_name": "INTRASTAT_MELDING",
                    "source_table": "api_card_actions"
                },
                {
                    "sql_source": "DECLARE @wat nvarchar(200), @linktoME int,@text nvarchar(max)\n\nIF {[ctr2].cth_fase} NOT IN (N'openSale','openPrice')\n\tBEGIN\n\tEXEC sp_api_modal_Alert N'Let op!', N'De verkoop is reeds gesloten. U kan niet meer de toewijzing wijzigen.' \n\tEXEC sp_api_modal_clear\n\tRETURN\n\tEND\n\nSET @linktoME ={[ctr2].id}\n--201028 erbij ivm overbrengen..\nif @LinkToMe is NULL set @LinkToMe={[ctr_overbrengen].id}\n\nDECLARE @maxTeLinken INT,@maxBeschikbaar INT\nSELECT @maxTeLinken = (ctrAmount-IVTOTAL) FROM Q_xTransactionDetail WHERE ID=@LinkToME\n\nIF @maxTeLinken = 0\n\tBEGIN\n\t\tEXEC sp_api_modal_alert N'Regel is al volledig toegewezen'\n\t\tEXEC\t sp_api_go2 1 -- 1 stap terug (+list view; detailviewgebruik EXEC sp_api_go2 1,0)\n\t\tRETURN;\n\tEND\n\n\nSET @maxBeschikbaar = {[ctr1_toewijsbaar].available}\nIF @maxBeschikbaar < @maxTeLinken\n\tBEGIN\n\t\tdeclare @Melding nvarchar(200)\n\t\tset @Melding = concat(N'Niet genoeg beschikbaar! Te linken:',N' ',@maxTeLinken)\n\t\tEXEC sp_api_modal_text @Melding,N'h4 text-muted'\n\t\tSET @text = CONCAT('U kunt maximaal ',@maxBeschikbaar,' van de ',@maxTeLinken,' linken')\n\t\tEXEC sp_api_modal_text @text,N'm-4'\n\t\tSET @maxTeLinken = @maxBeschikbaar\n\tEND\n\nIF @maxTeLinken < 0\n\tBEGIN\n\t\tEXEC sp_api_modal_alert N'Probleem!',N'Regel heeft meer toegewezen dan mag. Ga naar de toewijzing (IV link) en verlaag deze.'\n\t\tEXEC sp_api_modal_clear\n\tEND\n\nDECLARE @aantalTeLinken INT = @maxTeLinken\n\t,@button nvarchar(50)\n\nEXEC sp_api_modal_input @name='Aantal',@value = @aantalTeLinken OUT,@focus=1,@select=1\nEXEC sp_api_modal_button @name='button',@value = 'Link aantal',@valueout=@button OUT,@key=N'Enter'\nIF @button IS NULL RETURN\nset @wat=N'Gekozen ID: '+str(@ID)+' wordt gekoppeld aan CTR: '+str(@LinktoME)\nexec sp_api_toast @wat\n--RETURN; --test\n\nif @linktoME is not null\n\tBEGIN\n\t\texec @main_db.dbo.map @linktoME,@ID, @aantalTeLinken\n\t\t\n\t\t--zet return path\n\t\tSET @ctr2_id = {[ctr2].id}\n\t\tSET @verkoop_id = {[verkoop].id}\n\t\tIF @ctr2_id IS NOT NULL AND @verkoop_id IS NOT NULL AND @aantalTeLinken = @maxTeLinken\n\t\t\tBEGIN\n\t\t\t\tSET @goto = CONCAT('/verkoop/',@verkoop_id,'/ctr2/',@ctr2_id,'/iv2')\n\t\t\t\tSET @referer_path = CONCAT('/verkoop/',@verkoop_id,'/ctr2')\n\t\t\t\tSET @referer_search = CONCAT(N'?id=',@ctr2_id)\n\t\t\t\tEXEC sp_api_toast N'Regel(s) is/zijn gelink bla',N'alert-primary'\t\t\t\t\n\t\t\t\tEXEC sp_api_goto @goto,@referer_path=@referer_path,@referer_search=@referer_search\n\t\t\tEND\n\t\t--210115 \n--\t\texec sp_api_go3\n\t\texec sp_api_modal_clear\n\tEND\n\n\n--if @parent_card_name='ctr2'\n--\tBEGIN\n--\t\texec @main_db.dbo.map @ID, @Parent_ID\n--\tEND\n--else --neem aan parent_parent...\n--\tBEGIN\n--\t\texec @main_db.dbo.map @ID, @Parent_Parent_ID\n--\tEND\n\n--EXEC sp_api_goto @path",
                    "action_id": 13,
                    "action_name": "link_this",
                    "source_table": "api_card_actions"
                },
                {
                    "sql_source": "declare @LF int = {[xlandfreight].id}\nif @LF is null\n\tbegin\n\t\texec sp_api_toast N'Er is geen landvracht om op te boeken'\n\t\treturn;\n\tend\n\nDECLARE @mes nvarchar(200), @aantal nvarchar(20) --='100'\nset @Mes =N'Overnemen van een (deel van) de vracht'\n\nEXEC sp_api_modal_text @text = @mes,@class = 'h3 text-muted'\nEXEC sp_api_modal_text 'Aantal'\nEXEC sp_api_modal_input @name='aantal',@value = @aantal OUT,@focus=1\n\nDECLARE @button nvarchar(128)\nEXEC sp_api_modal_button @name='button',@value = 'Toevoegen',@valueout = @button OUT,@class = 'btn-primary',@key = 'Enter'\nIF @button IS NOT NULL\n\tBEGIN\n\t\tIF \tTRY_CAST(@aantal as int) >\t 0 \n\t\t\tBEGIN\n\n\t\t\t\texec @main_db.dbo.ExtraVracht_lfctr @LFCTR_ID=@ID ,@Landfreight_ID=@LF ,@TransferAmount=@Aantal\n\t\t\t\tEXEC sp_api_modal_clear\t\t\t\t\t\t\n\t\t\t\tRETURN\n\t\t\tEND\n\t\tELSE\n\t\t\tEXEC sp_api_modal_text 'Aantal is niet geldig!','text-danger'\n\tEND\n",
                    "action_id": 34,
                    "action_name": "Neem over",
                    "source_table": "api_card_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_modal_input_calculator",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 510,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "N'calculator",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@name n"
                },
                {
                    "name": "@value",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@value n"
                },
                {
                    "name": "@class",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "''",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@class n"
                },
                {
                    "name": "@focus",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@focus b"
                },
                {
                    "name": "@select",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@select b"
                },
                {
                    "name": "@inline",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@inline b"
                },
                {
                    "name": "@hidden",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 7,
                    "full_declaration_from_def": "@hidden b"
                },
                {
                    "name": "@identifier",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 8,
                    "full_declaration_from_def": "@identifier n"
                },
                {
                    "name": "@class_updated",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 9,
                    "full_declaration_from_def": "@class_updated n"
                },
                {
                    "name": "@type",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 10,
                    "full_declaration_from_def": "@type n"
                },
                {
                    "name": "@placeholder",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 11,
                    "full_declaration_from_def": "@placeholder n"
                },
                {
                    "name": "@precision",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "18",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 12,
                    "full_declaration_from_def": "@precision i"
                },
                {
                    "name": "@scale",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "2",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 13,
                    "full_declaration_from_def": "@scale i"
                },
                {
                    "name": "@use_placeholder",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 14,
                    "full_declaration_from_def": "@use_placeholder n"
                }
            ],
            "embedded_example": "EXEC sp_api_modal_input_calculator @value = @value OUT",
            "embedded_description": null,
            "co_occurrence_stats": {
                "dbo.sp_api_modal_text": 1,
                "dbo.sp_api_modal_button": 1
            },
            "real_usage_examples": [
                {
                    "sql_source": "EXEC sp_api_modal_text 'Calculator',N'h2'\n--DECLARE @calc nvarchar(256) = '0',@button nvarchar(128),@result nvarchar(1000),@sql nvarchar(1000)\n--EXEC sp_api_modal_input_calculator @name='calc',@value = @calc OUT,@focus=1,@select=1\nEXEC sp_api_modal_input_calculator @value = @value OUT\nEXEC sp_api_modal_button @name='@button',@value = 'Bereken',@valueout = @button OUT,@class = 'btn-primary',@key = 'Enter'\nEXEC sp_api_modal_text @value\n/*\nRETURN\n\n\nBEGIN TRY\n\nDECLARE @KeepValues nvarchar(50) = N'%[^0-9+* /().-]%'\n    While PATINDEX(@KeepValues, @calc) > 0\n        Set @calc = Stuff(@calc, PatIndex(@KeepValues, @calc), 1, '')\n\tSET @result = @calc +' = '\n\tSET @sql = N'SET @calc = TRY_CAST((1.0*'+@calc+') as decimal(18,2))'\n\tSET @calc = 0\n\tEXEC sp_executesql @sql,N'@calc decimal(18,2) OUT',@calc OUT\n\tSET @result+= @calc\nEND TRY BEGIN CATCH\n\tSET @result+= 'Err'\n END CATCH\n*/",
                    "action_id": 113,
                    "action_name": "sys_calculator",
                    "source_table": "api_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_modal_input_date",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@name n"
                },
                {
                    "name": "@value",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@value n"
                },
                {
                    "name": "@class",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@class n"
                },
                {
                    "name": "@focus",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@focus b"
                },
                {
                    "name": "@select",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@select b"
                },
                {
                    "name": "@inline",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@inline b"
                },
                {
                    "name": "@identifier",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 7,
                    "full_declaration_from_def": "@identifier n"
                },
                {
                    "name": "@class_updated",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 8,
                    "full_declaration_from_def": "@class_updated n"
                },
                {
                    "name": "@hidden",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 9,
                    "full_declaration_from_def": "@hidden b"
                },
                {
                    "name": "@min",
                    "type_from_sys": "date",
                    "type_from_def": "d",
                    "max_length_bytes": 3,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 10,
                    "full_declaration_from_def": "@min d"
                },
                {
                    "name": "@max",
                    "type_from_sys": "date",
                    "type_from_def": "d",
                    "max_length_bytes": 3,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 11,
                    "full_declaration_from_def": "@max d"
                },
                {
                    "name": "@seed",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 12,
                    "full_declaration_from_def": "@seed n"
                }
            ],
            "embedded_example": "EXEC sp_api_modal_input_date @name = N'@datum', @value = @datum OUT",
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_modal_input_datetime",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 510,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@name n"
                },
                {
                    "name": "@value",
                    "type_from_sys": "datetime2",
                    "type_from_def": "d",
                    "max_length_bytes": 6,
                    "precision": 19,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@value d"
                },
                {
                    "name": "@class",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "''",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@class n"
                },
                {
                    "name": "@focus",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@focus b"
                },
                {
                    "name": "@select",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@select b"
                },
                {
                    "name": "@inline",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "1",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@inline b"
                }
            ],
            "embedded_example": "EXEC sp_api_modal_input_datetime N'@datetime',@value = @datetime OUT",
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_modal_input_datetime_test",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 510,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@name n"
                },
                {
                    "name": "@value",
                    "type_from_sys": "datetime2",
                    "type_from_def": "d",
                    "max_length_bytes": 6,
                    "precision": 19,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@value d"
                },
                {
                    "name": "@class",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "''",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@class n"
                },
                {
                    "name": "@focus",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@focus b"
                },
                {
                    "name": "@select",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@select b"
                },
                {
                    "name": "@inline",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "1",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@inline b"
                }
            ],
            "embedded_example": "EXEC sp_api_modal_input_datetime N'@datetime',@value = @datetime OUT",
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_modal_input_decimal",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 510,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@name n"
                },
                {
                    "name": "@value",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@value n"
                },
                {
                    "name": "@class",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@class n"
                },
                {
                    "name": "@max",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@max i"
                },
                {
                    "name": "@focus",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@focus b"
                },
                {
                    "name": "@select",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@select b"
                },
                {
                    "name": "@inline",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 7,
                    "full_declaration_from_def": "@inline b"
                },
                {
                    "name": "@hidden",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 8,
                    "full_declaration_from_def": "@hidden b"
                },
                {
                    "name": "@identifier",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 9,
                    "full_declaration_from_def": "@identifier n"
                },
                {
                    "name": "@class_updated",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 10,
                    "full_declaration_from_def": "@class_updated n"
                },
                {
                    "name": "@type",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 11,
                    "full_declaration_from_def": "@type n"
                },
                {
                    "name": "@placeholder",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 12,
                    "full_declaration_from_def": "@placeholder n"
                },
                {
                    "name": "@precision",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "18",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 13,
                    "full_declaration_from_def": "@precision i"
                },
                {
                    "name": "@scale",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "2",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 14,
                    "full_declaration_from_def": "@scale i"
                },
                {
                    "name": "@use_placeholder",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 15,
                    "full_declaration_from_def": "@use_placeholder n"
                },
                {
                    "name": "@ignore_keys",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 16,
                    "full_declaration_from_def": "@ignore_keys n"
                },
                {
                    "name": "@seed",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 17,
                    "full_declaration_from_def": "@seed n"
                }
            ],
            "embedded_example": "EXEC sp_api_modal_input_decimal @name = '@price', @value = @price OUT, @inline = 1 --,@precision = 18,@scale = 2",
            "embedded_description": null,
            "co_occurrence_stats": {
                "dbo.sp_api_modal_button": 10,
                "dbo.sp_api_modal_text": 7,
                "dbo.sp_api_modal_route": 2,
                "dbo.sp_api_toast": 3,
                "dbo.sp_api_modal_clear": 3,
                "dbo.sp_api_modal_date": 3,
                "dbo.sp_api_modal_table": 4,
                "dbo.sp_api_modal_modal": 2,
                "dbo.sp_api_modal_input": 3,
                "dbo.sp_api_modal_table_update": 2,
                "dbo.hasRole": 1,
                "dbo.sp_api_modal_save": 1,
                "dbo.sp_api_modal_value": 1,
                "dbo.sp_api_modal_post": 1,
                "dbo.sp_api_modal_choose": 1,
                "dbo.sp_api_modal_select_table": 2,
                "dbo.sp_api_modal_alert": 1,
                "dbo.sp_api_modal_restart": 1,
                "dbo.sp_api_modal_csv": 1,
                "dbo.sp_api_modal_date_from_to": 1
            },
            "real_usage_examples": [
                {
                    "sql_source": "DECLARE @F_ReductionPerc decimal(18,2)\nEXEC sp_api_modal_input_decimal @name='Percentage', @value= @F_ReductionPerc OUT,@focus=1\n\nEXEC sp_api_modal_button @name='@button',@value = 'Opslaan', @valueout = @button OUT,@class='btn-danger',@key='Enter'\n\nIF @button IS NOT NULL AND @F_ReductionPerc IS NULL EXEC sp_api_modal_text N'Ongeldige waarde'\nIF @button IS NOT NULL AND @F_ReductionPerc IS NOT NULL\n\tBEGIN\n\t\tDECLARE @cursor CURSOR,@idval INT\n\t\tSET @cursor = CURSOR LOCAL FAST_FORWARD FOR SELECT value FROM string_split(@ids,',')\n\t\tOPEN @cursor;\n\t\tFETCH NEXT FROM @cursor INTO @idval\n\t\tWHILE @@FETCH_STATUS = 0\n\t\t\tBEGIN\n\t\t\t\tUPDATE xCompany SET F_ReductionPerc = case when @F_ReductionPerc<0 then -1 * @F_ReductionPerc else @F_ReductionPerc end WHERE id = @idval\n\t\t\t\tUPDATE xcompanycostsettings SET setting = case when @F_ReductionPerc>0 then -1 * @F_ReductionPerc else @F_ReductionPerc end\n\t\t\t\t\tWHERE xCompany_ID =@idval and xCompanyLinkField=N'F_ReductionPerc'\n\t\t\t\tFETCH NEXT FROM @cursor INTO @idval\n\t\t\tEND\n\t\tCLOSE @cursor;\n\t\tDEALLOCATE @cursor;\n\t\tEXEC sp_api_modal_clear\n\t\tEXEC sp_api_modal_select_all_clear\n\tEND",
                    "action_id": 722,
                    "action_name": "Korting op factuur",
                    "source_table": "api_card_actions"
                },
                {
                    "sql_source": "--RETOUR VIA VERKOOP AAN DE LEVERANCIER\nSET @text = CONCAT(N'Inkoop retour als verkoop aan ',{[inkoop].Counterparty_ID.CompanyName})\nEXEC sp_api_modal_text @text,N'h4 text-muted'\n\nDECLARE @maxAmount int,@inPrice float\nSET @maxAmount = {[ctr1].IVTOTAL}\nSET @inPrice = {[ctr1].price}\n\nIF @aantal IS NULL SET @aantal = @maxAmount\nIF @prijs IS NULL SET @prijs = @inPrice\n\nSET @text = CONCAT('Aantal (max. ',@maxAmount,')')\nEXEC sp_api_modal_text @text\nEXEC sp_api_modal_input_decimal @name='@aantal',@value= @aantal OUT ,@precision=18,@scale=0\n\nSET @text = CONCAT('Prijs (inkoop ',@inPrice,')')\nEXEC sp_api_modal_text @text\nEXEC sp_api_modal_input_decimal @name='@prijs',@value= @prijs OUT,@precision=18,@scale=2\n\nEXEC sp_api_modal_button @name='@button',@value = 'Retour', @valueout = @button OUT,@class='btn-danger',@key='Enter'\nIF @button IS NOT NULL\n\tBEGIN\n\t\tIF @maxAmount < @aantal\n\t\t\tBEGIN\n\t\t\t\tEXEC sp_api_modal_text N'Het aantal is groter dan maximaal mogelijk!'\n\t\t\t\tRETURN\n\t\t\tEND\n\t\tDECLARE @Counterparty_ID int = {[inkoop].Counterparty_ID}\n\t\tDECLARE @new_CTHidentity int\n\t\tEXEC @main_db.dbo.CreateCTH2 @Counterparty_ID, @new_identity = @new_CTHidentity OUTPUT,@specialType = 'return_purchase'\n\t\tIF @new_CTHidentity IS NOT NULL\n\t\t\tBEGIN\n\t\t\t\tDECLARE @new_CTRidentity int\n\t\t\t\tDECLARE @old_CTRidentity int = {[ctr1].ID}\n\t\t\t\tDECLARE @Stock_ID int = {[ctr1].Stock_ID}\n\t\t\t\tEXEC @main_db.dbo.CreateCTR @CTH_ID = @new_CTHidentity, @Stock_ID = @Stock_ID,@Amount = @aantal, @Price = @prijs, @new_identity = @new_CTRidentity OUTPUT;\n\t\t\t\tINSERT INTO xIVLINK (ITD,VTD,LinkAantal,Stock_ID) VALUES(@new_CTRidentity,@old_CTRidentity,@aantal,@Stock_ID)\n\t\t\t\tEXEC sp_api_modal_clear\n\t\t\t\tSET @text = CONCAT(N'Inkoop retour als verkoop aan ',{[inkoop].Counterparty_ID.CompanyName})\n\t\t\t\tEXEC sp_api_modal_text @text,N'h4 text-muted'\n\t\t\t\tSET @text = CONCAT(N'/verkoop/?id=',@new_CTHidentity)\n\t\t\t\tEXEC  sp_api_modal_route @name = N'Naar verkoop',@pathname=@text,@class = N'btn-success' ,@key = N'Enter'\n\t\t\tEND\n\t\tELSE\n\t\t\tEXEC sp_api_modal_text N'Error, kan geen verkoop maken'\n\tEND\n ",
                    "action_id": 1027,
                    "action_name": "retour_inkoop",
                    "source_table": "api_card_actions"
                },
                {
                    "sql_source": "--RETOUR MET NEGATIEVE INKOOPREGEL\n\nSET @text = CONCAT(N'Inkoopregel retour aan ',{[inkoop].Counterparty_ID.CompanyName})\nEXEC sp_api_modal_text @text,N'h4 text-muted'\n\nDECLARE @maxAmount int,@inPrice float\n--SET @maxAmount = {[ctr1].IVTOTAL} --alleen vrij beschikbaar kan retour worden geboekt \nSET @maxAmount = isnull({[ctr1].Amount},0) - isnull({[ctr1].IVTOTAL},0)\nif @maxAmount <= 0 RETURN\n\nSET @inPrice = {[ctr1].price}\n\nIF @aantal IS NULL SET @aantal = @maxAmount\nIF @prijs IS NULL SET @prijs = @inPrice\n\nSET @text = CONCAT('Aantal (max. ',@maxAmount,')')\nEXEC sp_api_modal_text @text\nEXEC sp_api_modal_input_decimal @name='@aantal',@value= @aantal OUT ,@precision=18,@scale=0\n\nSET @text = CONCAT('Prijs (inkoop ',@inPrice,')')\nEXEC sp_api_modal_text @text\nEXEC sp_api_modal_input_decimal @name='@prijs',@value= @prijs OUT,@precision=18,@scale=2\n\nEXEC sp_api_modal_button @name='@button',@value = 'Retour', @valueout = @button OUT,@class='btn-danger',@key='Enter'\nIF @button IS NOT NULL\n\tBEGIN\n\t\tIF @maxAmount < @aantal\n\t\t\tBEGIN\n\t\t\t\tEXEC sp_api_modal_text N'Het aantal is groter dan maximaal mogelijk!'\n\t\t\t\tRETURN\n\t\t\tEND\n\t\tDECLARE @new_CTHidentity int = {[inkoop].ID}\n\t\tDECLARE @new_CTRidentity int\n\t\tDECLARE @old_CTRidentity int = {[ctr1].ID}\n\t\tDECLARE @Stock_ID int = {[ctr1].Stock_ID}\n\t\tDECLARE @Amount int = -CAST(@aantal as int)\n\t\tEXEC @main_db.dbo.CreateCTR @CTH_ID = @new_CTHidentity, @Stock_ID = @Stock_ID,@Amount = @Amount, @Price = @prijs, @new_identity = @new_CTRidentity OUTPUT;\n\t\tINSERT INTO xIVLINK (ITD,VTD,LinkAantal,Stock_ID) VALUES(@old_CTRidentity,@new_CTRidentity,@aantal,@Stock_ID)\n\t\tEXEC sp_api_modal_clear\n\tEND",
                    "action_id": 1041,
                    "action_name": "retour_ctr",
                    "source_table": "api_card_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_modal_input_time",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@name n"
                },
                {
                    "name": "@value",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@value n"
                },
                {
                    "name": "@class",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "''",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@class n"
                },
                {
                    "name": "@inline",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "1",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@inline b"
                },
                {
                    "name": "@hidden",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@hidden b"
                },
                {
                    "name": "@identifier",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@identifier n"
                },
                {
                    "name": "@class_updated",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 7,
                    "full_declaration_from_def": "@class_updated n"
                },
                {
                    "name": "@placeholder",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 8,
                    "full_declaration_from_def": "@placeholder n"
                },
                {
                    "name": "@use_placeholder",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 9,
                    "full_declaration_from_def": "@use_placeholder n"
                }
            ],
            "embedded_example": "EXEC sp_api_modal_input_time @name = '@time', @value = @time OUT --\r\n\t,@inline = 1\r\n\t,@placeholder = 'Time'\r\n\t,@use_placeholder = NULL",
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_modal_instant_report",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@viewname",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@viewname n"
                },
                {
                    "name": "@hide_filters",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@hide_filters n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_modal_media",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@url",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@url n"
                },
                {
                    "name": "@autoplay",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "1",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@autoplay b"
                },
                {
                    "name": "@controls",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@controls b"
                },
                {
                    "name": "@seed",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@seed n"
                },
                {
                    "name": "@seconds",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@seconds i"
                },
                {
                    "name": "@toast_text",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@toast_text n"
                },
                {
                    "name": "@media_type",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 20,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "'audio'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 7,
                    "full_declaration_from_def": "@media_type n"
                }
            ],
            "embedded_example": "EXEC sp_api_modal_modal @class=N'w100',@printStyle=N'font-size:70%',@landscape=1 \r\nEXEC [sp_api_modal_media]\r\n    @url = N'https://250.tracy.nu/239/storage/3u4flyhtzwoioqryehtmi6yqrao4fvyh'\r\n    , @autoplay = 1\r\n    , @controls = 1\r\n    , @media_type = 'video'",
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_modal_menu_user",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@user_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@user_id i"
                },
                {
                    "name": "@path",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@path n"
                },
                {
                    "name": "@hclass",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "'h5 text-muted mt-3'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@hclass n"
                },
                {
                    "name": "@bclass",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "'btn-tracy'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@bclass n"
                },
                {
                    "name": "@no_menu",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "1",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@no_menu b"
                },
                {
                    "name": "@night_modus",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "1",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@night_modus b"
                },
                {
                    "name": "@color_blind",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "1",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 7,
                    "full_declaration_from_def": "@color_blind b"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {
                "dbo.sp_api_toast": 1,
                "dbo.sp_api_modal_action": 1,
                "dbo.sp_api_modal_html": 1,
                "dbo.sp_api_modal_route": 1,
                "dbo.sp_api_modal_text": 1,
                "dbo.sp_api_modal_button": 1,
                "dbo.sp_api_modal_modal": 1,
                "dbo.sp_sys_admin_main_menu": 1,
                "dbo.hasRole": 1
            },
            "real_usage_examples": [
                {
                    "sql_source": "DECLARE @text nvarchar(max)\n,@hclass nvarchar(128) = 'h5 text-muted mt-3'\n,@bclass nvarchar(128) = 'btn-primary'\n\nEXEC sp_api_modal_modal @class = 'pt-5'\nIF dbo.hasRole('admin') > 0 BEGIN\n\tSET @text = N'You''re at ' + @hostname + ' [@main_db]'\n\tEXEC sp_api_toast @text=@text,@seconds=3\nEND\n\nDECLARE @colorblind BIT = 0\nIF dbo.hasClaims('sub=email@anacogreeve.nl') > 0\nBEGIN\nSET @colorblind = 1\nEND\n\nDECLARE @extendedMenu BIT = 0\nIF dbo.hasClaims('sub=email@anacogreeve.nl') > 0\nBEGIN\nSET @extendedMenu = 1\nEND\n\nDECLARE @loods BIT = 0\nIF dbo.hasRole('loodsbaas,loodsmedewerker,ompakker,keurmeester') > 0\nBEGIN\nSET @loods = 1\nEND\n\n--ALS EERSTE!\n--EXEC sp_api_modal_action N'Scanner Test',@class='btn-danger'\nEXEC sp_api_modal_action N'Scanner',@class='btn-danger'\nEXEC sp_api_modal_action N'Mobilephone',@class='btn-danger'\nEXEC sp_api_modal_action N'detepo',@class='btn-danger'\nEXEC sp_api_modal_action N'micro_check_scan',@class='btn-danger' --rh 230825\nEXEC sp_api_modal_action N'test_rick_2',@class='btn-danger' --rh 230825\nEXEC sp_api_modal_action N'NEOVO_PALLET_SCAN',@class='btn-danger'\nEXEC sp_api_modal_action N'Barcode Scanner',@class='btn-tracy'\nEXEC sp_api_modal_action N'check_serial_number' --rh231218\nEXEC sp_api_modal_action N'check_pallets' --241129\nEXEC sp_api_modal_action N'check_pallets_in_stock' --241129\nEXEC sp_api_modal_action N'check_data' --rh240719\nEXEC sp_api_modal_action @name='RWS-podcast'\nEXEC sp_api_modal_action @name='rick_delete'\n\n\n--START\n\nIF @button = 'Quick menu'\n\tBEGIN\n\t\tEXEC #sys_quick_menu @path\n\t\tRETURN\n\tEND\n\nEXEC sp_api_modal_text 'Hoofdmenu','h1'\n\nif  dbo.hasClaims(N'tenant=AGNEOVO') >0 or dbo.hasRole('admin,directie') > 0\n\tbegin \n\t\t--EXEC sp_api_modal_action @name='pallet_status_agneovo',@class = 'btn-white border-dark text-dark' --test 230808\n\t\tEXEC sp_api_modal_route @cardname='pallet_status_agneovo'\t\n\tend\n\nEXEC sp_api_modal_route @cardname='wms_micro_outbound'\n\nIF dbo.hasClaims('sub=mterlouw@rwsbv.com') > 0 or dbo.hasClaims('sub=kterlouw@rwsbv.com') > 0 --250415\n\tor dbo.hasClaims('sub=rick@tracy.nu') > 0 OR dbo.hasRole('admin,directie,barsan,barsan_bo') > 0\nBEGIN\n\tEXEC sp_api_modal_route @cardname='douanevoorraadmutatie'\nEND\t\n\nIF dbo.hasRole('admin,directie,loodsmedewerker') > 0\nBEGIN\n\tEXEC sp_api_modal_route @cardname='vehicle_export_staging',@search= '?red=open'\nEND\t\n\n BEGIN\n\t-----------------\n\t-- ADMIN QUICK LIJST\n\t-----------------\n\n\t\tIF dbo.hasRole('admin') > 0\n\t\tBEGIN\n--\t\tEXEC sp_api_modal_text 'Admin Knopjes',@hclass\n--\t\tSET @bclass = 'btn btn-linkt border-danger text-dark'\n\t\t/*\n\t\tEXEC sp_api_modal_route @name='Product (Hoofdgroup)',@pathname='/xproduct',@search= '?red=',@class=@bclass,@key='P',@group = 'Voorraadbeheer'\n\t\tEXEC sp_api_modal_route @name='Intrastat Fout of Geen',@pathname='/xproduct',@search= '?red=Intrastat_ID+Empty+OR+Wrong',@class=@bclass,@key='I',@group = 'Voorraadbeheer'\n\t\tEXEC sp_api_modal_route @name='Geen Customs Group',@pathname='/xproduct',@search= '?red=Geen+Douane+Groep',@class=@bclass,@key='D',@group = 'Voorraadbeheer'\n\t\tEXEC sp_api_modal_route @name='Onvolledig Customs Art',@pathname='/xproduct',@search= '?red=Niet+(Volledig)+in+Customs+Art',@class=@bclass,@key='L',@group = 'Voorraadbeheer'\n\t\t*/\n\t\t\n\t\tEXEC sp_api_modal_route @name='To Do',@pathname='/api_todo',@search= '?red=Niet+klaar',@class='btn btn-linkt border-danger text-dark',@key='T'\n\t\tEXEC sp_api_modal_route @name='API DATASET',@pathname='/api_data_set'\n\t\tEND\n\t\n\t--------------\n\t-- Warehouse\n\t--------------\n--\tEXEC sp_api_modal_text 'Warehouse',@hclass\n\n\tIF @colorblind = 1\n\t\tBEGIN\n\t\t\tSET @bclass = 'btn-primary'\n\t\tEND\n\tELSE\n\t\tBEGIN\n\t\t\tSET @bclass = 'btn-secondary'\n\t\tEND\nIF dbo.hasRole('user,admin,directie') > 0\n\tbegin\n\n\t\n\t\tEXEC sp_api_modal_route @name='Vessel',@pathname='/w_vessel',@class=@bclass,@key='V'--, @Search='?red=Open+en+Nieuw',@group = 'main'\n\t\tEXEC sp_api_modal_route @name='Bill of Lading',@pathname='/w_bl',@class=@bclass,@key='Alt+B'--, @Search='?red=recent'--,@group = 'main'\n\t\tEXEC sp_api_modal_route @name='Forecast',@pathname='/forecast',@class=@bclass,@key='F'--, @Search='?red=Open+en+Nieuw',@group = 'main'\n\t\t\n\n\t--\tEXEC sp_api_modal_route @name='Inbound',@pathname='/inbound',@class=@bclass,@key='I'--, @Search='?red=Open+en+Nieuw',@group = 'main'\n\t--\tEXEC sp_api_modal_route @name='Outbound Transport',@pathname='/wms_out_transport',@class=@bclass,@key='O'--, @Search='?red=Open+en+Nieuw',@group = 'main'\n--\t\tEXEC sp_api_modal_action @name='report_menu',@class = 'btn-white border-dark text-dark'\n\t\t\n\n\t\t\n\tend\n--@name='Inbound Transport.',\n--\t\tEXEC sp_api_modal_route @name='Inbound Transport',@pathname='/wms_in_transport',@class=@bclass,@key='T'--, @Search='?red=Open+en+Nieuw',@group = 'main'\n\t\tEXEC sp_api_modal_route @name='Inbound Transport',@cardname='wms_in_transport',@class=@bclass,@key='T'--, @Search='?red=Open+en+Nieuw',@group = 'main'\n\n--IF dbo.hasRole('viewer') > 0\n\t--begin\n\n  \n\n\t--220319 NIEUW: DE CARD BEPAALT ZELF AAN DE HAND VAN DE ROLLEN OF HIJ GERENDERD WORDT..\nIF dbo.hasRole('loodsmedewerker') = 0 --specifiek ** UITSLUITEN ** bij menu voor loodsmedewerker\n\tbegin\n\t\tEXEC sp_api_modal_route @name='Inbound',@cardname='inbound',@class=@bclass,@key='I'\n\t\tEXEC sp_api_modal_route @name='Outbound Transport',@cardname='wms_out_transport',@class=@bclass,@key='O',@group = 'outbound'\n\t\tEXEC sp_api_modal_route @name='Micro outbound form',@cardname='wms_micro_outbound',@class=@bclass,@key='O'\t,@group=N'micro_outbound'\t\n\t\t\n\tend\n--230306 specifiek uitsluiten voor ensign\nif  dbo.hasClaims(N'tenant=VIAROT') =0 \t--iedereen behalve viaensign\t\n\tEXEC sp_api_modal_route @name='Outbound orders',@cardname='outbound_form',@class=@bclass,@key='O',@group = 'outbound'\n\n\t\tIF dbo.hasRole('admin,directie') > 0 -- micro werk!\n\t\t\tbegin\n\t\t\t\tEXEC sp_api_modal_route @name='Micro outbound form',@cardname='wms_micro_outbound',@class=@bclass,@key='O'\t,@group=N'micro_outbound'\t\n\t\t\t\tEXEC sp_api_modal_route @name='Replenishment',@cardname='w_pallet_replenishment',@class=@bclass,@key='R'\t,@group=N'micro_outbound'\t\t\n--\t\t\t\tEXEC sp_api_modal_route @name='Micro item stock info',@cardname='wms_micro_item_stock_info',@class=@bclass,@key='R'\t,@group=N'micro_outbound',@search= '?red=selecteerbare_pallets'\n\t\t\t\tEXEC sp_api_modal_route @name='micro_totals',@cardname='micro_totals',@class=@bclass,@key='T'\t,@group=N'micro_outbound'\n\n\t\t\t\t--231024\n\t\t\t\tEXEC sp_api_modal_route @cardname='micro_items_stock_per_position_agneovo'\n\t\t\tend\t\n\t\tEXEC sp_api_modal_route @name='Stock by Client',@cardname='wms_rv_pal_stock',@class=@bclass,@key='C'\n\n--230306 specifiek uitsluiten voor ensign\nif  dbo.hasClaims(N'tenant=VIAROT') =0 \n\t--alleen viarot uitsluiten, dus als je de claim niet hebt mag je dit item zien\n\tEXEC sp_api_modal_route @name='Stock by BL',@cardname='wms_rv_pal_stock_bl',@class=@bclass,@key='B'\n\n\t\tEXEC sp_api_modal_route @name='Stock by Container',@cardname='wms_rv_pal_stock_cnt',@class=@bclass,@key='N'\n\t\t--micro stock info\n--\t\tEXEC sp_api_modal_route @name='Stock per micro item',@cardname='micro_totals',@class=@bclass,@key='T'\t\n--per lotnumber\nIF dbo.hasRole('loodsmedewerker') = 0\n\tbegin --specifiek uitsluiten bij menu voor loodsmedewerker\n\t\tEXEC sp_api_modal_route @name='Stock per micro item',@cardname='micro_totals_lotnr_w_lot',@class=@bclass,@key='T'\t\n\tend\t\n\n\t\t--230114\n\t\tEXEC sp_api_modal_route @cardname='wms_io'\t\n\t\t--230710 uitgezet, driver-screen wordt via link direct gestart EXEC sp_api_modal_route @cardname='driver_screen'\t\n\t\tEXEC sp_api_modal_route @cardname='inbound_form_barsan'\t\n\t\t\n--\tend\n\t\t\n\t--------------\n\t-- Rapportage\n\t--------------\n\tEXEC sp_api_modal_action @name='report_menu',@class = 'btn-success'--'btn-white border-dark text-dark'\n\n\tIF dbo.hasRole('user,admin,directie') > 0\n\t\tBEGIN\n\t\t\t--EXEC sp_api_modal_text 'Rapportage (Maand Afsluiten)',@hclass\n\t\t\t--EXEC sp_api_modal_route @name='Aangifte',@pathname='/aangifte',@search= '',@class = 'btn-white border-dark text-dark',@key='A'\n\t\t\tEXEC sp_api_modal_route @name='Crossdock',@pathname='/w_crossdock',@class=@bclass,@key='C'\n\t\t\t\n\t\tEND\n\n\n/*\n\t-----------------\n\t-- VOORRAAD LIJST\n\t-----------------\n--\tEXEC sp_api_modal_text 'Artikelbestand (Voorraad)',@hclass\n--\tSET @bclass = 'btn-secondary'\n\t--EXEC sp_api_modal_route @name='xstock',@pathname='/xstock',@search= '',@class=@bclass,@key='X'\n\n\tIF @colorblind = 1\n\t\tBEGIN\n\t\t\tEXEC sp_api_modal_route @name='Totaal Voorraad per lokatie',@pathname='/stocklocation',@search= '',@class='btn-primary',@key='T',@group = 'Voorraad'\n\t\t\tEXEC sp_api_modal_route @name='Voorraad per lokatie',@pathname='/voorraadlokatie',@search= '',@class='btn-primary',@key='X',@group = 'Voorraad'\n\t\t\tEXEC sp_api_modal_route @name='Voorraad [Artikelen]',@pathname='/xstock',@search= '?red=',@class='btn-primary',@key='S',@group = 'Voorraad'\n\t\t\t\n\t\tEND\n\tELSE\n\t\tBEGIN\n\t\tEXEC sp_api_modal_route @name='Totaal Voorraad per lokatie',@pathname='/stocklocation',@search= '',@class=@bclass,@key='T',@group = 'Voorraad'\n\t\t\tEXEC sp_api_modal_route @name='Voorraad per lokatie',@pathname='/voorraadlokatie',@search= '',@class=@bclass,@key='X',@group = 'Voorraad'\n\t\t\tEXEC sp_api_modal_route @name='Voorraad [Artikelen]',@pathname='/xstock',@search= '?red=',@class=@bclass,@key='S',@group = 'Voorraad'\n\t\t\t\n\t\tEND\n*/\n\n\t------------\n\t-- Transactions\n\t------------\n--\tEXEC sp_api_modal_text 'Transacties',@hclass\n/*\n\tBEGIN\n\n\tEXEC sp_api_modal_route @name='Verkoop [Pakbon Niet Geprint]',@pathname='/verkoop',@search= '?red=Pickbon+NOG+NIET+GEPRINT' ,@class='btn-primary',@key='V',@group = 'verkoop'\n\n\tEXEC sp_api_modal_route @name='Filter [Pickbon Geprint]',@pathname='/verkoop',@search= '?red=Pickbon+Geprint' ,@class='btn-primary',@key='P',@group = 'verkoop'\n\tEXEC sp_api_modal_route @name='Verkoop [Alles]',@pathname='/verkoop',@search= '?red=' ,@class='btn-primary',@key='A',@group = 'verkoop'\n\tEXEC sp_api_modal_route @name='Filter [Commission]',@pathname='/verkoop',@search= '?red=Commission+%5BopenPrice%5D' ,@class='btn-primary',@key='C',@group = 'verkoop'\n\n\t--EXEC sp_api_modal_route @name='Verkoop [Vandaag]',@pathname='/verkoop',@search= '?red=Werkdatum+openSale' ,@class='btn-primary',@key='Ctrl+V',@group = 'verkoop'\n\n\tEXEC sp_api_modal_route @name='Filter [Pickbon Veranderd]',@pathname='/verkoop',@search= '?red=Pickbon+VERANDERD' ,@class='btn-primary',@key='W',@group = 'verkoop'\n\tEXEC sp_api_modal_route @name='Filter [Klaar voor Factuur]',@pathname='/verkoop',@search= '?red=Fase+Klaar+voor+Factuur' ,@class='btn-primary',@key='K',@group = 'verkoop'\n\tEXEC sp_api_modal_route @name='Filter [Gefactureerd]',@pathname='/verkoop',@search= '?red=Orders%3A+gefactureerd' ,@class='btn-primary',@key='F',@group = 'verkoop'\n\tEXEC sp_api_modal_route @name='Filter [Nog Toewijzen]',@pathname='/verkoop',@search= '?red=Toewijzen' ,@class='btn-primary',@key='T',@group = 'verkoop'\n\tEXEC sp_api_modal_route @name='Inkoop',@pathname='/inkoop',@search= '?red=',@class='btn-warning',@key='I',@group = 'inkoop'\n\tEXEC sp_api_modal_route @name='Open inkopen',@pathname='/inkoop',@search= '?red=Open+inkopen',@class='btn-primary',@key='O',@group = 'inkoop'\n\tEXEC sp_api_modal_route @name='Gesloten inkopen',@pathname='/inkoop',@search= '?red=Gesloten+inkopen',@class='btn-primary',@key='G',@group = 'inkoop'\n\tEXEC sp_api_modal_route @name='Inkoop [Vandaag]',@pathname='/inkoop',@search= '?red=Werkdatum',@class='btn-warning',@key='Ctrl+I',@group = 'inkoop'\n\tEXEC sp_api_modal_route @name='Douane Actie Nodig',@pathname='/inkoop',@search= '?red=Actie+nodig+(douane+tafel)',@class='btn-warning',@key='D',@group = 'inkoop'\n\tEXEC sp_api_modal_route @name='Verkoop Claims [New]',@pathname='/xclaim',@search= '?red=Status+%3D+New',@class='btn-danger',@key='Alt+C',@group = 'verkoop'\n\tEXEC sp_api_modal_route @name='AccountSale [Open]',@pathname='/xcth_accountsale',@search= '?red=Open',@class='btn-warning',@key='A',@group = 'accountsale'\n\tEXEC sp_api_modal_route @name='AccountSale [Invoiced]',@pathname='/xcth_accountsale',@search= '?red=Factuur+gemaakt',@class='btn-warning',@key='F',@group = 'accountsale'\n\t--EXEC sp_api_modal_route @name='Fust Inname',@pathname='/xfustreturned',@search= '?red=',@class='btn-white border-dark text-dark',@key='F'\n\t\tIF @extendedMenu = 1\n\t\tBEGIN\n\t\tEXEC sp_api_modal_route @name='Verkoop [Gereserveerd]',@pathname='/verkoop',@search= '?red=Orders+Reserved' ,@class='btn-primary',@key='Ctrl+V',@group = 'verkoop'\n\t\tEXEC sp_api_modal_route @name='Inkoop [Gereserveerd]',@pathname='/inkoop',@search= '?red=Orders+Reserved',@class='btn-warning',@key='Ctrl+I',@group = 'inkoop'\n\t\tEND\n\t\t\n\tEND\n*/\t\n\t\n/*\t\n\tEXEC sp_api_modal_text '',@class='row'\n\tEXEC sp_api_modal_action @name='Nieuwe Verkoop',@class='btn-primary',@keycode='ArrowUp'\n\tEXEC sp_api_modal_action @name='Nieuwe Inkoop',@class='btn-warning',@keycode='ArrowDown'\n*/\n\n/*\n\tIF dbo.hasRole('douane,admin') > 0\n\t\tBEGIN\n\t\t\n\t\t--------------\n\t\t-- Douane\n\t\t--------------\n\t\tEXEC sp_api_modal_text 'Douane',@hclass\n\t\t\n\t\tSET @bclass = 'btn-dark'\n\t\t\n\t\t\tIF EXISTS (SELECT * FROM check_lfctr_at_entrepot)\n\t\t\t\tBEGIN\n\t\t\t\t\tEXEC sp_api_modal_route @name='Verkoop Correctie',@pathname='/check_lfctr_at_entrepot',@search= '',@class='btn-danger',@key='E'\n\t\t\t\tEND\n\t\t\n\t\t\tEXEC sp_api_modal_route @name='Douane Saldo',@pathname='/douanesaldo',@search= '',@class=@bclass,@key='S',@group = 'Douaneoverzicht'--,@group = 'Container'\n\t\t\tEXEC sp_api_modal_route @name='Contingent',@pathname='/sf_femimp',@search= '',@class=@bclass,@key='C',@group = 'Douaneoverzicht'\n\t\t\t\n\t\t\tEXEC sp_api_modal_route @name='Import',@pathname='/xvessel',@search= '?red=Nog+Niet+Uitgelost&ord=22636,26417,22107',@class=@bclass,@key='B',@group = 'Container'\n\t\t\tEXEC sp_api_modal_route @name='Inslag document',@pathname='/xbol',@class=@bclass,@key='D',@group = 'Container'\n\t\t\tEXEC sp_api_modal_route @name='Containers',@pathname='/xcontainer',@class=@bclass,@key='C',@group = 'Container'\n\t\t\tEXEC sp_api_modal_route @name='Partij Douane Artikelen',@pathname='/xcthcustomsrows',@class=@bclass,@key='P',@group = 'Container'\n\t\t\t\n\t\t\t\n\t\t\tEXEC sp_api_modal_route @name='Douane Artikelen',@pathname='/xproductcustomsgroup',@search= '',@class=@bclass,@key='D',@group = 'DouaneArtikelGroup'\n\t\t\tEXEC sp_api_modal_route @name='Douane Artikelen Per Land',@pathname='/xcthcustomsart',@search= '',@class=@bclass,@key='A',@group = 'DouaneArtikelGroup'\n\t\t\tEXEC sp_api_modal_route @name='E-cert Groep',@pathname='/xclientbotanic',@search= '',@class=@bclass,@key='G',@group = 'DouaneArtikelGroup'\n\t\t\tEXEC sp_api_modal_route @name='E-cert Vari\u00ebteit',@pathname='/xclientexport',@search= '',@class=@bclass,@key='V',@group = 'DouaneArtikelGroup'\n\t\t\tEXEC sp_api_modal_route @name='Product (Hoofdgroup)',@pathname='/xproduct',@search= '?red=',@class=@bclass,@key='P',@group = 'DouaneArtikelGroup'\n\t\t\t\n\t\t\t--EXEC sp_api_modal_route @name='Binnenkomend (LF)',@pathname='/lf_aanvoer_inkomend',@search= '',@class=@bclass,@key='I',@group = 'Container'\n\t\t\t--EXEC sp_api_modal_route @name='Uitgaand (LF)',@pathname='/lf_aanvoer_uitgaand',@search= '',@class=@bclass,@key='U',@group = 'Container'\n\t\t\t\n\t\t\t\n\t\tEND\n*/\n\n\t--------------\n\t-- Facturatie\n\t--------------\n--\tEXEC sp_api_modal_text 'Facturatie',@hclass\n\n\tIF @colorblind = 1\n\t\tBEGIN\n\t\t\tSET @bclass = 'btn-primary'\n\t\tEND\n\tELSE\n\t\tBEGIN\n\t\t\tSET @bclass = 'btn-secondary'\n\t\tEND\nIF dbo.hasRole('user,admin,directie') > 0\n\tbegin\n\t--\tEXEC sp_api_modal_route @name='Uitgaande facturen',@pathname='/invoice',@class=@bclass,@key='Alt+U', @Search='?red=Open+en+Nieuw',@group = 'Factuuruit'\n\t\tEXEC sp_api_modal_route @name='Uitgaande facturen',@pathname='/invoice_wms',@class=@bclass,@key='Alt+U', @Search='?red=Open+en+Nieuw',@group = 'Factuuruit'\n\t\tEXEC sp_api_modal_route @name='Filter [Klaar voor Export]',@pathname='/invoice_wms',@class=@bclass,@key='', @Search='?red=Klaar+voor+Export',@group = 'Factuuruit'\n\t\tEXEC sp_api_modal_route @name='Voorbereiding weekfacturen',@pathname='/wms_week_data_for_invoice',@class=@bclass,@key='' ,@group = 'Factuuruit'--, @Search='?red=Klaar+voor+Export'\n\t\tEXEC sp_api_modal_route @name='Inslagen',@pathname='/w_applied_actions',@class=@bclass,@key='' ,@group = 'Factuuruit'--, @Search='?red=Klaar+voor+Export'\t\t\n\t\t\n\t\tEXEC sp_api_modal_route @name='Inkoopfacturen',@pathname='/incoming_invoice',@class=@bclass,@key='Alt+I',@group = 'Factuurin'\n\t\tEXEC sp_api_modal_route @name='Status Exact',@pathname='/incoming_invoice',@class=@bclass,@key='Alt+I',@Search='?red=Status+Exact',@group = 'Factuurin'\n\t\tEXEC sp_api_modal_route @name='Status Draft / Empty',@pathname='/incoming_invoice',@class=@bclass,@key='Alt+I',@Search='?red=Draft+%2F+Empty',@group = 'Factuurin'\n\tend\n\t------------\n\t-- ADRESSEN\n\t------------\n--\tEXEC sp_api_modal_text 'Adressen',@hclass\n\n\tIF @colorblind = 1\n\t\tBEGIN\n\t\t\tSET @bclass = 'btn-primary'\n\t\tEND\n\tELSE\n\t\tBEGIN\n\t\t\tSET @bclass = 'btn-success'\n\t\tEND\n\n\nIF dbo.hasRole('user,admin,directie') > 0\n\tbegin\n\t\t\t\n\t\tEXEC sp_api_modal_route @name='Alle bedrijven',@pathname='/adres',@search= '',@class=@bclass,@key='F1',@group = 'stamgegevens'\n\t\tEXEC sp_api_modal_route @name='Leveranciers',@pathname='/leverancier',@search= '',@class=@bclass,@key='F2',@group = 'stamgegevens'\n\t\tEXEC sp_api_modal_route @name='Klanten',@pathname='/klant',@search= '?ord=23124,27062',@class=@bclass,@key='F3',@group = 'stamgegevens'\n\t\tEXEC sp_api_modal_route @name='Transporteurs',@pathname='/transporteur',@search= '',@class=@bclass,@key='F4',@group = 'stamgegevens'\n\t\t\n\t\tEXEC sp_api_modal_route @name='Lokaties',@pathname='/xlocation',@search= '',@class=@bclass,@key='L',@group = 'Locaties'\n\t\tEXEC sp_api_modal_route @name='Pickup lokaties',@pathname='/wms_pickup_location',@search= '',@class=@bclass,@key='P',@group = 'Locaties'\n\n\tend\t\n\nIF dbo.hasRole('barsan_bo') > 0\n\tbegin\n\t\t--BARSAN_BO OOK DEZE LOKATIE OPTIE\n\t\tEXEC sp_api_modal_route @name='Lokaties',@pathname='/xlocation',@search= '',@class=@bclass,@key='L'\t\n\t\t\n\tend\t\n\nIF dbo.hasRole('barsan,barsan_bo,loodsmedewerker,directie') > 0 OR @user='alex_dong_nl@ensignfreight.com' --231110 alex specifiek OOK\n\tbegin\n\t\tEXEC sp_api_modal_route @cardname='barsan_micro_out'\n\tend\t\n\nIF dbo.hasRole('admin,directie') > 0\n\tbegin\n\t\t\t\n\t\tEXEC sp_api_modal_route @name='wms_artikelen',@pathname='/wms_item',@search= '',@class=@bclass,@key='Alt+A',@group = 'base'\n\t\tEXEC sp_api_modal_route @name='wms_groepen',@pathname='/xproduct',@search= '',@class=@bclass,@key='ALT+G',@group = 'base'\n\t\tEXEC sp_api_modal_route @name='wms_loodshuur_artikel',@pathname='/wms_price_per_week',@search= '',@class=@bclass,@key='ALT+W',@group = 'base'\t\n\t\tEXEC sp_api_modal_route @name='wms_tarief_inslag',@pathname='/w_action_tariff',@search= '',@class=@bclass,@key='ALT+i',@group = 'base'\t\n\t\tEXEC sp_api_modal_route @name='wms_notification_settings',@pathname='/wms_notification_settings',@search= '',@class=@bclass,@key='ALT+N',@group = 'base'\t\n\t\tEXEC sp_api_modal_route @name='wms_invoice_method',@pathname='/wms_invoice_method',@search= '',@class=@bclass,@key='ALT+M',@group = 'base'\t\n\t\tEXEC sp_api_modal_route @name='wms_verpakking_micro_items',@pathname='/fust',@search= '',@class=@bclass,@key='ALT+V',@group = 'base'\t\n\t\tEXEC sp_api_modal_route @name='pallets toevoegen',@pathname='/wms_purchase',@search= '',@class=@bclass,@key='ALT+P',@group = 'base'\t\n\t\t--https://rws.tsql.app/wms_notification_settings\t\n\tend\t\n\n\nEND\n------------\n-- GEBRUIKER\n------------\n--EXEC sp_api_modal_menu_user\t@user_id,@path\nDECLARE @key nvarchar(128) = IIF(@path='/','Escape','Home')\nSET @bclass = 'btn-tracy'\n\nEXEC sp_api_modal_route @name='Home',@pathname='/',@search= '',@class=@bclass,@key=@key\n\nEXEC sp_api_modal_button @name='logout',@value='Log Out',@valueout = @b_logout OUT,@class=@bclass,@key='End'\n\tIF @b_logout = 'Log Out'\n\t\tBEGIN\n\t\t\tEXEC sp_api_modal_dispatch N'{\"type\":\"logOut\"}'\n\t\t\tRETURN\n\t\tEND\n\n\n\n\n-----------\n-- ADMIN --\n-----------\n--if @user_name<>'rick@tracy.nu' \nEXEC sp_sys_admin_main_menu @hclass\n--https://rws.tsql.app/api_actions/32\n\ndeclare @T nvarchar(512)=N'&nbsp;'\nexec sp_api_modal_html @T\nexec sp_api_modal_html @T\nexec sp_api_modal_html @T\nset @T =concat(N'<a href=\"https://tracy.nu\" target=_blank>Solution &copy;',year(getdate()),' TDS B.V.</a><br/><a href=\"https://www.ux1.nl\" target=_blank>Technology &copy;',year(getdate()),' UX1 B.V.</a>'   \t)\nexec sp_api_modal_html @T, @class='m-1 w-24 btn btn-link2 btn-sm float-right' ",
                    "action_id": 32,
                    "action_name": "main_menu",
                    "source_table": "api_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_modal_modal",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@class",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "''",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@class n"
                },
                {
                    "name": "@style",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "''",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@style n"
                },
                {
                    "name": "@printStyle",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "''",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@printStyle n"
                },
                {
                    "name": "@landscape",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@landscape b"
                },
                {
                    "name": "@printMedia",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "''",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@printMedia n"
                },
                {
                    "name": "@printname",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@printname n"
                },
                {
                    "name": "@use_placeholder",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 7,
                    "full_declaration_from_def": "@use_placeholder n"
                },
                {
                    "name": "@globalStyle",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 8,
                    "full_declaration_from_def": "@globalStyle n"
                },
                {
                    "name": "@printblack",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 9,
                    "full_declaration_from_def": "@printblack b"
                },
                {
                    "name": "@print_keycode",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 10,
                    "full_declaration_from_def": "@print_keycode n"
                },
                {
                    "name": "@title",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 2048,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 11,
                    "full_declaration_from_def": "@title n"
                },
                {
                    "name": "@cannotLeaveModal",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 12,
                    "full_declaration_from_def": "@cannotLeaveModal b"
                }
            ],
            "embedded_example": "EXEC sp_api_modal_modal @class=N'w100', @printStyle=N'font-size:70%', @landscape=1, @cannotLeaveModal = 0 --\r\n\t,@style = ''\r\n\t,@printStyle = ''\r\n\t,@landscape = 0\r\n\t,@printMedia = ''\r\n\t,@printname = NULL -- 'report_xyz.pdf'\r\n\t,@printblack = 0 -- 1 is black and white print\r\n\t,@print_keycode = NULL\r\n\t,@title = NULL -- sets the title of the browser window/tab",
            "embedded_description": null,
            "co_occurrence_stats": {
                "dbo.sp_api_modal_input": 18,
                "dbo.sp_api_toast": 7,
                "dbo.sp_api_modal_text": 39,
                "dbo.sp_api_modal_select": 6,
                "dbo.sp_api_modal_date": 22,
                "dbo.sp_api_modal_button": 42,
                "dbo.sp_api_modal_table": 41,
                "dbo.sp_api_modal_print": 7,
                "dbo.ABCDATE": 6,
                "dbo.sp_api_modal_csv": 11,
                "dbo.sp_api_goto": 4,
                "dbo.sp_api_modal_save": 4,
                "dbo.sp_api_modal_table_update": 3,
                "dbo.sp_api_modal_post": 4,
                "dbo.sp_api_modal_date_from_to": 21,
                "dbo.sp_api_add_sql_task": 1,
                "dbo.sp_api_modal_route": 2,
                "dbo.sp_api_modal_download_report": 1,
                "dbo.sp_api_modal_alert": 3,
                "dbo.sp_api_modal_input_decimal": 2,
                "dbo.sp_api_modal_clear": 2,
                "dbo.ABCWEEKNR": 2,
                "dbo.sp_api_modal_menu_user": 1,
                "dbo.sp_api_modal_action": 1,
                "dbo.sp_api_modal_html": 2,
                "dbo.sp_sys_admin_main_menu": 1,
                "dbo.hasRole": 1,
                "dbo.sp_api_modal_select_table": 2,
                "dbo.sp_api_modal_get_value": 1
            },
            "real_usage_examples": [
                {
                    "sql_source": "DECLARE @date nvarchar(128),@date2 nvarchar(128),@button nvarchar(128), @ProdCode nvarchar(128), @ProdCode2 nvarchar(128),@land nvarchar(128)\nset @date = dbo.workDate()\nset @date2 = dbo.workDate()\n--SET @button = 'StockSoldList'\n--EXEC sp_api_modal_modal @class = 'w75'\nEXEC sp_api_modal_text 'Lvo:'\nEXEC sp_api_modal_select @card_name = N'Country',@value = @land OUT, @focus=1\nEXEC sp_api_modal_text 'Van:'\nEXEC sp_api_modal_date @name='Date',@value = @date OUT,@class='w-24'  -- zoek veld\nEXEC sp_api_modal_text 'Tot en met:'\nEXEC sp_api_modal_date @name='Date2',@value = @date2 OUT,@class='w-24' -- zoek veld\n--SET @date2 = CONCAT(@date2,' 23:59:59.999')\n\nEXEC sp_api_modal_text 'Van ProdCode:'\n--EXEC sp_api_modal_select @card_name=N'xstock',@value = @ProdCode OUT,@placeholder=N'Zoek...'\nEXEC sp_api_modal_input @name='ProdCode',@value = @ProdCode OUT,@class='w-24' -- zoek veld\nEXEC sp_api_modal_text 'Tot en met ProdCode:'\n--EXEC sp_api_modal_select @card_name=N'xstock',@value = @ProdCode2 OUT,@placeholder=N'Zoek...'\nEXEC sp_api_modal_input @name='ProdCode2',@value = @ProdCode2 OUT,@class='w-24' -- zoek veld\n\nEXEC sp_api_modal_button @name='button',@value = 'StockSoldList',@valueout = @button OUT,@class = 'btn-primary',@key = 'F1'\nEXEC sp_api_modal_print @keycode='F9'\n\nIF @button =  'StockSoldList'\nBEGIN\nEXEC sp_api_toast @land\nSELECT [Amount@] = Amount, [Description*] = Description, [Contentdesc*] = ContentDesc, LVO, xProdCode, TransactionDate\nINTO #StockSoldList\nFROM          RV_StockSold\nWHERE\t\t(TDTDT = 2) \nAND (TransactionDate BETWEEN @date AND @date2) AND (Origin_ID = @land OR @land is null)\n\n\nAND ((@ProdCode is NULL OR @ProdCode = '') AND (@ProdCode2 is NULL OR @ProdCode2 = '') AND (Origin_ID = @land OR @land is null)\nOR (xProdCode between @ProdCode AND @ProdCode2) AND (Origin_ID = @land OR @land is null))\n\nEXEC sp_api_modal_table @tmptable=N'#StockSoldList',@orderby=N'ORDER BY 2,5,4 ASC',@print=1\nEND \n",
                    "action_id": 61,
                    "action_name": "StockSold",
                    "source_table": "api_card_actions"
                },
                {
                    "sql_source": "DECLARE @search nvarchar(128) ,@button nvarchar(128), @datumtijd nvarchar(50)\nDECLARE @filename nvarchar(1024) \n,@VroegNegatiefdownload nvarchar(128) = dbo.strdate(NULL) +'_'+ 'VroegNegatief.csv'\n,@Negatiefdownload nvarchar(128) = dbo.strdate(NULL) +'_'+ 'Negatief.csv'\n,@Reserveddownload nvarchar(128) = dbo.strdate(NULL) +'_'+ 'Gereserveerd.csv'\n,@Notzerodownload nvarchar(128) = dbo.strdate(NULL) +'_'+ 'Voorraad.csv'\nSET @datumtijd = FORMAT(getdate(),'dd MMM yyyy HH:mm')\n\n--EXEC sp_api_modal_input @name='search',@value = @search OUT,@focus=1 -- zoek veld\nEXEC sp_api_modal_modal @class = 'w100'\nSET @button = 'VroegNegatief'\nEXEC sp_api_modal_button @name='button',@value = 'VroegNegatief',@valueout = @button OUT,@class = 'btn-primary',@key = 'F1'\nEXEC sp_api_modal_button @name='button',@value = 'Negatief',@valueout = @button OUT,@class = 'btn-primary',@key = 'F2'\nEXEC sp_api_modal_button @name='button',@value = 'Gereserveerd',@valueout = @button OUT,@class = 'btn-primary',@key = 'F3'\nEXEC sp_api_modal_button @name='button',@value = 'Alles',@valueout = @button OUT,@class = 'btn-primary',@key = 'F4'\nEXEC sp_api_modal_button @name='button',@value = 'VolledigeLijst',@valueout = @button OUT,@class = 'btn-primary',@key = 'F5'\nEXEC sp_api_modal_button @name='button',@value = 'Partijvoorraad',@valueout = @button OUT,@class = 'btn-primary',@key = 'F6'\nEXEC sp_api_modal_print @keycode='F9'\nEXEC sp_api_modal_text @datumtijd, @printonly=1\n\nIF @button =  'VroegNegatief'\nBEGIN\nSELECT DISTINCT [Description~col-sm-5] = Description, Origin_Code, Size, xBrandName, ContentDesc, FustCode, 'Vroeg Negatief' AS [CAP*]\n\t,[verwacht@g] = VoorraadVerwacht@, [Voorraad@g] = Voorraad@\nINTO #VroegNegatief\nFROM          RV_IR_Voorraad\nWHERE        (Voorraad@ < 0) AND ([EndTime*] = 'Vroeg') AND (CoreType = 'FOOD')\nEXEC sp_api_modal_table @tmptable=N'#VroegNegatief',@orderby=N'ORDER BY [CAP*],1 ASC',@print=1\nEXEC sp_api_modal_button @name='button',@value = 'VroegNegatiefNaarCSV',@valueout = @button OUT,@class = 'btn-success'\nEND \n\nIF @button =  'VroegNegatiefNaarCSV'\nBEGIN\nSELECT DISTINCT Voorraad@, VoorraadVerwacht@, Description, Origin_Code, Size, xBrandName, ContentDesc, FustCode, 'Vroeg Negatief' AS [CAP*]\nINTO #VroegNegatiefdownload\nFROM          RV_IR_Voorraad\nWHERE        (Voorraad@ < 0) AND ([EndTime*] = 'Vroeg') AND (CoreType = 'FOOD')\nEXEC sp_api_modal_csv @tmptable=N'#VroegNegatiefdownload',@orderby=N'ORDER BY [CAP*],Description ASC', @filename= @VroegNegatiefdownload,@ansi=1\nEND \n\n\nIF @button =  'Negatief'\nBEGIN\nSELECT DISTINCT [Description~col-sm-5] = Description, Origin_Code, Size, xBrandName, ContentDesc, FustCode, 'Negatief' AS [CAP*]\n\t,[verwacht@g] = VoorraadVerwacht@, [Voorraad@g] = Voorraad@\nINTO #Negatief\nFROM          RV_IR_Voorraad\nWHERE        (Voorraad@ < 0) AND (CoreType = 'FOOD')\nEXEC sp_api_modal_table @tmptable=N'#Negatief',@orderby=N'ORDER BY [CAP*],1 ASC',@print=1\nEXEC sp_api_modal_button @name='button',@value = 'NegatiefNaarCSV',@valueout = @button OUT,@class = 'btn-success'\nEND \n\nIF @button =  'NegatiefNaarCSV'\nBEGIN\nSELECT DISTINCT Voorraad@, VoorraadVerwacht@, Description, Origin_Code, Size, xBrandName, ContentDesc, FustCode, 'Negatief' AS [CAP*]\nINTO #Negatiefdownload\nFROM          RV_IR_Voorraad\nWHERE        (Voorraad@ < 0) AND (CoreType = 'FOOD')\nEXEC sp_api_modal_csv @tmptable=N'#Negatiefdownload',@orderby=N'ORDER BY [CAP*],Description ASC', @filename= @Negatiefdownload,@ansi=1\nEND \n\nIF @button =  'Gereserveerd'\nBEGIN\nSELECT DISTINCT ReservedIn@, ReservedOut@, [Description~col-sm-5] = Description, Origin_Code, Size, xBrandName, ContentDesc, FustCode, 'Gereserveerd' AS [CAP*]\n\t,[verwacht@g] = VoorraadVerwacht@, [Voorraad@g] = Voorraad@\nINTO #Gereserveerd\nFROM          RV_IR_Voorraad\nWHERE        (ReservedIn@ <> 0 OR ReservedOut@ <> 0) AND (CoreType = 'FOOD')\nEXEC sp_api_modal_table @tmptable=N'#Gereserveerd',@orderby=N'ORDER BY [CAP*],3 ASC',@print=1\nEXEC sp_api_modal_button @name='button',@value = 'GereserveerdNaarCSV',@valueout = @button OUT,@class = 'btn-success'\nEND \n\nIF @button =  'GereserveerdNaarCSV'\nBEGIN\nSELECT DISTINCT Voorraad@, VoorraadVerwacht@, ReservedIn@, ReservedOut@, Description, Origin_Code, Size, xBrandName, ContentDesc, FustCode, 'Gereserveerd' AS [CAP*]\nINTO #GereserveerdNaarCSV\nFROM          RV_IR_Voorraad\nWHERE        (ReservedIn@ <> 0 OR ReservedOut@ <> 0) AND (CoreType = 'FOOD')\nEXEC sp_api_modal_csv @tmptable=N'#GereserveerdNaarCSV',@orderby=N'ORDER BY [CAP*],Description ASC', @filename= @Reserveddownload,@ansi=1\nEND \n\nIF @button =  'Alles'\nBEGIN\nSELECT DISTINCT [Description~col-sm-5] = Description, Origin_Code, Size, xBrandName, ContentDesc, FustCode, 'Alles' AS [CAP*]\n\t,[verwacht@g] = VoorraadVerwacht@, [Voorraad@g] = Voorraad@ --, [Correctie] = '         '\nINTO #Notzero\nFROM          RV_IR_Voorraad\nWHERE        (Voorraad@ <> 0) AND (CoreType = 'FOOD')\nSET @datumtijd = FORMAT(getdate(),'dd MMM yyyy HH:mm')\nDECLARE @sql nvarchar(max) = N'ALTER TABLE #Notzero ADD ' + QUOTENAME(@datumtijd+'~col-sm-2') +' nvarchar(128)'\nEXEC (@sql)\nEXEC sp_api_modal_table @tmptable=N'#Notzero',@orderby=N'ORDER BY [CAP*],1 ASC',@fontsize='120%',@print=1\nEXEC sp_api_modal_button @name='button',@value = 'AllesNaarCSV',@valueout = @button OUT,@class = 'btn-success'\nEND \n\n--\n\nIF @button =  'Partijvoorraad'\nBEGIN\nSELECT CatSub_0 as [CatSub*], Variety_0 as [Botanic~col-sm-2 wrap],ContentDesc as [inhoud~col-sm-1],Size as [maat~col-sm-1],Detail_0 as [Detail~col-sm-1],Origin_Code as [LVO~col-sm-1-2] ,KGN as [Kgn~col-sm-1],FustCode as [Fustcode~col-sm-1],TransactionHeader_ID as [InkNr:0~col-sm-1] \n,\tleft(counter_code,8) as [Lev~col-sm-1],\tLEFT((select CONVERT(VARCHAR, LFDATE , 13)), 6) as [Datum~col-sm-1]\n,\tVoorraad as [Stock:0~col-sm-1]\n\nINTO #PartijStock\nFROM          @main_db.dbo.StockPerLot_date(dbo.abcdate()) -- alles verkocht t/m vandaag!\nwhere [catsub_0] > N'' -- RH210209 hiermee wordt fust weggelaten\nEXEC sp_api_modal_table @tmptable=N'#PartijStock'\n,@orderby=N'ORDER BY [catsub*],[Botanic~col-sm-2 wrap]  ASC'\n,@fontsize='100%',@print=1\nEND \n\n\nIF @button =  'AllesNaarCSV'\nBEGIN\nSELECT DISTINCT Voorraad@, VoorraadVerwacht@, Description, Origin_Code, Size, xBrandName, ContentDesc, FustCode, 'Negatief' AS [CAP*]\nINTO #Notzerodownload\nFROM          RV_IR_Voorraad\nWHERE        (Voorraad@ <> 0) AND (CoreType = 'FOOD')\nEXEC sp_api_modal_csv @tmptable=N'#Notzerodownload',@orderby=N'ORDER BY [CAP*],Description ASC', @filename= @Notzerodownload,@ansi=1\nEND \n\nIF @button =  'VolledigeLijst'\n\tBEGIN\n\t\tDECLARE @datum nvarchar(128),@button2 nvarchar(128)\n\t\tEXEC sp_api_modal_text N'Kies de datum voor de voorraadlijst (dit is een lange lijst!!)'\n\t\tEXEC sp_api_modal_date @name='datum',@value = @datum OUT\n\t\tEXEC sp_api_modal_button @name='button2',@value = 'Laad lijst',@valueout = @button2 OUT,@class = 'btn-success',@key = 'Enter'\n\n\t\tIF @button2 IS NOT NULL\n\t\t\tBEGIN\n\t\t\t\tSELECT *\n\t\t\t\tINTO #VolledigeLijst\n\t\t\t\tFROM @main_db.dbo.stockByDate(@datum)\n\t\t\t\tEXEC sp_api_modal_table @tmptable=N'#VolledigeLijst',@orderby=N'ORDER BY ARTIKEL ASC'\n\t\t\tEND\n\tEND",
                    "action_id": 189,
                    "action_name": "Voorraad Lijsten",
                    "source_table": "api_card_actions"
                },
                {
                    "sql_source": "EXEC sp_api_modal_modal @class=N'w100'\n\nDECLARE @value nvarchar(max),@country_id nvarchar(max),@city_id nvarchar(max),@menu_id nvarchar(max),@company_id nvarchar(max),@reducer nvarchar(max)\n/*EXEC sp_api_modal_text N'Menu voorbeeld, ga naar card:',N'h3'\n\nSET @reducer=N'in_main_menu = 1'\n\nEXEC sp_api_modal_select @card_name=N'menu',@value = @menu_id OUT,@focus=1,@reducer=@reducer,@placeholder=N'Zoek een card...'--,@table=N'#country'\n\n--DECLARE @text = (\nIF @menu_id IS NULL RETURN\nSELECT @path = CONCAT('/',name) FROM api_card WHERE id = @menu_id\nEXEC sp_api_goto @path\n\nreturn \n*/\n\nEXEC sp_api_modal_text N'Land, stad, klant reducer voorbeeld:',N'h3'\n\nEXEC sp_api_modal_select @card_name=N'country',@value = @country_id OUT,@focus=1,@placeholder=N'Kies een land'--,@table=N'#country'\n\nSET @reducer=N'country_id = ' + @country_id\nEXEC sp_api_modal_select @card_name=N'city',@value = @city_id OUT,@reducer=@reducer,@focus=1,@placeholder=N'Kies een stad'--,@table=N'#country'\n\nSET @reducer=N'city_id = ' + @city_id\nEXEC sp_api_modal_select @card_name=N'klant',@value = @company_id OUT,@reducer=@reducer,@focus=1,@placeholder=N'Kies een klant'--,@table=N'#country'\n\n\nSET @country_id = CONCAT(N'Het land id is: ' , @country_id)\nSET @city_id = CONCAT(N'Het stad id is: ' , @city_id)\nSET @company_id = CONCAT(N'Het klant id is: ' , @company_id)\nEXEC sp_api_modal_text @country_id\nEXEC sp_api_modal_text @city_id\nEXEC sp_api_modal_text @company_id\n--DECLARE @json nvarchar(max) = (SELECT * FROM #country FOR JSON AUTO,INCLUDE_NULL_VALUES)\n--EXEC sp_api_toast @json\nRETURN\n\n\n\nEXEC sp_api_modal_text N'File upload...'\nEXEC sp_api_modal_file_input @name =N'File'\t,@value =@value OUT\nIF @value IS NOT NULL\n\tEXEC sp_api_modal_text @value\n",
                    "action_id": 237,
                    "action_name": "File Upload",
                    "source_table": "api_card_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_modal_most_used_cards",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@user_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@user_id i"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_modal_multi_select",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@card_name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@card_name n"
                },
                {
                    "name": "@selected_ids",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@selected_ids n"
                },
                {
                    "name": "@name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 512,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@name n"
                },
                {
                    "name": "@reducer",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "'1=1'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@reducer n"
                },
                {
                    "name": "@placeholder",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 512,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "N'Choose...'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@placeholder n"
                },
                {
                    "name": "@top",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 64,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "10",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@top n"
                },
                {
                    "name": "@no_isam",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "1",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 7,
                    "full_declaration_from_def": "@no_isam b"
                }
            ],
            "embedded_example": "EXEC sp_api_modal_multi_select 'country',@selected_ids = @selected_ids OUT",
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_modal_outerhtml",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@html",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@html n"
                },
                {
                    "name": "@query_selector",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "N'.pickmodal'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@query_selector n"
                },
                {
                    "name": "@use_placeholder",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@use_placeholder n"
                },
                {
                    "name": "@seed",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@seed n"
                },
                {
                    "name": "@head",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@head n"
                }
            ],
            "embedded_example": "EXEC sp_api_modal_outerhtml",
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_modal_paste",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@data",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@data n"
                },
                {
                    "name": "@name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@name n"
                },
                {
                    "name": "@json",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@json n"
                },
                {
                    "name": "@testdata",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@testdata n"
                },
                {
                    "name": "@show_sql",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@show_sql b"
                },
                {
                    "name": "@to_empty_table",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@to_empty_table n"
                },
                {
                    "name": "@text",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 7,
                    "full_declaration_from_def": "@text n"
                },
                {
                    "name": "@html",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 8,
                    "full_declaration_from_def": "@html n"
                }
            ],
            "embedded_example": "EXEC sp_api_modal_paste @data = @data OUT, @json = @json OUT --, @text = @text OUT, @html = @html OUT",
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_modal_paste_2",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@data",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@data n"
                },
                {
                    "name": "@name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@name n"
                },
                {
                    "name": "@json",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@json n"
                },
                {
                    "name": "@testdata",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@testdata n"
                },
                {
                    "name": "@show_sql",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@show_sql b"
                },
                {
                    "name": "@to_empty_table",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@to_empty_table n"
                }
            ],
            "embedded_example": "EXEC sp_api_modal_paste @data = @data OUT,@json = @json OUT, --,@to_empty_table = '#tmptable'",
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_modal_pathname",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@pathname",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@pathname n"
                },
                {
                    "name": "@search",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@search n"
                }
            ],
            "embedded_example": "EXEC sp_api_modal_pathname @pathname = N'/country', @search = '?red='",
            "embedded_description": null,
            "co_occurrence_stats": {
                "dbo.sp_api_modal_input": 1,
                "dbo.sp_api_toast": 1,
                "dbo.sp_api_goto": 1,
                "dbo.sp_api_modal_button": 2,
                "dbo.sp_api_modal_select": 1
            },
            "real_usage_examples": [
                {
                    "sql_source": "DECLARE @aantal nvarchar(128),@aantalCol nvarchar(128),@new_id INT,@text nvarchar(128), @size nvarchar(128)\r\nDECLARE @button nvarchar(128)\r\n \r\nIF (SELECT size FROM xlotartsize WHERE id=@id) is null OR (SELECT cp120 FROM xlotartsize WHERE id=@id) is null\r\n\tBEGIN\r\n\t\t--EXEC sp_api_toast N'MAAT END C.P.P. IS VERPLICHT BIJ xLOTARTSIZE',N'bg-danger text-white p-4 center'\r\n\t\tEXEC sp_api_modal_alert N'Voordat u Lotpallets kunt ingeven, moeten de velden MAAT en C.P.P. ingevuld zijn bij xLotArtSize'\r\n\t\t--EXEC sp_api_modal_alert N'MAAT END C.P.P. IS VERPLICHT BIJ xLOTARTSIZE2222'\r\n\t\t--EXEC sp_api_modal_alert N'MAAT END C.P.P. IS VERPLICHT BIJ xLOTARTSIZE223333322'\r\n\r\n\t\tDECLARE @search nvarchar(2000) = N'?focus=10240'\r\n\t\tSET @path = @path + '/' + @id\r\n\t\tEXEC sp_api_goto @path,@search\r\n\t\treturn\r\n\tend\r\n\r\nEXEC sp_api_modal_text N'Aantal Pallets'\r\nEXEC sp_api_modal_input @name='adv. pallets',@value = @aantal OUT,@focus=1\r\nSET @Aantal = isnull(@Aantal,0)--201007 zet het pallet-aantal OP 0 als er wel collis zijn\r\n\r\nEXEC sp_api_modal_text N'Aantal Colli'\r\nEXEC sp_api_modal_input @name='adv. Colli',@value = @aantalCol OUT\r\n\r\n\r\nEXEC sp_api_modal_button @name='button',@value = 'Toevoegen',@valueout = @button OUT,@class = 'btn-primary',@key = 'Enter'\r\nIF @button IS NOT NULL AND (TRY_CAST(@aantal as INT) IS NOT NULL OR TRY_CAST(@aantal as INT) IS NOT NULL)\r\nBEGIN\r\n\tDECLARE @LotBase_ID INT = {[lotbase].id}\r\n\tEXEC sp_api_toast @id\r\n\tEXEC sp_api_toast @aantal\r\n\tEXEC sp_api_toast @LotBase_ID\r\n\r\n\tEXEC @main_db.dbo.FillxLotpalletFromLAS @xLotArtSize_ID = @id,@Pallets = @aantal,@Colli = @aantalCol, @LotBase_ID = @LotBase_ID, @new_id = @new_id OUT\r\nEND\r\n\r\nIF @button IS NOT NULL \r\n\tBEGIN\r\n\t\tIF @Aantal >0 --202007 alleen als er pallets zijn ingevuld direct door naar lotpallets, niet bij losse colli..\r\n\t\t\tbegin\r\n\t\t\t\tSET @path = REPLACE(@path,'/lotartsize','/lotpallets')\r\n\t\t\t\tSET @text = N'?ord=&id=' + dbo.nv(@new_id )\r\n\t\t\t\tEXEC sp_api_modal_pathname @pathname = @path,@search = @text\r\n\t\t\t\t--EXEC sp_api_goto @path\r\n\t\t\tEND\r\n\r\n\t\tEXEC sp_api_modal_clear\r\n\tEND\r\n\r\n\r\n\r\n\r\n",
                    "action_id": 257,
                    "action_name": "Insert Advice",
                    "source_table": "api_card_actions"
                },
                {
                    "sql_source": "DECLARE @menu_id nvarchar(max),@reducer nvarchar(max)\nEXEC sp_api_modal_text N'Quick menu',N'h1 font-weight-light text-primary'\nSET @reducer=N'in_main_menu = 1'\nEXEC sp_api_modal_select @card_name=N'menu',@value = @menu_id OUT,@focus=1,@placeholder=N'Zoek...',@no_isam=1\n\t,@modalRouteSql = N'''/'' + name'\n\t--,@reducer=@reducer\n\nIF @path='/' EXEC sp_api_modal_button @name='@button',@value='Home',@valueout=NULL,@class='btn-tracy',@key='Escape'\n\nIF @menu_id IS NULL RETURN\nEXEC sp_api_modal_clear\nSELECT @path = CONCAT('/',name) FROM api_card WHERE id = @menu_id\nEXEC sp_api_modal_pathname @path,NULL\n",
                    "action_id": 264,
                    "action_name": "#sys_quick_menu",
                    "source_table": "api_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_modal_pdf_merge",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_modal_pdf_merge_multi",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@message",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@message n"
                },
                {
                    "name": "@api_files_ids",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@api_files_ids n"
                },
                {
                    "name": "@base64data",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@base64data n"
                },
                {
                    "name": "@filename",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 4096,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@filename n"
                },
                {
                    "name": "@context",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@context n"
                },
                {
                    "name": "@context_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@context_id i"
                },
                {
                    "name": "@api_files_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 7,
                    "full_declaration_from_def": "@api_files_id i"
                },
                {
                    "name": "@url",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 8,
                    "full_declaration_from_def": "@url n"
                },
                {
                    "name": "@category",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 9,
                    "full_declaration_from_def": "@category n"
                },
                {
                    "name": "@preview",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 10,
                    "full_declaration_from_def": "@preview b"
                }
            ],
            "embedded_example": "EXEC sp_api_modal_pdf_merge_multi @message = 'Drag some PDFs here'\r\n\t--,@api_files_ids = @api_files_ids --no upload, but a list of api_file_ids\r\n\t--,@filename = 'merged.pdf' --store the merged pdf\r\n\t--,@api_files_id = @api_files_id OUT\r\n\t--,@context nvarchar(128) = NULL\r\n\t--,@context_id int = NULL\r\n\t--,@api_files_id int = NULL OUT\r\n\t--,@url nvarchar(4000) = NULL OUT\r\n\t--,@category nvarchar(128) = NULL\r\n\t--,@preview bit = 0",
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_modal_pdf2json",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@text",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@text n"
                },
                {
                    "name": "@json",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@json n"
                },
                {
                    "name": "@tmptable",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@tmptable n"
                },
                {
                    "name": "@api_files_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@api_files_id i"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_modal_placeholder",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@name n"
                }
            ],
            "embedded_example": "EXEC sp_api_modal_placeholder @name = 'tableview1'",
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_modal_post",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@card",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@card n"
                },
                {
                    "name": "@column",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@column n"
                },
                {
                    "name": "@value",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@value n"
                },
                {
                    "name": "@id",
                    "type_from_sys": "int",
                    "type_from_def": "I",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@id I"
                },
                {
                    "name": "@parent_parent",
                    "type_from_sys": "bit",
                    "type_from_def": "B",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@parent_parent B"
                },
                {
                    "name": "@parent_id",
                    "type_from_sys": "int",
                    "type_from_def": "I",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@parent_id I"
                },
                {
                    "name": "@parent_card_id",
                    "type_from_sys": "int",
                    "type_from_def": "I",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 7,
                    "full_declaration_from_def": "@parent_card_id I"
                }
            ],
            "embedded_example": "EXEC sp_api_modal_post @card = @card_name,@column=N'name',@value='IBM',@id = @id",
            "embedded_description": null,
            "co_occurrence_stats": {
                "dbo.sp_api_modal_save": 8,
                "dbo.hasRole": 1,
                "dbo.sp_api_modal_input": 5,
                "dbo.sp_api_modal_table_update": 4,
                "dbo.sp_api_modal_text": 7,
                "dbo.sp_api_modal_button": 7,
                "dbo.sp_api_modal_table": 5,
                "dbo.sp_api_modal_modal": 4,
                "dbo.sp_api_modal_select": 2,
                "dbo.sp_api_modal_date": 2,
                "dbo.sp_api_goto": 1,
                "dbo.sp_api_toast": 1,
                "dbo.sp_api_modal_route": 1,
                "dbo.sp_api_modal_clear": 1,
                "dbo.sp_api_modal_value": 1,
                "dbo.sp_api_modal_input_decimal": 1,
                "dbo.sp_api_modal_choose": 1
            },
            "real_usage_examples": [
                {
                    "sql_source": "DECLARE @company_id nvarchar(32),@button nvarchar(128),@new_id nvarchar(32),@goto nvarchar(2000),@search nvarchar(2000)\n,@button1 nvarchar(128) = N'Nieuwe verkoop'\n,@button2 nvarchar(128) = N'Laatste open verkoop'\n\nEXEC sp_api_modal_select @card_name = N'klant',@value = @company_id OUT,@focus = 1\nIF @company_id > 0\nBEGIN\n\tEXEC sp_api_modal_button @name='button',@value=@button1,@valueout = @button OUT,@key='Insert'\n\tIF EXISTS (SELECT * FROM xTransactionHeader WHERE status=N'openSale' AND CounterParty_ID = @company_id)\n\t\tEXEC sp_api_modal_button @name='button',@value=@button2,@valueout = @button OUT,@key='Enter'\n\n\tIF @button = @button1\n\t\tBEGIN\n\t\t\tEXEC sp_api_modal_post N'verkoop',N'CounterParty_ID',@company_id,0\n\t\t\tEXEC @new_id = sp_api_modal_save N'verkoop',0\n\t\t\tIF @new_id > 0\n\t\t\t\tBEGIN\n\t\t\t\t\tSET @goto = N'/verkoop/'+@new_id+'/stock_ctr2'\n\t\t\t\t\tEXEC sp_api_toast N'Nieuwe verkoop gestart',N'alert-primary'\n\t\t\t\t\tSET @search = N'?id='+@new_id\n\t\t\t\t\tEXEC sp_api_goto @goto,@referer_path=N'/verkoop',@referer_search=@search\n\t\t\t\tEND\n\t\t\tELSE\n\t\t\t\tEXEC sp_api_toast N'Error nieuwe verkoop',N'alert-danger'\n\t\t\tEXEC sp_api_modal_clear\n\t\tEND\n\tIF @button = @button2\n\t\tBEGIN\n\t\t\tSET @new_id = (SELECT TOP 1 id FROM xTransactionHeader WHERE status=N'openSale' AND CounterParty_ID = @company_id ORDER BY id DESC)\n\t\t\tSET @goto = N'/verkoop/'+@new_id+'/stock_ctr2'\n\t\t\tSET @search = N'?id='+@new_id\n\t\t\tEXEC sp_api_goto @goto,@referer_path=N'/verkoop',@referer_search=@search\n\t\tEND\nEND\n",
                    "action_id": 86,
                    "action_name": "sys_new_action",
                    "source_table": "api_card_actions"
                },
                {
                    "sql_source": "EXEC sp_api_modal_post @card = N'apicard',@column=N'unparsed_crud_create',@value=N'dbo.hasRole(''admin'') > 0',@id=@id\nEXEC sp_api_modal_post @card = N'apicard',@column=N'unparsed_crud_read',@value=N'dbo.hasRole(''admin'') > 0',@id=@id\nEXEC sp_api_modal_save @card = N'apicard',@id=@id",
                    "action_id": 142,
                    "action_name": "Admin Only",
                    "source_table": "api_card_actions"
                },
                {
                    "sql_source": "--update xlfctr SET ischecked=iif(ischecked=0,1,0) WHERE id=@ID;\n--EXEC sp_api_toast 'LFCTR Check gewijzigd'\nDECLARE @idval int, @docdesc nvarchar(128)\n\n-- CVG 21/10/19 Controleer of de LFCTR reeds al gelinkt is aan een verkoop welke niet meer status \"openSale\" heeft. Indien dit zo is mag ik niet meer ge unchecked worden.\nIF EXISTS (SELECT TOP 100 * FROM xIVLINK IVL WHERE EXISTS (SELECT * FROM Q_xTransactionDetail ctr where \nEXISTS (SELECT * FROM xTransactionHeader cth WHERE cth.[status] != 'openSale' AND id = ctr.transactionheader_id) \nAND ctr.id = IVL.ITD AND IVL.VTD IN (SELECT CTR_ID FROM XLFCTR WHERE ischecked = 1 AND ID IN ({@ids})))) \n\tBEGIN\n\tEXEC sp_api_modal_alert N'LET OP!',N'Regels zijn reeds toegewezen aan een verkoop welke niet meer de status \"openSale\" heeft. U kan de regel niet meer van \"checked\" afhalen.'\n\tEXEC sp_api_modal_clear\n\tRETURN\n\tEND\n\t\nIF {[inkomende_landfreight].To_Location_ID} IN (SELECT ID FROM xLocation WHERE isEntrepot = 1)\n\tBEGIN\n\t\tEXEC sp_api_modal_alert N'De regel wordt gelost op een transito lokatie!',N'Enkel (Richard of Sabine mogen dit uitlossen!)'\n\t\tEXEC sp_api_modal_clear\n\t\tRETURN\n\tEND\n\nDECLARE @cursor_xLFCTR CURSOR\n\nIF EXISTS (SELECT * FROM xlfctr where id IN ({@ids}) AND ischecked = 0)\n\tBEGIN\n\t\tSET @action = 1\n\tEND\nELSE\n\tBEGIN\n\t\tSET @action = 0\n\t\tIF {[inkomende_landfreight].id} is not null\n\t\tBEGIN\n\t\tUPDATE XLANDFREIGHT SET i_selected = 0 where ID = {[inkomende_landfreight].id}\n\t\tEND\n\tEND\n\nIF @action = 0 AND EXISTS (SELECT * FROM xlfctr where id IN ({@ids}) AND ischecked = 1)\n\tBEGIN\n\t\tEXEC sp_api_modal_text N'Deze geselecteerde regels staan al op checked:'\n\t\tSET @cursor_xLFCTR = CURSOR LOCAL FAST_FORWARD FOR SELECT id FROM xlfctr where id IN ({@ids}) AND ischecked = 1\n\t\tOPEN @cursor_xLFCTR;\n\t\tFETCH NEXT FROM @cursor_xLFCTR INTO @idval\n\t\tWHILE @@FETCH_STATUS = 0\n\t\t\tBEGIN\n\t\t\t\tSET @text = (SELECT docDescription FROM xlfctr where id = @idval)\n\t\t\t\tEXEC sp_api_modal_text @text\n\t\t\t\tFETCH NEXT FROM @cursor_xLFCTR INTO @idval\n\t\t\tEND\n\t\tCLOSE @cursor_xLFCTR;\n\t\tDEALLOCATE @cursor_xLFCTR;\n\t\tEXEC sp_api_modal_button @name='@button',@value = 'Doorgaan', @valueout = @button OUT,@class='btn-danger',@key='Enter'\n\t\tIF @button IS NULL RETURN\n\tEND\n\t\n\tSET @cursor_xLFCTR = CURSOR LOCAL FAST_FORWARD FOR SELECT value FROM string_split(@ids,',')\n\tOPEN @cursor_xLFCTR;\n\tFETCH NEXT FROM @cursor_xLFCTR INTO @idval\n\tWHILE @@FETCH_STATUS = 0\n\t\tBEGIN\n\t\t\t--IF (SELECT ischecked FROM xlfctr where id = @idval) = 0\n\t\t\t--BEGIN\n\t\t\t\tUPDATE xlfctr SET ischecked = @action WHERE id = @idval\n\t\t\t\t/*\n\t\t\t\tEXEC sp_api_modal_post N'xlfctr',N'ischecked',@action,@idval\n\t\t\t\tEXEC sp_api_modal_save N'xlfctr',@idval\n\t\t\t\t*/\n/*\t\t\tEND\n\t\t\tELSE\n\t\t\tBEGIN\n\t\t\t\tSET @docdesc = concat('Een geselecteerde regel staat al op checked zie: ',(SELECT docDescription FROM xlfctr where id = @idval))\n\t\t\t\tEXEC sp_api_modal_alert N'Zeker weten?',@docdesc\n\t\t\t\tEXEC sp_api_modal_post N'xlfctr',N'ischecked',0,@idval\n\t\t\t\tEXEC sp_api_modal_save N'xlfctr',@idval\n\t\t\tEND\n*/\n\t\t--UPDATE xlfctr SET ischecked=iif(ischecked=0,1,0) WHERE id=@ID;\n\t\t\t\n\t\tFETCH NEXT FROM @cursor_xLFCTR INTO @idval\n\t\tEND\nCLOSE @cursor_xLFCTR;\nDEALLOCATE @cursor_xLFCTR;\n\nEXEC sp_api_modal_clear\nEXEC sp_api_modal_select_all_clear\n",
                    "action_id": 151,
                    "action_name": "CheckUncheck",
                    "source_table": "api_card_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_modal_preview",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@base64data",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@base64data n"
                },
                {
                    "name": "@mimetype",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "N'application/pdf'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@mimetype n"
                }
            ],
            "embedded_example": "--EXEC sp_sys_file_to_base64 @file_id = @file_id ,@base64 = @base64 OUT \r\nEXEC sp_api_modal_preview @base64data = @base64",
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_modal_preview_report",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@RequestKey",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@RequestKey n"
                },
                {
                    "name": "@use_placeholder",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@use_placeholder n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_modal_print",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "N'Print'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@name n"
                },
                {
                    "name": "@keycode",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "'Ctrl+P'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@keycode n"
                },
                {
                    "name": "@escape",
                    "type_from_sys": "bit",
                    "type_from_def": "B",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "1",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@escape B"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {
                "dbo.sp_api_modal_input": 7,
                "dbo.sp_api_toast": 1,
                "dbo.sp_api_modal_text": 16,
                "dbo.sp_api_modal_select": 5,
                "dbo.sp_api_modal_date": 13,
                "dbo.sp_api_modal_button": 17,
                "dbo.sp_api_modal_table": 18,
                "dbo.sp_api_modal_modal": 7,
                "dbo.ABCDATE": 3,
                "dbo.sp_api_modal_csv": 7,
                "dbo.sp_api_modal_date_from_to": 8,
                "dbo.sp_api_modal_choose": 4
            },
            "real_usage_examples": [
                {
                    "sql_source": "--RH210215 BEZIG DOWNLOAD ALS CSV ER BIJ.. lukt nofg niet..\nDECLARE @date nvarchar(128),@date2 nvarchar(128),@button nvarchar(128),@button2 nvarchar(128),@companyname nvarchar(128), @FileName nvarchar(128)\nset @date = dbo.workDate()\nset @date2 = dbo.workDate()\nSET @companyname = (select CompanyName from xcompany where id = @id)\nset @Filename=concat(@Companyname,'.csv')\n/*EXEC sp_api_modal_text 'Zoek op transport bedrijf'\nEXEC sp_api_modal_input @name='Transporteur',@value = @TransComp OUT,@focus=1,@select=1 -- zoek veld\n*/\nEXEC sp_api_modal_text 'Van:'\nEXEC sp_api_modal_date @name='Date',@value = @date OUT,@class='w-24',@focus=1,@select=1  -- zoek veld\nEXEC sp_api_modal_text 'Tot en met:'\nEXEC sp_api_modal_date @name='Date2',@value = @date2 OUT,@class='w-24' -- zoek veld\n--SET @date2 = CONCAT(@date2,' 23:59:59.999')\nSET @button = 'Intrastat_Melding'\nEXEC sp_api_modal_button @name='button',@value = 'Intrastat_Melding',@valueout = @button OUT,@class = 'btn-primary',@key = 'Enter'\nEXEC sp_api_modal_button @name='button',@value = 'Excel_CSV',@valueout = @button OUT,@class = 'btn-primary',@key = 'F5'\nEXEC sp_api_modal_text @companyname,N'h4 text-muted',@printonly=1\nEXEC sp_api_modal_print\n\nIF @button =  'Intrastat_Melding'\nBEGIN\nSELECT distinct [QUANTITY@] = sum(QUANTITY@), [ARTICLE~col-sm-5] = ARTICLE, LAND, INTRASTAT_CODE, [NETT_WEIGHT@] = sum(NETT_WEIGHT@), ISO, [AMOUNT@] = sum(AMOUNT@)\nINTO #Intrastat_Melding\nFROM          RV_INTRASTAT_MELDING\nWHERE\t\t(INTRASTAT_CODE is not NULL) AND (CompanyID = @id) AND (TransactionDate BETWEEN @date AND @date2) AND (THTDT = 2)\nGROUP BY ARTICLE,LAND,INTRASTAT_CODE,ISO\nEXEC sp_api_modal_table @tmptable=N'#Intrastat_Melding',@orderby=N'ORDER BY 2 ASC',@print=1\n\nEND \n\t\n\nIF @button =  'Excel_CSV'\nBEGIN\nSELECT distinct [QUANTITY] = sum(QUANTITY@), [ARTICLE] = ARTICLE, LAND, INTRASTAT_CODE, [NETT_WEIGHT] = sum(NETT_WEIGHT@), ISO, [AMOUNT] = sum(AMOUNT@)\nINTO #Intrastat_CSV\nFROM          RV_INTRASTAT_MELDING\nWHERE\t\t(INTRASTAT_CODE is not NULL) AND (CompanyID = @id) AND (TransactionDate BETWEEN @date AND @date2) AND (THTDT = 2)\nGROUP BY ARTICLE,LAND,INTRASTAT_CODE,ISO\n--EXEC sp_api_modal_table @tmptable=N'#Intrastat_CSV',@print=1\n--EXEC sp_api_modal_csv\t@tmptable = '#Intrastat_CSV'\t,@filename = @filename\t,@sep = ';'\n\n--EXEC sp_api_modal_table @tmptable=N'#Intrastat_CSV'\nEXEC sp_api_modal_csv @tmptable=N'#Intrastat_CSV',@ansi =1,@filename=@FileName\n\nEND \n\n\n\n\n\n\n\n",
                    "action_id": 1,
                    "action_name": "INTRASTAT_MELDING",
                    "source_table": "api_card_actions"
                },
                {
                    "sql_source": "DECLARE @date nvarchar(128),@date2 nvarchar(128),@button nvarchar(128), @ProdCode nvarchar(128), @ProdCode2 nvarchar(128),@land nvarchar(128)\nset @date = dbo.workDate()\nset @date2 = dbo.workDate()\n--SET @button = 'StockSoldList'\n--EXEC sp_api_modal_modal @class = 'w75'\nEXEC sp_api_modal_text 'Lvo:'\nEXEC sp_api_modal_select @card_name = N'Country',@value = @land OUT, @focus=1\nEXEC sp_api_modal_text 'Van:'\nEXEC sp_api_modal_date @name='Date',@value = @date OUT,@class='w-24'  -- zoek veld\nEXEC sp_api_modal_text 'Tot en met:'\nEXEC sp_api_modal_date @name='Date2',@value = @date2 OUT,@class='w-24' -- zoek veld\n--SET @date2 = CONCAT(@date2,' 23:59:59.999')\n\nEXEC sp_api_modal_text 'Van ProdCode:'\n--EXEC sp_api_modal_select @card_name=N'xstock',@value = @ProdCode OUT,@placeholder=N'Zoek...'\nEXEC sp_api_modal_input @name='ProdCode',@value = @ProdCode OUT,@class='w-24' -- zoek veld\nEXEC sp_api_modal_text 'Tot en met ProdCode:'\n--EXEC sp_api_modal_select @card_name=N'xstock',@value = @ProdCode2 OUT,@placeholder=N'Zoek...'\nEXEC sp_api_modal_input @name='ProdCode2',@value = @ProdCode2 OUT,@class='w-24' -- zoek veld\n\nEXEC sp_api_modal_button @name='button',@value = 'StockSoldList',@valueout = @button OUT,@class = 'btn-primary',@key = 'F1'\nEXEC sp_api_modal_print @keycode='F9'\n\nIF @button =  'StockSoldList'\nBEGIN\nEXEC sp_api_toast @land\nSELECT [Amount@] = Amount, [Description*] = Description, [Contentdesc*] = ContentDesc, LVO, xProdCode, TransactionDate\nINTO #StockSoldList\nFROM          RV_StockSold\nWHERE\t\t(TDTDT = 2) \nAND (TransactionDate BETWEEN @date AND @date2) AND (Origin_ID = @land OR @land is null)\n\n\nAND ((@ProdCode is NULL OR @ProdCode = '') AND (@ProdCode2 is NULL OR @ProdCode2 = '') AND (Origin_ID = @land OR @land is null)\nOR (xProdCode between @ProdCode AND @ProdCode2) AND (Origin_ID = @land OR @land is null))\n\nEXEC sp_api_modal_table @tmptable=N'#StockSoldList',@orderby=N'ORDER BY 2,5,4 ASC',@print=1\nEND \n",
                    "action_id": 61,
                    "action_name": "StockSold",
                    "source_table": "api_card_actions"
                },
                {
                    "sql_source": "DECLARE @search nvarchar(128) ,@button nvarchar(128), @datumtijd nvarchar(50)\nDECLARE @filename nvarchar(1024) \n,@VroegNegatiefdownload nvarchar(128) = dbo.strdate(NULL) +'_'+ 'VroegNegatief.csv'\n,@Negatiefdownload nvarchar(128) = dbo.strdate(NULL) +'_'+ 'Negatief.csv'\n,@Reserveddownload nvarchar(128) = dbo.strdate(NULL) +'_'+ 'Gereserveerd.csv'\n,@Notzerodownload nvarchar(128) = dbo.strdate(NULL) +'_'+ 'Voorraad.csv'\nSET @datumtijd = FORMAT(getdate(),'dd MMM yyyy HH:mm')\n\n--EXEC sp_api_modal_input @name='search',@value = @search OUT,@focus=1 -- zoek veld\nEXEC sp_api_modal_modal @class = 'w100'\nSET @button = 'VroegNegatief'\nEXEC sp_api_modal_button @name='button',@value = 'VroegNegatief',@valueout = @button OUT,@class = 'btn-primary',@key = 'F1'\nEXEC sp_api_modal_button @name='button',@value = 'Negatief',@valueout = @button OUT,@class = 'btn-primary',@key = 'F2'\nEXEC sp_api_modal_button @name='button',@value = 'Gereserveerd',@valueout = @button OUT,@class = 'btn-primary',@key = 'F3'\nEXEC sp_api_modal_button @name='button',@value = 'Alles',@valueout = @button OUT,@class = 'btn-primary',@key = 'F4'\nEXEC sp_api_modal_button @name='button',@value = 'VolledigeLijst',@valueout = @button OUT,@class = 'btn-primary',@key = 'F5'\nEXEC sp_api_modal_button @name='button',@value = 'Partijvoorraad',@valueout = @button OUT,@class = 'btn-primary',@key = 'F6'\nEXEC sp_api_modal_print @keycode='F9'\nEXEC sp_api_modal_text @datumtijd, @printonly=1\n\nIF @button =  'VroegNegatief'\nBEGIN\nSELECT DISTINCT [Description~col-sm-5] = Description, Origin_Code, Size, xBrandName, ContentDesc, FustCode, 'Vroeg Negatief' AS [CAP*]\n\t,[verwacht@g] = VoorraadVerwacht@, [Voorraad@g] = Voorraad@\nINTO #VroegNegatief\nFROM          RV_IR_Voorraad\nWHERE        (Voorraad@ < 0) AND ([EndTime*] = 'Vroeg') AND (CoreType = 'FOOD')\nEXEC sp_api_modal_table @tmptable=N'#VroegNegatief',@orderby=N'ORDER BY [CAP*],1 ASC',@print=1\nEXEC sp_api_modal_button @name='button',@value = 'VroegNegatiefNaarCSV',@valueout = @button OUT,@class = 'btn-success'\nEND \n\nIF @button =  'VroegNegatiefNaarCSV'\nBEGIN\nSELECT DISTINCT Voorraad@, VoorraadVerwacht@, Description, Origin_Code, Size, xBrandName, ContentDesc, FustCode, 'Vroeg Negatief' AS [CAP*]\nINTO #VroegNegatiefdownload\nFROM          RV_IR_Voorraad\nWHERE        (Voorraad@ < 0) AND ([EndTime*] = 'Vroeg') AND (CoreType = 'FOOD')\nEXEC sp_api_modal_csv @tmptable=N'#VroegNegatiefdownload',@orderby=N'ORDER BY [CAP*],Description ASC', @filename= @VroegNegatiefdownload,@ansi=1\nEND \n\n\nIF @button =  'Negatief'\nBEGIN\nSELECT DISTINCT [Description~col-sm-5] = Description, Origin_Code, Size, xBrandName, ContentDesc, FustCode, 'Negatief' AS [CAP*]\n\t,[verwacht@g] = VoorraadVerwacht@, [Voorraad@g] = Voorraad@\nINTO #Negatief\nFROM          RV_IR_Voorraad\nWHERE        (Voorraad@ < 0) AND (CoreType = 'FOOD')\nEXEC sp_api_modal_table @tmptable=N'#Negatief',@orderby=N'ORDER BY [CAP*],1 ASC',@print=1\nEXEC sp_api_modal_button @name='button',@value = 'NegatiefNaarCSV',@valueout = @button OUT,@class = 'btn-success'\nEND \n\nIF @button =  'NegatiefNaarCSV'\nBEGIN\nSELECT DISTINCT Voorraad@, VoorraadVerwacht@, Description, Origin_Code, Size, xBrandName, ContentDesc, FustCode, 'Negatief' AS [CAP*]\nINTO #Negatiefdownload\nFROM          RV_IR_Voorraad\nWHERE        (Voorraad@ < 0) AND (CoreType = 'FOOD')\nEXEC sp_api_modal_csv @tmptable=N'#Negatiefdownload',@orderby=N'ORDER BY [CAP*],Description ASC', @filename= @Negatiefdownload,@ansi=1\nEND \n\nIF @button =  'Gereserveerd'\nBEGIN\nSELECT DISTINCT ReservedIn@, ReservedOut@, [Description~col-sm-5] = Description, Origin_Code, Size, xBrandName, ContentDesc, FustCode, 'Gereserveerd' AS [CAP*]\n\t,[verwacht@g] = VoorraadVerwacht@, [Voorraad@g] = Voorraad@\nINTO #Gereserveerd\nFROM          RV_IR_Voorraad\nWHERE        (ReservedIn@ <> 0 OR ReservedOut@ <> 0) AND (CoreType = 'FOOD')\nEXEC sp_api_modal_table @tmptable=N'#Gereserveerd',@orderby=N'ORDER BY [CAP*],3 ASC',@print=1\nEXEC sp_api_modal_button @name='button',@value = 'GereserveerdNaarCSV',@valueout = @button OUT,@class = 'btn-success'\nEND \n\nIF @button =  'GereserveerdNaarCSV'\nBEGIN\nSELECT DISTINCT Voorraad@, VoorraadVerwacht@, ReservedIn@, ReservedOut@, Description, Origin_Code, Size, xBrandName, ContentDesc, FustCode, 'Gereserveerd' AS [CAP*]\nINTO #GereserveerdNaarCSV\nFROM          RV_IR_Voorraad\nWHERE        (ReservedIn@ <> 0 OR ReservedOut@ <> 0) AND (CoreType = 'FOOD')\nEXEC sp_api_modal_csv @tmptable=N'#GereserveerdNaarCSV',@orderby=N'ORDER BY [CAP*],Description ASC', @filename= @Reserveddownload,@ansi=1\nEND \n\nIF @button =  'Alles'\nBEGIN\nSELECT DISTINCT [Description~col-sm-5] = Description, Origin_Code, Size, xBrandName, ContentDesc, FustCode, 'Alles' AS [CAP*]\n\t,[verwacht@g] = VoorraadVerwacht@, [Voorraad@g] = Voorraad@ --, [Correctie] = '         '\nINTO #Notzero\nFROM          RV_IR_Voorraad\nWHERE        (Voorraad@ <> 0) AND (CoreType = 'FOOD')\nSET @datumtijd = FORMAT(getdate(),'dd MMM yyyy HH:mm')\nDECLARE @sql nvarchar(max) = N'ALTER TABLE #Notzero ADD ' + QUOTENAME(@datumtijd+'~col-sm-2') +' nvarchar(128)'\nEXEC (@sql)\nEXEC sp_api_modal_table @tmptable=N'#Notzero',@orderby=N'ORDER BY [CAP*],1 ASC',@fontsize='120%',@print=1\nEXEC sp_api_modal_button @name='button',@value = 'AllesNaarCSV',@valueout = @button OUT,@class = 'btn-success'\nEND \n\n--\n\nIF @button =  'Partijvoorraad'\nBEGIN\nSELECT CatSub_0 as [CatSub*], Variety_0 as [Botanic~col-sm-2 wrap],ContentDesc as [inhoud~col-sm-1],Size as [maat~col-sm-1],Detail_0 as [Detail~col-sm-1],Origin_Code as [LVO~col-sm-1-2] ,KGN as [Kgn~col-sm-1],FustCode as [Fustcode~col-sm-1],TransactionHeader_ID as [InkNr:0~col-sm-1] \n,\tleft(counter_code,8) as [Lev~col-sm-1],\tLEFT((select CONVERT(VARCHAR, LFDATE , 13)), 6) as [Datum~col-sm-1]\n,\tVoorraad as [Stock:0~col-sm-1]\n\nINTO #PartijStock\nFROM          @main_db.dbo.StockPerLot_date(dbo.abcdate()) -- alles verkocht t/m vandaag!\nwhere [catsub_0] > N'' -- RH210209 hiermee wordt fust weggelaten\nEXEC sp_api_modal_table @tmptable=N'#PartijStock'\n,@orderby=N'ORDER BY [catsub*],[Botanic~col-sm-2 wrap]  ASC'\n,@fontsize='100%',@print=1\nEND \n\n\nIF @button =  'AllesNaarCSV'\nBEGIN\nSELECT DISTINCT Voorraad@, VoorraadVerwacht@, Description, Origin_Code, Size, xBrandName, ContentDesc, FustCode, 'Negatief' AS [CAP*]\nINTO #Notzerodownload\nFROM          RV_IR_Voorraad\nWHERE        (Voorraad@ <> 0) AND (CoreType = 'FOOD')\nEXEC sp_api_modal_csv @tmptable=N'#Notzerodownload',@orderby=N'ORDER BY [CAP*],Description ASC', @filename= @Notzerodownload,@ansi=1\nEND \n\nIF @button =  'VolledigeLijst'\n\tBEGIN\n\t\tDECLARE @datum nvarchar(128),@button2 nvarchar(128)\n\t\tEXEC sp_api_modal_text N'Kies de datum voor de voorraadlijst (dit is een lange lijst!!)'\n\t\tEXEC sp_api_modal_date @name='datum',@value = @datum OUT\n\t\tEXEC sp_api_modal_button @name='button2',@value = 'Laad lijst',@valueout = @button2 OUT,@class = 'btn-success',@key = 'Enter'\n\n\t\tIF @button2 IS NOT NULL\n\t\t\tBEGIN\n\t\t\t\tSELECT *\n\t\t\t\tINTO #VolledigeLijst\n\t\t\t\tFROM @main_db.dbo.stockByDate(@datum)\n\t\t\t\tEXEC sp_api_modal_table @tmptable=N'#VolledigeLijst',@orderby=N'ORDER BY ARTIKEL ASC'\n\t\t\tEND\n\tEND",
                    "action_id": 189,
                    "action_name": "Voorraad Lijsten",
                    "source_table": "api_card_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_modal_qr_code",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@value",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 800,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@value n"
                },
                {
                    "name": "@print",
                    "type_from_sys": "bit",
                    "type_from_def": "B",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "1",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@print B"
                },
                {
                    "name": "@printonly",
                    "type_from_sys": "bit",
                    "type_from_def": "B",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@printonly B"
                },
                {
                    "name": "@center_image",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@center_image n"
                },
                {
                    "name": "@size",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "512",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@size i"
                },
                {
                    "name": "@level",
                    "type_from_sys": "nchar",
                    "type_from_def": "n",
                    "max_length_bytes": 2,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "'M'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@level n"
                },
                {
                    "name": "@element_id",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 7,
                    "full_declaration_from_def": "@element_id n"
                },
                {
                    "name": "@use_placeholder",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 8,
                    "full_declaration_from_def": "@use_placeholder n"
                }
            ],
            "embedded_example": "EXEC sp_api_modal_qr_code @value = N'Scanned!',@size=320 --,@element_id='htmlelem_id',@center_image =''",
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_modal_qr_scanner",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@name n"
                },
                {
                    "name": "@value",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@value n"
                },
                {
                    "name": "@use_placeholder",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@use_placeholder n"
                },
                {
                    "name": "@class",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@class n"
                },
                {
                    "name": "@scanDelay",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@scanDelay i"
                },
                {
                    "name": "@use_camera",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "1",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@use_camera b"
                },
                {
                    "name": "@scanner_action_prefix",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 512,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 7,
                    "full_declaration_from_def": "@scanner_action_prefix n"
                },
                {
                    "name": "@scanner_direct_post",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "1",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 8,
                    "full_declaration_from_def": "@scanner_direct_post b"
                },
                {
                    "name": "@scanner_items_text",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "''",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 9,
                    "full_declaration_from_def": "@scanner_items_text  n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {
                "dbo.sp_api_modal_input": 1,
                "dbo.sp_api_modal_scanner": 1,
                "dbo.sp_api_toast": 1,
                "dbo.sp_api_modal_text": 1,
                "dbo.sp_api_modal_button": 1,
                "dbo.sp_sys_file_upload_base64": 1,
                "dbo.sp_api_email": 1,
                "dbo.sp_api_goto": 1,
                "dbo.sp_api_modal_choose": 1
            },
            "real_usage_examples": [
                {
                    "sql_source": "-----------------------------------------------------------\n-- 230127  \n-- mobile_scan; **MENU-ITEM** voer een actie uit op basis van een qr scan\n-- pre declare: @lastname,@button,@qrscanner\n-----------------------------------------------------------\n\nDECLARE @prefix nvarchar(max)\nDECLARE @uuid nvarchar(max)\nEXEC sp_api_modal_text N'Scanner',N'h1'\nIF --1= 0 AND \n@qrscanner IS NULL  --na post is dit gevuld\n\tBEGIN\n\t\t--post direct als hij qr 'ziet'\n\t\tEXEC sp_api_modal_qr_scanner N'@qrscanner',@value = @qrscanner OUT\n\t\tRETURN\n\tEND\n\nSET @prefix = N'w_lot#'\nIF @qrscanner LIKE @prefix+'%'\n\tBEGIN\n\t\t--set @uuid = REPLACE(@qrscanner,@prefix,'')\n\t\tset @uuid=dbo.regex_match(right(@qrscanner,len(@qrscanner)-len(@prefix)),N'[0-z]+')\n\t\t--SET @uuid = 7\n\t\tEXEC #qr_action_loods_bevestiging_inslag @uuid\n\t\tRETURN\n\tEND\n\n--uitgebreid 230219 omdat oude palletstickers ook gelezen moeten kunnen worden\n-- hiermee kunnen de oude palletstickers met volledige url ook gelezen worden; vertaalt zich naar dezelfde functionaliteit als bij ps:<<pallet_id>>\nSET @prefix = concat(@origin,'/inbound/') --N'https://rws.tsql.app/inbound/' -- de palletsticker\nif left(@qrscanner,len(@prefix))=@prefix\n\tbegin \n\t\tdeclare @pallet_label nvarchar(256) = @main_db.dbo.get_url_param_val(@qrscanner,'pallet_label')\n\t\tif @pallet_label > N''\n\t\t\tBEGIN\n--\t\t\t\texecute sp_api_toast N'pallet sticker..'\n\t\t\t\tdeclare @pal_id int = (select id from w_pallet where pallet_label=@pallet_label)\n\t\t\t\tif @pal_id > 0 \n\t\t\t\t\tbegin\n\t\t\t\t\t\tEXEC #qr_action_pallet_sticker @uuid=@pal_id --230219\n\t\t\t\t\tend\n\t\t\t\tif isnull(@pal_id,0)=0\n\t\t\t\t\tbegin\n\t\t\t\t\t\texec sp_api_toast N'GEEN GELDIG PALLET LABEL.'\n\t\t\t\t\tend\t\t\n\t\t\t\tRETURN\n\t\t\tEND\n\tend\t\n--230217 nieuw\nSET @prefix = N'ps:' -- de palletsticker\nIF @qrscanner LIKE @prefix+'%'\n\tBEGIN\n--\t\texecute sp_api_toast N'pallet sticker..'\n\t\t--set @uuid = REPLACE(@qrscanner,@prefix,'')\n\t\tset @uuid=dbo.regex_match(right(@qrscanner,len(@qrscanner)-len(@prefix)),N'[0-z]+')\n\t\tEXEC #qr_action_pallet_sticker @uuid\n\t\tRETURN\n\tEND\n\n\nSET @prefix = N'out_trans#'\nIF @qrscanner LIKE @prefix+'%'\n\tBEGIN\n--\t\tset @uuid = REPLACE(@qrscanner,@prefix,'')\n\t\tset @uuid=dbo.regex_match(right(@qrscanner,len(@qrscanner)-len(@prefix)),N'[0-z]+')\n\n\t\t--SET @uuid = 7\n\t\tEXEC #qr_action_verwerk_outbound_transport @uuid ,@origin = @origin --foto?\n\t\tRETURN\n\tEND\n\n\nSET @prefix = N'micro_pick'\nIF @qrscanner LIKE @prefix+'%'\n\tBEGIN\n--\t\tset @uuid = REPLACE(@qrscanner,@prefix,'')\n\t\tset @uuid=dbo.regex_match(right(@qrscanner,len(@qrscanner)-len(@prefix)),N'[0-z]+')\n\n\t\t--SET @uuid = 7\n\t\t--231008 was EXEC #q r _ a c t i o n _ v e r w e r k _ m i c r o_pick @uuid ,@origin = @origin --foto?\n\t\t--if @user='rick@tracy.nu' \n\t\t\t\n\t\t\tif @user='rick@tracy.nu'\n\t\t\tBEGIN\n\t\t\t\t--exec #qr_action_verwerk_micro_pick_241213 @uuid ,@origin = @origin \n\t\t\t\tEXEC #qr_action_verwerk_micro_pick_v11 @uuid ,@origin = @origin \n\t\t\tEND\n\t\t\tELSE\n\t\t\tBEGIN\n\t\t\t\t--231211 live test met V11\n\t\t\t\tEXEC #qr_action_verwerk_micro_pick_v11 @uuid ,@origin = @origin \n\t\t\tEND\n\t\t--else \n\t\t--\t....andere test actie\n\t\tRETURN\n\tEND\n\n\nEXEC sp_api_modal_qr_scanner N'@qrscanner',@value = @qrscanner OUT\t\nEXEC sp_api_modal_text N'Onbekende code',N'h5'\nEXEC sp_api_modal_text @qrscanner\n\n/*\n\n\t--@qrscanner:  bonnetje#34535-345234-2356-234-342\nEXEC sp_api_modal_text @qrscanner,N'h5'\nEXEC sp_api_modal_input @name = '@qrscanner', @value = @qrscanner OUT --,@inline = 1\nEXEC sp_api_modal_text 'Doe er wat mee'\nEXEC sp_api_modal_button @name='@button',@value = 'Save', @valueout = @button OUT,@class='btn-danger',@key='Enter'\n--IF @button IS NULL RETURN\n*/",
                    "action_id": 478,
                    "action_name": "Mobilephone",
                    "source_table": "api_actions"
                },
                {
                    "sql_source": "---------------------------------------------------------------\n-- #qr_action_verwerk_outbound_transport scanner action handler \n-- pre declare: @uuid int, @button_choose nvarchar(max)= null ,@origin nvarchar(1024), @sampleqrscanner nvarchar(max)= null\n-- 230510 uitbreiden met altijd foto's kunnen toevoegen aan outbound transport files\n---------------------------------------------------------------\ndeclare @hTML nvarchar(4000) \ndeclare @link_tracy nvarchar(4000)=NULL\ndeclare @gofoto nvarchar(4000)=concat(N'/wms_out_transport/',@uuid)\ndeclare @pal_id int\nexec sp_api_modal_text @uuid --230706 toon transport_id\nEXEC sp_api_modal_choose @list = N'Conform,Not_Conform,Add_Photo,Barcodes,Pallet_Sample',@value = @button_choose OUT,@startkey=3\nif @button_choose is null return\n\n if @button_choose ='Add_Photo'\n\tbegin\n\t\t--230703 dit stukje is er voor gezet om af te dwingen dat er eerst een geldige SAMPLE wordt gemaakt d.m.v. PALLET LABEL SCAN\n\t\t--230706 aangepast, controleert of er minimaal 1 geldige scan is met container, artikel en w_lot overeenkomst\n\t\tif not exists(select 1 from wms_micro_outbound where transport_id=@uuid) \n\t\t\tbegin --deze outbound is geen micro outbound, dus een normale outbound => dwing af dat er eerst een pallet scan wordt gedaan\n\t\t\t\tif not exists(select * from q_wms_out_samples \n\t\t\t\t\t\t\t\twhere xtransport_id=@uuid \n\t\t\t\t\t\t\t\t\tand out_stock_id in (select xstock_id from q_wms_out_requested where xtransport_id=@uuid) -- zelfde artikel !\n\t\t\t\t\t\t\t\t\tand w_lot_id in(select w_lot_id from q_wms_out_requested where xtransport_id=@uuid) --minimaal zelfde container\n\t\t\t\t\t\t\t\t\tand bl_id in(select bl_id from q_wms_out_requested where xtransport_id=@uuid) --minimaal zelfde BL !\n\n\t\t\t\t\t\t\t) --and info='oke') --TMP !!\n\t\t\t\t\tBEGIN --kennelijk (nog) geen correcte pallet gecand..\n\t\t\t\t\t\texec sp_api_toast N'NO VALIDATION YET; SCAN THE PALLET-LABEL FIRST! (SAMPLE)'\n\t\t\t\t\t\treturn\n\t\t\t\t\tEND\n\t\t\tend\n\n\t\tELSE --het is een micro outbound\n\t\t\tBEGIN\n\t\t\t\texec sp_api_toast N'micro outbound'\n\t\t\tEND\t\n\n\t\t-------------------------------------\n\t\t-- add_document_or_foto\n\t\t-- pre declare @api_files_id,@filename,@trans_out_id\n\t\t-------------------------------------\n\t\t/*\n\t\t(context = 'wms_out_transport' AND context_id = {[wms_out_transport].id})\n\t\tor \n\t\t(context = 'wms_out_transport' AND context_id = {[ffa_transport_out].id})\n\t\tor \n\t\t(context = 'wms_out_transport' AND context_id = {[wms_io].out_transport_id})\n\t\t*/\n\t\tdeclare @api_files_id int\n\t\tdeclare @filename nvarchar(200)\n\t\tdeclare @trans_out_id int\n\t\t\n\t\tset @trans_out_id=@uuid\n\t\t--set @trans_out_id = 1 --@uuid\n\t\tif @trans_out_id is null \n\t\t\tbegin\n\t\t\t\texec sp_api_modal_alert N'Er is geen correcte transport out referentie. (neem evt. contact op met uw consultant)'\n\t\t\t\texec sp_api_modal_clear\n\t\t\t\treturn\n\t\t\tend\n\t\tset @filename=concat('foto_',@main_db.dbo.char_left(@user,'@'),'_',@main_db.dbo.DT_FILENAME(GETDATE()))\n\t\t--exec sp_api_toast @filename\n\t\tEXEC @main_db.dbo.sp_api_modal_file @name = N'@filename', @to_file_context = 'wms_out_transport', @to_file_context_id = @trans_out_id,@filename = @filename\n\t\t\t, @category = 'pallet_foto' ,@resize_max = 2048, @resize_quality = 45,@api_files_id = @api_files_id OUT\n\t\tIF @api_files_id > 0 EXEC sp_api_modal_value N'@filename'\n\t\treturn\n\tend\n \n if @button_choose ='Conform'\n\tbegin\n\t\t--230703 dit stukje is er voor gezet om af te dwingen dat er eerst een geldige SAMPLE wordt gemaakt d.m.v. PALLET LABEL SCAN\n\t\t--230706 aangepast, controleert of er minimaal 1 geldige scan is met container, artikel en w_lot overeenkomst\n\t\tif not exists(select 1 from wms_micro_outbound where transport_id=@uuid) \n\t\t\tbegin --deze outbound is geen micro outbound, dus een normale outbound => dwing af dat er eerst een pallt scan wordt gedaan\n\t\t\t\tif not exists(select * from q_wms_out_samples \n\t\t\t\t\t\t\t\twhere xtransport_id=@uuid \n\t\t\t\t\t\t\t\t\tand out_stock_id in (select xstock_id from q_wms_out_requested where xtransport_id=@uuid) -- zelfde artikel !\n\t\t\t\t\t\t\t\t\tand w_lot_id in(select w_lot_id from q_wms_out_requested where xtransport_id=@uuid) --minimaal zelfde container\n\t\t\t\t\t\t\t\t\tand bl_id in(select bl_id from q_wms_out_requested where xtransport_id=@uuid) --minimaal zelfde BL !\n\n\t\t\t\t\t\t\t) --and info='oke') --TMP !!\n\t\t\t\t\tBEGIN --kennelijk (nog) geen correcte pallet gecand..\n\t\t\t\t\t\texec sp_api_toast N'NO VALIDATION YET; SCAN THE PALLET-LABEL FIRST! (SAMPLE)'\n\t\t\t\t\t\treturn\n\t\t\t\t\tEND\n\t\t\tend\n\n\t\tELSE --het is een micro outbound\n\t\t\tBEGIN\n\t\t\t\texec sp_api_toast N'micro outbound'\n\t\t\tEND\t\n\n\n\t\n\t\tupdate wms_io \n\t\t\tset status='CONFORM' \n\t\t\t\t,conform_user=@USER\t\t--230626\n\t\t\t\t,conform_dt=getdate()\t--230626\n\t\twhere out_transport_id=@uuid and in_out='OUT' --230316 dit kunnen meerdere regels zijn (bij multi-item-outbound)\n\t\tupdate xtransport set completed=1 where id=@uuid\n\t\tset @link_tracy=concat(@origin,N'/wms_out_transport?id=',@uuid,' ') --meegegeven parameter\n\t\tset @html=concat(N'De outbound met referentie ',(select transportinfo from xtransport where id=@uuid),' / ',(select top 1 transport_details from dbo.tr_stuff \nwhere transport_id=@uuid),' is conform verwachting verladen naar de klant. '\n\t\t\t\t\t\t,'<p><a href=\"',@link_tracy,'\" target=_blank>click hier</a>'\n\t\t\t\t\t\t)\n\n\t  \t--PROJECT CALL !!\n  \t\t--230428 GEEN OUTBOUND MAIL MEER NAAR RWS =>    EXEC sp_api_email @to = N'outbound@rwsbv.com',@subject = N'outbound conform & completed....',@body = N'tracy is the best',@html = @html\n\n\n\t\t--voeg evt foto toe\t\t\n--\t\tdeclare @gofoto nvarchar(4000)=concat(N'/wms_out_transport/',@uuid)\n\t\texec sp_api_goto @path=@gofoto\n\n\t\texec sp_api_modal_clear\n\t\treturn\n\tend\n\n\n if @button_choose ='Not_Conform'\n\tbegin\n\t\tDECLARE @opmerking nvarchar(max),@button22 nvarchar(128)\n\t\texec sp_api_modal_text N'What is wrong with this outbound loading?'\n\t\tEXEC sp_api_modal_input @name = '@opmerking', @value = @opmerking OUT --,@inline = 1\n\t\tEXEC sp_api_modal_button @name='@button22',@value = 'Save', @valueout = @button22 OUT,@class='btn-danger',@key='Enter'\n\t\tIF @button22 IS NULL RETURN\n\t\t\n\t\t\n\t\tupdate wms_io set status='NOT CONFORM' where out_transport_id=@uuid and in_out='OUT' --out check extra zekerheid, hoewel er maar 1 id is natuurlijk\n\t\tupdate xtransport set completed=0 where id=@uuid\n\t\tset @link_tracy=concat(@origin,N'/wms_out_transport?id=',@uuid,' ') --meegegeven parameter\n\t\tset @html=concat(N'Er zijn verschillen bij de outbound met referentie ',(select transportinfo from xtransport where id=@uuid),' / ',(select top 1 transport_details from dbo.tr_stuff \nwhere transport_id=@uuid),'. '\n\t\t\t\t\t\t,'<p>De opmerking is :',@opmerking,'<p>'\n\t\t\t\t\t\t,'<p><a href=\"',@link_tracy,'\" target=_blank>click hier</a>'\n\t\t\t\t\t\t)\n\n\t  \t--PROJECT CALL !!\n  \t\t--230428 GEEN OUTBOUND MAIL MEER NAAR RWS =>      \t\tEXEC sp_api_email @to = N'outbound@rwsbv.com',@subject = N'outbound NOT COFORM....',@body = N'tracy is the best',@html = @html\n\n\t\texec sp_api_modal_clear\n\t\treturn\n\tend\n\nif @button_choose ='Pallet_Sample'\n\tbegin\n\t\tEXEC sp_api_modal_qr_scanner @name=N'@sampleqrscanner',@value = @sampleqrscanner OUT\n\t\tIF @sampleqrscanner IS NULL RETURN\n\t\texec sp_api_modal_text @sampleqrscanner\n\t\tIF left(@sampleqrscanner,3) = 'ps:'\n\t\t\tBEGIN\n\t\t\t\tset @pal_id=right(@sampleqrscanner,len(@sampleqrscanner)-3) \n\t\t\t\t--230701 registreer sample\n\t\t\t\texec IINE_wms_out_samples   \n\t\t\t\t\t@user=@user\n    \t\t\t\t,@w_pallet_id =@pal_id\n    \t\t\t\t,@xTransport_id =@uuid\n\n\t\t\t\t\n\t\t\t\tif exists(select * from pallet_status \n\t\t\t\t\t\t\twhere --id=@pal_id\tAND -- ff niet lullig doen als het een andere pallet uit dezelfde container is..\n\t\t\t\t\t\t\t\tout_transport_id=@uuid \n\t\t\t\t\t\t\t\t--and artikel is oke\n\t\t\t\t\t\t)\n\t\t\t\t\tEXEC sp_api_modal_text N'GOED',N'h1'\n\t\t\t\tELSE\n\t\t\t\t\tEXEC sp_api_modal_text N'VERKEERDE PALLET!',N'h1'\n\t\t\t\t\n\t\t\tEND\n\t\tELSE\n\t\t\tBEGIN\n\t\t\t\tEXEC sp_api_modal_text N'SCAN A PALLET LABEL!',N'h1'\n\t\t\t\t--EXEC sp_api_modal_text @sampleqrscanner,N'h1'\n\t\t\t\t\n\t\t\tEND\n\tend\n\nif @button_choose ='Barcodes' --230705 verzamelde codes voor de klant in extene textfile\n\tbegin\n\t\tdeclare @barcodes nvarchar(max)\n\t\t--231017 was:\n\t\t--EXEC sp_api_modal_scanner @barcodes = 1, @value = @barcodes OUT\n\n\t\t--231017 nw\n\t\t\t-- @button_choose_2 nvarchar(max)= null, @button_laser_klaar nvarchar(max)= null\n\t\t\n\t\texec sp_api_modal_text N'Select your \"Scan Device\"'\n\t\tEXEC sp_api_modal_choose @list = N'use_camera,use_laser_scanner',@value = @button_choose_2 OUT, @button_class='secondary'\n\t\tif @button_choose_2 is null RETURN\n\t\tif @button_choose_2 = N'use_camera'\n\t\t\tEXEC sp_api_modal_scanner @barcodes = 1, @value = @barcodes OUT, @video_width= 1200\n\t\tif @button_choose_2 = N'use_laser_scanner'\n\t\tbegin\t\n\t\t\tEXEC sp_api_modal_input @name = '@Pallet_serials', @value = @barcodes OUT ,@type = 'textarea', @focus=1 --,@inline = 1\n\t\t\tEXEC sp_api_modal_button @name='@button_laser_klaar',@value = 'Save Pallet Scans', @valueout = @button_laser_klaar OUT,@class='btn-danger',@key='Enter'\n\t\t\tif @button_laser_klaar is null return\n\t\tend\t\t\n\n\n\n\n\t\tIF NULLIF(@barcodes,'') IS NOT NULL\n\t\t\tBEGIN\n\t\t\t\tset @barcodes=concat('Scanned codes at ',getdate(),char(13),@barcodes,'')\n\t\t\t\tDECLARE @name nvarchar(128) = N'outbound_barcodes.txt'\n\t\t\t\t\t,@base64data nvarchar(max) = dbo.base64encode(CONVERT(varbinary(max),CONVERT(varchar(max),@barcodes)))\n\t\t\t\tEXEC sp_sys_file_upload_base64 @base64data = @base64data,@name = @name\n\t\t\t\t\t,@description = N'Scanned barcodes at outbound'\n\t\t\t\t\t,@mimetype = N'text/plain'\n\t\t\t\t\t,@context = N'wms_out_transport'\n\t\t\t\t\t,@context_id = @uuid\n\t\t\t\t\t,@category = N'extern' --6 (maar in wms is dat 3 dus oppassen met id's!!)\n\n\t\t\t\tEXEC sp_api_modal_clear\n\t\t\tEND \n\tend\t",
                    "action_id": 491,
                    "action_name": "#qr_action_verwerk_outbound_transport",
                    "source_table": "api_actions"
                },
                {
                    "sql_source": "-----------------------------------------------------------\n-- 230127  \n-- mobile_scan; **MENU-ITEM** voer een actie uit op basis van een qr scan\n-- pre declare: @lastname,@button,@qrscanner\n-----------------------------------------------------------\n\nDECLARE @prefix nvarchar(max)\nDECLARE @uuid nvarchar(max)\nEXEC sp_api_modal_text N'Scanner',N'h1'\n--IF --1= 0 AND \n--@qrscanner IS NULL  --na post is dit gevuld\n--\tBEGIN\n\t\t--post direct als hij qr 'ziet'\nEXEC sp_api_modal_qr_scanner N'@qrscanner',@value = @qrscanner OUT, @use_camera=0\n--\t\tRETURN\n--\tEND\n\nSET @prefix = N'w_lot#'\nIF @qrscanner LIKE @prefix+'%'\n\tBEGIN\n\t\t--set @uuid = REPLACE(@qrscanner,@prefix,'')\n\t\tset @uuid=dbo.regex_match(right(@qrscanner,len(@qrscanner)-len(@prefix)),N'[0-z]+')\n\t\t--SET @uuid = 7\n\t\tEXEC #qr_action_loods_bevestiging_inslag @uuid\n\t\tRETURN\n\tEND\n\n--uitgebreid 230219 omdat oude palletstickers ook gelezen moeten kunnen worden\n-- hiermee kunnen de oude palletstickers met volledige url ook gelezen worden; vertaalt zich naar dezelfde functionaliteit als bij ps:<<pallet_id>>\nSET @prefix = concat(@origin,'/inbound/') --N'https://rws.tsql.app/inbound/' -- de palletsticker\nif left(@qrscanner,len(@prefix))=@prefix\n\tbegin \n\t\tdeclare @pallet_label nvarchar(256) = @main_db.dbo.get_url_param_val(@qrscanner,'pallet_label')\n\t\tif @pallet_label > N''\n\t\t\tBEGIN\n--\t\t\t\texecute sp_api_toast N'pallet sticker..'\n\t\t\t\tdeclare @pal_id int = (select id from w_pallet where pallet_label=@pallet_label)\n\t\t\t\tif @pal_id > 0 \n\t\t\t\t\tbegin\n\t\t\t\t\t\tEXEC #qr_action_pallet_sticker @uuid=@pal_id --230219\n\t\t\t\t\tend\n\t\t\t\tif isnull(@pal_id,0)=0\n\t\t\t\t\tbegin\n\t\t\t\t\t\texec sp_api_toast N'GEEN GELDIG PALLET LABEL.'\n\t\t\t\t\tend\t\t\n\t\t\t\tRETURN\n\t\t\tEND\n\tend\t\n--230217 nieuw\nSET @prefix = N'ps:' -- de palletsticker\nIF @qrscanner LIKE @prefix+'%'\n\tBEGIN\n--\t\texecute sp_api_toast N'pallet sticker..'\n\t\t--set @uuid = REPLACE(@qrscanner,@prefix,'')\n\t\tset @uuid=dbo.regex_match(right(@qrscanner,len(@qrscanner)-len(@prefix)),N'[0-z]+')\n\t\tEXEC #qr_action_pallet_sticker @uuid\n\t\tRETURN\n\tEND\n\n\nSET @prefix = N'out_trans#'\nIF @qrscanner LIKE @prefix+'%'\n\tBEGIN\n--\t\tset @uuid = REPLACE(@qrscanner,@prefix,'')\n\t\tset @uuid=dbo.regex_match(right(@qrscanner,len(@qrscanner)-len(@prefix)),N'[0-z]+')\n\n\t\t--SET @uuid = 7\n\t\tEXEC #qr_action_verwerk_outbound_transport @uuid ,@origin =@origin --foto?\n\t\tRETURN\n\tEND\n--EXEC sp_api_modal_qr_scanner N'@qrscanner',@value = @qrscanner OUT\nIF @qrscanner Is NOT NULL\n\tBEGIN\n\t\tEXEC sp_api_modal_text N'Onbekende code',N'h5'\n\t\tEXEC sp_api_modal_text @qrscanner\n\tEND\nEXEC sp_api_modal_value N'@qrscanner'\n/*\n\n\t--@qrscanner:  bonnetje#34535-345234-2356-234-342\nEXEC sp_api_modal_text @qrscanner,N'h5'\nEXEC sp_api_modal_input @name = '@qrscanner', @value = @qrscanner OUT --,@inline = 1\nEXEC sp_api_modal_text 'Doe er wat mee'\nEXEC sp_api_modal_button @name='@button',@value = 'Save', @valueout = @button OUT,@class='btn-danger',@key='Enter'\n--IF @button IS NULL RETURN\n*/",
                    "action_id": 504,
                    "action_name": "Scanner",
                    "source_table": "api_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_modal_reducer",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@column",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@column n"
                },
                {
                    "name": "@reducer",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@reducer n"
                },
                {
                    "name": "@type",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@type n"
                },
                {
                    "name": "@inline",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "1",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@inline b"
                },
                {
                    "name": "@placeholder",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@placeholder n"
                },
                {
                    "name": "@table",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@table n"
                },
                {
                    "name": "@identifier",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 7,
                    "full_declaration_from_def": "@identifier n"
                },
                {
                    "name": "@use_placeholder",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 8,
                    "full_declaration_from_def": "@use_placeholder n"
                }
            ],
            "embedded_example": "DECLARE @reducer nvarchar(max)\r\nSELECT name = Name_0 INTO #tmptable FROM xCountry\r\nEXEC sp_api_modal_reducer @column = 'name', @reducer = @reducer OUT --\r\n\t--,@inline = 1\r\n\t--,@placeholder = NULL \r\nEXEC sp_api_modal_table @tmptable = '#tmptable',@reducer = @reducer",
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_modal_refresh",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@timeout",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@timeout i"
                },
                {
                    "name": "@show",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@show b"
                },
                {
                    "name": "@show_text",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@show_text n"
                },
                {
                    "name": "@use_placeholder",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@use_placeholder n"
                },
                {
                    "name": "@step_millis",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@step_millis i"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_modal_reload",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {
                "dbo.sp_api_modal_select_all_clear": 1,
                "dbo.sp_api_toast": 1
            },
            "real_usage_examples": [
                {
                    "sql_source": "declare @SID INT,@text nvarchar(255)\r\nselect @SID=supplier_id from p_PriceEntryRow PER where PER.ID=@ID\r\nEXEC sp_api_modal_alert N'Leverancier wordt via Timer ge-wiped'\r\nexec @main_db.dbo.PER_WIPE @SID\r\nSET @text=N'Supplier_id '+ dbo.nv(@SID) + ' wiped!'\r\nEXEC sp_api_toast @text\r\nEXEC sp_api_modal_select_all_clear\r\n--EXEC sp_api_modal_text N'ok'\r\nEXEC sp_api_modal_reload\r\n-- Ctrl+S en F5",
                    "action_id": 202,
                    "action_name": "Wipe Supplier",
                    "source_table": "api_card_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_modal_reload_client",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_modal_restart",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@action_name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@action_name n"
                },
                {
                    "name": "@values",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@values n"
                },
                {
                    "name": "@modal_clear",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "1",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@modal_clear b"
                },
                {
                    "name": "@no_raiserror_success",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@no_raiserror_success b"
                },
                {
                    "name": "@refresh_all",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@refresh_all b"
                }
            ],
            "embedded_example": "EXEC sp_api_modal_restart\r\n\t--,@action_name = 'global_country_list' -- default NULL - start other action instead of current'global_country_list'\r\n\t--,@values = '{\"@eu_only\":1}' -- default NULL - (re)start with these values\r\n\t-- ,@modal_clear = 1 -- just always clear all previous modal elements\r\n\t--,@no_raiserror_success = 1 -- default 0 - use this when inside TRY CATCH blocks!!!\r\n\t--,@refresh_all = 1 -- default 0 (faster modal) - use this to refresh all client data, so that underlying lists/forms are also updated",
            "embedded_description": null,
            "co_occurrence_stats": {
                "dbo.sp_api_modal_sure": 1,
                "dbo.sp_api_modal_input": 2,
                "dbo.sp_api_modal_table_update": 1,
                "dbo.sp_api_modal_text": 2,
                "dbo.sp_api_modal_select_table": 1,
                "dbo.sp_api_modal_clear": 2,
                "dbo.sp_api_modal_button": 2,
                "dbo.sp_api_modal_table": 2,
                "dbo.sp_api_modal_input_decimal": 1,
                "dbo.sp_api_toast": 1,
                "dbo.sp_api_modal_html": 1,
                "dbo.sp_api_modal_alert": 1,
                "dbo.sp_api_email": 1,
                "dbo.sp_api_modal_value": 1,
                "dbo.sp_api_modal_values_clear": 1,
                "dbo.sp_api_modal_get_value": 1,
                "dbo.sp_api_modal_choose_list": 1,
                "dbo.sp_api_modal_choose": 1
            },
            "real_usage_examples": [
                {
                    "sql_source": "DECLARE @cth_id int = {[verkoop].id}, @ctr_id int,@stock_ID int,@detail nvarchar(max),@stock nvarchar(128),@text nvarchar(128)\n\nSELECT @ctr_id = id,@stock_ID = stock_ID,@detail=detail,@price =ISNULL(price,0) FROM xtransactionDetail WHERE ISNULL(price,0) = 0 AND @cth_id = transactionheader_id \nORDER BY detail DESC\nEXEC sp_api_modal_modal @class = 'w75'\n\nIF @ctr_id IS NOT NULL AND {[verkoop].status} in (N'openSale')\n\tBEGIN\n\t\t--EXEC sp_api_modal_text @detail\n\t\t--EXEC sp_api_modal_text @ctr_id\n\t\t\n\t\tSET @stock = (SELECT stock from xstock where id = @stock_ID)\n\t\tSELECT @text = 'History van: ' + @detail + ' Huidige voorraad: ' + @stock\n\t\tEXEC sp_api_modal_text 'INKOOP HISTORY', 'text-primary font-weight-bold text-center display-4'\n\t\tEXEC sp_api_modal_text @text, 'text-primary font-weight-bold text-center display-4'\n\t\t\n\t\tEXEC sp_api_modal_text N'Vul prijs in',N'h4 text-muted'\n\t\tEXEC sp_api_modal_input_decimal @name='@price',@value = @price OUT,@inline=1,@select=1\n\t\tEXEC sp_api_modal_button @name='@button',@value = 'Opslaan', @valueout = @button OUT,@class='btn-danger',@key='Enter'\n\t\t\n\t\tSELECT TOP 10 [Amount] = Amount,[Price] = Price,[currencyISO] = currencyISO,[Counterparty~col-sm-3] = Counterparty,[Verkocht aan] = MappedCompanies,\n\t\t[insUser] = insUser,[TransactionDate] = TransactionDate,[TDT] = TDT, [Stock_ID] = Stock_ID, [id] = id\n\t\tINTO #InkoopHistory\n\t\tfrom Q_xTransactionDetail \n\t\twhere TDT = 1 AND Stock_ID = @stock_ID\n\t\tORDER BY id DESC\n\t\tALTER TABLE #InkoopHistory\n\t\tDROP COLUMN [Stock_ID],[TDT]\n\t\tEXEC sp_api_modal_table @tmptable=N'#InkoopHistory',@orderby=N'ORDER BY id DESC'\n\t\t\n\t\tIF @button IS NOT NULL\n\t\t\tBEGIN\n\t\t\t\tEXEC sp_api_modal_post N'ctr2',N'price',@price,@ctr_id\n\t\t\t\tEXEC sp_api_modal_save N'ctr2',@ctr_id\n\t\t\t\tEXEC sp_api_modal_restart\n\t\t\tEND\n\tEND\nIF @ctr_id IS NULL\n\tBEGIN\n\tEXEC sp_api_modal_text 'Alle prijzen zijn ingevuld. Er zijn geen regels gevonden zonder een prijs.', 'text-success font-weight-bold text-center display-4'\n\tEND\nIF {[verkoop].status} not in (N'openSale')\n\tBEGIN\n\tEXEC sp_api_modal_text 'Direct prijzen ingave alleen bij open Orders!', 'text-success font-weight-bold text-center display-4'\n\tEND\n\n",
                    "action_id": 1302,
                    "action_name": "Alle prijzen invullen",
                    "source_table": "api_card_actions"
                },
                {
                    "sql_source": "DECLARE @value bit\nexec sp_api_modal_sure @alert_text =N'alle data wissen?', @value = @value OUT\n\nif @value=1\n\tbegin\n\t\tif (select count(*) from xinvoice) <20\n\t\t\tbegin\n\t\t\t\tupdate xinvoice set status='Draft'\n\t\t\t\texec sp_wis_alles 2023\n\t\t\t\texec sp_api_modal_clear\n\t\t\t\treturn;\n\t\t\tend\t\n\tend\t\n\nif @value=0\n\tbegin\n\t\texec sp_api_modal_clear\n\t\treturn;\n\tend\t\n\t\nexec sp_api_modal_restart\t\n\t",
                    "action_id": 90,
                    "action_name": "wis_alles",
                    "source_table": "api_actions"
                },
                {
                    "sql_source": "-------------------------------------------------------------------------------------------\n--\t220818 financi\u00eble_claim_afhandelen \n--\tcontext xClaim, ctr2\n--\tClaim verwerken tot kostenregistratie (die een credit factuur tot gevolg heeft)\n--\tcontext kan een xClaim registratie zijn, maar het kan ook direct op de betreffende CTR2\n--\t220823\tnu wordt ook gelijk de credit factuur gemaakt \n--\n--\tpre declare: @ModelCTR_ID int\t,@Amount int ,@Price float ,@TargetCTR_ID int, @toCTR int, @thdt int,@StockID int,@selectedTargetCTR int, @Button,@ClaimID,@CTR2_ID\n-------------------------------------------------------------------------------------------\n\ndeclare @ModelCTR_ID int\t\n\t\t,@Amount  nvarchar(200)\n\t\t,@Price float \n\t\t,@TargetCTR_ID int\n\t\t, @toCTR int\n\t\t, @thdt int\n\t\t,@StockID int\n\t\t,@selectedTargetCTR int\n\t\t, @Button nvarchar(200)\n\t\t,@ClaimID int\n\t\t,@CTR2_ID int\n\t\t,@retourAmount int = 0\n--dit is toch altijd? :: IF @ClaimID is NULL AND @CTR2_ID is NULL\n--\tbegin\n\t\t--context = xClaim?\n\t\tselect @ClaimID = id\n\t\t\t\t,@ModelCTR_ID =ctr_id\t \n\t\t\t\t,@Amount = claimAmount\n\t\t\t\t,@Price =claimPriceDiff \n\t\t\t\t,@retourAmount = ISNULL(retourAmount,0)\n\t\t\t\t--,@TargetCTR_ID int \n\t\t\tfrom Q_xClaim \n\t\t\twhere id = {[xClaim].id}\n\t\t\t\t\t--and retourAmount =0\n\t\t\t\t\tand\tstatus='New'\n\t\t\t\t\tand thdt=2 -- alleen op verkoop (vooralsnog)\n--\tend\nIF @retourAmount > 0 --oude methode met retour via ctrs\n\tBEGIN\n\t\t--EXEC sp_api_modal_action N'Afhandelen',@text=N'Retour colli! Je kunt deze claim hier [action]'\n\n\t\tDECLARE @claimAmount int\n\t\tDECLARE @claimPrice float\n\t\t--DECLARE @retourAmount int\n\t\tDECLARE @ctrAmount float\n\t\tDECLARE @ctrPrice float\n\n\t\tSET @ctrPrice = {[xclaim].ctr_price}\n\n\n\t\tSELECT @ctr_id = ctr_id\n\t\t \t\t,@claimReason = claimReason\n\t\t \t\t,@claimAmount = ISNULL(claimAmount,0)\n\t\t \t\t,@claimPrice = claimPrice\n\t\t \t\t,@retourAmount = ISNULL(retourAmount,0)\n\t\t \t\t--,@Description = Description\n\t\t \t\t,@client_id = client_id\n\t\t \t\t,@cth_id = cth_id\n\t\t \t\t,@counter_ctr_id = counter_ctr_id\n\t\t \t\t,@new_ctr_id = new_ctr_id FROM xClaim WHERE id = @id\n\n\t\t-- RH210212 ALS HET EEN INKOOP CTH IS DAN HIER AFBREKEN MET EEN MELDING??... want dit is verkoop claim afhandeling..\n\t\tIF @claimAmount > 0 AND (@claimPrice = @ctrPrice OR @claimPrice IS NULL)\n\t\t\tBEGIN\n\t\t\t\tEXEC sp_api_modal_clear N'Prijs is nul icm korting aantal!'\n\t\t\t\tRETURN\n\t\t\tEND\n\n\t\t \n\t\tIF @new_ctr_id IS NOT NULL OR @counter_ctr_id IS NOT NULL\n\t\t\tBEGIN\n\t\t\t\tEXEC sp_api_modal_clear N'Claim is reeds afgehandeld' \n\t\t\t\tRETURN\n\t\t\tEND\n\n\t\tIF (SELECT count(*) FROM xClaim WHERE @ctr_id = ctr_id) > 1 --GB220208 DONE, afsplitsen of iets dergelijks...\n\t\t\tBEGIN\n\t\t\t\tUPDATE new SET cth_id = TransactionHeader_ID ,ctr_id = old.new_ctr_id\n\t\t\t\tFROM xClaim new\n\t\t\t\tJOIN xClaim old ON old.ctr_id = new.ctr_id AND old.status != 'New' AND new.status = 'New'\n\t\t\t\tJOIN xTransactionDetail ctr ON ctr.id = old.new_ctr_id\n\t\t\t\tWHERE new.id = @id\n\t\t\t\tEXEC sp_api_toast N'Claim naar eerdere claim verplaatst'\n\t\t\t\tEXEC sp_api_modal_clear\n\t\t\t\t--EXEC sp_api_modal_restart\n\t\t\t\t--EXEC sp_api_modal_clear N'Er zitten meerdere claims op de verkoopregel, vraag Tracy om hulp!'\n\t\t\t\tRETURN\n\t\t\tEND\n\n\t\t--SET @ctr_id = {[xclaim].ctr_id}\n\t\tSET @ctrAmount = {[xclaim].ctr_amount}\n\t\tSET @Description = {[xclaim].Description}\n\t\t/*SET @claimReason = {[xclaim].claimReason}*/\n\t\tSET @class = N'h5 text-muted'\n\t\tSET @text = CONCAT(N'Claim afhandelen - ',@Description)\n\t\tEXEC sp_api_modal_text @text,N'h3 text-muted'\n\n\t\tSET @text = CONCAT(N'Claim reden: ',@claimReason)\n\t\tEXEC sp_api_modal_text @text,@class\n\n\t\tSET @text = CONCAT(N'Korting aantal: ',@claimAmount)\n\t\tEXEC sp_api_modal_text @text,@class\n\n\t\tSET @text = CONCAT(N'Retour aantal: ',@retourAmount)\n\t\tEXEC sp_api_modal_text @text,@class\n\n\t\tSELECT id,[Leverancier ] = Leverancier,[LinkAantal ]=LinkAantal,Retour = 0,Korting = 0  INTO #ivlink FROM Q_IVLINK WHERE ITD = @ctr_id ORDER BY id\n\t\tUPDATE #ivlink SET Retour = @retourAmount,Korting = @claimAmount WHERE id = (SELECT min(id) FROM #ivlink)\n\t\tEXEC sp_api_modal_table_update @tmptable='#ivlink',@focusx=3\n\n\t\tDECLARE @claimAmountTodo int = @claimAmount\n\t\tDECLARE @retourAmountTodo int = @retourAmount\n\n\t\tDECLARE @isOk BIT = 1\n\t\tDECLARE @cursor CURSOR,@idval int,@LinkAantal int,@Retour int,@Korting int\n\t\tSET @cursor = CURSOR LOCAL FAST_FORWARD FOR SELECT id,[LinkAantal ],Retour,Korting FROM #ivlink\n\t\tOPEN @cursor;\n\t\tFETCH NEXT FROM @cursor INTO @idval,@LinkAantal,@Retour,@Korting\n\t\tWHILE @@FETCH_STATUS = 0\n\t\t\tBEGIN\n\t\t\t\tIF((@Retour + @Korting) > @LinkAantal) OR @Retour < 0 OR @Korting < 0  SET @isOk = 0\n\t\t\t\tSET @claimAmountTodo-=@Korting\n\t\t\t\tSET @retourAmountTodo-=@Retour\n\t\t\t\tFETCH NEXT FROM @cursor INTO @idval,@LinkAantal,@Retour,@Korting\n\t\t\tEND\n\t\tCLOSE @cursor;\n\t\tDEALLOCATE @cursor;\n\t\tSET @button_text = 'Verwerken'\n\t\tEXEC sp_api_modal_button @name='@button',@value = @button_text, @valueout = @button OUT,@class='btn-primary',@key='Enter'\n\t\tSET @class = N'h5 text-danger'\n\t\tIF @isOk = 0 EXEC sp_api_modal_text N'De verdeling is nog incorrect!',@class\n\t\tIF @claimAmountTodo <> 0 EXEC sp_api_modal_text N'De korting verdeling is incorrect!',@class\n\t\tIF @retourAmountTodo <> 0 EXEC sp_api_modal_text N'De retour verdeling is incorrect!',@class\n\n\t\tIF @button = @button_text AND @isOk = 1 AND @claimAmountTodo = 0 AND @retourAmountTodo = 0\n\t\t\tBEGIN\n\t\t\t\t--EXEC sp_api_modal_table @tmptable='#ivlink'\n\n\t\t\t\tSET @claim_cth_id = (SELECT min(id) FROM xTransactionHeader WHERE CounterParty_ID = @client_id AND status IN('openClaim','ReadyForInvoice') AND specialType = 1001)\n\t\t\t\t--SELECT @xIVLINKs = STRING_AGG(CAST(id as nvarchar(max)),',') FROM xIVLINK WHERE ITD = @ctr_id\n\n\t\t\t\tIF @claim_cth_id IS NULL\n\t\t\t\t\tBEGIN\n\t\t\t\t\t\t--DECLARE @specialType int = @main_db.dbo.CthSpecialType('claim')\n\t\t\t\t\t\tEXEC @claim_cth_id = @main_db.dbo.CreateCTH2 @Client_ID = @client_id,@Status = 'ReadyForInvoice',@specialType = 'claim'\n\t\t\t\t\tEND\n\n\t\t\t\tIF @counter_ctr_id IS NULL\n\t\t\t\t\tBEGIN\n\t\t\t\t\t\tSET @set = CONCAT(N'stockMut=1,Amount = -Amount,TransactionHeader_ID = ',@claim_cth_id)\n\t\t\t\t\t\tEXEC @counter_ctr_id = sp_clone_record N'xTransactionDetail',@ctr_id,@set\n\t\t\t\t\t\tUPDATE xClaim SET counter_ctr_id = @counter_ctr_id WHERE id = @id\n\t\t\t\t\tEND\n\t\t\t\tIF @claimAmount > 0\n\t\t\t\t\tBEGIN\n\t\t\t\t\t\tSET @set = CONCAT(N'stockMut=1,Amount = ',@claimAmount,',Price=',@claimPrice,IIF(@claimPrice=0,',Pricetype=''ZERO''',''),',TransactionHeader_ID = ',@claim_cth_id)\n\t\t\t\t\t\tEXEC @new_ctr_id = sp_clone_record N'xTransactionDetail',@ctr_id,@set\n\t\t\t\t\t\tUPDATE xClaim SET new_ctr_id = @new_ctr_id WHERE id = @id\n\t\t\t\t\tEND\n\t\t\t\tDECLARE @NietRetour int = (@ctrAmount - @claimAmount) - @retourAmount\n\t\t\t\tIF @NietRetour > 0\n\t\t\t\t\tBEGIN\n\t\t\t\t\t\tSET @set = CONCAT(N'stockMut=1,Amount = ',@NietRetour,',Price=',@ctrPrice,IIF(@ctrPrice=0,',Pricetype=''ZERO''',''),',TransactionHeader_ID = ',@claim_cth_id)\n\t\t\t\t\t\tEXEC @new_retour_ctr_id = sp_clone_record N'xTransactionDetail',@ctr_id,@set\n\t\t\t\t\t\tUPDATE xClaim SET new_ctr_id = @new_retour_ctr_id WHERE id = @id\n\t\t\t\t\tEND\n\t\t\t\t\n\n\t\t\t\tSET @cursor = CURSOR LOCAL FAST_FORWARD FOR SELECT id,[LinkAantal ],Retour,Korting FROM #ivlink\n\t\t\t\tOPEN @cursor;\n\t\t\t\tFETCH NEXT FROM @cursor INTO @xIVLINK_id,@LinkAantal,@Retour,@Korting\n\t\t\t\tWHILE @@FETCH_STATUS = 0\n\t\t\t\t\tBEGIN\n\t\t\t\t\t\tIF @LinkAantal > 0\n\t\t\t\t\t\t\tBEGIN\n\t\t\t\t\t\t\t\tSET @set = CONCAT(N'LinkAantal = -',@LinkAantal,',SK_ID = NULL, ITD = ',@counter_ctr_id)\n\t\t\t\t\t\t\t\tEXEC sp_clone_record N'xIVLINK',@xIVLINK_id,@set\n\t\t\t\t\t\t\tEND\n\t\t\t\t\t\tIF @Korting > 0\n\t\t\t\t\t\t\tBEGIN\n\t\t\t\t\t\t\t\tSET @set = CONCAT(N'LinkAantal = ',@Korting,',SK_ID = NULL, ITD = ',@new_ctr_id)\n\t\t\t\t\t\t\t\tEXEC sp_clone_record N'xIVLINK',@xIVLINK_id,@set\n\t\t\t\t\t\t\tEND\n\t\t\t\t\t\tIF @Retour < (@LinkAantal - @Korting)\n\t\t\t\t\t\t\tBEGIN\n\t\t\t\t\t\t\t\tSET @NietRetour = (@LinkAantal - @Korting) - @Retour\n\t\t\t\t\t\t\t\tSET @set = CONCAT(N'LinkAantal = ',@NietRetour,',SK_ID = NULL, ITD = ',@new_retour_ctr_id)\n\t\t\t\t\t\t\t\tEXEC sp_clone_record N'xIVLINK',@xIVLINK_id,@set\n\t\t\t\t\t\t\tEND\n\t\t\t\t\t\tFETCH NEXT FROM @cursor INTO @xIVLINK_id,@LinkAantal,@Retour,@Korting\n\t\t\t\t\tEND\n\t\t\t\tCLOSE @cursor;\n\t\t\t\tDEALLOCATE @cursor;\n\t\t\t\tEXEC sp_api_modal_post N'xclaim','status','Processed',@id\n\t\t\t\tEXEC sp_api_modal_save N'xclaim',@id\n\t\t\t\tEXEC sp_api_modal_clear\n\t\t\t\t\n\t\t\tEND\n\n\t\tRETURN\n\tEND\nELSE\n\tBEGIN\n\t\t--context = ctr2?\n\t\tif @claimID is null and @CTR2_ID is null\n\t\t\t\t\tand @ModelCTR_ID is null \n\t\t\t\t\tand {[ctr2].id} is not NULL\n\t\t\t\t\tand {[xClaim].id} is NULL -- je mag per se niet op een xclaim staan als je ctr2 wilt boeken!\n\t\t\tbegin\n\t\t\t\tselect @CTR2_ID = id\n\t\t\t\t\t,@ModelCTR_ID =id\t \n\t\t\t\t\t,@Amount = Amount\n\t\t\t\t\t,@Price =Price \n\t\t\t\tfrom xtransactiondetail where id={[ctr2].id}\n\t\t\t\t\n\t\t\t\tif @ModelCTR_ID is not NULL\n\t\t\t\t\tbegin\n\t\t\t\t\t\t-- vanaf CTR2 direct vragen om credit aantal en prijs\t\t\n\t\t\t\t\t\tEXEC sp_api_modal_Text N'Credit aantal'\n\t\t\t\t\t\t\n\t\t\t\t\t\tEXEC sp_api_modal_input_decimal @name='Aantal',@value= @Amount OUT,@precision=18,@scale=0\n\t\t\t\t\t\tEXEC sp_api_modal_Text N'Credit prijs'\n\t\t\t\t\t\tset @Price=convert(float,@Price)\n\t\t\t\t\t\tEXEC sp_api_modal_input_decimal @name='Prijs',@value= @Price OUT ,@precision=18,@scale=2\n\t\t\t\t\tend\t\t\n\n\t\t\tend\n\n\t\tif @ModelCTR_ID is null\n\t\t\tbegin\n\t\t\t\texec sp_api_modal_alert N'xClaim is al afgehandeld.'\n\t\t\tend\n\t\t\n\t\t--oke verder...\n\n\t\tif @ModelCTR_ID >0 -- geldige claim details\n\t\t\t\tbegin\t\t\t\t\n\t\t\t\t\t--set @Amount=convert(int,@Amount)\n\t\t\t\t\tselect @sTOCKid=stock_id from xtransactiondetail where id=@ModelCTR_ID\n\t\t\t\t\t--controleer of er nog gecrediteerd kan worden op de order\n\t\t\t\t\tselect @thdt=(select tdt from xtransactionheader where id=(select transactionheader_id from xtransactiondetail where id=@ModelCTR_ID))\n\t\t\t\t\tif @thdt is null\n\t\t\t\t\t\tbegin\n\t\t\t\t\t\t\t--npc\n\t\t\t\t\t\t\texec sp_api_modal_alert N'Ordertype kan niet worden bepaald. Actuie wordt afgebroken'\n\t\t\t\t\t\t\texec sp_api_modal_clear\n\t\t\t\t\t\t\treturn\n\t\t\t\t\t\tend\n\t\t\t\t\t--oke verder..\n\t\t\t\t\tif @thdt=1 -- inkoop credit (doen we nog niet)\n\t\t\t\t\t\tbegin\t\n\t\t\t\t\t\t\t--select @toCTR=select itd\n\t\t\t\t\t\t\texec sp_api_modal_alert N'Inkoop credit kan (nog) niet worden verwerkt..'\n\t\t\t\t\t\t\texec sp_api_modal_clear\n\t\t\t\t\t\t\treturn\n\n\t\t\t\t\t\tend\t\n\t\t\t\t\tif @thdt=2 -- verkoop\n\t\t\t\t\t\tbegin\t\n\t\t\t\t\t\t\tselect @toCTR=itd from ctr_linked_lot  --vtd is de partijregel; itd is de hieraan gelinkte verkoopregel\n\t\t\t\t\t\t\t\twhere itd=@ModelCTR_ID -- kijk aan welke partijen de ctr gelinkt is\n\t\t\t\t\t\t\t\t\tand linkaantal >= @Amount\n\t\t\t\t\t\t\t\t\tand cth1_status like N'openPur%'\n\n\t\t\t\t\t\t\t---------------------------------------------------------------------------------------------------------------------------------------------------\n\t\t\t\t\t\t\texec sp_api_modal_text N'Er wordt gefilterd op dit artikelnummer: (u kunt deze leeg maken en ENTER geven om op andere artikelen te kunnen boeken)'\n\t\t\t\t\t\t\tEXEC sp_api_modal_input @name='Gefilterd Artikel',@max=5, @value= @StockID OUT\n\t\t\t\t\t\t\tif @StockID='' set @StockID = NULL\n\t\t\t\t\t\t\t----------------------------------------------------------------------------------------------------------------------------------------------------\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif @toCTR >0 -- de partij is nog open, je kunt de verkoop credit boeken \n\t\t\t\t\t\t\t\tbegin\n\t\t\t\t\t\t\t\t\texec sp_api_modal_text N'De claim kosten kunnen op de originele verkoopregel worden geboekt'\n\t\t\t\t\t\t\t\t\tSELECT id=Id,name=concat(iif(id=@ModelCTR_ID,'*ORG*',''),' order: ',transactionheader_id, ' datum: ' ,TRANSACTIONDATE,' kostenpartij ' ,ll.lotnumber,' art: ',detail,' ',size) \n\t\t\t\t\t\t\t\t\t\tINTO #mt1\n\t\t\t\t\t\t\t\t\t\tFROM Q_xtransactiondetail ctr2 join ctr_linked_lot ll on ll.itd=ctr2.id\n\t\t\t\t\t\t\t\t\t\tWHERE (@sTOCKid is NULL or ctr2.stock_id = @sTOCKid)\n\t\t\t\t\t\t\t\t\tEXEC sp_api_modal_select_table @value = @selectedTargetCTR OUT ,@INITIAL_ID=@toCTR, @tmptable=N'#mt1'\n\t\t\t\t\t\t\t\tend\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif @toCTR is NULL -- de gelinkte partij is niet meer open, je moet een alternatieve regel kiezen\n\t\t\t\t\t\t\t\tbegin\n\t\t\t\t\t\t\t\t\texec sp_api_modal_text N'De claim kosten kunnen niet meer op de originele verkoopregel worden geboekt, want de gelinkte partij is al gesloten!'\n\t\t\t\t\t\t\t\t\tSELECT id=Id,name=concat('order: ',transactionheader_id, ' datum: ' ,TRANSACTIONDATE,' kostenpartij ',ll.lotnumber,' art: ',detail,' ',size )\n\t\t\t\t\t\t\t\t\t\tINTO #mt2 \n\t\t\t\t\t\t\t\t\t\tFROM Q_xtransactiondetail ctr2 join ctr_linked_lot ll on ll.itd=ctr2.id\n\t\t\t\t\t\t\t\t\t\tWHERE (@sTOCKid is NULL or ctr2.stock_id = @sTOCKid)\n\t\t\t\t\t\t\t\t\tEXEC sp_api_modal_select_table @value = @selectedTargetCTR OUT ,@INITIAL_ID=@toCTR, @tmptable=N'#mt2'\n\t\t\t\t\t\t\t\tend\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif @selectedTargetCTR is null\n\t\t\t\t\t\t\t\tbegin\n\t\t\t\t\t\t\t\t\texec sp_api_modal_text N'U moet een regel aanwijzen waar de kosten worden geboekt'\n\t\t\t\t\t\t\t\tend\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tEXEC sp_api_modal_button @name='@button',@value = 'F5_Verwerken', @valueout = @button OUT,@class='btn-danger',@key='F5'\n\t\t\t\t\t\t\tif @Button='F5_Verwerken' and @selectedTargetCTR >0\n\t\t\t\t\t\t\t\tbegin\n\t\t\t\t\t\t\t\t\texecute @main_db.dbo.create_costreg_for_finmut  \n\t\t\t\t\t\t\t\t\t\t\t\t@ModelCTR_ID =@ModelCTR_ID\n\t\t\t\t\t\t\t\t\t\t\t\t, @Amount =@Amount\n\t\t\t\t\t\t\t\t\t\t\t\t, @Price =@Price \n\t\t\t\t\t\t\t\t\t\t\t\t,@TargetCTR_ID=@selectedTargetCTR --registreer de kosten op de targetCTR\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t--als het vanaf een claim komt:\n\t\t\t\t\t\t\t\t\tif @ClaimID is not NULL\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\tbegin\n\t\t\t\t\t\t\t\t\t\t\tupdate xclaim set status =N'finCostRegistered' where id=@ClaimID and status='New' --geef aan dat financiele kosten zijn geregistreerd\n\t\t\t\t\t\t\t\t\t\tend\t\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t--maak de credit factuur voor de klant\n\t\t\t\t\t\t\t\t\tdeclare @idstring nvarchar(500)=(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tSELECT STRING_AGG( ID, ',')  \n\t\t\t\t\t\t\t\t\t\t\t\t\t       From xcostregistration where deb_cred_4_ctr_id =@ModelCTR_ID and invrow_id is null\n\t\t\t\t\t\t\t\t\t\t\t\t\t  )     \n\t\t\t\t\t\t\t\t\texecute create_credit_invoice_CTH2_for_xcostregistration @IDS=@idstring\n\t\t\t\t\t\t\t\t\t--maak de credit factuur voor de klant -eind-\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\texec sp_api_modal_clear\n\t\t\t\t\t\t\t\tend\n\t\t\t\t\t\tend\t\n\t\t\t\tend\n\t\tEND\t",
                    "action_id": 568,
                    "action_name": "financi\u00eble_claim_afhandelen",
                    "source_table": "api_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_modal_route",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@name n"
                },
                {
                    "name": "@pathname",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@pathname n"
                },
                {
                    "name": "@search",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "''",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@search n"
                },
                {
                    "name": "@class",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "N'btn-success'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@class n"
                },
                {
                    "name": "@key",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 510,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@key n"
                },
                {
                    "name": "@translate",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "1",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@translate b"
                },
                {
                    "name": "@group",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 7,
                    "full_declaration_from_def": "@group n"
                },
                {
                    "name": "@cardname",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 8,
                    "full_declaration_from_def": "@cardname n"
                },
                {
                    "name": "@language_context",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 9,
                    "full_declaration_from_def": "@language_context n"
                },
                {
                    "name": "@card_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 10,
                    "full_declaration_from_def": "@card_id i"
                }
            ],
            "embedded_example": "EXEC sp_api_modal_route @cardname = N'country',@key='F6' --\r\n\t--,@class = N'btn-success'",
            "embedded_description": null,
            "co_occurrence_stats": {
                "dbo.sp_api_toast": 4,
                "dbo.sp_api_modal_text": 7,
                "dbo.sp_api_modal_clear": 3,
                "dbo.sp_api_modal_button": 7,
                "dbo.sp_api_modal_select": 1,
                "dbo.sp_api_modal_table": 1,
                "dbo.sp_api_modal_modal": 2,
                "dbo.sp_api_add_sql_task": 1,
                "dbo.ABCDATE": 1,
                "dbo.sp_api_modal_input_decimal": 2,
                "dbo.sp_api_modal_save": 1,
                "dbo.sp_api_modal_input": 1,
                "dbo.sp_api_modal_date": 1,
                "dbo.sp_api_modal_value": 1,
                "dbo.sp_api_modal_post": 1,
                "dbo.sp_api_modal_choose": 1,
                "dbo.sp_api_modal_menu_user": 1,
                "dbo.sp_api_modal_action": 1,
                "dbo.sp_api_modal_html": 1,
                "dbo.sp_sys_admin_main_menu": 1,
                "dbo.hasRole": 3
            },
            "real_usage_examples": [
                {
                    "sql_source": "DECLARE @clone_id INT, @sure nvarchar(255), @text nvarchar(255)\r\nEXEC sp_api_modal_get N'my_last_clone_id',@text OUT\r\nEXEC sp_api_modal_text @text,'h1'\r\nEXEC sp_api_modal_text @basetable,'h1'\r\nEXEC sp_api_modal_button @name='Sure',@value = 'Clone? (Esc=Nee)', @valueout = @sure OUT,@class='btn-danger',@key='Enter'\r\nIF @sure is not null\r\n\tBEGIN\r\n\t\tEXEC sp_api_modal_clear\r\n\t\t--EXEC @clone_id = sp_clone_record @basetable,@ids\r\n\t\tEXEC @clone_id = sp_clone_record @basetable,@ids,N'size=''EDIT'', stock=0'\r\n\t\tSET @path = @path+'/'+dbo.nv(@clone_id)\r\n\t\tEXEC sp_api_toast @text = N'Record cloned'\r\n\t\tEXEC sp_api_modal_route @name = N'Ga met Enter naar de kopie en vul de nieuwe maat in',@pathname=@path,@search='?focus=7377' ,@class = N'btn-danger' ,@key='Enter'\r\n\tEND\r\n",
                    "action_id": 6,
                    "action_name": "kopieer-artikel",
                    "source_table": "api_card_actions"
                },
                {
                    "sql_source": "DECLARE @set nvarchar(max) = N'name=name+''_clone''' -- CUSTOMIZE THIS!!!\n\nEXEC sp_api_modal_alert N'Clone',N'Create a clone of this record?'\nDECLARE @clone_id nvarchar(32)\nEXEC @clone_id = sp_clone_record @basetable,@ids,@set=@set\nEXEC sp_api_modal_clear\nSET @path = @path+'/'+@clone_id\nEXEC sp_api_modal_text N'Record cloned',N'h4 text-muted'\nEXEC sp_api_modal_route @name = N'Go to clone',@pathname=@path,@key='Enter'\n",
                    "action_id": 155,
                    "action_name": "clone",
                    "source_table": "api_card_actions"
                },
                {
                    "sql_source": "--EXEC sp_api_modal_text N'EVEN AFLBIJVEN AUB! BEZIG MET TESTEN',N'h1 mb-3'\n\nDECLARE @company_id nvarchar(32)\n\t,@button nvarchar(128)\n\t,@ctr_id_without_cost_settings INT\n\t,@button_name1 nvarchar(128) = N'Genereer'\n\t,@button_name2 nvarchar(128)\n--\t,@button2 nvarchar(128)\n\t,@reducer nvarchar(max) = N'id IN(SELECT counterparty_id FROM xTransactionHeader WHERE TDT = 2 and status in (''ReadyForInvoice'',''openClaim''))'\n\n--EXEC sp_api_modal_button @name='button',@value='hidden',@valueout = @button OUT\n\n\tEXEC sp_api_modal_text N'Kies een specifieke klant:',N'h4 mt-4 text-muted'\n\tEXEC sp_api_modal_select @card_name = N'klant',@value = @company_id OUT,@reducer = @reducer ,@focus=1\n\n\tIF @company_id IS NOT NULL\n\t\tBEGIN\n\t\t\t(SELECT @button_name1+= N' '+[xCompany].[Code] FROM [xCompany] WHERE [id] = @company_id)\n\t\t\tEXEC sp_api_modal_button @name='button',@value=@button_name1,@valueout = @button OUT,@key='Enter'\n\t\t\tIF @button IS NULL RETURN\n\t\t\tBEGIN TRY\n\t\t\t\tEXEC @ctr_id_without_cost_settings = @main_db.dbo.sp_create_invoice_rows @THDT = 2,@Counterparty_ID = @company_id\n\t\t\tEND TRY BEGIN CATCH\n\t\t\tEND CATCH\n\t\t\tIF @ctr_id_without_cost_settings > 0\n\t\t\t\tBEGIN\n\t\t\t\t\tDECLARE @Counterparty nvarchar(400),@Counterparty_ID nvarchar(32)\n\t\t\t\t\tSELECT @Counterparty = d.Counterparty,@Counterparty_ID=Counterparty_ID FROM Q_xTransactionDetail d WHERE id = @ctr_id_without_cost_settings\n\t\t\t\t\tSET @text =CONCAT(N'Missing cost settings for ',@Counterparty)\n\t\t\t\t\tEXEC sp_api_modal_text @text,N'h4 mb-3'\n\t\t\t\t\tDECLARE @pathname nvarchar(2000) = '/klant/'+@Counterparty_ID+'/company_cost_settings'\n\t\t\t\t\tEXEC sp_api_modal_route @name=N'Edit cost settings',@pathname=@pathname,@key='Enter'\n\t\t\t\t\tRETURN\n\t\t\t\t\n\t\t\t\tEND\n\t\t\tEXEC sp_api_modal_clear\n\t\tEND\n",
                    "action_id": 560,
                    "action_name": "Genereer factuur (select)",
                    "source_table": "api_card_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_modal_run",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@action_name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@action_name n"
                },
                {
                    "name": "@values",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@values n"
                },
                {
                    "name": "@back",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "1",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@back b"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_modal_save",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@card",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@card n"
                },
                {
                    "name": "@id",
                    "type_from_sys": "int",
                    "type_from_def": "I",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@id I"
                },
                {
                    "name": "@keep_storage_values",
                    "type_from_sys": "bit",
                    "type_from_def": "B",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@keep_storage_values B"
                },
                {
                    "name": "@parent_parent",
                    "type_from_sys": "bit",
                    "type_from_def": "B",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@parent_parent B"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {
                "dbo.hasRole": 1,
                "dbo.sp_api_modal_post": 8,
                "dbo.sp_api_modal_input": 5,
                "dbo.sp_api_modal_table_update": 4,
                "dbo.sp_api_modal_text": 6,
                "dbo.sp_api_modal_button": 7,
                "dbo.sp_api_modal_table": 5,
                "dbo.sp_api_modal_modal": 4,
                "dbo.sp_api_modal_select": 1,
                "dbo.sp_api_modal_date": 2,
                "dbo.sp_api_goto": 1,
                "dbo.sp_api_toast": 1,
                "dbo.sp_api_modal_route": 1,
                "dbo.sp_api_modal_clear": 1,
                "dbo.sp_api_modal_value": 1,
                "dbo.sp_api_modal_input_decimal": 1,
                "dbo.sp_api_modal_choose": 1
            },
            "real_usage_examples": [
                {
                    "sql_source": "DECLARE @company_id nvarchar(32),@button nvarchar(128),@new_id nvarchar(32),@goto nvarchar(2000),@search nvarchar(2000)\n,@button1 nvarchar(128) = N'Nieuwe verkoop'\n,@button2 nvarchar(128) = N'Laatste open verkoop'\n\nEXEC sp_api_modal_select @card_name = N'klant',@value = @company_id OUT,@focus = 1\nIF @company_id > 0\nBEGIN\n\tEXEC sp_api_modal_button @name='button',@value=@button1,@valueout = @button OUT,@key='Insert'\n\tIF EXISTS (SELECT * FROM xTransactionHeader WHERE status=N'openSale' AND CounterParty_ID = @company_id)\n\t\tEXEC sp_api_modal_button @name='button',@value=@button2,@valueout = @button OUT,@key='Enter'\n\n\tIF @button = @button1\n\t\tBEGIN\n\t\t\tEXEC sp_api_modal_post N'verkoop',N'CounterParty_ID',@company_id,0\n\t\t\tEXEC @new_id = sp_api_modal_save N'verkoop',0\n\t\t\tIF @new_id > 0\n\t\t\t\tBEGIN\n\t\t\t\t\tSET @goto = N'/verkoop/'+@new_id+'/stock_ctr2'\n\t\t\t\t\tEXEC sp_api_toast N'Nieuwe verkoop gestart',N'alert-primary'\n\t\t\t\t\tSET @search = N'?id='+@new_id\n\t\t\t\t\tEXEC sp_api_goto @goto,@referer_path=N'/verkoop',@referer_search=@search\n\t\t\t\tEND\n\t\t\tELSE\n\t\t\t\tEXEC sp_api_toast N'Error nieuwe verkoop',N'alert-danger'\n\t\t\tEXEC sp_api_modal_clear\n\t\tEND\n\tIF @button = @button2\n\t\tBEGIN\n\t\t\tSET @new_id = (SELECT TOP 1 id FROM xTransactionHeader WHERE status=N'openSale' AND CounterParty_ID = @company_id ORDER BY id DESC)\n\t\t\tSET @goto = N'/verkoop/'+@new_id+'/stock_ctr2'\n\t\t\tSET @search = N'?id='+@new_id\n\t\t\tEXEC sp_api_goto @goto,@referer_path=N'/verkoop',@referer_search=@search\n\t\tEND\nEND\n",
                    "action_id": 86,
                    "action_name": "sys_new_action",
                    "source_table": "api_card_actions"
                },
                {
                    "sql_source": "EXEC sp_api_modal_post @card = N'apicard',@column=N'unparsed_crud_create',@value=N'dbo.hasRole(''admin'') > 0',@id=@id\nEXEC sp_api_modal_post @card = N'apicard',@column=N'unparsed_crud_read',@value=N'dbo.hasRole(''admin'') > 0',@id=@id\nEXEC sp_api_modal_save @card = N'apicard',@id=@id",
                    "action_id": 142,
                    "action_name": "Admin Only",
                    "source_table": "api_card_actions"
                },
                {
                    "sql_source": "--update xlfctr SET ischecked=iif(ischecked=0,1,0) WHERE id=@ID;\n--EXEC sp_api_toast 'LFCTR Check gewijzigd'\nDECLARE @idval int, @docdesc nvarchar(128)\n\n-- CVG 21/10/19 Controleer of de LFCTR reeds al gelinkt is aan een verkoop welke niet meer status \"openSale\" heeft. Indien dit zo is mag ik niet meer ge unchecked worden.\nIF EXISTS (SELECT TOP 100 * FROM xIVLINK IVL WHERE EXISTS (SELECT * FROM Q_xTransactionDetail ctr where \nEXISTS (SELECT * FROM xTransactionHeader cth WHERE cth.[status] != 'openSale' AND id = ctr.transactionheader_id) \nAND ctr.id = IVL.ITD AND IVL.VTD IN (SELECT CTR_ID FROM XLFCTR WHERE ischecked = 1 AND ID IN ({@ids})))) \n\tBEGIN\n\tEXEC sp_api_modal_alert N'LET OP!',N'Regels zijn reeds toegewezen aan een verkoop welke niet meer de status \"openSale\" heeft. U kan de regel niet meer van \"checked\" afhalen.'\n\tEXEC sp_api_modal_clear\n\tRETURN\n\tEND\n\t\nIF {[inkomende_landfreight].To_Location_ID} IN (SELECT ID FROM xLocation WHERE isEntrepot = 1)\n\tBEGIN\n\t\tEXEC sp_api_modal_alert N'De regel wordt gelost op een transito lokatie!',N'Enkel (Richard of Sabine mogen dit uitlossen!)'\n\t\tEXEC sp_api_modal_clear\n\t\tRETURN\n\tEND\n\nDECLARE @cursor_xLFCTR CURSOR\n\nIF EXISTS (SELECT * FROM xlfctr where id IN ({@ids}) AND ischecked = 0)\n\tBEGIN\n\t\tSET @action = 1\n\tEND\nELSE\n\tBEGIN\n\t\tSET @action = 0\n\t\tIF {[inkomende_landfreight].id} is not null\n\t\tBEGIN\n\t\tUPDATE XLANDFREIGHT SET i_selected = 0 where ID = {[inkomende_landfreight].id}\n\t\tEND\n\tEND\n\nIF @action = 0 AND EXISTS (SELECT * FROM xlfctr where id IN ({@ids}) AND ischecked = 1)\n\tBEGIN\n\t\tEXEC sp_api_modal_text N'Deze geselecteerde regels staan al op checked:'\n\t\tSET @cursor_xLFCTR = CURSOR LOCAL FAST_FORWARD FOR SELECT id FROM xlfctr where id IN ({@ids}) AND ischecked = 1\n\t\tOPEN @cursor_xLFCTR;\n\t\tFETCH NEXT FROM @cursor_xLFCTR INTO @idval\n\t\tWHILE @@FETCH_STATUS = 0\n\t\t\tBEGIN\n\t\t\t\tSET @text = (SELECT docDescription FROM xlfctr where id = @idval)\n\t\t\t\tEXEC sp_api_modal_text @text\n\t\t\t\tFETCH NEXT FROM @cursor_xLFCTR INTO @idval\n\t\t\tEND\n\t\tCLOSE @cursor_xLFCTR;\n\t\tDEALLOCATE @cursor_xLFCTR;\n\t\tEXEC sp_api_modal_button @name='@button',@value = 'Doorgaan', @valueout = @button OUT,@class='btn-danger',@key='Enter'\n\t\tIF @button IS NULL RETURN\n\tEND\n\t\n\tSET @cursor_xLFCTR = CURSOR LOCAL FAST_FORWARD FOR SELECT value FROM string_split(@ids,',')\n\tOPEN @cursor_xLFCTR;\n\tFETCH NEXT FROM @cursor_xLFCTR INTO @idval\n\tWHILE @@FETCH_STATUS = 0\n\t\tBEGIN\n\t\t\t--IF (SELECT ischecked FROM xlfctr where id = @idval) = 0\n\t\t\t--BEGIN\n\t\t\t\tUPDATE xlfctr SET ischecked = @action WHERE id = @idval\n\t\t\t\t/*\n\t\t\t\tEXEC sp_api_modal_post N'xlfctr',N'ischecked',@action,@idval\n\t\t\t\tEXEC sp_api_modal_save N'xlfctr',@idval\n\t\t\t\t*/\n/*\t\t\tEND\n\t\t\tELSE\n\t\t\tBEGIN\n\t\t\t\tSET @docdesc = concat('Een geselecteerde regel staat al op checked zie: ',(SELECT docDescription FROM xlfctr where id = @idval))\n\t\t\t\tEXEC sp_api_modal_alert N'Zeker weten?',@docdesc\n\t\t\t\tEXEC sp_api_modal_post N'xlfctr',N'ischecked',0,@idval\n\t\t\t\tEXEC sp_api_modal_save N'xlfctr',@idval\n\t\t\tEND\n*/\n\t\t--UPDATE xlfctr SET ischecked=iif(ischecked=0,1,0) WHERE id=@ID;\n\t\t\t\n\t\tFETCH NEXT FROM @cursor_xLFCTR INTO @idval\n\t\tEND\nCLOSE @cursor_xLFCTR;\nDEALLOCATE @cursor_xLFCTR;\n\nEXEC sp_api_modal_clear\nEXEC sp_api_modal_select_all_clear\n",
                    "action_id": 151,
                    "action_name": "CheckUncheck",
                    "source_table": "api_card_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_modal_scanner",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@name n"
                },
                {
                    "name": "@value",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@value n"
                },
                {
                    "name": "@use_placeholder",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@use_placeholder n"
                },
                {
                    "name": "@class",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@class n"
                },
                {
                    "name": "@scanDelay",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@scanDelay i"
                },
                {
                    "name": "@use_camera",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "1",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@use_camera b"
                },
                {
                    "name": "@scanner_action_prefix",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 512,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 7,
                    "full_declaration_from_def": "@scanner_action_prefix n"
                },
                {
                    "name": "@barcodes",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 8,
                    "full_declaration_from_def": "@barcodes b"
                },
                {
                    "name": "@direct_post",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 9,
                    "full_declaration_from_def": "@direct_post b"
                },
                {
                    "name": "@video_width",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "null",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 10,
                    "full_declaration_from_def": "@video_width i"
                },
                {
                    "name": "@line_height",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "null",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 11,
                    "full_declaration_from_def": "@line_height i"
                },
                {
                    "name": "@line_width",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "null",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 12,
                    "full_declaration_from_def": "@line_width i"
                },
                {
                    "name": "@sample_rate",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "null",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 13,
                    "full_declaration_from_def": "@sample_rate i"
                },
                {
                    "name": "@min",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "null",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 14,
                    "full_declaration_from_def": "@min i"
                },
                {
                    "name": "@max",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "null",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 15,
                    "full_declaration_from_def": "@max i"
                },
                {
                    "name": "@aspect_ratio",
                    "type_from_sys": "float",
                    "type_from_def": "f",
                    "max_length_bytes": 8,
                    "precision": 53,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "null",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 16,
                    "full_declaration_from_def": "@aspect_ratio f"
                },
                {
                    "name": "@regex",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 2048,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "null",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 17,
                    "full_declaration_from_def": "@regex n"
                },
                {
                    "name": "@torch",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "null",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 18,
                    "full_declaration_from_def": "@torch b"
                },
                {
                    "name": "@initial_codes",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 19,
                    "full_declaration_from_def": "@initial_codes n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {
                "dbo.sp_api_modal_input": 1,
                "dbo.sp_api_toast": 1,
                "dbo.sp_api_modal_text": 2,
                "dbo.sp_api_modal_button": 1,
                "dbo.sp_sys_file_upload_base64": 1,
                "dbo.sp_api_email": 1,
                "dbo.sp_api_goto": 1,
                "dbo.sp_api_modal_qr_scanner": 1,
                "dbo.sp_api_modal_choose": 2,
                "dbo.sp_api_modal_select_table": 1
            },
            "real_usage_examples": [
                {
                    "sql_source": "---------------------------------------------------------------\n-- #qr_action_verwerk_outbound_transport scanner action handler \n-- pre declare: @uuid int, @button_choose nvarchar(max)= null ,@origin nvarchar(1024), @sampleqrscanner nvarchar(max)= null\n-- 230510 uitbreiden met altijd foto's kunnen toevoegen aan outbound transport files\n---------------------------------------------------------------\ndeclare @hTML nvarchar(4000) \ndeclare @link_tracy nvarchar(4000)=NULL\ndeclare @gofoto nvarchar(4000)=concat(N'/wms_out_transport/',@uuid)\ndeclare @pal_id int\nexec sp_api_modal_text @uuid --230706 toon transport_id\nEXEC sp_api_modal_choose @list = N'Conform,Not_Conform,Add_Photo,Barcodes,Pallet_Sample',@value = @button_choose OUT,@startkey=3\nif @button_choose is null return\n\n if @button_choose ='Add_Photo'\n\tbegin\n\t\t--230703 dit stukje is er voor gezet om af te dwingen dat er eerst een geldige SAMPLE wordt gemaakt d.m.v. PALLET LABEL SCAN\n\t\t--230706 aangepast, controleert of er minimaal 1 geldige scan is met container, artikel en w_lot overeenkomst\n\t\tif not exists(select 1 from wms_micro_outbound where transport_id=@uuid) \n\t\t\tbegin --deze outbound is geen micro outbound, dus een normale outbound => dwing af dat er eerst een pallet scan wordt gedaan\n\t\t\t\tif not exists(select * from q_wms_out_samples \n\t\t\t\t\t\t\t\twhere xtransport_id=@uuid \n\t\t\t\t\t\t\t\t\tand out_stock_id in (select xstock_id from q_wms_out_requested where xtransport_id=@uuid) -- zelfde artikel !\n\t\t\t\t\t\t\t\t\tand w_lot_id in(select w_lot_id from q_wms_out_requested where xtransport_id=@uuid) --minimaal zelfde container\n\t\t\t\t\t\t\t\t\tand bl_id in(select bl_id from q_wms_out_requested where xtransport_id=@uuid) --minimaal zelfde BL !\n\n\t\t\t\t\t\t\t) --and info='oke') --TMP !!\n\t\t\t\t\tBEGIN --kennelijk (nog) geen correcte pallet gecand..\n\t\t\t\t\t\texec sp_api_toast N'NO VALIDATION YET; SCAN THE PALLET-LABEL FIRST! (SAMPLE)'\n\t\t\t\t\t\treturn\n\t\t\t\t\tEND\n\t\t\tend\n\n\t\tELSE --het is een micro outbound\n\t\t\tBEGIN\n\t\t\t\texec sp_api_toast N'micro outbound'\n\t\t\tEND\t\n\n\t\t-------------------------------------\n\t\t-- add_document_or_foto\n\t\t-- pre declare @api_files_id,@filename,@trans_out_id\n\t\t-------------------------------------\n\t\t/*\n\t\t(context = 'wms_out_transport' AND context_id = {[wms_out_transport].id})\n\t\tor \n\t\t(context = 'wms_out_transport' AND context_id = {[ffa_transport_out].id})\n\t\tor \n\t\t(context = 'wms_out_transport' AND context_id = {[wms_io].out_transport_id})\n\t\t*/\n\t\tdeclare @api_files_id int\n\t\tdeclare @filename nvarchar(200)\n\t\tdeclare @trans_out_id int\n\t\t\n\t\tset @trans_out_id=@uuid\n\t\t--set @trans_out_id = 1 --@uuid\n\t\tif @trans_out_id is null \n\t\t\tbegin\n\t\t\t\texec sp_api_modal_alert N'Er is geen correcte transport out referentie. (neem evt. contact op met uw consultant)'\n\t\t\t\texec sp_api_modal_clear\n\t\t\t\treturn\n\t\t\tend\n\t\tset @filename=concat('foto_',@main_db.dbo.char_left(@user,'@'),'_',@main_db.dbo.DT_FILENAME(GETDATE()))\n\t\t--exec sp_api_toast @filename\n\t\tEXEC @main_db.dbo.sp_api_modal_file @name = N'@filename', @to_file_context = 'wms_out_transport', @to_file_context_id = @trans_out_id,@filename = @filename\n\t\t\t, @category = 'pallet_foto' ,@resize_max = 2048, @resize_quality = 45,@api_files_id = @api_files_id OUT\n\t\tIF @api_files_id > 0 EXEC sp_api_modal_value N'@filename'\n\t\treturn\n\tend\n \n if @button_choose ='Conform'\n\tbegin\n\t\t--230703 dit stukje is er voor gezet om af te dwingen dat er eerst een geldige SAMPLE wordt gemaakt d.m.v. PALLET LABEL SCAN\n\t\t--230706 aangepast, controleert of er minimaal 1 geldige scan is met container, artikel en w_lot overeenkomst\n\t\tif not exists(select 1 from wms_micro_outbound where transport_id=@uuid) \n\t\t\tbegin --deze outbound is geen micro outbound, dus een normale outbound => dwing af dat er eerst een pallt scan wordt gedaan\n\t\t\t\tif not exists(select * from q_wms_out_samples \n\t\t\t\t\t\t\t\twhere xtransport_id=@uuid \n\t\t\t\t\t\t\t\t\tand out_stock_id in (select xstock_id from q_wms_out_requested where xtransport_id=@uuid) -- zelfde artikel !\n\t\t\t\t\t\t\t\t\tand w_lot_id in(select w_lot_id from q_wms_out_requested where xtransport_id=@uuid) --minimaal zelfde container\n\t\t\t\t\t\t\t\t\tand bl_id in(select bl_id from q_wms_out_requested where xtransport_id=@uuid) --minimaal zelfde BL !\n\n\t\t\t\t\t\t\t) --and info='oke') --TMP !!\n\t\t\t\t\tBEGIN --kennelijk (nog) geen correcte pallet gecand..\n\t\t\t\t\t\texec sp_api_toast N'NO VALIDATION YET; SCAN THE PALLET-LABEL FIRST! (SAMPLE)'\n\t\t\t\t\t\treturn\n\t\t\t\t\tEND\n\t\t\tend\n\n\t\tELSE --het is een micro outbound\n\t\t\tBEGIN\n\t\t\t\texec sp_api_toast N'micro outbound'\n\t\t\tEND\t\n\n\n\t\n\t\tupdate wms_io \n\t\t\tset status='CONFORM' \n\t\t\t\t,conform_user=@USER\t\t--230626\n\t\t\t\t,conform_dt=getdate()\t--230626\n\t\twhere out_transport_id=@uuid and in_out='OUT' --230316 dit kunnen meerdere regels zijn (bij multi-item-outbound)\n\t\tupdate xtransport set completed=1 where id=@uuid\n\t\tset @link_tracy=concat(@origin,N'/wms_out_transport?id=',@uuid,' ') --meegegeven parameter\n\t\tset @html=concat(N'De outbound met referentie ',(select transportinfo from xtransport where id=@uuid),' / ',(select top 1 transport_details from dbo.tr_stuff \nwhere transport_id=@uuid),' is conform verwachting verladen naar de klant. '\n\t\t\t\t\t\t,'<p><a href=\"',@link_tracy,'\" target=_blank>click hier</a>'\n\t\t\t\t\t\t)\n\n\t  \t--PROJECT CALL !!\n  \t\t--230428 GEEN OUTBOUND MAIL MEER NAAR RWS =>    EXEC sp_api_email @to = N'outbound@rwsbv.com',@subject = N'outbound conform & completed....',@body = N'tracy is the best',@html = @html\n\n\n\t\t--voeg evt foto toe\t\t\n--\t\tdeclare @gofoto nvarchar(4000)=concat(N'/wms_out_transport/',@uuid)\n\t\texec sp_api_goto @path=@gofoto\n\n\t\texec sp_api_modal_clear\n\t\treturn\n\tend\n\n\n if @button_choose ='Not_Conform'\n\tbegin\n\t\tDECLARE @opmerking nvarchar(max),@button22 nvarchar(128)\n\t\texec sp_api_modal_text N'What is wrong with this outbound loading?'\n\t\tEXEC sp_api_modal_input @name = '@opmerking', @value = @opmerking OUT --,@inline = 1\n\t\tEXEC sp_api_modal_button @name='@button22',@value = 'Save', @valueout = @button22 OUT,@class='btn-danger',@key='Enter'\n\t\tIF @button22 IS NULL RETURN\n\t\t\n\t\t\n\t\tupdate wms_io set status='NOT CONFORM' where out_transport_id=@uuid and in_out='OUT' --out check extra zekerheid, hoewel er maar 1 id is natuurlijk\n\t\tupdate xtransport set completed=0 where id=@uuid\n\t\tset @link_tracy=concat(@origin,N'/wms_out_transport?id=',@uuid,' ') --meegegeven parameter\n\t\tset @html=concat(N'Er zijn verschillen bij de outbound met referentie ',(select transportinfo from xtransport where id=@uuid),' / ',(select top 1 transport_details from dbo.tr_stuff \nwhere transport_id=@uuid),'. '\n\t\t\t\t\t\t,'<p>De opmerking is :',@opmerking,'<p>'\n\t\t\t\t\t\t,'<p><a href=\"',@link_tracy,'\" target=_blank>click hier</a>'\n\t\t\t\t\t\t)\n\n\t  \t--PROJECT CALL !!\n  \t\t--230428 GEEN OUTBOUND MAIL MEER NAAR RWS =>      \t\tEXEC sp_api_email @to = N'outbound@rwsbv.com',@subject = N'outbound NOT COFORM....',@body = N'tracy is the best',@html = @html\n\n\t\texec sp_api_modal_clear\n\t\treturn\n\tend\n\nif @button_choose ='Pallet_Sample'\n\tbegin\n\t\tEXEC sp_api_modal_qr_scanner @name=N'@sampleqrscanner',@value = @sampleqrscanner OUT\n\t\tIF @sampleqrscanner IS NULL RETURN\n\t\texec sp_api_modal_text @sampleqrscanner\n\t\tIF left(@sampleqrscanner,3) = 'ps:'\n\t\t\tBEGIN\n\t\t\t\tset @pal_id=right(@sampleqrscanner,len(@sampleqrscanner)-3) \n\t\t\t\t--230701 registreer sample\n\t\t\t\texec IINE_wms_out_samples   \n\t\t\t\t\t@user=@user\n    \t\t\t\t,@w_pallet_id =@pal_id\n    \t\t\t\t,@xTransport_id =@uuid\n\n\t\t\t\t\n\t\t\t\tif exists(select * from pallet_status \n\t\t\t\t\t\t\twhere --id=@pal_id\tAND -- ff niet lullig doen als het een andere pallet uit dezelfde container is..\n\t\t\t\t\t\t\t\tout_transport_id=@uuid \n\t\t\t\t\t\t\t\t--and artikel is oke\n\t\t\t\t\t\t)\n\t\t\t\t\tEXEC sp_api_modal_text N'GOED',N'h1'\n\t\t\t\tELSE\n\t\t\t\t\tEXEC sp_api_modal_text N'VERKEERDE PALLET!',N'h1'\n\t\t\t\t\n\t\t\tEND\n\t\tELSE\n\t\t\tBEGIN\n\t\t\t\tEXEC sp_api_modal_text N'SCAN A PALLET LABEL!',N'h1'\n\t\t\t\t--EXEC sp_api_modal_text @sampleqrscanner,N'h1'\n\t\t\t\t\n\t\t\tEND\n\tend\n\nif @button_choose ='Barcodes' --230705 verzamelde codes voor de klant in extene textfile\n\tbegin\n\t\tdeclare @barcodes nvarchar(max)\n\t\t--231017 was:\n\t\t--EXEC sp_api_modal_scanner @barcodes = 1, @value = @barcodes OUT\n\n\t\t--231017 nw\n\t\t\t-- @button_choose_2 nvarchar(max)= null, @button_laser_klaar nvarchar(max)= null\n\t\t\n\t\texec sp_api_modal_text N'Select your \"Scan Device\"'\n\t\tEXEC sp_api_modal_choose @list = N'use_camera,use_laser_scanner',@value = @button_choose_2 OUT, @button_class='secondary'\n\t\tif @button_choose_2 is null RETURN\n\t\tif @button_choose_2 = N'use_camera'\n\t\t\tEXEC sp_api_modal_scanner @barcodes = 1, @value = @barcodes OUT, @video_width= 1200\n\t\tif @button_choose_2 = N'use_laser_scanner'\n\t\tbegin\t\n\t\t\tEXEC sp_api_modal_input @name = '@Pallet_serials', @value = @barcodes OUT ,@type = 'textarea', @focus=1 --,@inline = 1\n\t\t\tEXEC sp_api_modal_button @name='@button_laser_klaar',@value = 'Save Pallet Scans', @valueout = @button_laser_klaar OUT,@class='btn-danger',@key='Enter'\n\t\t\tif @button_laser_klaar is null return\n\t\tend\t\t\n\n\n\n\n\t\tIF NULLIF(@barcodes,'') IS NOT NULL\n\t\t\tBEGIN\n\t\t\t\tset @barcodes=concat('Scanned codes at ',getdate(),char(13),@barcodes,'')\n\t\t\t\tDECLARE @name nvarchar(128) = N'outbound_barcodes.txt'\n\t\t\t\t\t,@base64data nvarchar(max) = dbo.base64encode(CONVERT(varbinary(max),CONVERT(varchar(max),@barcodes)))\n\t\t\t\tEXEC sp_sys_file_upload_base64 @base64data = @base64data,@name = @name\n\t\t\t\t\t,@description = N'Scanned barcodes at outbound'\n\t\t\t\t\t,@mimetype = N'text/plain'\n\t\t\t\t\t,@context = N'wms_out_transport'\n\t\t\t\t\t,@context_id = @uuid\n\t\t\t\t\t,@category = N'extern' --6 (maar in wms is dat 3 dus oppassen met id's!!)\n\n\t\t\t\tEXEC sp_api_modal_clear\n\t\t\tEND \n\tend\t",
                    "action_id": 491,
                    "action_name": "#qr_action_verwerk_outbound_transport",
                    "source_table": "api_actions"
                },
                {
                    "sql_source": "---------------------------------------------------------------------\r\n-- scan voor missende code met preload\r\n--\r\n--\r\n--\r\n---------------------------------------------------------------------\r\ndeclare @lines nvarchar(max), @this_id int , @this_line nvarchar(128)\r\nselect id, line into #SEL from wms_micro_outbound_line_barcode\r\nwhile exists(select 1 from #sel)\r\n\tBEGIN\r\n\t\tselect top 1 @this_id =id, @this_line=Line from #sel\r\n\t\t\r\n\t\tif @this_line <> N'DAM2420JP1100019'\r\n\t\t\tSet @Lines =concat(@lines,@this_line, CHAR(13) + CHAR(10))\r\n\t\tdelete from #sel where id=@this_id\r\n\tend\r\n--N'DAM2420JP1100019'\r\n\r\n\r\nEXEC sp_api_modal_text N'Barcode scanner',N'h1'\r\nEXEC sp_api_modal_text N'Zet je scherm van je mobiel vast als je vaak schuin of 90 graden wilt scannen',N'p'\r\nDECLARE @button_choose nvarchar(max),@barcode nvarchar(max)\r\n\t,@video_width int,@line_height int,@line_width int\r\nSET @button_choose = N'Multi code'\r\nEXEC sp_api_modal_choose @list = N'Multi code,Single code',@value = @button_choose OUT\r\nDECLARE @direct_post bit = IIF(N'Single code' = @button_choose,1,0)\r\n\r\nSET @video_width = 1200\r\nSET @line_height = 2\r\nSET @line_width = 50\r\n\r\nEXEC sp_api_modal_text N'Camera resolutie',N'p'\r\nEXEC sp_api_modal_choose @list = N'800,1200,1600,2000,2400',@value = @video_width OUT\r\n\r\nEXEC sp_api_modal_text N'Lijnhoogte scanner',N'p'\r\nEXEC sp_api_modal_choose @list = N'1,2,4,8,16',@value = @line_height OUT\r\n\r\nEXEC sp_api_modal_text N'Lijnbreedte percentage',N'p'\r\nEXEC sp_api_modal_choose @list = N'30,40,50,60,70,80',@value = @line_width OUT\r\n\r\n\t/*\r\nset @initial_codes=N'oke'\r\nEXEC sp_api_modal_scanner @barcodes = 1, @value = @barcode OUT,@direct_post = @direct_post,@video_width = @video_width\r\n\t,@line_height = @line_height,@line_width = @line_width\r\n\t--,@regex=N'^gaan we'\r\n\t,@initial_codes=@initial_codes\r\nIF @barcode > ''\r\n\tBEGIN\r\n\t\tEXEC sp_api_modal_text N'Codes:',N'h3'\r\n\t\tEXEC sp_api_modal_text @barcode,N'code'\r\n\tEND\r\n*/\r\n\r\n---------------------------\r\n-- met pre load\r\n\r\nEXEC sp_api_modal_scanner @barcodes = 1, @value = @barcode OUT,@direct_post = @direct_post,@video_width = @video_width\r\n\t,@line_height = @line_height,@line_width = @line_width\r\n\t,@initial_codes = @lines--'gaan we weer'",
                    "action_id": 589,
                    "action_name": "Barcode Scanner",
                    "source_table": "api_actions"
                },
                {
                    "sql_source": "-----------------------------------------------------------\r\n-- 230127  - 230807\r\n-- mobile_scan; **MENU-ITEM** voer een actie uit op basis van een qr scan\r\n-- pre declare: @button,@barcodescanner\r\n--\r\n-----------------------------------------------------------\r\n\r\n\r\nEXEC sp_api_modal_text N'Scanner',N'h1'\r\n\r\nEXEC sp_api_modal_scanner N'@barcode_scanner',@value = @barcodescanner OUT\r\n ,@barcodes = 1,@direct_post = 0\r\n ,@video_width = 1200\t\r\n ,@line_height = 8\r\n\r\nif @barcodescanner is NULL RETURN\r\n\r\nset @pal_id = (select id from w_pallet where pallet_label=@barcodescanner)\r\nif @pal_id > 0 \r\n\tbegin\r\n\t\tset @container_id=(select w_lot_id from w_pallet where id=@pal_id)\r\n\t\tif @position_code is null set @position_code=(select position_code from w_pallet where id=@pal_id)\r\n\r\n\t\tset @T=concat_ws(' - ', 'labelinfo:', @barcodescanner,@pal_id)\r\n\t\texec sp_api_toast @T\r\n\t\t\r\n\t\tset @T=concat(N'Huidige positie : ', (select position_code from w_pallet where id=@pal_id))\r\n\t\texec sp_api_modal_text @T ,@class='h1'\r\n\t--\t\tEXEC sp_api_modal_input @name='ramp',@max=20, @value=@ramp OUT,@select=1,@Class='w-24 m-1'\r\n\t\t\tEXEC sp_api_modal_input @name='position_code',@max=10, @value= @position_code OUT,@select=1,@Class='w-24 m-1'\r\n\t\t\tEXEC sp_api_modal_button @name='@button',@value = 'Opslaan', @valueout = @button OUT,@class='btn-danger',@key='Enter'\r\n\t\t\tif @button='Opslaan'\r\n\t\t\t\tbegin\r\n\t\t\t\t\texec sp_api_toast N'xxx'\r\n\t--\t\t\t\tupdate w_lot set ramp=@ramp where id= @container_id\r\n\t\t\t\t\r\n\t\t\t\t\t--naar boven gehaald ivm multi-card set @container_id={[p a l l e  t _ m o b i l  e].w_lot_id}\r\n\t\t\t\t\tif @container_id > 0 and @position_code > N''\r\n\t\t\t\t\t\tbegin\r\n\t\t\t\t\t\t\tset @Tx=concat(N'Nieuwe palletlokatie: ',@position_code)\r\n\t\t\t\t\t\t\texec sp_api_toast @Tx\r\n\r\n--schrijf...\r\n\r\n\r\n\t\t\t\t\t\tend\r\n\t\t\t\t\t\t\r\n\t\t\t\t\tif @container_id > 0 and @position_code = N''\t\r\n\t\t\t\t\t\tbegin\r\n\t\t\t\t\t\t\texec sp_api_toast N'Er is geen nieuwe lokatiecode.'\r\n\t\t\t\t\t\tend\t\r\n\r\n\t\t\t\t\texec sp_api_modal_clear\r\n\t\t\t\tend\r\n\t\t\r\n\tend\r\nif isnull(@pal_id,0)=0\r\n\tbegin\r\n\t\texec sp_api_toast N'GEEN GELDIG PALLET LABEL.'\r\n\tend\t\t\r\n",
                    "action_id": 600,
                    "action_name": "NEOVO_PALLET_SCAN",
                    "source_table": "api_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_modal_screenshot",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@query_selector",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "N'.pickmodal>div'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@query_selector n"
                }
            ],
            "embedded_example": "EXEC sp_api_modal_screenshot --@query_selector = N'.pickmodal'",
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_modal_select",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@card_name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@card_name n"
                },
                {
                    "name": "@name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@name n"
                },
                {
                    "name": "@value",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@value n"
                },
                {
                    "name": "@reducer",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "''",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@reducer n"
                },
                {
                    "name": "@class",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 512,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "''",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@class n"
                },
                {
                    "name": "@focus",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@focus b"
                },
                {
                    "name": "@select",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 7,
                    "full_declaration_from_def": "@select b"
                },
                {
                    "name": "@placeholder",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 512,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "N'Choose...'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 8,
                    "full_declaration_from_def": "@placeholder n"
                },
                {
                    "name": "@top",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 64,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "10000",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 9,
                    "full_declaration_from_def": "@top n"
                },
                {
                    "name": "@fieldname",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 10,
                    "full_declaration_from_def": "@fieldname n"
                },
                {
                    "name": "@card_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 11,
                    "full_declaration_from_def": "@card_id i"
                },
                {
                    "name": "@no_isam",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "1",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 12,
                    "full_declaration_from_def": "@no_isam b"
                },
                {
                    "name": "@ajaxDelay",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "500",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 13,
                    "full_declaration_from_def": "@ajaxDelay i"
                },
                {
                    "name": "@modalRoute",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 4000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 14,
                    "full_declaration_from_def": "@modalRoute n"
                },
                {
                    "name": "@modalRouteSql",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 15,
                    "full_declaration_from_def": "@modalRouteSql n"
                },
                {
                    "name": "@initial_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 16,
                    "full_declaration_from_def": "@initial_id i"
                },
                {
                    "name": "@searchvalue",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 17,
                    "full_declaration_from_def": "@searchvalue n"
                },
                {
                    "name": "@use_placeholder",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 18,
                    "full_declaration_from_def": "@use_placeholder n"
                },
                {
                    "name": "@show_id",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 19,
                    "full_declaration_from_def": "@show_id b"
                },
                {
                    "name": "@orderby",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 20,
                    "full_declaration_from_def": "@orderby n"
                },
                {
                    "name": "@max_shown",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "15",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 21,
                    "full_declaration_from_def": "@max_shown i"
                },
                {
                    "name": "@no_client_cache",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 22,
                    "full_declaration_from_def": "@no_client_cache b"
                },
                {
                    "name": "@seed",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 23,
                    "full_declaration_from_def": "@seed n"
                }
            ],
            "embedded_example": "EXEC sp_api_modal_select @card_name = N'klant',@value = @value OUT,@focus = 1 --\r\n\t\r\n\t-- other optional parameters:\r\n\t--,@reducer nvarchar(max)=''\r\n\t--,@class nvarchar(256)='' --'m-1 mb-2'\r\n\t--,@focus bit = 0\r\n\t--,@select bit = 0\r\n\t--,@placeholder nvarchar(256)=N'Choose...'\r\n\t--,@top nvarchar(32) = 10000 -- 10000 results send to client, set @max_shown to reduce the list\r\n\t--,@fieldname nvarchar(128) = NULL\r\n\t--,@card_id int = NULL --GB210130\r\n\t--,@no_isam bit = 1 --GB230509 dit was default 0, nu andersom\r\n\t--,@ajaxDelay int = 500\r\n\t--,@modalRoute nvarchar(2000) = NULL\r\n\t--,@modalRouteSql nvarchar(max) = NULL\r\n\t--,@initial_id int = NULL\r\n\t--,@searchvalue nvarchar(max) = NULL OUT\r\n\t--,@use_placeholder nvarchar(128) = NULL\r\n\t--,@show_id bit = 0\r\n\t--,@max_shown = 15\r\n\t--,@no_client_cache = 0",
            "embedded_description": null,
            "co_occurrence_stats": {
                "dbo.sp_api_modal_table": 23,
                "dbo.sp_api_modal_date_from_to": 6,
                "dbo.sp_api_modal_text": 39,
                "dbo.sp_api_modal_button": 40,
                "dbo.sp_api_modal_input": 16,
                "dbo.sp_api_toast": 13,
                "dbo.sp_api_modal_date": 20,
                "dbo.sp_api_modal_modal": 6,
                "dbo.sp_api_modal_print": 5,
                "dbo.sp_api_goto": 18,
                "dbo.sp_api_modal_clear": 6,
                "dbo.ABCDATE": 9,
                "dbo.sp_api_modal_select_table": 7,
                "dbo.sp_api_report_generate": 1,
                "dbo.sp_api_modal_route": 1,
                "dbo.sp_api_modal_table_update": 2,
                "dbo.sp_api_modal_csv": 5,
                "dbo.sp_api_modal_choose": 4,
                "dbo.sp_api_import_from_master": 1,
                "dbo.sp_api_modal_save": 1,
                "dbo.sp_api_modal_post": 2,
                "dbo.sp_api_modal_select_curly": 1,
                "dbo.sp_api_card_curly_replace": 1,
                "dbo.sp_api_modal_pathname": 1,
                "dbo.sp_api_modal_get_value": 1
            },
            "real_usage_examples": [
                {
                    "sql_source": "/* bla bla {[verkoop].id} */\nDECLARE @cid int,@reducer nvarchar(max),@value nvarchar(128), @button nvarchar(128)\n,@from nvarchar(128) = NULL -- maar dit legt hier weer meer complexiteit neer, wat mij betreft dus allemaal om het even... als het default (=null) naar 'vansdaag' gaat is best, maar als ik ook maak blanco (= N'') kan meegeven dan.. PRIMA, mooi want dan wijzigd er niets voor bestaande boel\n\n,@to nvarchar(128) = N'' -- N'2021-01-12'--? misschien try\nSELECT @cid = id FROM api_card WHERE name = 'klant'\n\nEXEC sp_api_modal_date_from_to @from = @from OUT,@to = @to OUT\nEXEC sp_api_modal_text @from\nEXEC sp_api_modal_text @to\nEXEC sp_api_modal_button @name='Sure',@value = 'Ja', @valueout = @button OUT,@class='btn-danger',@key='Enter'\nRETURN\nEXEC sp_api_modal_select @card_name = N'country',@value = @value OUT,@focus = 1\nIF @value IS NOT NULL\n\tBEGIN\n\t\tSET @reducer = N'Country_ID = ' + @value\n\t\tEXEC sp_api_modal_table @card_id = @cid ,@reducer = @reducer --'' ,@class = 'h-auto' ,@tmptable = '#modaltable' ,@orderby = ''\n\tEND\nRETURN\nDECLARE @json nvarchar(max)\nSET @json = (SELECT * FROM fn_api_get_related_items_json_list(383,NULL))\nEXEC sp_api_modal_text @json,N'json'",
                    "action_id": 53,
                    "action_name": "Show Related List",
                    "source_table": "api_card_actions"
                },
                {
                    "sql_source": "DECLARE @CTHID INT \nDECLARE @mes nvarchar(200), @FustSaldo int, @CoreType nvarchar(10),@FustID int, @xDesc nvarchar(200)\nSELECT @xDesc=x.[Description],@mes= concat('Quick Purchase ' , x.[Description]) ,@Coretype= x.coretype,@FustID=x.Fust_ID from xstock x where x.id=@ID --@main_db.dbo.\n\nDECLARE @text nvarchar(max),@prodcode_id INT,@artcode_id INT\nDECLARE @prijs nvarchar(20),@aantal nvarchar(20) --='100'\nDECLARE @CounterpartyID int\nDECLARE @FlowModel int\nDECLARE @THDT INT\nDECLARE @FRAFOT Nvarchar(3) -- 'FRA' OF 'FOT'\nDECLARE @SrcID int -- let op: slechts 'advies'\nDECLARE @DstID INT\n\n---- TEST: set supplier:\n--set @CounterpartyID =(select top 1 id from xcompany where companyname like '%4%') --4 fruit?\n\n--\tget supplier:\nDECLARE @value nvarchar(max),@SupplierID nvarchar(max)\nEXEC sp_api_modal_text N'Kies de leverancier',N'h3'\nEXEC sp_api_modal_select @card_name=N'leverancier',@value = @SupplierID OUT,@focus=1,@placeholder=N'Kies de leverancier voor de snelle inkoop'\nif @SupplierID is not NULL \n\tset @CounterpartyID=convert(int, @SupplierID)\nelse return --ga niet verder; maak (nog) geen cth1\n\n--bepaal hoe het bedrijf werkt, met of zonder dagprijzensysteem\ndeclare @dayprice bit\nset @dayprice=isnull((select L from @main_db.dbo.[GetCompanySettings]('useDayprice')),0)\nexec sp_api_toast @dayprice\n\n--pak de eerste de beste inkooporder van de geselecteerde leverancier; deze wordt gebruikt als hulp voor prijsbepaling\nset @CTHID=(select top 1 id from xtransactionheader where tdt=1 and counterparty_ID=@CounterpartyID) -- LET OP: DUMMY; dus zeer waarschijnlijk NIET het ID waarop geboekt gaat worden\nSELECT @CounterpartyID = CTH.counterparty_ID,@FlowModel=cth.FlowModel_ID,@THDT=cth.TDT,@FRAFOT=cth.FRAFOT, @srcID=cth.source_ID,@DstID=cth.Destination_ID From q_xTransactionHeader CTH where CTH.ID=@CTHID\n\n\nif isnull(@Prijs,0)=0\n\tbegin\n\t\tset @prijs=(select @main_db.dbo.stockprice(\t@ID --48482 --stock_ID\n\t\t\t\t\t\t\t,@CTHID --3761\t--CTH_ID\n\t\t\t\t\t\t\t,@CounterpartyID --161418\t--Counterparty_ID\n\t\t\t\t\t\t\t,@FlowModel --null\t--Flowmodel_ID\n\t\t\t\t\t\t\t,@THDT --2\t\t--DaTDT\n\t\t\t\t\t\t\t,@SrcID --NULL --SupplierLocation_ID\n\t\t\t\t\t\t\t,@DstID --NULL -- 7945\t--Receiverlocation_ID\n\t\t\t\t\t\t\t,IIF(@FRAFOT='FOT',1,0)\t\t--isFOT\n\t\t\t\t\t\t\t,@dayprice --0-- use dayprice\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\n\tend\nEXEC sp_api_modal_text @text = @mes,@class = 'h3 text-muted'\nEXEC sp_api_modal_text 'Aantal'\nEXEC sp_api_modal_input @name='aantal',@value = @aantal OUT,@focus=1\nIF @coretype in('FOOD')\n\tBEGIN\n\t\tEXEC sp_api_modal_text 'Prijs'\n\t\tEXEC sp_api_modal_input @name='prijs',@value = @prijs OUT\n\tEND\nDECLARE @button nvarchar(128)\nEXEC sp_api_modal_button @name='button',@value = 'Toevoegen',@valueout = @button OUT,@class = 'btn-primary',@key = 'Enter'\nIF @button IS NOT NULL\n\tBEGIN\n\t\tIF @Prijs>N'' SET @Prijs=replace(@Prijs, ',', '.')\n\t\tIF \tTRY_CAST(@aantal as int) >\t 0 \n\n\t\t\tBEGIN\n\t\t\t\t--zoek een open CTH1 of maak een nieuwe ...\n\t\t\t\tset @CTHID=(select top 1 id from xtransactionheader where tdt=1 and counterparty_ID=@CounterpartyID and status='openPurchase')\n\t\t\t\tif @CTHID IS NULL\tEXEC @main_db.dbo.CreateCTH1 @CounterpartyID, @new_identity = @CTHID OUTPUT;\n\n\t\t\t\texec @main_db.dbo.CreateCTR @CTH_ID=@CTHID, @stock_ID=@ID,@Amount=@Aantal,@Price=@Prijs, @User=@User\n\t\t\t\tselect @mes = 'Er zijn '+@Aantal+ ' colli '+ x.[Description]+' toegevoegd aan de order' from xstock x where x.id=@ID\n\t\t\t\texec sp_api_toast @mes\n\t\t\t\tEXEC sp_api_modal_clear\t\t\t\t\t\t\n\t\t\t\tRETURN\n\t\t\tEND\n\t\tELSE\n\t\t\tEXEC sp_api_modal_text 'Aantal of prijs niet geldig!','text-danger'\n\tEND\n\n",
                    "action_id": 56,
                    "action_name": "Snel Inkopen",
                    "source_table": "api_card_actions"
                },
                {
                    "sql_source": "DECLARE @stock_id nvarchar(32),@button nvarchar(128),@valueout nvarchar(128)\n,@reducer nvarchar(max) = '1=1'\nEXEC sp_api_modal_button @name='button', @value=N'Stock of PER',@valueout=@button OUT,@key=N'F1'\nEXEC sp_api_modal_button @name='button', @value=N'Alles',@valueout=@button OUT,@key=N'F2'\nIF @button = N'Stock of PER'\n\tSET @reducer = N'stock <> 0 or (id in (select DISTINCT Stock_id from p_PriceentryRow where activeCount >0 AND (pricehi<>0 OR pricelo<>0)))'\n\nEXEC sp_api_modal_select @card_name = N'xstock_geert_test',@value = @stock_id OUT,@focus = 1,@top=50,@reducer=@reducer\nEXEC sp_api_modal_text @stock_id\nEXEC sp_api_modal_input @name='asdfafd',@value=@valueout OUT\n",
                    "action_id": 59,
                    "action_name": "stock_search",
                    "source_table": "api_card_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_modal_select_all",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": "EXEC sp_api_modal_clear --clear other UI elements before\r\nEXEC sp_api_modal_select_all --",
            "embedded_description": null,
            "co_occurrence_stats": {
                "dbo.sp_api_modal_text": 1,
                "dbo.sp_api_modal_select_all_clear": 1,
                "dbo.sp_api_modal_clear": 1,
                "dbo.sp_api_modal_button": 1
            },
            "real_usage_examples": [
                {
                    "sql_source": "--text, class, translate (bit)\r\nEXEC sp_api_modal_text 'Kies Enter om de vorige prijzen te gebruiken.',@translate=1 --vertaalbaar\r\nDECLARE @button nvarchar(128) --button nodig om DECLARE oude SET nog te hebben.\r\nEXEC sp_api_modal_button @name='button',@value = 'Okay!',@valueout = @button OUT,@class = 'btn-primary',@key = 'Enter' --is initieel leeg\r\nEXEC sp_api_modal_button @name='button2',@value = 'Nah',@valueout = @button OUT,@class = 'btn-primary',@key = 'Escape' --is initieel leeg\r\nIF @button IS NULL EXEC sp_api_modal_select_all --STEP 1 SELECT all\r\n -- na klik\r\nIF @button = 'Nah' OR @button = 'Okay!'\r\n\tBEGIN\r\n\t\tEXEC sp_api_modal_clear -- einde formweergave; handel alleen nog de CURSOR af\r\n\t\tEXEC sp_api_modal_select_all_clear --STEP 2 SELECT clear all en de rest\r\n\tEND\r\nIF @button = 'Okay!'\r\n\tBEGIN\r\n\r\n\t\tDECLARE @cursor_ids CURSOR,@cid INT\r\n\t\t-- onderbreek de actie alos er meer dan 1 leverancier in DECLARE selectie voor komt\r\n\t\tif\t(SELECT count( distinct supplier_ID) FROM p_PriceEntryRow where id in (SELECT value FROM string_split(@ids,','))) > 1\r\n\t\t\tBEGIN\r\n\t\t\t\tEXEC sp_api_modal_alert N'Selecteer niet meer dan 1 leverancier!'\r\n\t\t\t\tEXEC sp_api_modal_clear \r\n\t\t\t\treturn;\r\n\t\t\tEND\r\n\r\n\t\tSET @cursor_ids = CURSOR LOCAL FAST_FORWARD FOR SELECT value FROM string_split(@ids,',')\r\n\t\tOPEN @cursor_ids;\r\n\t\tFETCH NEXT FROM @cursor_ids INTO @cid\r\n\t\tWHILE @@FETCH_STATUS = 0\r\n\t\t\tBEGIN\r\n\t\t\t\tUPDATE p_PriceEntryRow SET PriceHi = OldPriceHi, PriceLo = OldPriceLo WHERE id = @cid\r\n\t\t\t\tFETCH NEXT FROM @cursor_ids INTO @cid\r\n\t\t\tEND\r\n\t\tCLOSE @cursor_ids;\r\n\t\tDEALLOCATE @cursor_ids;\r\n\r\n\tEND\r\n\r\n",
                    "action_id": 83,
                    "action_name": "oude prijzen",
                    "source_table": "api_card_actions"
                },
                {
                    "sql_source": "IF @id = @ids\n\tEXEC sp_api_modal_select_all\nELSE\n\tBEGIN\n\t\tEXEC sp_api_modal_text N'There is already a selection present.','py-1'\n\t\tDECLARE @valueout nvarchar(255)\n\t\tEXEC sp_api_modal_button @name='Option',@value = 'Add', @valueout = @valueout OUT,@class='btn-danger',@key='A'\n\t\tEXEC sp_api_modal_button @name='Option',@value = 'New', @valueout = @valueout OUT,@class='btn-danger',@key='N'\n\t\tEXEC sp_api_modal_button @name='Option',@value = 'Clear', @valueout = @valueout OUT,@class='btn-danger',@key='C'\n\t\tIF @valueout IS NOT NULL\n\t\t\tBEGIN\n\t\t\t\tEXEC sp_api_modal_clear\n\t\t\t\tIF @valueout = 'Clear' EXEC sp_api_modal_select_all_clear\n\t\t\t\tIF @valueout = 'Add' EXEC sp_api_modal_select_all\n\t\t\t\tIF @valueout = 'New'\n\t\t\t\t\tBEGIN\n\t\t\t\t\t\tEXEC sp_api_modal_select_all_clear\n\t\t\t\t\t\tEXEC sp_api_modal_select_all\n\t\t\t\t\tEND\n\t\t\tEND\n\tEND",
                    "action_id": 45,
                    "action_name": "Select All",
                    "source_table": "api_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_modal_select_all_clear",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": "EXEC sp_api_modal_clear --clear other UI elements before\r\nEXEC sp_api_modal_select_all_clear --",
            "embedded_description": null,
            "co_occurrence_stats": {
                "dbo.sp_api_modal_select_all": 1,
                "dbo.sp_api_modal_text": 1,
                "dbo.sp_api_modal_clear": 2,
                "dbo.sp_api_modal_button": 1,
                "dbo.sp_api_modal_reload": 1,
                "dbo.sp_api_toast": 6,
                "dbo.sp_api_add_sql_task": 3,
                "dbo.sp_api_modal_choose": 1
            },
            "real_usage_examples": [
                {
                    "sql_source": "\nIF @id<>@ids --BULK naar Exact\n\tBEGIN\n\t\tDECLARE @cursor CURSOR,@idval INT,@count int = 0,@seconds int = 0\n\t\tSET @cursor = CURSOR LOCAL FAST_FORWARD FOR SELECT value FROM string_split(@ids,',')\n\t\tOPEN @cursor;\n\t\tFETCH NEXT FROM @cursor INTO @idval\n\t\tWHILE @@FETCH_STATUS = 0\n\t\t\tBEGIN\n\t\t\t\tSET @seconds+=6\n\t\t\t\tSET @subject = CONCAT(\n\t\t\t\t\t(SELECT [xCompany].[Code] FROM [xCompany] WHERE [id] = (SELECT [Q_xInvoice].[fromCompany_ID] FROM [Q_xInvoice] WHERE [id] = @idval))\n\t\t\t\t\t,' - ',(SELECT [Q_xInvoice].[dateInvoice] FROM [Q_xInvoice] WHERE [id] = @idval)\n\t\t\t\t\t,' - ',(SELECT [Q_xInvoice].[calcLegal] FROM [Q_xInvoice] WHERE [id] = @idval)\n\t\t\t\t\t)\n\t\t\t\tSET @sql = CONCAT(N'DECLARE @base64 nvarchar(max),@filename nvarchar(4000)\n', --EXEC sp_api_report_download_base64 @context = ''invoice_out'', @context_id = ',@idval,' , @filename =  @filename OUT, @base64 =  @base64 OUT\n'BEGIN TRY\n\tEXEC @main_db.dbo.sp_iu_finance_invoice ',@idval,',@groupbycostcodes = 1\nEND TRY BEGIN CATCH\n\tUPDATE xInvoice SET status = ''Exact Error'',statusHistory = ERROR_MESSAGE() WHERE id = ',@idval,'\nEND CATCH') -- = @filename,@subject = ',dbo.escape_string(@subject),',@base64 = @base64')\n\t\t\t\tSET @subject = N'To Exact: ' + @subject\n\t\t\t\tEXEC sp_api_add_sql_task @sql=@sql,@description=@subject,@seconds = @seconds\n\t\t\t\tUPDATE xInvoice SET status='Sending to Exact' WHERE id = @idval\n\t\t\t\tSET @count+=1\n\t\t\t\tFETCH NEXT FROM @cursor INTO @idval\n\t\t\tEND\n\t\tCLOSE @cursor;\n\t\tDEALLOCATE @cursor;\n\t\texecute sp_api_modal_clear\n\t\tIF @count > 0 EXEC sp_api_toast N'Verzenden is ingepland, F5 voor refresh'\n\t\tEXEC sp_api_modal_select_all_clear\n\t\tRETURN\n\tEND\n\nBEGIN TRY\n\tEXEC @main_db.dbo.sp_iu_finance_invoice @id, @groupbycostcodes = 1\nEND TRY BEGIN CATCH\n\tDECLARE @text nvarchar(max) = ERROR_MESSAGE(),@ERROR_SEVERITY int = ERROR_SEVERITY()\n\tIF @ERROR_SEVERITY = 17\n\t\tBEGIN\n\t\t\tEXEC sp_api_modal_url @text\n\t\t\tRETURN\n\t\tEND\n\tEXEC sp_api_modal_text @text\n\tDECLARE @valueout nvarchar(128)\n\tEXEC sp_api_modal_button @name='Retry',@value = 'Retry', @valueout = @valueout OUT\n\t\t,@class='btn-primary',@key='Enter'\nEND CATCH",
                    "action_id": 28,
                    "action_name": "Naar ExactOnline",
                    "source_table": "api_card_actions"
                },
                {
                    "sql_source": "\nIF @id<>@ids --BULK naar Exact\n\tBEGIN\n\t\tDECLARE @cursor CURSOR,@idval INT,@count int = 0,@seconds int = 0\n\t\tSET @cursor = CURSOR LOCAL FAST_FORWARD FOR SELECT value FROM string_split(@ids,',')\n\t\tOPEN @cursor;\n\t\tFETCH NEXT FROM @cursor INTO @idval\n\t\tWHILE @@FETCH_STATUS = 0\n\t\t\tBEGIN\n\t\t\t\tSET @seconds+=6\n\t\t\t\tSET @subject = CONCAT(\n\t\t\t\t\t(SELECT [xCompany].[Code] FROM [xCompany] WHERE [id] = (SELECT [Q_xInvoice].[toCompany_ID] FROM [Q_xInvoice] WHERE [id] = @idval))\n\t\t\t\t\t,' - ',(SELECT [Q_xInvoice].[dateInvoice] FROM [Q_xInvoice] WHERE [id] = @idval)\n\t\t\t\t\t,' - ',(SELECT [Q_xInvoice].[calcLegal] FROM [Q_xInvoice] WHERE [id] = @idval)\n\t\t\t\t\t)\n\t\t\t\tSET @sql = CONCAT(N'DECLARE @base64 nvarchar(max),@filename nvarchar(4000)\n', --EXEC sp_api_report_download_base64 @context = ''invoice_out'', @context_id = ',@idval,' , @filename =  @filename OUT, @base64 =  @base64 OUT\n'BEGIN TRY\n\tEXEC @main_db.dbo.sp_iu_finance_invoice ',@idval,',@groupbycostcodes = 1\nEND TRY BEGIN CATCH\n\tUPDATE xInvoice SET status = ''Exact Error'',statusHistory = ERROR_MESSAGE() WHERE id = ',@idval,'\nEND CATCH') -- = @filename,@subject = ',dbo.escape_string(@subject),',@base64 = @base64')\n\t\t\t\tSET @subject = N'To Exact: ' + @subject\n\t\t\t\tEXEC sp_api_add_sql_task @sql=@sql,@description=@subject,@seconds = @seconds\n\t\t\t\tUPDATE xInvoice SET status='Sending to Exact' WHERE id = @idval\n\t\t\t\tSET @count+=1\n\t\t\t\tFETCH NEXT FROM @cursor INTO @idval\n\t\t\tEND\n\t\tCLOSE @cursor;\n\t\tDEALLOCATE @cursor;\n\t\texecute sp_api_modal_clear\n\t\tIF @count > 0 EXEC sp_api_toast N'Verzenden is ingepland, F5 voor refresh'\n\t\tEXEC sp_api_modal_select_all_clear\n\t\tRETURN\n\tEND\n\nBEGIN TRY\n\tEXEC @main_db.dbo.sp_iu_finance_invoice @id, @groupbycostcodes = 1\nEND TRY BEGIN CATCH\n\tDECLARE @text nvarchar(max) = ERROR_MESSAGE(),@ERROR_SEVERITY int = ERROR_SEVERITY()\n\tIF @ERROR_SEVERITY = 17\n\t\tBEGIN\n\t\t\tEXEC sp_api_modal_url @text\n\t\t\tRETURN\n\t\tEND\n\tEXEC sp_api_modal_text @text\n\tDECLARE @valueout nvarchar(128)\n\tEXEC sp_api_modal_button @name='Retry',@value = 'Retry', @valueout = @valueout OUT\n\t\t,@class='btn-primary',@key='Enter'\nEND CATCH",
                    "action_id": 29,
                    "action_name": "Naar ExactOnline",
                    "source_table": "api_card_actions"
                },
                {
                    "sql_source": "--text, class, translate (bit)\r\nEXEC sp_api_modal_text 'Kies Enter om de vorige prijzen te gebruiken.',@translate=1 --vertaalbaar\r\nDECLARE @button nvarchar(128) --button nodig om DECLARE oude SET nog te hebben.\r\nEXEC sp_api_modal_button @name='button',@value = 'Okay!',@valueout = @button OUT,@class = 'btn-primary',@key = 'Enter' --is initieel leeg\r\nEXEC sp_api_modal_button @name='button2',@value = 'Nah',@valueout = @button OUT,@class = 'btn-primary',@key = 'Escape' --is initieel leeg\r\nIF @button IS NULL EXEC sp_api_modal_select_all --STEP 1 SELECT all\r\n -- na klik\r\nIF @button = 'Nah' OR @button = 'Okay!'\r\n\tBEGIN\r\n\t\tEXEC sp_api_modal_clear -- einde formweergave; handel alleen nog de CURSOR af\r\n\t\tEXEC sp_api_modal_select_all_clear --STEP 2 SELECT clear all en de rest\r\n\tEND\r\nIF @button = 'Okay!'\r\n\tBEGIN\r\n\r\n\t\tDECLARE @cursor_ids CURSOR,@cid INT\r\n\t\t-- onderbreek de actie alos er meer dan 1 leverancier in DECLARE selectie voor komt\r\n\t\tif\t(SELECT count( distinct supplier_ID) FROM p_PriceEntryRow where id in (SELECT value FROM string_split(@ids,','))) > 1\r\n\t\t\tBEGIN\r\n\t\t\t\tEXEC sp_api_modal_alert N'Selecteer niet meer dan 1 leverancier!'\r\n\t\t\t\tEXEC sp_api_modal_clear \r\n\t\t\t\treturn;\r\n\t\t\tEND\r\n\r\n\t\tSET @cursor_ids = CURSOR LOCAL FAST_FORWARD FOR SELECT value FROM string_split(@ids,',')\r\n\t\tOPEN @cursor_ids;\r\n\t\tFETCH NEXT FROM @cursor_ids INTO @cid\r\n\t\tWHILE @@FETCH_STATUS = 0\r\n\t\t\tBEGIN\r\n\t\t\t\tUPDATE p_PriceEntryRow SET PriceHi = OldPriceHi, PriceLo = OldPriceLo WHERE id = @cid\r\n\t\t\t\tFETCH NEXT FROM @cursor_ids INTO @cid\r\n\t\t\tEND\r\n\t\tCLOSE @cursor_ids;\r\n\t\tDEALLOCATE @cursor_ids;\r\n\r\n\tEND\r\n\r\n",
                    "action_id": 83,
                    "action_name": "oude prijzen",
                    "source_table": "api_card_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_modal_select_curly",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@name n"
                },
                {
                    "name": "@value",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 4000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@value n"
                },
                {
                    "name": "@class",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 512,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "'m-1 mb-2'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@class n"
                },
                {
                    "name": "@focus",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "1",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@focus b"
                },
                {
                    "name": "@select",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@select b"
                },
                {
                    "name": "@placeholder",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 512,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "N'Choose...'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@placeholder n"
                },
                {
                    "name": "@top",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 64,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "10",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 7,
                    "full_declaration_from_def": "@top n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {
                "dbo.sp_api_modal_field_insert": 3,
                "dbo.sp_api_modal_download": 1,
                "dbo.sp_api_modal_text": 2,
                "dbo.sp_api_modal_button": 3,
                "dbo.sp_api_card_curly_replace": 2,
                "dbo.sp_api_modal_table": 1,
                "dbo.sp_api_modal_select": 1
            },
            "real_usage_examples": [
                {
                    "sql_source": "DECLARE @search nvarchar(2000) = N'',@button nvarchar(128)\n--SELECT * INTO #modaltable FROM fn_api_get_curly_params_by_search(@search)\nEXEC sp_api_modal_select_curly @value = @search OUT\nEXEC sp_api_modal_button @name='button',@value=N'Parse',@valueout=@button OUT,@key='Insert'\nIF @button IS NOT NULL\n\tBEGIN\n\t\tDECLARE @sql nvarchar(max) = N'{'+@search+'}'\n\t\tEXEC sp_api_card_curly_replace @card_id = @card_id, @string = @sql OUT\n\t\tEXEC sp_api_modal_text @sql,N'code'\n--\t\tEXEC sp_api_modal_field_insert @card_field_id,@search\n--\t\tEXEC sp_api_modal_clear\n\tEND\n--EXEC sp_api_modal_field_insert @card_field_id,N'Afleveren bij loods 5'\n/*\nreturn\n--DECLARE @rawdata varbinary(max) = (SELECT * FROM OPENROWSET(BULK 'C:\\Beheer\\backup\\tracy_fka_proj.bak', SINGLE_BLOB) as f)\nDECLARE @rawdata varbinary(max) = (SELECT * FROM OPENROWSET(BULK 'C:\\Windows\\explorer.exe', SINGLE_BLOB) as f)\nEXEC sp_api_modal_download @rawdata=@rawdata,@filename=N'abc.zip'\n*/",
                    "action_id": 184,
                    "action_name": "dl file",
                    "source_table": "api_card_actions"
                },
                {
                    "sql_source": "SET @referenced_card_id = {[api_card_templates].referenced_card_id.name}\nDECLARE @search nvarchar(2000) = CONCAT('[',@referenced_card_id,'].'),@button nvarchar(128)\n\nEXEC sp_api_modal_select_curly @value = @search OUT\nEXEC sp_api_modal_text N'',@class=N'm-3'\nEXEC sp_api_modal_button @name='button',@value=N'Insert',@valueout=@button OUT,@key='Insert'\nIF @button IS NOT NULL\n\tBEGIN\n\t\tEXEC sp_api_modal_clear\n\t\tSET @search=N'{'+@search+'}'\n\t\tEXEC sp_api_modal_field_insert @card_field_id,@search\n\tEND",
                    "action_id": 754,
                    "action_name": "Curly insert",
                    "source_table": "api_card_actions"
                },
                {
                    "sql_source": "/*EXEC sp_api_modal_select @card_name=N'apicard',@name=N'@selected_card_id',@value=@selected_card_id OUT--,@focus=1\nIF @selected_card_id IS NULL RETURN\nEXEC sp_api_modal_clear\nDECLARE @selected_card_name nvarchar(128),@selected_table_name nvarchar(128)\nSELECT @selected_card_name = '['+name+'].',@selected_table_name = ISNULL(basetable,tablename)  FROM api_card WHERE id = @selected_card_id\n*/\nDECLARE @search nvarchar(2000),@button nvarchar(128)\nEXEC sp_api_modal_select_curly @value = @search OUT,@focus=1\n\n/*RETURN\nDECLARE @parsed nvarchar(max) = '{'+REPLACE(@search,@selected_card_name,'')+'}'\nEXEC sp_api_card_curly_replace @card_id = @selected_card_id,@string = @parsed OUT\nSET @parsed = REPLACE(@parsed,'this.',QUOTENAME(@selected_table_name)+'.')\nEXEC sp_api_modal_text @parsed,N'my-3 code'\nRETURN\nSELECT word = CAST('{'+name+'}' as nvarchar(max)) INTO #curly FROM (\n\tselect name FROM api_card_fields WHERE card_id = @selected_card_id\n\tUNION\n\tselect '['+lower(name)+']' FROM api_card WHERE name is not null AND tablename NOT LIKE 'api_%'\n\tUNION\n\tselect '['+lower(ac.name)+'].'+acf1.name FROM api_card ac JOIN api_card_fields acf1 ON ac.id = acf1.card_id WHERE @sql LIKE '%{[[]' + ac.name+']%'\n\tUNION\n\tselect acf1.name+'.'+acf2.name FROM api_card_fields acf1 JOIN api_card_fields acf2 ON acf1.card_id = @card_id AND acf2.card_id = acf1.picklist_card_id\n\t\tWHERE @sql LIKE '%{' + acf1.name+'%'\n\tUNION\n\tselect acf1.name+'.'+acf2.name+'.'+acf3.name FROM api_card_fields acf1 JOIN api_card_fields acf2 ON acf1.card_id = @card_id AND acf2.card_id = acf1.picklist_card_id\n\t\t\tJOIN api_card_fields acf3 ON acf2.card_id = acf1.picklist_card_id AND acf3.card_id = acf2.picklist_card_id\n\t\t\t\tWHERE @sql LIKE '%{' + acf1.name+'.'+acf2.name+'%'\n\t) tbl\n\nEXEC sp_api_modal_table @tmptable=N'#curly'\n*/",
                    "action_id": 53,
                    "action_name": "sys_curly_brackets",
                    "source_table": "api_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_modal_select_ids",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@ids",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@ids n"
                }
            ],
            "embedded_example": "EXEC sp_api_modal_clear\r\nEXEC sp_api_modal_select_ids @ids = '10,20,33'",
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_modal_select_table",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@tmptable",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "'#modaltable'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@tmptable n"
                },
                {
                    "name": "@name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@name n"
                },
                {
                    "name": "@value",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 4000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@value n"
                },
                {
                    "name": "@class",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 512,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@class n"
                },
                {
                    "name": "@focus",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@focus b"
                },
                {
                    "name": "@select",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@select b"
                },
                {
                    "name": "@placeholder",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 512,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "N'Choose...'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 7,
                    "full_declaration_from_def": "@placeholder n"
                },
                {
                    "name": "@top",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 64,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "10000",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 8,
                    "full_declaration_from_def": "@top n"
                },
                {
                    "name": "@orderby",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 9,
                    "full_declaration_from_def": "@orderby n"
                },
                {
                    "name": "@no_isam",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 10,
                    "full_declaration_from_def": "@no_isam b"
                },
                {
                    "name": "@initial_id",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 4000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 11,
                    "full_declaration_from_def": "@initial_id n"
                },
                {
                    "name": "@searchvalue",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 12,
                    "full_declaration_from_def": "@searchvalue n"
                },
                {
                    "name": "@use_placeholder",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 13,
                    "full_declaration_from_def": "@use_placeholder n"
                },
                {
                    "name": "@seed",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 14,
                    "full_declaration_from_def": "@seed n"
                },
                {
                    "name": "@max_shown",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "15",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 15,
                    "full_declaration_from_def": "@max_shown i"
                },
                {
                    "name": "@no_client_cache",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 16,
                    "full_declaration_from_def": "@no_client_cache b"
                }
            ],
            "embedded_example": "EXEC sp_api_modal_select_table @tmptable = '#modaltable', @value = @selected_value OUT ,@no_isam = 1\r\n\t--,@class = 'p-4'\r\n\t--,@select = 1\r\n\t--,@placeholder = 'Choose a car'\r\n\t--,@top = 10000 -- 10000 results send to client, set @max_shown to reduce the list\r\n\t--,@orderby = 'ORDER BY field3 DESC'\r\n\t--,@initial_id = 34\r\n\t--,@searchvalue = @searchvalue OUT -- the user typed string \r\n\t--,@use_placeholder = 'placeholder3' -- display in a placeholder above\r\n\t--,@max_shown = 15",
            "embedded_description": null,
            "co_occurrence_stats": {
                "dbo.sp_api_modal_input": 8,
                "dbo.sp_api_modal_text": 8,
                "dbo.sp_api_modal_select": 7,
                "dbo.sp_api_modal_date": 5,
                "dbo.sp_api_modal_button": 10,
                "dbo.ABCDATE": 3,
                "dbo.sp_api_modal_table": 8,
                "dbo.sp_api_goto": 3,
                "dbo.sp_api_populate_card_views": 1,
                "dbo.sp_api_populate_card": 1,
                "dbo.sp_api_modal_choose": 2,
                "dbo.sp_api_modal_modal": 2,
                "dbo.sp_api_modal_date_from_to": 1,
                "dbo.sp_api_modal_input_decimal": 2,
                "dbo.sp_api_modal_alert": 2,
                "dbo.sp_api_modal_table_update": 1,
                "dbo.sp_api_modal_clear": 2,
                "dbo.sp_api_modal_restart": 1,
                "dbo.sp_api_modal_scanner": 1,
                "dbo.sp_api_toast": 1,
                "dbo.sp_api_modal_get_value": 1
            },
            "real_usage_examples": [
                {
                    "sql_source": "DECLARE @company_id nvarchar(32),@new_id nvarchar(32),@goto nvarchar(2000),@search nvarchar(2000), @location_id nvarchar(32), @reducer nvarchar(max), @date nvarchar(128), @opmerking nvarchar(128), @opmerkingrelation nvarchar(128)\n,@transactiondate nvarchar(128)\n,@button nvarchar(128)\n,@button1 nvarchar(128) = N'Nieuwe verkoop'\n,@button2 nvarchar(128) = N'Laatste open verkoop'\n,@button3 nvarchar(128) = N'Gereserveerde verkoop'\n,@button4 nvarchar(128) = N'Naar lokaties'\n,@button5 nvarchar(128) = N'Eigen lokaties'\n,@button6 nvarchar(128) = N'Werk lokaties'\n,@buttonescape nvarchar(128) = N'Ga terug'\n,@buttongoahead nvarchar(128) = N'Ga door'\nset @date = dbo.workDate()\nSET @transactiondate = dbo.abcdate()\n\nIF dbo.workDate() <> dbo.abcdate() AND @button IS NULL\n\tBEGIN\n\tEXEC sp_api_modal_text 'LET OP! DE WERKDATUM STAAT NIET OP VANDAAG.','text-danger font-weight-bold'\n\tEXEC sp_api_modal_button @name='@button',@value=@buttongoahead,@valueout = @button OUT,@key='Pagedown',@class='bg-danger text-light'\n\tEXEC sp_api_modal_button @name='@button',@value=@buttonescape,@valueout = @button OUT,@key='ESCAPE',@class='bg-danger text-light'\n\t\tIF @button = @buttonescape\n\t\tBEGIN\n\t\t\tEXEC sp_api_modal_clear\n\t\tEND\n\tEND\n\t\nIF @button = @buttongoahead OR dbo.workdate() = dbo.abcdate()\n\tBEGIN\n\tEXEC sp_api_modal_clear\n\tEXEC sp_api_modal_text 'Kies een klant:','text-primary'\n\t--SET @reducer = CONCAT('company_id = ',@company_id)\n\tSET @reducer = 'isDisabled = 0'\n\tEXEC sp_api_modal_select @card_name = N'klant',@value = @company_id OUT,@reducer = @reducer,@focus = 1\n\tEND\n\t\nIF @company_id > 0 \n\nBEGIN\n\t--DECLARE @only_new_is_possible BIT = 0\n\tDECLARE @reducer_location nvarchar(max) = N'Company_ID = ' + @company_id + ' OR id IN (SELECT Location_ID FROM xCompanyxLocation WHERE Company_ID =' + @company_id + ')'\n--\tDECLARE @reducer_location nvarchar(max) = N'id IN (SELECT Location_ID FROM xCompanyxLocation WHERE Company_ID =' + @company_id + ')'\n\tIF (SELECT LOCATIONS = count(Location_ID) FROM xCompanyxLocation WHERE Company_ID = @company_id) > 1\n\t\tBEGIN\n\t\t\tEXEC sp_api_modal_text 'Vertrek Datum:','text-primary'\n\t\t\tEXEC sp_api_modal_date @name='Date',@value = @date OUT,@class='w-25 mt-3',@focus=1\n\t\t\tEXEC sp_api_modal_input @name='Logistic',@value = @opmerking OUT,@placeholder = N'Opmerking voor loods'\n\t\t\tEXEC sp_api_modal_input @name='Relation',@value = @opmerkingrelation OUT,@placeholder = N'Referentie voor klant'\n\t\t\tEXEC sp_api_modal_text 'Kies een sublocatie van klant:','text-primary'\n\t\t\tEXEC sp_api_modal_select @card_name = N'xlocation',@value = @location_id OUT,@reducer = @reducer_location\n\t\t\t/*\n\t\t\t\tIF @location_id > 0\n\t\t\t\t\tBEGIN\n\t\t\t\t\t\tEXEC sp_api_modal_date @name='Date',@value = @date OUT,@class='w-25 mt-3',@focus=1\n\t\t\t\t\tEND\n\t\t\t*/\n\t\tEND\n\tIF (SELECT LOCATIONS = count(Location_ID) FROM xCompanyxLocation WHERE Company_ID = @company_id) = 1 AND (SELECT LOCATIONS = count(id) FROM xLocation WHERE Company_ID = @company_id) = 1\n\t\tBEGIN\n\t\t\tEXEC sp_api_modal_text 'Vertrek Datum:','text-primary'\n\t\t\tEXEC sp_api_modal_date @name='Date',@value = @date OUT,@class='w-25 mt-3',@focus=1\n\t\t\tEXEC sp_api_modal_input @name='Logistic',@value = @opmerking OUT,@placeholder = N'Opmerking voor loods'\n\t\t\tEXEC sp_api_modal_input @name='Relation',@value = @opmerkingrelation OUT,@placeholder = N'Referentie voor klant'\n\t\tEND\n\t/*\n\tSELECT id = xLocation.id, name=LocationCode\n\t\tINTO #locations\n\t\tFROM xLocation WHERE Company_ID = @company_id OR id IN (SELECT Location_ID FROM xCompanyxLocation WHERE Company_ID = @company_id)\n\tEXEC sp_api_modal_select_table @tmptable = N'#locations',@value = @location_id OUT,@focus=1,@class='mt-3'\n\t*/\n\n\t--IF @location_id > 0\n\n\tEXEC sp_api_modal_text 'Kies een optie:','text-primary font-weight-bold display-4 text-center'\n\tEXEC sp_api_modal_button @name='button',@value=@button1,@valueout = @button OUT,@key='Enter'\n\t\n\tIF EXISTS (SELECT * FROM xTransactionHeader WHERE status=N'openSale' AND CounterParty_ID = @company_id AND Transactiondate <= @date)\n\t\tBEGIN\n\t\tEXEC sp_api_modal_button @name='button',@value=@button2,@valueout = @button OUT,@key='F2'\n\t\tEND\n\t\t\n\tEXEC sp_api_modal_button @name='button',@value=@button4,@valueout = @button OUT,@key='F1'\n\tIF @button = @button4\n\t\tBEGIN\n\t\t\tEXEC sp_api_modal_clear\n\t\t\tEXEC sp_api_modal_button @name='button',@value=@button5,@valueout = @button OUT,@key='1'\n\t\t\tEXEC sp_api_modal_button @name='button',@value=@button6,@valueout = @button OUT,@key='2'\n\t\tEND\n\t\t\tIF @button = @button5\n\t\t\t\tBEGIN\n\t\t\t\t\tDECLARE @GotoOwnLocatie nvarchar(2000)\n\t\t\t\t\tSET @GotoOwnLocatie = N'/adres/'+@company_id+'/xlocation'\n\t\t\t\t\tEXEC sp_api_goto @GotoOwnLocatie,@referer_path=N'/verkoop'\n\t\t\t\tEND\n\t\t\tIF @button = @button6\n\t\t\t\tBEGIN\n\t\t\t\t\tDECLARE @GotoWorkLocatie nvarchar(2000)\n\t\t\t\t\tSET @GotoWorkLocatie = N'/adres/'+@company_id+'/company_locations'\n\t\t\t\t\tEXEC sp_api_goto @GotoWorkLocatie,@referer_path=N'/verkoop'\n\t\t\t\tEND\n\t\t\n\t\t/*\n\tIF EXISTS (SELECT * FROM xTransactionHeader WHERE status=N'openSale' AND CounterParty_ID = @company_id AND Transactiondate > @date)\n\t\tBEGIN\n\t\tEXEC sp_api_modal_button @name='button',@value=@button3,@valueout = @button OUT,@key='F2'\n\t\t\tSELECT TOP 1\n\t\t\t\ttv_companyname\n\t\t\t\t,transactiondate\n\t\t\t\t,[GERESERVEERD*] = 'GERESERVEERD'\n\t\t\t\t,id\n\t\t\t\tINTO #LASTORDER\n\t\t\tFROM q_xtransactionheader\n\t\t\tWHERE status=N'openSale' AND CounterParty_ID = @company_id AND Transactiondate > @date ORDER BY id DESC\n\t\t\tEXEC sp_api_modal_table @tmptable=N'#LASTORDER',@orderby=N'ORDER BY 3 ASC'\n\t\tEND\n\t\t*/\n/*\t\t\nELSE\n\t\tIF (select COUNT(id) from xlocation where company_id = @company_id ) = 1 \n\t\t\tBEGIN\n\t\t\t\tSET @only_new_is_possible = 1\n\t\t\tEND\n*/ \n\tIF @button = @button1 --OR @only_new_is_possible = 1\n\t\tBEGIN\n\t\tDELETE FROM api_storage WHERE card_id = (SELECT id FROM api_card WHERE name = N'verkoop') AND child_id = 0 AND user_id = @user_id\n\t\tEXEC sp_api_modal_clear\n\t\t\tEXEC sp_api_modal_post N'verkoop',N'CounterParty_ID',@company_id,0\n\t\t\tEXEC sp_api_modal_post N'verkoop',N'Destination_ID',@location_id,0\n\t\t\tEXEC sp_api_modal_post N'verkoop',N'TransactionDate',@transactiondate,0\n\t\t\tEXEC sp_api_modal_post N'verkoop',N'advTransportDep',@date,0\n\t\t\tEXEC sp_api_modal_post N'verkoop',N'unloadingdate',@date,0\n\t\t\tEXEC sp_api_modal_post N'verkoop',N'loadingdate',@date,0\n\t\t\tEXEC sp_api_modal_post N'verkoop',N'Logistic',@opmerking,0\n\t\t\tEXEC sp_api_modal_post N'verkoop',N'Relation',@opmerkingrelation,0\n\t\t\tEXEC @new_id = sp_api_modal_save N'verkoop',0\n\t\t\tIF @new_id > 0\n\t\t\t\tBEGIN\n\t\t\t\t\t/*SET @goto = N'/verkoop/'+@new_id+'/stock_ctr2'*/\n\t\t\t\t\tSET @goto = N'/verkoop/'+@new_id+'/ctr2/0/stockloc_ctr2'\n\t\t\t\t\tEXEC sp_api_toast N'Nieuwe verkoop gestart',N'alert-primary'\n\t\t\t\t\t--SET @search = N'?id='+@new_id\n\t\t\t\t\tSET @search = N'/verkoop/'+@new_id+'/ctr2'\n\t\t\t\t\tDECLARE @update_current_search nvarchar(4000) =CONCAT(N'?id=',@new_id)\n\t\t\t\t\tEXEC sp_api_goto @goto,@referer_path=@search,@referer_search=N'',@update_current_search=@update_current_search\n\t\t\t\tEND\n\t\t\tELSE\n\t\t\t\tEXEC sp_api_toast N'Error nieuwe verkoop',N'alert-danger'\n\t\t\tEXEC sp_api_modal_clear\n\t\tEND\n\tIF @button = @button2\n\t\tBEGIN\n\t\t\tSET @new_id = (SELECT TOP 1 id FROM xTransactionHeader WHERE status=N'openSale' AND CounterParty_ID = @company_id AND Transactiondate <= @date ORDER BY id DESC)\n\t\t\t/*SET @goto = N'/verkoop/'+@new_id+'/stock_ctr2'*/\n\t\t\tSET @goto = N'/verkoop/'+@new_id+'/ctr2/0/stockloc_ctr2'\n\t\t\tSET @search = N'/verkoop/'+@new_id+'/ctr2'\n\t\t\tEXEC sp_api_goto @goto,@referer_path=@search,@referer_search=N''\n\t\t\t--SET @search = N'?id='+@new_id\n\t\t\t--EXEC sp_api_goto @goto,@referer_path=N'/verkoop',@referer_search=@search\n\t\tEND\n\tIF @button = @button3\n\t\tBEGIN\n\t\t\tSET @new_id = (SELECT TOP 1 id FROM xTransactionHeader WHERE status=N'openSale' AND CounterParty_ID = @company_id AND Transactiondate > @date ORDER BY id DESC)\n\t\t\t/*SET @goto = N'/verkoop/'+@new_id+'/stock_ctr2'*/\n\t\t\tSET @goto = N'/verkoop/'+@new_id+'/ctr2/0/stockloc_ctr2'\n\t\t\tSET @search = N'/verkoop/'+@new_id+'/ctr2'\n\t\t\tEXEC sp_api_goto @goto,@referer_path=@search,@referer_search=N''\n\t\t\t--SET @search = N'?id='+@new_id\n\t\t\t--EXEC sp_api_goto @goto,@referer_path=N'/verkoop',@referer_search=@search\n\t\tEND\n\tEXEC sp_api_modal_button @name='button',@value=@buttonescape,@valueout = @button OUT,@key='ESCAPE',@class='bg-danger text-light'\n\tIF @button = @buttonescape\n\tBEGIN\n\tEXEC sp_api_modal_clear\n\tRETURN;\n\tEND\nEND\n",
                    "action_id": 258,
                    "action_name": "Insert Order",
                    "source_table": "api_card_actions"
                },
                {
                    "sql_source": "DECLARE @company_id nvarchar(32),@new_id nvarchar(32),@goto nvarchar(2000),@search nvarchar(2000), @location_id nvarchar(32), @reducer nvarchar(max), @date nvarchar(128), @opmerking nvarchar(128), @opmerkingrelation nvarchar(128)\n,@button1 nvarchar(128) = N'Nieuwe verkoop'\n,@button2 nvarchar(128) = N'Laatste open verkoop'\n,@button3 nvarchar(128) = N'Gereserveerde verkoop'\n,@buttonescape nvarchar(128) = N'Ga terug'\n,@buttongoahead nvarchar(128) = N'Ga door'\nset @date = dbo.workDate()\n\nIF dbo.workDate() <> dbo.abcdate() AND @button IS NULL\n\tBEGIN\n\tEXEC sp_api_modal_text 'LET OP! DE WERKDATUM STAAT NIET OP VANDAAG.','text-danger font-weight-bold'\n\tEXEC sp_api_modal_button @name='@button',@value=@buttongoahead,@valueout = @button OUT,@key='+',@class='bg-danger text-light'\n\tEXEC sp_api_modal_button @name='@button',@value=@buttonescape,@valueout = @button OUT,@key='ESCAPE',@class='bg-danger text-light'\n\t\tIF @button = @buttonescape\n\t\tBEGIN\n\t\t\tEXEC sp_api_modal_clear\n\t\tEND\n\tEND\n\t\nIF @button = @buttongoahead OR dbo.workdate() = dbo.abcdate()\n\tBEGIN\n\tEXEC sp_api_modal_clear\n\tEXEC sp_api_modal_text 'Kies een klant:','text-primary'\n\tEXEC sp_api_modal_select @card_name = N'klant',@value = @company_id OUT,@focus = 1\n\tSET @reducer = CONCAT('company_id = ',@company_id)\n\tEND\n\t\nIF @company_id > 0 \n\nBEGIN\n\t--DECLARE @only_new_is_possible BIT = 0\n\tDECLARE @reducer_location nvarchar(max) = N'Company_ID = ' + @company_id + ' OR id IN (SELECT Location_ID FROM xCompanyxLocation WHERE Company_ID =' + @company_id + ')'\n--\tDECLARE @reducer_location nvarchar(max) = N'id IN (SELECT Location_ID FROM xCompanyxLocation WHERE Company_ID =' + @company_id + ')'\n\tIF (SELECT LOCATIONS = count(Location_ID) FROM xCompanyxLocation WHERE Company_ID = @company_id) > 1\n\t\tBEGIN\n\t\t\tEXEC sp_api_modal_date @name='Date',@value = @date OUT,@class='w-25 mt-3',@focus=1\n\t\t\tEXEC sp_api_modal_input @name='Logistic',@value = @opmerking OUT\n\t\t\tEXEC sp_api_modal_input @name='Relation',@value = @opmerkingrelation OUT\n\t\t\tEXEC sp_api_modal_text 'Kies een sublocatie van klant:','text-primary'\n\t\t\tEXEC sp_api_modal_select @card_name = N'xlocation',@value = @location_id OUT,@reducer = @reducer_location\n\t\t\t/*\n\t\t\t\tIF @location_id > 0\n\t\t\t\t\tBEGIN\n\t\t\t\t\t\tEXEC sp_api_modal_date @name='Date',@value = @date OUT,@class='w-25 mt-3',@focus=1\n\t\t\t\t\tEND\n\t\t\t*/\n\t\tEND\n\tIF (SELECT LOCATIONS = count(Location_ID) FROM xCompanyxLocation WHERE Company_ID = @company_id) = 1\n\t\tBEGIN\n\t\t\tEXEC sp_api_modal_date @name='Date',@value = @date OUT,@class='w-25 mt-3',@focus=1\n\t\t\tEXEC sp_api_modal_input @name='Logistic',@value = @opmerking OUT\n\t\t\tEXEC sp_api_modal_input @name='Relation',@value = @opmerkingrelation OUT\n\t\tEND\n\t/*\n\tSELECT id = xLocation.id, name=LocationCode\n\t\tINTO #locations\n\t\tFROM xLocation WHERE Company_ID = @company_id OR id IN (SELECT Location_ID FROM xCompanyxLocation WHERE Company_ID = @company_id)\n\tEXEC sp_api_modal_select_table @tmptable = N'#locations',@value = @location_id OUT,@focus=1,@class='mt-3'\n\t*/\n\n\t--IF @location_id > 0\n\n\tEXEC sp_api_modal_text 'Kies een optie:','text-primary font-weight-bold display-4 text-center'\n\tEXEC sp_api_modal_button @name='button',@value=@button1,@valueout = @button OUT,@key='Insert'\n\t\n\tIF EXISTS (SELECT * FROM xTransactionHeader WHERE status=N'openSale' AND CounterParty_ID = @company_id AND Transactiondate <= @date)\n\t\tBEGIN\n\t\tEXEC sp_api_modal_button @name='button',@value=@button2,@valueout = @button OUT,@key='F1'\n\t\tEND\n\t\t\n\tIF EXISTS (SELECT * FROM xTransactionHeader WHERE status=N'openSale' AND CounterParty_ID = @company_id AND Transactiondate > @date)\n\t\tBEGIN\n\t\tEXEC sp_api_modal_button @name='button',@value=@button3,@valueout = @button OUT,@key='F2'\n\t\t\tSELECT TOP 1\n\t\t\t\ttv_companyname\n\t\t\t\t,transactiondate\n\t\t\t\t,[GERESERVEERD*] = 'GERESERVEERD'\n\t\t\t\t,id\n\t\t\t\tINTO #LASTORDER\n\t\t\tFROM q_xtransactionheader\n\t\t\tWHERE status=N'openSale' AND CounterParty_ID = @company_id AND Transactiondate > @date ORDER BY id DESC\n\t\t\tEXEC sp_api_modal_table @tmptable=N'#LASTORDER',@orderby=N'ORDER BY 3 ASC'\n\t\tEND\n/*\t\t\nELSE\n\t\tIF (select COUNT(id) from xlocation where company_id = @company_id ) = 1 \n\t\t\tBEGIN\n\t\t\t\tSET @only_new_is_possible = 1\n\t\t\tEND\n*/ \n\tIF @button = @button1 --OR @only_new_is_possible = 1\n\t\tBEGIN\n\t\tDELETE FROM api_storage WHERE card_id = (SELECT id FROM api_card WHERE name = N'verkoop') AND child_id = 0 AND user_id = @user_id\n\t\tEXEC sp_api_modal_clear\n\t\t\tEXEC sp_api_modal_post N'verkoop',N'CounterParty_ID',@company_id,0\n\t\t\tEXEC sp_api_modal_post N'verkoop',N'Destination_ID',@location_id,0\n\t\t\tEXEC sp_api_modal_post N'verkoop',N'TransactionDate',@date,0\n\t\t\tEXEC sp_api_modal_post N'verkoop',N'advTransportDep',@date,0\n\t\t\tEXEC sp_api_modal_post N'verkoop',N'unloadingdate',@date,0\n\t\t\tEXEC sp_api_modal_post N'verkoop',N'loadingdate',@date,0\n\t\t\tEXEC sp_api_modal_post N'verkoop',N'Logistic',@opmerking,0\n\t\t\tEXEC sp_api_modal_post N'verkoop',N'Relation',@opmerkingrelation,0\n\t\t\tEXEC @new_id = sp_api_modal_save N'verkoop',0\n\t\t\tIF @new_id > 0\n\t\t\t\tBEGIN\n\t\t\t\t\tSET @goto = N'/verkoop/'+@new_id+'/stock_ctr2'\n\t\t\t\t\tEXEC sp_api_toast N'Nieuwe verkoop gestart',N'alert-primary'\n\t\t\t\t\tSET @search = N'?id='+@new_id\n\t\t\t\t\tEXEC sp_api_goto @goto,@referer_path=N'/verkoop',@referer_search=@search\n\t\t\t\tEND\n\t\t\tELSE\n\t\t\t\tEXEC sp_api_toast N'Error nieuwe verkoop',N'alert-danger'\n\t\t\tEXEC sp_api_modal_clear\n\t\tEND\n\tIF @button = @button2\n\t\tBEGIN\n\t\t\tSET @new_id = (SELECT TOP 1 id FROM xTransactionHeader WHERE status=N'openSale' AND CounterParty_ID = @company_id AND Transactiondate <= @date ORDER BY id DESC)\n\t\t\tSET @goto = N'/verkoop/'+@new_id+'/stock_ctr2'\n\t\t\tSET @search = N'?id='+@new_id\n\t\t\tEXEC sp_api_goto @goto,@referer_path=N'/verkoop',@referer_search=@search\n\t\tEND\n\tIF @button = @button3\n\t\tBEGIN\n\t\t\tSET @new_id = (SELECT TOP 1 id FROM xTransactionHeader WHERE status=N'openSale' AND CounterParty_ID = @company_id AND Transactiondate > @date ORDER BY id DESC)\n\t\t\tSET @goto = N'/verkoop/'+@new_id+'/stock_ctr2'\n\t\t\tSET @search = N'?id='+@new_id\n\t\t\tEXEC sp_api_goto @goto,@referer_path=N'/verkoop',@referer_search=@search\n\t\tEND\n\tEXEC sp_api_modal_button @name='button',@value=@buttonescape,@valueout = @button OUT,@key='ESCAPE',@class='bg-danger text-light'\n\tIF @button = @buttonescape\n\tBEGIN\n\tEXEC sp_api_modal_clear\n\tRETURN;\n\tEND\nEND\n",
                    "action_id": 259,
                    "action_name": "Insert Order",
                    "source_table": "api_card_actions"
                },
                {
                    "sql_source": "DECLARE @location_id INT,@company_id nvarchar(32)\r\nEXEC sp_api_modal_text N'Kies wat...'\r\nEXEC sp_api_modal_select @card_name = N'klant',@value = @company_id OUT,@focus=1\r\nIF @company_id IS NOT NULL\r\n\tBEGIN\r\n\t/*\r\n\t\tSELECT id = xLocation.id, name=LocationCode\r\n\t\t\tINTO #locations\r\n\t\t\tFROM xLocation WHERE Company_ID = @company_id OR id IN (SELECT Location_ID FROM xCompanyxLocation WHERE Company_ID = @company_id)\r\n\t\t--EXEC sp_api_modal_select_table @tmptable = N'#locations',@value = @location_id OUT,@focus=1\r\n\t*/\r\n\t\tDECLARE @reducer nvarchar(max) = N'Company_ID = ' + @company_id + ' OR id IN (SELECT Location_ID FROM xCompanyxLocation WHERE Company_ID =' + @company_id + ')'\r\n\t\tEXEC sp_api_modal_select @card_name = N'xlocation',@value = @location_id OUT,@focus=1,@reducer = @reducer\r\n\t\tIF @location_id > 0\r\n\t\t\tBEGIN\r\n\t\t\t\tEXEC sp_api_modal_text N'@company_id'\r\n\t\t\t\tEXEC sp_api_modal_text @company_id\r\n\t\t\t\tEXEC sp_api_modal_text N'@location_id'\r\n\t\t\t\tEXEC sp_api_modal_text @location_id\r\n\t\t\tEND\r\n\tEND\r\n",
                    "action_id": 1292,
                    "action_name": "Select company location",
                    "source_table": "api_card_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_modal_set",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@key",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 512,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@key n"
                },
                {
                    "name": "@value",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@value n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": [
                {
                    "sql_source": "DECLARE @D DateTime\r\nSET @D={[abcCalendar].date} \r\nEXEC sp_api_modal_set N'workdate',@D",
                    "action_id": 48,
                    "action_name": "Set_Workdate",
                    "source_table": "api_card_actions"
                },
                {
                    "sql_source": "-- {[ctr2].Amount} \n\n--EXEC sp_api_modal_set N'bewaar_kruimel_path',N'/inkoop' --@path\n--EXEC sp_api_modal_set N'bewaar_kruimel_search',N'?id=123' --@path\nif {[ctr2].Amount} is not null --we zitten op ctr2\n\tbegin\n\n\t\tDECLARE @count_iv2 INT = (SELECT sum(linkaantal) FROM xIvlink WHERE ITD = @id or vtd = @id)-- RH210116 OR vtd.. er bij (er was een overmatige toewijzing)\n\t\tDECLARE @DIFF INT \n\t\tset @DIFF=\t( select isnull({[ctr2].Amount}*iif({[ctr2].stockmut}=0,0,1),0) - @count_iv2)\n\t\tEXEC SP_API_TOAST @diff\n\t\tIF ISNULL(@count_iv2,0)=0 or @DIFF > 0 --@count_iv2 <>isnull({[ctr2].Amount}*iif({[ctr2].stockmut}=0,0,1),0)--= 0\n\t\t\tBEGIN\n\t\t\t\tIF NOT EXISTS (select * from @main_db.dbo.ctr1_Assignable(NULL,@id))\n\t\t\t\t\tBEGIN\n\t\t\t\t\t\tEXEC sp_api_modal_alert N'Geen partij met voorraad beschikbaar!'\n\t\t\t\t\t\tEXEC sp_api_modal_clear\n\t\t\t\t\t\tRETURN\n\t\t\t\t\tEND\n\t\t\t\tSET @path = @path+'/'+@id+'/ctr1_toewijsbaar'\n\t\t\tEND\n\t\tELSE\n\t\t\tBEGIN\n\t\t\t\tIF @DIFF < 0 -- meer toegewezen dan de ctr groot is\n\t\t\t\t\tBEGIN\n\t\t\t\t\t\tEXEC sp_api_modal_alert N'Er is te veel toegewezen!, verlaag de toewijzing of verwijder een toewijzing!'\t\n\t\t\t\t\tEND\t\n\t\t\t\tSET @path = @path+'/'+@id+'/iv2'\n\t\t\tEND\n\t\n\t\tEXEC sp_api_goto @path\n\tend\n\nelse\n EXEC SP_API_TOAST @card_name\n\n/*\n\n\n\nIF @count_iv2 = 0\n\tEXEC sp_api_keypress N'F4'\nELSE\n\tEXEC sp_api_keypress N'Alt+T'\n*/\n\n/* WAS: \n-- {[ctr2].Amount} \n\n--EXEC sp_api_modal_set N'bewaar_kruimel_path',N'/inkoop' --@path\n--EXEC sp_api_modal_set N'bewaar_kruimel_search',N'?id=123' --@path\nif {[ctr2].Amount} is not null --we zitten op ctr2\n\tbegin\n\n\t\tDECLARE @count_iv2 INT = (SELECT sum(linkaantal) FROM xIvlink WHERE ITD = @id)\n\t\t--EXEC SP_API_TOAST @count_iv2\n\t\tIF ISNULL(@count_iv2,0)=0 or @count_iv2 <>isnull({[ctr2].Amount}*iif({[ctr2].stockmut}=0,0,1),0)--= 0\n\t\t\tBEGIN\n\t\t\t\tIF NOT EXISTS (select * from @main_db.dbo.ctr1_Assignable(NULL,@id))\n\t\t\t\t\tBEGIN\n\t\t\t\t\t\tEXEC sp_api_modal_alert N'Geen partij met voorraad beschikbaar!'\n\t\t\t\t\t\tEXEC sp_api_modal_clear\n\t\t\t\t\t\tRETURN\n\t\t\t\t\tEND\n\t\t\t\tSET @path = @path+'/'+@id+'/ctr1_toewijsbaar'\n\t\t\tEND\n\t\tELSE\n\t\t\tSET @path = @path+'/'+@id+'/iv2'\n\t\t\n\t\tEXEC sp_api_goto @path\n\tend\n\nelse\n EXEC SP_API_TOAST @card_name\n\n*/",
                    "action_id": 102,
                    "action_name": "Toewijzen/Toewijzing",
                    "source_table": "api_card_actions"
                },
                {
                    "sql_source": "EXEC sp_api_modal_get N'bewaar_kruimel_path',@p1 OUT --@path\nEXEC sp_api_modal_get N'bewaar_kruimel_search',@s1 OUT\nEXEC sp_api_modal_set N'bewaar_kruimel_path' --CLEAR\nEXEC sp_api_modal_set N'bewaar_kruimel_search' --CLEAR\nIF @p1 IS NOT NULL EXEC sp_api_goto @p1,@s1\n",
                    "action_id": 613,
                    "action_name": "kruimel test",
                    "source_table": "api_card_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_modal_show_json_values",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_modal_signature",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@name n"
                },
                {
                    "name": "@use_placeholder",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@use_placeholder n"
                },
                {
                    "name": "@base64data",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@base64data n"
                }
            ],
            "embedded_example": "EXEC sp_api_modal_signature --\r\n\t--,@use_placeholder nvarchar(128) = NULL",
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_modal_sure",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@alert_text",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "N'Are you sure?'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@alert_text n"
                },
                {
                    "name": "@sub_text",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@sub_text n"
                },
                {
                    "name": "@value",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@value b"
                },
                {
                    "name": "@button_true",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "N'Yes'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@button_true n"
                },
                {
                    "name": "@button_false",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "N'No'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@button_false n"
                },
                {
                    "name": "@key_true",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@key_true n"
                },
                {
                    "name": "@key_false",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 7,
                    "full_declaration_from_def": "@key_false n"
                },
                {
                    "name": "@seed",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 8,
                    "full_declaration_from_def": "@seed n"
                }
            ],
            "embedded_example": "DECLARE @sure_value bit\r\n--short: EXEC sp_api_modal_sure @value = @sure_value OUT\r\nEXEC sp_api_modal_sure @alert_text = N'Direction',@sub_text = N'Where do you want to go?'\r\n    ,@value = @sure_value OUT\r\n    ,@button_true = N'Left'\r\n    ,@button_false = N'Wrong'\r\n    ,@key_true = N'F1'\r\n    ,@key_false = N'F2'\r\nEXEC sp_api_toast @sure_value -- 0 or 1\r\nRETURN",
            "embedded_description": null,
            "co_occurrence_stats": {
                "dbo.sp_api_modal_restart": 1
            },
            "real_usage_examples": [
                {
                    "sql_source": "DECLARE @value bit\nexec sp_api_modal_sure @alert_text =N'alle data wissen?', @value = @value OUT\n\nif @value=1\n\tbegin\n\t\tif (select count(*) from xinvoice) <20\n\t\t\tbegin\n\t\t\t\tupdate xinvoice set status='Draft'\n\t\t\t\texec sp_wis_alles 2023\n\t\t\t\texec sp_api_modal_clear\n\t\t\t\treturn;\n\t\t\tend\t\n\tend\t\n\nif @value=0\n\tbegin\n\t\texec sp_api_modal_clear\n\t\treturn;\n\tend\t\n\t\nexec sp_api_modal_restart\t\n\t",
                    "action_id": 90,
                    "action_name": "wis_alles",
                    "source_table": "api_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_modal_switch",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@name n"
                },
                {
                    "name": "@value",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@value n"
                },
                {
                    "name": "@label",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 512,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "@name",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@label n"
                },
                {
                    "name": "@inline",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@inline b"
                },
                {
                    "name": "@disabled",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@disabled b"
                },
                {
                    "name": "@seed",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@seed n"
                },
                {
                    "name": "@use_placeholder",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 7,
                    "full_declaration_from_def": "@use_placeholder n"
                },
                {
                    "name": "@direct_post",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 8,
                    "full_declaration_from_def": "@direct_post b"
                },
                {
                    "name": "@bitvalue",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 9,
                    "full_declaration_from_def": "@bitvalue b"
                }
            ],
            "embedded_example": "--short: \r\n--DECLARE @switch_1 nvarchar(max); EXEC sp_api_modal_get_value @name='@switch_1',@value = @switch_1 OUT --Very important; This makes the value of the variable \"@switch_1\" persist between CLIENT and SERVER synchronization.\t\t\r\n--EXEC sp_api_modal_switch @name = '@switch_1', @value = @switch_1 OUT,@label = N'This is switch one', @direct_post = 1\r\n\r\n--complete example:\r\n--switch on modal action page\r\nDECLARE @power nvarchar(max);EXEC sp_api_modal_get_value @name='@power',@value = @power OUT --VERY IMPORTANT: THIS MAKES SURE THAT THE VALUE OF THE VARIABLE @switch_1 \"PERSISTS\" BETWEEN CLIENT AND SERVER SYNCHRONIZATION\t\t\r\nEXEC sp_api_modal_switch @name = '@power', @bitvalue = @power OUT, @label = N'Power', @direct_post = 1 --\r\n\t--,@inline = 1\r\n\t--,@disabled = 1\r\n\t--,@seed = 'unique'\r\n\t--,@use_placeholder = 'placeholder_above1'\r\nDECLARE @t nvarchar(max)=CASE WHEN @power is NULL \r\n\t\t\t\t\t\t\tTHEN N'The switch is not set to a value yet!'\r\n\t\t\t\t\t\t\tELSE concat(N'The switch is set to :', @power,'!')\t\r\n\t\t\t\t\t\tEND\r\nEXEC sp_api_toast @text=@power, @speech=@t, @speech_lang=N'en-en'\r\n\r\n--exit button (action ends)\r\nDECLARE @exit nvarchar(max); EXEC sp_api_modal_get_value @name='@exit',@value = @exit OUT \r\nEXEC sp_api_modal_button @name='@exit',@value = 'Exit', @valueout = @exit OUT,@class='btn-danger',@key='Esc'\r\nIF @exit is not NULL\r\nBEGIN\r\n\tEXEC sp_api_modal_clear\r\nEND",
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_modal_table",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@card_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@card_id i"
                },
                {
                    "name": "@card_name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@card_name n"
                },
                {
                    "name": "@reducer",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "''",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@reducer n"
                },
                {
                    "name": "@class",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "'h-auto'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@class n"
                },
                {
                    "name": "@tmptable",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "'#modaltable'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@tmptable n"
                },
                {
                    "name": "@orderby",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "'ORDER BY 1'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@orderby n"
                },
                {
                    "name": "@print",
                    "type_from_sys": "bit",
                    "type_from_def": "B",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 7,
                    "full_declaration_from_def": "@print B"
                },
                {
                    "name": "@printonly",
                    "type_from_sys": "bit",
                    "type_from_def": "B",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 8,
                    "full_declaration_from_def": "@printonly B"
                },
                {
                    "name": "@fontsize",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 9,
                    "full_declaration_from_def": "@fontsize n"
                },
                {
                    "name": "@top",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 10,
                    "full_declaration_from_def": "@top i"
                },
                {
                    "name": "@lang",
                    "type_from_sys": "nchar",
                    "type_from_def": "n",
                    "max_length_bytes": 4,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 11,
                    "full_declaration_from_def": "@lang n"
                },
                {
                    "name": "@lang_context",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 510,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 12,
                    "full_declaration_from_def": "@lang_context n"
                },
                {
                    "name": "@lang_auto_add",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 13,
                    "full_declaration_from_def": "@lang_auto_add b"
                },
                {
                    "name": "@excel",
                    "type_from_sys": "bit",
                    "type_from_def": "B",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 14,
                    "full_declaration_from_def": "@excel B"
                },
                {
                    "name": "@name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 15,
                    "full_declaration_from_def": "@name n"
                },
                {
                    "name": "@value",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 16,
                    "full_declaration_from_def": "@value n"
                },
                {
                    "name": "@set_values",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 17,
                    "full_declaration_from_def": "@set_values n"
                },
                {
                    "name": "@use_placeholder",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 18,
                    "full_declaration_from_def": "@use_placeholder n"
                },
                {
                    "name": "@excel_filename",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 19,
                    "full_declaration_from_def": "@excel_filename n"
                },
                {
                    "name": "@excel_sheetname",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 62,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 20,
                    "full_declaration_from_def": "@excel_sheetname n"
                },
                {
                    "name": "@hide_when_empty",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 21,
                    "full_declaration_from_def": "@hide_when_empty b"
                },
                {
                    "name": "@back_invisible",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 22,
                    "full_declaration_from_def": "@back_invisible b"
                },
                {
                    "name": "@query",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 23,
                    "full_declaration_from_def": "@query n"
                }
            ],
            "embedded_example": "--SELECT * INTO #modaltable FROM ...\r\nEXEC sp_api_modal_table @tmptable = '#modaltable'\r\n\t--,@card_id = 2\r\n\t--,@card_name = 'country'\r\n\t--,@reducer\r\n\t--,@orderby = 'ORDER BY name'\r\n\t--,@excel = 1\r\n\t--,@excel_filename = 'companies'",
            "embedded_description": null,
            "co_occurrence_stats": {
                "dbo.sp_api_modal_csv": 23,
                "dbo.sp_api_modal_input": 55,
                "dbo.sp_api_modal_text": 103,
                "dbo.sp_api_modal_date": 49,
                "dbo.sp_api_modal_button": 112,
                "dbo.sp_api_modal_date_from_to": 32,
                "dbo.sp_api_modal_select": 23,
                "dbo.sp_api_toast": 25,
                "dbo.sp_api_modal_modal": 41,
                "dbo.sp_api_modal_print": 18,
                "dbo.ABCDATE": 16,
                "dbo.sp_api_goto": 9,
                "dbo.sp_api_modal_select_table": 8,
                "dbo.sp_api_modal_clear": 11,
                "dbo.sp_api_modal_alert": 10,
                "dbo.sp_api_report_generate": 1,
                "dbo.abcLeft": 1,
                "dbo.sp_api_modal_table_update": 13,
                "dbo.hasRole": 3,
                "dbo.sp_api_modal_choose": 10,
                "dbo.sp_api_modal_save": 5,
                "dbo.sp_api_modal_post": 5,
                "dbo.sp_api_add_sql_task": 1,
                "dbo.sp_api_modal_route": 1,
                "dbo.ABCWEEKNR": 3,
                "dbo.sp_api_modal_input_decimal": 4,
                "dbo.sp_api_modal_download": 1,
                "dbo.sp_api_modal_select_curly": 1,
                "dbo.sp_api_card_curly_replace": 1,
                "dbo.sp_api_populate_card": 1,
                "dbo.sp_api_email": 5,
                "dbo.sp_api_modal_restart": 2,
                "dbo.sp_api_modal_html": 1,
                "dbo.sp_api_modal_value": 1,
                "dbo.sp_api_modal_values_clear": 1,
                "dbo.sp_api_modal_get_value": 4,
                "dbo.sp_api_modal_choose_list": 1
            },
            "real_usage_examples": [
                {
                    "sql_source": "--RH210215 BEZIG DOWNLOAD ALS CSV ER BIJ.. lukt nofg niet..\nDECLARE @date nvarchar(128),@date2 nvarchar(128),@button nvarchar(128),@button2 nvarchar(128),@companyname nvarchar(128), @FileName nvarchar(128)\nset @date = dbo.workDate()\nset @date2 = dbo.workDate()\nSET @companyname = (select CompanyName from xcompany where id = @id)\nset @Filename=concat(@Companyname,'.csv')\n/*EXEC sp_api_modal_text 'Zoek op transport bedrijf'\nEXEC sp_api_modal_input @name='Transporteur',@value = @TransComp OUT,@focus=1,@select=1 -- zoek veld\n*/\nEXEC sp_api_modal_text 'Van:'\nEXEC sp_api_modal_date @name='Date',@value = @date OUT,@class='w-24',@focus=1,@select=1  -- zoek veld\nEXEC sp_api_modal_text 'Tot en met:'\nEXEC sp_api_modal_date @name='Date2',@value = @date2 OUT,@class='w-24' -- zoek veld\n--SET @date2 = CONCAT(@date2,' 23:59:59.999')\nSET @button = 'Intrastat_Melding'\nEXEC sp_api_modal_button @name='button',@value = 'Intrastat_Melding',@valueout = @button OUT,@class = 'btn-primary',@key = 'Enter'\nEXEC sp_api_modal_button @name='button',@value = 'Excel_CSV',@valueout = @button OUT,@class = 'btn-primary',@key = 'F5'\nEXEC sp_api_modal_text @companyname,N'h4 text-muted',@printonly=1\nEXEC sp_api_modal_print\n\nIF @button =  'Intrastat_Melding'\nBEGIN\nSELECT distinct [QUANTITY@] = sum(QUANTITY@), [ARTICLE~col-sm-5] = ARTICLE, LAND, INTRASTAT_CODE, [NETT_WEIGHT@] = sum(NETT_WEIGHT@), ISO, [AMOUNT@] = sum(AMOUNT@)\nINTO #Intrastat_Melding\nFROM          RV_INTRASTAT_MELDING\nWHERE\t\t(INTRASTAT_CODE is not NULL) AND (CompanyID = @id) AND (TransactionDate BETWEEN @date AND @date2) AND (THTDT = 2)\nGROUP BY ARTICLE,LAND,INTRASTAT_CODE,ISO\nEXEC sp_api_modal_table @tmptable=N'#Intrastat_Melding',@orderby=N'ORDER BY 2 ASC',@print=1\n\nEND \n\t\n\nIF @button =  'Excel_CSV'\nBEGIN\nSELECT distinct [QUANTITY] = sum(QUANTITY@), [ARTICLE] = ARTICLE, LAND, INTRASTAT_CODE, [NETT_WEIGHT] = sum(NETT_WEIGHT@), ISO, [AMOUNT] = sum(AMOUNT@)\nINTO #Intrastat_CSV\nFROM          RV_INTRASTAT_MELDING\nWHERE\t\t(INTRASTAT_CODE is not NULL) AND (CompanyID = @id) AND (TransactionDate BETWEEN @date AND @date2) AND (THTDT = 2)\nGROUP BY ARTICLE,LAND,INTRASTAT_CODE,ISO\n--EXEC sp_api_modal_table @tmptable=N'#Intrastat_CSV',@print=1\n--EXEC sp_api_modal_csv\t@tmptable = '#Intrastat_CSV'\t,@filename = @filename\t,@sep = ';'\n\n--EXEC sp_api_modal_table @tmptable=N'#Intrastat_CSV'\nEXEC sp_api_modal_csv @tmptable=N'#Intrastat_CSV',@ansi =1,@filename=@FileName\n\nEND \n\n\n\n\n\n\n\n",
                    "action_id": 1,
                    "action_name": "INTRASTAT_MELDING",
                    "source_table": "api_card_actions"
                },
                {
                    "sql_source": "DECLARE @MES NVARCHAR(200)\r\nSET @MES=concat(N'Verloop van de koers ',{[currency].CodeISO})\r\nif @MES IS NULL SET @MES=concat(N'Verloop van de waarde ''',{[xvalrate].code},''' voor ',(select companyname from xCompany where id={[xvalrate].contextID}))\r\nEXEC sp_api_modal_text @text = @MES,@class = 'h3 text-muted'\r\nSELECT TOP 100 code as [code*],startdate, enddate,f as [koers] INTO #table1 FROM xValrate where code={[xvalrate].code} and contextID={[xvalrate].contextID}\r\nEXEC sp_api_modal_table @tmptable=N'#table1'\r\n",
                    "action_id": 4,
                    "action_name": "koerslijst",
                    "source_table": "api_card_actions"
                },
                {
                    "sql_source": "/* bla bla {[verkoop].id} */\nDECLARE @cid int,@reducer nvarchar(max),@value nvarchar(128), @button nvarchar(128)\n,@from nvarchar(128) = NULL -- maar dit legt hier weer meer complexiteit neer, wat mij betreft dus allemaal om het even... als het default (=null) naar 'vansdaag' gaat is best, maar als ik ook maak blanco (= N'') kan meegeven dan.. PRIMA, mooi want dan wijzigd er niets voor bestaande boel\n\n,@to nvarchar(128) = N'' -- N'2021-01-12'--? misschien try\nSELECT @cid = id FROM api_card WHERE name = 'klant'\n\nEXEC sp_api_modal_date_from_to @from = @from OUT,@to = @to OUT\nEXEC sp_api_modal_text @from\nEXEC sp_api_modal_text @to\nEXEC sp_api_modal_button @name='Sure',@value = 'Ja', @valueout = @button OUT,@class='btn-danger',@key='Enter'\nRETURN\nEXEC sp_api_modal_select @card_name = N'country',@value = @value OUT,@focus = 1\nIF @value IS NOT NULL\n\tBEGIN\n\t\tSET @reducer = N'Country_ID = ' + @value\n\t\tEXEC sp_api_modal_table @card_id = @cid ,@reducer = @reducer --'' ,@class = 'h-auto' ,@tmptable = '#modaltable' ,@orderby = ''\n\tEND\nRETURN\nDECLARE @json nvarchar(max)\nSET @json = (SELECT * FROM fn_api_get_related_items_json_list(383,NULL))\nEXEC sp_api_modal_text @json,N'json'",
                    "action_id": 53,
                    "action_name": "Show Related List",
                    "source_table": "api_card_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_modal_table_edit",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@tmptable",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "'#edittable'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@tmptable n"
                },
                {
                    "name": "@name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@name n"
                },
                {
                    "name": "@use_placeholder",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@use_placeholder n"
                },
                {
                    "name": "@options",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "'{}'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@options n"
                },
                {
                    "name": "@allow_insert",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@allow_insert b"
                }
            ],
            "embedded_example": "SELECT * INTO #edittable FROM ...\r\nEXEC sp_api_modal_table_edit -- @tmptable = '#edittable' ,@options = '{}' ,@name = NULL ,@use_placeholder = NULL",
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_modal_table_json",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@tablename",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@tablename n"
                },
                {
                    "name": "@json",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@json n"
                },
                {
                    "name": "@ids",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@ids n"
                },
                {
                    "name": "@identity_column",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@identity_column n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_modal_table_mapper",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@input_table",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@input_table n"
                },
                {
                    "name": "@output_table",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@output_table n"
                }
            ],
            "embedded_example": "EXEC sp_api_modal_table_mapper @input_table = '#input', @output_table = '#output' --",
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_modal_table_to_html",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@tmptable",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "'#modaltable'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@tmptable n"
                },
                {
                    "name": "@orderby",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "''",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@orderby n"
                },
                {
                    "name": "@html",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@html n"
                },
                {
                    "name": "@group_seperator",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 64,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "' - '",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@group_seperator n"
                },
                {
                    "name": "@style_table",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "'font-family: \"Calibri",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@style_table n"
                },
                {
                    "name": "@style_th",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@style_th n"
                },
                {
                    "name": "@style_th_totals",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 7,
                    "full_declaration_from_def": "@style_th_totals n"
                },
                {
                    "name": "@style_group",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 8,
                    "full_declaration_from_def": "@style_group n"
                },
                {
                    "name": "@style_tr",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 9,
                    "full_declaration_from_def": "@style_tr n"
                },
                {
                    "name": "@style_tr_even",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "'background-color: #f2f2f2;'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 10,
                    "full_declaration_from_def": "@style_tr_even n"
                },
                {
                    "name": "@style_td",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 11,
                    "full_declaration_from_def": "@style_td n"
                },
                {
                    "name": "@style_tr_totals",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 12,
                    "full_declaration_from_def": "@style_tr_totals n"
                },
                {
                    "name": "@style_cellpadding",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "'padding:5px;'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 13,
                    "full_declaration_from_def": "@style_cellpadding n"
                }
            ],
            "embedded_example": "DECLARE @html nvarchar(max)\r\nSELECT\r\n\t[group_name*] = ISNULL(g.name,'[none]')\r\n\t,[card_name*] = IIF(c.sys = 1,c.name + '|background-color:#008;color:#fff',c.name)\r\n\t,[action_name] = a.name\r\n\t,[order@] = a.action_order\r\nINTO #instantreport\r\nFROM api_card_actions a\r\nLEFT JOIN api_card c On c.id = a.card_id\r\nLEFT JOIN api_action_groups g ON group_id = g.id\r\nEXEC sp_api_modal_table_to_html @tmptable = '#instantreport', @html = @html OUT\r\nEXEC sp_api_modal_html @html",
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_modal_table_update",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@tmptable",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@tmptable n"
                },
                {
                    "name": "@buttonclass",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "N'btn-primary'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@buttonclass n"
                },
                {
                    "name": "@focusx",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "1",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@focusx i"
                },
                {
                    "name": "@focusy",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "1",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@focusy i"
                },
                {
                    "name": "@addnew",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@addnew i"
                },
                {
                    "name": "@showheader",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "1",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@showheader b"
                },
                {
                    "name": "@identifier",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 7,
                    "full_declaration_from_def": "@identifier n"
                },
                {
                    "name": "@sort",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "''",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 8,
                    "full_declaration_from_def": "@sort n"
                },
                {
                    "name": "@reducer",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "''",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 9,
                    "full_declaration_from_def": "@reducer n"
                },
                {
                    "name": "@orderby",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 10,
                    "full_declaration_from_def": "@orderby n"
                },
                {
                    "name": "@startkey",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "1",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 11,
                    "full_declaration_from_def": "@startkey i"
                },
                {
                    "name": "@column_types",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "N'{}'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 12,
                    "full_declaration_from_def": "@column_types n"
                },
                {
                    "name": "@seed",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 13,
                    "full_declaration_from_def": "@seed n"
                },
                {
                    "name": "@column_classes",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "N'{}'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 14,
                    "full_declaration_from_def": "@column_classes n"
                }
            ],
            "embedded_example": "SELECT id = object_id, [name ] = name,description = CAST('' as nvarchar(128)) INTO #tmptable FROM sys_tables\r\nEXEC sp_api_modal_table_update @tmptable = N'#tmptable' --\r\n\t,@buttonclass = N'btn-success'\r\n\t,@focusx = 2\r\n\t,@focusy = 2\r\n\t,@addnew = 0\r\n\t,@showheader = 1\r\n\t,@identifier = NULL\r\n\t,@sort = ''\r\n\t,@reducer = 'name LIKE ''%trans%'''\r\n\t,@orderby = N'ORDER BY name'\r\n\t,@startkey = 1 -- 0 = no keys or NULL = first character of text\r\n\t,@column_types nvarchar(max) = N'{}' -- N'{\"Amount\":\"number\"}'\r\n\t,@column_classes nvarchar(max) = N'{}' -- N'{\"name\":\"col-sm-1\",\"description\":\"col-sm-4\"}'\r\n--process the table:\r\nEXEC sp_api_modal_table @tmptable = N'#tmptable'",
            "embedded_description": null,
            "co_occurrence_stats": {
                "dbo.sp_api_modal_table": 13,
                "dbo.hasRole": 3,
                "dbo.sp_api_modal_text": 15,
                "dbo.sp_api_modal_clear": 5,
                "dbo.sp_api_modal_button": 15,
                "dbo.sp_api_modal_choose": 2,
                "dbo.sp_api_modal_save": 4,
                "dbo.sp_api_modal_input": 8,
                "dbo.sp_api_modal_modal": 3,
                "dbo.sp_api_modal_post": 4,
                "dbo.sp_api_toast": 4,
                "dbo.sp_api_modal_select": 2,
                "dbo.sp_api_goto": 2,
                "dbo.sp_api_modal_input_decimal": 2,
                "dbo.sp_api_email": 1,
                "dbo.sp_api_modal_select_table": 1,
                "dbo.sp_api_modal_restart": 1
            },
            "real_usage_examples": [
                {
                    "sql_source": "/*\nIF NOT (dbo.hasClaims('sub=sylvester@vgibv.nl,sub=joke@vgibv.nl') > 0 OR dbo.hasRole('admin') > 0)  --todo niet zo uiteindelijk...maar role!!\n\tBEGIN\n\t\tEXEC sp_api_modal_text N'U mag dit niet doen!','h2 text-danger font-weight-bold text-center'\n\t\tRETURN\n\tEND\n*/\t\nIF (SELECT COUNT(DISTINCT Counterparty_ID) FROM xTransactionHeader WHERE id IN({@ids})) > 1\n\tBEGIN\n\t\tEXEC sp_api_modal_text N'Meerdere leveranciers geselecteerd'\n\t\tRETURN\n\tEND\nSET @text = (SELECT [xCompany].[CompanyName] FROM [xCompany] WHERE [id] = (SELECT TOP 1 [Q_xTransactionHeader].[CounterParty_ID] FROM [Q_xTransactionHeader] WHERE [id] IN ({@ids})))\nSET @text = N'Boeken op ' + @text + ' voor inkooporders: {@ids}'\nIF @ids <> @id EXEC sp_api_modal_text @text,N'h4 text-muted'\nSELECT id, Factuurnummer,paraaf, Opmerking,[cth_id ]=cth_id--, [Username ] = Username --,Aantal = CAST(NULL as decimal(18,4)) \n\tINTO #modalupdate FROM xCTH_Check where CTH_ID IN ({@ids}) AND (trim(isnull(Factuurnummer,N'')) > N'' OR trim(isnull(Paraaf,N'')) > N'' OR trim(isnull(Opmerking,N'')) > N'') --ORDER BY 2\n\t--zet een leeg nieuw record er bij\n--OUD:\tINSERT #modalupdate (Factuurnummer, Opmerking, cth_id as [cth_id ], [username ]) values(NULL,NULL,@ID,@User) --DEFAULT VALUES --maak evt. een nieuw record\nEXEC sp_api_modal_table_update @tmptable = N'#modalupdate',@addnew=1\n\n-- hier heb je bijgewerkte data\nDECLARE @button1 nvarchar(128),@button_text1 nvarchar(128) = 'Opslaan'\nEXEC sp_api_modal_button @name='button1',@value = @button_text1, @valueout = @button1 OUT ,@class='btn-danger',@key='Enter'\n--DECLARE @code nvarchar(100)= (SELECT TOP 1 code from #modalupdate ORDER BY code DESC )\n--EXEC sp_api_modal_text @code\nIF @button1 IS NULL RETURN\n--test:EXEC sp_api_modal_text N'Result:',N'h4 text-muted'\n--EXEC sp_api_modal_table @tmptable = N'#modalupdate'\n--RETURN\n--cursortje\nDECLARE @Factuurnummer nvarchar(128)\n\t\t,@Paraaf nvarchar(10)--210122\n\t\t,@Opmerking nvarchar(128)\n\t\t,@checkid int\n\t\t--,@RealID int\n\t\t,@isNew int\n\tDECLARE @cursor_xCTH_Check CURSOR\n\tSET @cursor_xCTH_Check = CURSOR LOCAL FAST_FORWARD FOR\nSELECT Factuurnummer,paraaf, Opmerking, id,isNew FROM #modalupdate \n\tOPEN @cursor_xCTH_Check;\n\tFETCH NEXT FROM @cursor_xCTH_Check INTO\n\t\t@Factuurnummer\n\t\t,@Paraaf\n\t\t,@Opmerking\n\t\t,@checkid\n\t\t,@isNew\n\tWHILE @@FETCH_STATUS = 0\n\t\tBEGIN\n\t\t\tif 1=1 -- RH210111 geen conditie meer, ivm leeg kunnen maken van een nummer!\n\t\t\t\tBEGIN\n\t\t\t\t\t--select @Realid=id from xcth_check where id=@checkid and cth_id=@ID\n\t\t\t\t\tif @isNew = 1\n\t\t\t\t\t\t--ADD\n\t\t\t\t\t\tbegin\n\t\t\t\t\t\t\tDECLARE @cursor CURSOR,@idval INT\n\t\t\t\t\t\t\tSET @cursor = CURSOR LOCAL FAST_FORWARD FOR SELECT value FROM string_split(@ids,',')\n\t\t\t\t\t\t\tOPEN @cursor;\n\t\t\t\t\t\t\tFETCH NEXT FROM @cursor INTO @idval\n\t\t\t\t\t\t\tWHILE @@FETCH_STATUS = 0\n\t\t\t\t\t\t\t\tBEGIN\n\t\t\t\t\t\t\t\t    insert into xcth_check (Factuurnummer, Paraaf,Opmerking,cth_id,username) values (@Factuurnummer,@Paraaf,@Opmerking,@idval,@User)\n\t\t\t\t\t\t\t\t\tFETCH NEXT FROM @cursor INTO @idval\n\t\t\t\t\t\t\t\tEND\n\t\t\t\t\t\t\tCLOSE @cursor;\n\t\t\t\t\t\t\tDEALLOCATE @cursor;\n\t\t\t\t\t\tend\n\t\t\t\t\tif @isNew = 0\n\t\t\t\t\t\t--UPDATE\n\t\t\t\t\t\tbegin\n\t\t\t\t\t\t\tupdate xcth_check\n\t\t\t\t\t\t\t\tset Factuurnummer=@Factuurnummer\n\t\t\t\t\t\t\t\t\t,Paraaf=@Paraaf\n\t\t\t\t\t\t\t\t\t,Opmerking=@Opmerking\n\t\t\t\t\t\t\t\twhere id=@checkid\n--\t\t\t\t\t\t\t\tset @RealID = NULL --moet niet nodig zijn..\n\t\t\t\t\t\tend\n\t\t\t\tEND\t\t\t\t\t\n\t\t\t\t\t\t\t\n\t\t\tFETCH NEXT FROM @cursor_xCTH_Check INTO\n\t\t\t\t@Factuurnummer\n\t\t\t\t,@Paraaf\n\t\t\t\t,@Opmerking\n\t\t\t\t,@checkid\n\t\t\t\t,@isNew\n\t\tEND\n\tCLOSE @cursor_xCTH_Check;\n\tDEALLOCATE @cursor_xCTH_Check;\n\t\n\t--210111 VERWIJDER RECORDS WAAR GEEN FACTUURNUMMER OF OPMERKING STAAT !\n\tdelete from xcth_Check where  cth_id IN ({@ids}) AND trim(isnull(Factuurnummer,N''))=N'' AND  trim(isnull(Paraaf,N''))=N''  AND  trim(isnull(Opmerking,N''))=N''\n\t--return\n\tif @Button1 is NOT NULL\n\t\tEXEC sp_api_modal_clear\n\n",
                    "action_id": 465,
                    "action_name": "BOEK",
                    "source_table": "api_card_actions"
                },
                {
                    "sql_source": "/*\nDECLARE @button23 nvarchar(max) ,@buttongeert nvarchar(max) \n--EXEC sp_api_modal_button @name='buttongeert',@value = 'hidden', @valueout = @buttongeert OUT\nEXEC sp_api_modal_text @button23\nIF @buttongeert IS NOT NULL EXEC sp_api_modal_text N'werewrtwetwertwertwe'\n\n\nEXEC sp_api_modal_button @name='@buttongeert',@value = 'hidden', @valueout = @buttongeert OUT\n\n\n\nEXEC sp_api_modal_choose @list = N'a,b,c, dirk,pieter,derkje',@value = @button23 OUT,@startkey=5 --,@keyprefix=N'Alt+'\n\nEXEC sp_api_modal_button @name='buttongeert',@value = 'Tralalala', @valueout = @buttongeert OUT ,@class='btn-danger',@key='Enter'\n\n\nEXEC sp_api_modal_text @button23\n--RETURN\n*/\n\nSELECT TOP 5 id, Code, CompanyName,invoiceEmail,Aantal = CAST(NULL as decimal(18,4)) INTO #modalupdate FROM xCompany ORDER BY 2\n--INSERT #modalupdate DEFAULT VALUES --maak evt. een nieuw record\nEXEC sp_api_modal_table_update @tmptable = N'#modalupdate',@addnew=2\n\n-- hier heb je bijgewerkte data\nDECLARE @button1 nvarchar(128),@button_text1 nvarchar(128) = 'Opslaan'\nEXEC sp_api_modal_button @name='button1',@value = @button_text1, @valueout = @button1 OUT ,@class='btn-danger',@key='Enter'\nDECLARE @code nvarchar(100)= (SELECT TOP 1 code from #modalupdate ORDER BY code DESC )\nEXEC sp_api_modal_text @code\nEXEC sp_api_modal_text N'Result:',N'h4 text-muted'\nEXEC sp_api_modal_table @tmptable = N'#modalupdate'\nRETURN\n--cursortje\nDECLARE @compid int\n\t\t,@cCode nvarchar(12)\n\t\t,@cCompanyName nvarchar(50)\n\t\tDECLARE @cursor_xCompany CURSOR\n\tSET @cursor_xCompany = CURSOR LOCAL FAST_FORWARD FOR\nselect id, Code, CompanyName from #modalupdate\n\tOPEN @cursor_xCompany;\n\tFETCH NEXT FROM @cursor_xCompany INTO\n\t\t@compid\n\t\t,@cCode\n\t\t,@cCompanyName\n\t\t\n\tWHILE @@FETCH_STATUS = 0\n\t\tBEGIN\n\t\t\t\n\t\t\tupdate xCompany set code=@cCode, CompanyName=@cCompanyname where id=@compid\n\t\t\t\n\t\t\tFETCH NEXT FROM @cursor_xCompany INTO\n\t\t\t\t@compid\n\t\t\t\t,@cCode\n\t\t\t\t,@cCompanyName\n\t\t\t\n\t\tEND\n\tCLOSE @cursor_xCompany;\n\tDEALLOCATE @cursor_xCompany;\n\n\n",
                    "action_id": 473,
                    "action_name": "table_update",
                    "source_table": "api_card_actions"
                },
                {
                    "sql_source": "DECLARE @company_id nvarchar(32),@Countercompany nvarchar(32),@button nvarchar(128),@button2 nvarchar(128),@new_id nvarchar(32)\n,@goto nvarchar(2000),@search nvarchar(2000), @location_id nvarchar(32), @reducer nvarchar(max), @date nvarchar(128)\n,@LFCTR_Amount nvarchar(128),@Amount nvarchar(128), @Transportinfo nvarchar(32)\n,@button1 nvarchar(128) --= N'Set Pallets'\n--\tEXEC sp_api_modal_modal @class=N'w-100'\n\n\nSELECT \n\tid\n\t,[CTR_ID] = [CTR_ID]\n\t,[Bedrijf ] = (SELECT CONCAT([xCompany].[Code],'-',CompanyName) FROM [xCompany] WHERE [id] = (SELECT [xlandfreight].[Counterparty_ID] from [xLandfreight] where id = [XLFCTR].[LF_ID]))\n\t,[LFCTR_Amount] = [LFCTR_Amount]\n\t,[Amount] = (SELECT [Q_xTransactionDetail].[Amount] FROM [Q_xTransactionDetail] where [id] = (select [xLFCTR].[CTR_ID]))\n\tINTO #modalupdate\nFROM xLFCTR WHERE id = @id\nEXEC sp_api_modal_table_update @tmptable = N'#modalupdate',@focusx = 1,@focusy = 1\n\nDECLARE @button_text1 nvarchar(128) = 'Opslaan'\nEXEC sp_api_modal_button @name='button1',@value = @button_text1, @valueout = @button1 OUT ,@class='btn-primary',@key='Enter'\nIF @button1 IS NOT NULL\n\tBEGIN\n\n\t\tDECLARE @lfctrid int\n\t\tDECLARE @CTR_ID int\n\t\tDECLARE @cursor_xLFCTR CURSOR\n\t\tSET @cursor_xLFCTR = CURSOR LOCAL FAST_FORWARD FOR SELECT id, CTR_ID, LFCTR_Amount, Amount FROM #modalupdate\n\t\tOPEN @cursor_xLFCTR;\n\t\tFETCH NEXT FROM @cursor_xLFCTR INTO @lfctrid,@CTR_ID,@LFCTR_Amount,@Amount\n\t\tWHILE @@FETCH_STATUS = 0\n\t\t\tBEGIN\n\t\t\t\tEXEC sp_api_modal_post 'xlfctr','LFCTR_Amount',@LFCTR_Amount,@lfctrid\n\t\t\t\tEXEC sp_api_modal_post 'ctr2','Amount',@Amount,@CTR_ID\n\t\t\t\tEXEC sp_api_modal_save 'xlfctr',@lfctrid\n\t\t\t\tEXEC sp_api_modal_save 'ctr2',@CTR_ID\n\t\t\t\tFETCH NEXT FROM @cursor_xLFCTR INTO @lfctrid,@CTR_ID,@LFCTR_Amount,@Amount\n\t\t\tEND\n\t\tCLOSE @cursor_xLFCTR;\n\t\tDEALLOCATE @cursor_xLFCTR;\n\t\tEXEC sp_api_modal_clear\n\tEND\nRETURN\n/*\nSELECT TOP 1 @Euro = Euro, @Blok = Blok FROM xLandfreight WHERE Transactionheader_ID = @id\n\n\tEXEC sp_api_modal_text 'Aantal Blok:','text-primary font-weight-bold h4' --display-4 text-center\n\tEXEC sp_api_modal_input @name='Blok',@value = @Blok OUT,@class='w-25 mt-3'\n\tEXEC sp_api_modal_text 'Aantal Euro:','text-primary font-weight-bold h4' --display-4 text-center\n\tEXEC sp_api_modal_input @name='Euro',@value = @Euro OUT,@class='w-25 mt-3'\n\tEXEC sp_api_modal_text 'Kies een optie:','text-primary font-weight-bold h4' --display-4 text-center\n\tEXEC sp_api_modal_button @name='button',@value=@button1,@valueout = @button OUT,@key='Enter'\n\nIF @button = @button1\n\tBEGIN\n\t\tDECLARE @lfid int\n\t\t\tDECLARE @cursor_xLandfreight CURSOR\n\t\t\tSET @cursor_xLandfreight = CURSOR LOCAL FAST_FORWARD FOR SELECT id FROM xLandfreight WHERE Transactionheader_ID = @id\n\t\t\tOPEN @cursor_xLandfreight;\n\t\t\tFETCH NEXT FROM @cursor_xLandfreight INTO @lfid\n\t\t\tWHILE @@FETCH_STATUS = 0\n\t\t\t\tBEGIN\n\t\t\t\t\tEXEC sp_api_modal_post 'xlandfreight','Blok',@Blok,@lfid\n\t\t\t\t\tEXEC sp_api_modal_post 'xlandfreight','Euro',@Euro,@lfid\n\t\t\t\t\tEXEC sp_api_modal_save 'xlandfreight',@lfid\n\t\t\t\t\tFETCH NEXT FROM @cursor_xLandfreight INTO @lfid\n\t\t\t\tEND\n\t\t\tCLOSE @cursor_xLandfreight;\n\t\t\tDEALLOCATE @cursor_xLandfreight;\n\tEND\n\nSELECT Bedrijf = (SELECT [xCompany].[Code] FROM [xCompany] WHERE [id] = [xlandfreight].[Counterparty_ID])\n\t,Naam = (SELECT [xCompany].[CompanyName] FROM [xCompany] WHERE [id] = [xlandfreight].[Counterparty_ID])\n\t--,Palcalc = (SELECT [xLandfreight].[lft_PalCalc] FROM [xLandfreight] WHERE [Transactionheader_ID] = @id)\n\t,[Order] = (SELECT [xtransactionheader].[id] FROM [xtransactionheader] WHERE [id] = @id)\n\t, Blok, Euro INTO #tmptable FROM xLandfreight WHERE Transactionheader_ID = @id\nEXEC sp_api_modal_table  @tmptable = '#tmptable'\n/*\nSET @reducer = N'Transport_ID = ' + @id\nEXEC sp_api_modal_table @card_name = N'uitgaande_pallets',@reducer= @reducer\n*/\nRETURN\n\n*/",
                    "action_id": 496,
                    "action_name": "ChangeAmount",
                    "source_table": "api_card_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_modal_text",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@text",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@text n"
                },
                {
                    "name": "@class",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "''",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@class n"
                },
                {
                    "name": "@translate",
                    "type_from_sys": "bit",
                    "type_from_def": "B",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@translate B"
                },
                {
                    "name": "@highlight",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@highlight n"
                },
                {
                    "name": "@inline",
                    "type_from_sys": "bit",
                    "type_from_def": "B",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@inline B"
                },
                {
                    "name": "@print",
                    "type_from_sys": "bit",
                    "type_from_def": "B",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@print B"
                },
                {
                    "name": "@printonly",
                    "type_from_sys": "bit",
                    "type_from_def": "B",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 7,
                    "full_declaration_from_def": "@printonly B"
                },
                {
                    "name": "@markdown",
                    "type_from_sys": "bit",
                    "type_from_def": "B",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 8,
                    "full_declaration_from_def": "@markdown B"
                },
                {
                    "name": "@use_placeholder",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 9,
                    "full_declaration_from_def": "@use_placeholder n"
                },
                {
                    "name": "@language_context",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 10,
                    "full_declaration_from_def": "@language_context n"
                },
                {
                    "name": "@pre_wrap",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "1",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 11,
                    "full_declaration_from_def": "@pre_wrap b"
                }
            ],
            "embedded_example": "EXEC sp_api_modal_text N'Header',N'h1' --\r\n\t--,@class = 'code'\r\n\t--,@translate = 0 --when @translate = 1 text cannot be longer then 512 bytes\r\n\t--,@highlight = N'these,words,are,highlighted'\r\n\t--,@inline = 0\r\n\t--,@print = 0 -- 1 = also on paper/pdf\r\n\t--,@printonly = 0 -- 1 = only on paper/pdf\r\n\t--,@markdown = 0 --see: https://commonmark.org/help/\r\n\t--,@use_placeholder = NULL\r\n\t--,@language_context = NULL -- defaults to 'modal'\r\n\t--,@pre_wrap = 1 -- (default) Als @pre_wrap = 1, wordt de tekst weergegeven met behoud van alle originele spaties, tabs en regelafbrekingen, en zal automatisch worden afgebroken wanneer het de maximale breedte bereikt.",
            "embedded_description": null,
            "co_occurrence_stats": {
                "dbo.sp_api_modal_table": 103,
                "dbo.sp_api_modal_csv": 19,
                "dbo.sp_api_modal_input": 102,
                "dbo.sp_api_modal_date": 57,
                "dbo.sp_api_modal_button": 172,
                "dbo.sp_api_toast": 60,
                "dbo.sp_api_modal_route": 7,
                "dbo.sp_api_modal_clear": 20,
                "dbo.sp_api_goto": 25,
                "dbo.sp_api_modal_url": 3,
                "dbo.sp_api_add_sql_task": 3,
                "dbo.sp_api_report_download_base64": 2,
                "dbo.sp_api_modal_alert": 26,
                "dbo.sp_api_modal_date_from_to": 22,
                "dbo.sp_api_modal_select": 39,
                "dbo.sp_api_modal_modal": 39,
                "dbo.sp_api_modal_print": 16,
                "dbo.sp_api_modal_select_all": 1,
                "dbo.sp_api_modal_select_all_clear": 1,
                "dbo.sp_api_modal_field_insert": 1,
                "dbo.sp_api_modal_select_curly": 2,
                "dbo.sp_api_modal_download": 3,
                "dbo.sp_api_card_curly_replace": 2,
                "dbo.ABCDATE": 17,
                "dbo.sp_api_modal_select_table": 8,
                "dbo.sp_api_report_generate": 2,
                "dbo.abcLeft": 1,
                "dbo.sp_api_modal_table_update": 15,
                "dbo.hasRole": 4,
                "dbo.sp_api_modal_choose": 15,
                "dbo.sp_api_modal_save": 6,
                "dbo.sp_api_modal_post": 7,
                "dbo.sp_api_modal_download_report": 1,
                "dbo.sp_api_report_server_download": 1,
                "dbo.sp_api_modal_input_decimal": 7,
                "dbo.sp_api_broker_request": 1,
                "dbo.ABCWEEKNR": 3,
                "dbo.sp_api_modal_value": 2,
                "dbo.sp_api_modal_menu_user": 1,
                "dbo.sp_api_modal_action": 1,
                "dbo.sp_api_modal_html": 3,
                "dbo.sp_sys_admin_main_menu": 1,
                "dbo.sp_api_populate_card_views": 1,
                "dbo.sp_api_populate_card": 1,
                "dbo.sp_api_modal_input_calculator": 1,
                "dbo.sp_api_email": 6,
                "dbo.sp_api_push_bullet": 1,
                "dbo.sp_api_modal_scanner": 2,
                "dbo.sp_sys_file_upload_base64": 1,
                "dbo.sp_api_modal_qr_scanner": 1,
                "dbo.sp_api_modal_restart": 2,
                "dbo.sp_api_modal_values_clear": 1,
                "dbo.sp_api_modal_get_value": 3,
                "dbo.sp_api_modal_choose_list": 1
            },
            "real_usage_examples": [
                {
                    "sql_source": "--RH210215 BEZIG DOWNLOAD ALS CSV ER BIJ.. lukt nofg niet..\nDECLARE @date nvarchar(128),@date2 nvarchar(128),@button nvarchar(128),@button2 nvarchar(128),@companyname nvarchar(128), @FileName nvarchar(128)\nset @date = dbo.workDate()\nset @date2 = dbo.workDate()\nSET @companyname = (select CompanyName from xcompany where id = @id)\nset @Filename=concat(@Companyname,'.csv')\n/*EXEC sp_api_modal_text 'Zoek op transport bedrijf'\nEXEC sp_api_modal_input @name='Transporteur',@value = @TransComp OUT,@focus=1,@select=1 -- zoek veld\n*/\nEXEC sp_api_modal_text 'Van:'\nEXEC sp_api_modal_date @name='Date',@value = @date OUT,@class='w-24',@focus=1,@select=1  -- zoek veld\nEXEC sp_api_modal_text 'Tot en met:'\nEXEC sp_api_modal_date @name='Date2',@value = @date2 OUT,@class='w-24' -- zoek veld\n--SET @date2 = CONCAT(@date2,' 23:59:59.999')\nSET @button = 'Intrastat_Melding'\nEXEC sp_api_modal_button @name='button',@value = 'Intrastat_Melding',@valueout = @button OUT,@class = 'btn-primary',@key = 'Enter'\nEXEC sp_api_modal_button @name='button',@value = 'Excel_CSV',@valueout = @button OUT,@class = 'btn-primary',@key = 'F5'\nEXEC sp_api_modal_text @companyname,N'h4 text-muted',@printonly=1\nEXEC sp_api_modal_print\n\nIF @button =  'Intrastat_Melding'\nBEGIN\nSELECT distinct [QUANTITY@] = sum(QUANTITY@), [ARTICLE~col-sm-5] = ARTICLE, LAND, INTRASTAT_CODE, [NETT_WEIGHT@] = sum(NETT_WEIGHT@), ISO, [AMOUNT@] = sum(AMOUNT@)\nINTO #Intrastat_Melding\nFROM          RV_INTRASTAT_MELDING\nWHERE\t\t(INTRASTAT_CODE is not NULL) AND (CompanyID = @id) AND (TransactionDate BETWEEN @date AND @date2) AND (THTDT = 2)\nGROUP BY ARTICLE,LAND,INTRASTAT_CODE,ISO\nEXEC sp_api_modal_table @tmptable=N'#Intrastat_Melding',@orderby=N'ORDER BY 2 ASC',@print=1\n\nEND \n\t\n\nIF @button =  'Excel_CSV'\nBEGIN\nSELECT distinct [QUANTITY] = sum(QUANTITY@), [ARTICLE] = ARTICLE, LAND, INTRASTAT_CODE, [NETT_WEIGHT] = sum(NETT_WEIGHT@), ISO, [AMOUNT] = sum(AMOUNT@)\nINTO #Intrastat_CSV\nFROM          RV_INTRASTAT_MELDING\nWHERE\t\t(INTRASTAT_CODE is not NULL) AND (CompanyID = @id) AND (TransactionDate BETWEEN @date AND @date2) AND (THTDT = 2)\nGROUP BY ARTICLE,LAND,INTRASTAT_CODE,ISO\n--EXEC sp_api_modal_table @tmptable=N'#Intrastat_CSV',@print=1\n--EXEC sp_api_modal_csv\t@tmptable = '#Intrastat_CSV'\t,@filename = @filename\t,@sep = ';'\n\n--EXEC sp_api_modal_table @tmptable=N'#Intrastat_CSV'\nEXEC sp_api_modal_csv @tmptable=N'#Intrastat_CSV',@ansi =1,@filename=@FileName\n\nEND \n\n\n\n\n\n\n\n",
                    "action_id": 1,
                    "action_name": "INTRASTAT_MELDING",
                    "source_table": "api_card_actions"
                },
                {
                    "sql_source": "DECLARE @MES NVARCHAR(200)\r\nSET @MES=concat(N'Verloop van de koers ',{[currency].CodeISO})\r\nif @MES IS NULL SET @MES=concat(N'Verloop van de waarde ''',{[xvalrate].code},''' voor ',(select companyname from xCompany where id={[xvalrate].contextID}))\r\nEXEC sp_api_modal_text @text = @MES,@class = 'h3 text-muted'\r\nSELECT TOP 100 code as [code*],startdate, enddate,f as [koers] INTO #table1 FROM xValrate where code={[xvalrate].code} and contextID={[xvalrate].contextID}\r\nEXEC sp_api_modal_table @tmptable=N'#table1'\r\n",
                    "action_id": 4,
                    "action_name": "koerslijst",
                    "source_table": "api_card_actions"
                },
                {
                    "sql_source": "DECLARE @clone_id INT, @sure nvarchar(255), @text nvarchar(255)\r\nEXEC sp_api_modal_get N'my_last_clone_id',@text OUT\r\nEXEC sp_api_modal_text @text,'h1'\r\nEXEC sp_api_modal_text @basetable,'h1'\r\nEXEC sp_api_modal_button @name='Sure',@value = 'Clone? (Esc=Nee)', @valueout = @sure OUT,@class='btn-danger',@key='Enter'\r\nIF @sure is not null\r\n\tBEGIN\r\n\t\tEXEC sp_api_modal_clear\r\n\t\t--EXEC @clone_id = sp_clone_record @basetable,@ids\r\n\t\tEXEC @clone_id = sp_clone_record @basetable,@ids,N'size=''EDIT'', stock=0'\r\n\t\tSET @path = @path+'/'+dbo.nv(@clone_id)\r\n\t\tEXEC sp_api_toast @text = N'Record cloned'\r\n\t\tEXEC sp_api_modal_route @name = N'Ga met Enter naar de kopie en vul de nieuwe maat in',@pathname=@path,@search='?focus=7377' ,@class = N'btn-danger' ,@key='Enter'\r\n\tEND\r\n",
                    "action_id": 6,
                    "action_name": "kopieer-artikel",
                    "source_table": "api_card_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_modal_to_pdf",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@filename",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 4096,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@filename n"
                },
                {
                    "name": "@context",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@context n"
                },
                {
                    "name": "@context_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@context_id i"
                },
                {
                    "name": "@category",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@category n"
                },
                {
                    "name": "@api_files_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@api_files_id i"
                },
                {
                    "name": "@button_text",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "N'Save as PDF'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@button_text n"
                },
                {
                    "name": "@button_class",
                    "type_from_sys": "nvarchar",
                    "type_from_def": null,
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "N'btn-secondary'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 7,
                    "full_declaration_from_def": null
                },
                {
                    "name": "@button_key",
                    "type_from_sys": "nvarchar",
                    "type_from_def": null,
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "N'Ctrl+S'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 8,
                    "full_declaration_from_def": null
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_modal_url",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@url",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@url n"
                },
                {
                    "name": "@is_download",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@is_download b"
                }
            ],
            "embedded_example": "EXEC sp_api_modal_url N'https://tracy.nu' --\r\n\t,@is_download = 1",
            "embedded_description": null,
            "co_occurrence_stats": {
                "dbo.sp_api_add_sql_task": 2,
                "dbo.sp_api_modal_text": 3,
                "dbo.sp_api_modal_button": 3,
                "dbo.sp_api_report_download_base64": 2
            },
            "real_usage_examples": [
                {
                    "sql_source": "\nIF @id<>@ids --BULK naar Exact\n\tBEGIN\n\t\tDECLARE @cursor CURSOR,@idval INT,@count int = 0,@seconds int = 0\n\t\tSET @cursor = CURSOR LOCAL FAST_FORWARD FOR SELECT value FROM string_split(@ids,',')\n\t\tOPEN @cursor;\n\t\tFETCH NEXT FROM @cursor INTO @idval\n\t\tWHILE @@FETCH_STATUS = 0\n\t\t\tBEGIN\n\t\t\t\tSET @seconds+=6\n\t\t\t\tSET @subject = CONCAT(\n\t\t\t\t\t(SELECT [xCompany].[Code] FROM [xCompany] WHERE [id] = (SELECT [Q_xInvoice].[fromCompany_ID] FROM [Q_xInvoice] WHERE [id] = @idval))\n\t\t\t\t\t,' - ',(SELECT [Q_xInvoice].[dateInvoice] FROM [Q_xInvoice] WHERE [id] = @idval)\n\t\t\t\t\t,' - ',(SELECT [Q_xInvoice].[calcLegal] FROM [Q_xInvoice] WHERE [id] = @idval)\n\t\t\t\t\t)\n\t\t\t\tSET @sql = CONCAT(N'DECLARE @base64 nvarchar(max),@filename nvarchar(4000)\n', --EXEC sp_api_report_download_base64 @context = ''invoice_out'', @context_id = ',@idval,' , @filename =  @filename OUT, @base64 =  @base64 OUT\n'BEGIN TRY\n\tEXEC @main_db.dbo.sp_iu_finance_invoice ',@idval,',@groupbycostcodes = 1\nEND TRY BEGIN CATCH\n\tUPDATE xInvoice SET status = ''Exact Error'',statusHistory = ERROR_MESSAGE() WHERE id = ',@idval,'\nEND CATCH') -- = @filename,@subject = ',dbo.escape_string(@subject),',@base64 = @base64')\n\t\t\t\tSET @subject = N'To Exact: ' + @subject\n\t\t\t\tEXEC sp_api_add_sql_task @sql=@sql,@description=@subject,@seconds = @seconds\n\t\t\t\tUPDATE xInvoice SET status='Sending to Exact' WHERE id = @idval\n\t\t\t\tSET @count+=1\n\t\t\t\tFETCH NEXT FROM @cursor INTO @idval\n\t\t\tEND\n\t\tCLOSE @cursor;\n\t\tDEALLOCATE @cursor;\n\t\texecute sp_api_modal_clear\n\t\tIF @count > 0 EXEC sp_api_toast N'Verzenden is ingepland, F5 voor refresh'\n\t\tEXEC sp_api_modal_select_all_clear\n\t\tRETURN\n\tEND\n\nBEGIN TRY\n\tEXEC @main_db.dbo.sp_iu_finance_invoice @id, @groupbycostcodes = 1\nEND TRY BEGIN CATCH\n\tDECLARE @text nvarchar(max) = ERROR_MESSAGE(),@ERROR_SEVERITY int = ERROR_SEVERITY()\n\tIF @ERROR_SEVERITY = 17\n\t\tBEGIN\n\t\t\tEXEC sp_api_modal_url @text\n\t\t\tRETURN\n\t\tEND\n\tEXEC sp_api_modal_text @text\n\tDECLARE @valueout nvarchar(128)\n\tEXEC sp_api_modal_button @name='Retry',@value = 'Retry', @valueout = @valueout OUT\n\t\t,@class='btn-primary',@key='Enter'\nEND CATCH",
                    "action_id": 28,
                    "action_name": "Naar ExactOnline",
                    "source_table": "api_card_actions"
                },
                {
                    "sql_source": "\nIF @id<>@ids --BULK naar Exact\n\tBEGIN\n\t\tDECLARE @cursor CURSOR,@idval INT,@count int = 0,@seconds int = 0\n\t\tSET @cursor = CURSOR LOCAL FAST_FORWARD FOR SELECT value FROM string_split(@ids,',')\n\t\tOPEN @cursor;\n\t\tFETCH NEXT FROM @cursor INTO @idval\n\t\tWHILE @@FETCH_STATUS = 0\n\t\t\tBEGIN\n\t\t\t\tSET @seconds+=6\n\t\t\t\tSET @subject = CONCAT(\n\t\t\t\t\t(SELECT [xCompany].[Code] FROM [xCompany] WHERE [id] = (SELECT [Q_xInvoice].[toCompany_ID] FROM [Q_xInvoice] WHERE [id] = @idval))\n\t\t\t\t\t,' - ',(SELECT [Q_xInvoice].[dateInvoice] FROM [Q_xInvoice] WHERE [id] = @idval)\n\t\t\t\t\t,' - ',(SELECT [Q_xInvoice].[calcLegal] FROM [Q_xInvoice] WHERE [id] = @idval)\n\t\t\t\t\t)\n\t\t\t\tSET @sql = CONCAT(N'DECLARE @base64 nvarchar(max),@filename nvarchar(4000)\n', --EXEC sp_api_report_download_base64 @context = ''invoice_out'', @context_id = ',@idval,' , @filename =  @filename OUT, @base64 =  @base64 OUT\n'BEGIN TRY\n\tEXEC @main_db.dbo.sp_iu_finance_invoice ',@idval,',@groupbycostcodes = 1\nEND TRY BEGIN CATCH\n\tUPDATE xInvoice SET status = ''Exact Error'',statusHistory = ERROR_MESSAGE() WHERE id = ',@idval,'\nEND CATCH') -- = @filename,@subject = ',dbo.escape_string(@subject),',@base64 = @base64')\n\t\t\t\tSET @subject = N'To Exact: ' + @subject\n\t\t\t\tEXEC sp_api_add_sql_task @sql=@sql,@description=@subject,@seconds = @seconds\n\t\t\t\tUPDATE xInvoice SET status='Sending to Exact' WHERE id = @idval\n\t\t\t\tSET @count+=1\n\t\t\t\tFETCH NEXT FROM @cursor INTO @idval\n\t\t\tEND\n\t\tCLOSE @cursor;\n\t\tDEALLOCATE @cursor;\n\t\texecute sp_api_modal_clear\n\t\tIF @count > 0 EXEC sp_api_toast N'Verzenden is ingepland, F5 voor refresh'\n\t\tEXEC sp_api_modal_select_all_clear\n\t\tRETURN\n\tEND\n\nBEGIN TRY\n\tEXEC @main_db.dbo.sp_iu_finance_invoice @id, @groupbycostcodes = 1\nEND TRY BEGIN CATCH\n\tDECLARE @text nvarchar(max) = ERROR_MESSAGE(),@ERROR_SEVERITY int = ERROR_SEVERITY()\n\tIF @ERROR_SEVERITY = 17\n\t\tBEGIN\n\t\t\tEXEC sp_api_modal_url @text\n\t\t\tRETURN\n\t\tEND\n\tEXEC sp_api_modal_text @text\n\tDECLARE @valueout nvarchar(128)\n\tEXEC sp_api_modal_button @name='Retry',@value = 'Retry', @valueout = @valueout OUT\n\t\t,@class='btn-primary',@key='Enter'\nEND CATCH",
                    "action_id": 29,
                    "action_name": "Naar ExactOnline",
                    "source_table": "api_card_actions"
                },
                {
                    "sql_source": "SET @route = {[api_errors].route}\nEXEC sp_api_modal_url @route",
                    "action_id": 1251,
                    "action_name": "Open route",
                    "source_table": "api_card_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_modal_value",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 510,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@name n"
                },
                {
                    "name": "@value",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@value n"
                }
            ],
            "embedded_example": "EXEC sp_api_modal_value @name = '@search',@value = NULL",
            "embedded_description": null,
            "co_occurrence_stats": {
                "dbo.sp_api_modal_save": 1,
                "dbo.sp_api_modal_input": 2,
                "dbo.sp_api_toast": 2,
                "dbo.sp_api_modal_text": 2,
                "dbo.sp_api_modal_route": 1,
                "dbo.sp_api_modal_clear": 2,
                "dbo.sp_api_modal_date": 1,
                "dbo.sp_api_modal_button": 2,
                "dbo.sp_api_modal_post": 1,
                "dbo.sp_api_modal_input_decimal": 1,
                "dbo.sp_api_modal_choose": 2,
                "dbo.sp_api_modal_html": 1,
                "dbo.sp_api_modal_alert": 1,
                "dbo.sp_api_email": 1,
                "dbo.sp_api_modal_table": 1,
                "dbo.sp_api_modal_values_clear": 1,
                "dbo.sp_api_modal_restart": 1,
                "dbo.sp_api_modal_get_value": 1,
                "dbo.sp_api_modal_choose_list": 1
            },
            "real_usage_examples": [
                {
                    "sql_source": "\nDECLARE @hclass nvarchar(255) = N'h4 pt-4'\n\t,@subclass nvarchar(255) = N'text-muted blockquote mt-4'\n\t,@codeclass nvarchar(255) = N'code pre mb-2'\n\t,@valueout nvarchar(255)\n\nEXEC sp_api_modal_text 'Action Help','h3 text-muted'\n\nEXEC sp_api_modal_text 'Performance tips',@hclass\nEXEC sp_api_modal_text 'To disable triggers on temp inserts/updates:',@subclass\nEXEC sp_api_modal_text 'IF TRY_CAST(SESSION_CONTEXT(N''api_save_confirmed'') as INT) = 0 RETURN',@codeclass\n\nEXEC sp_api_modal_text 'Choose option',@hclass\n\n\n\n\nEXEC sp_api_modal_text 'Choose option',@hclass\n\n\tEXEC sp_api_modal_text N'EXEC sp_api_modal_choose @list = N''Predefined,Custom,Later, Maybe'',@value = @button_choose OUT,@startkey=NULL',@codeclass\n\n\n\tEXEC sp_api_modal_text @text = N'Kies een optie met F-toetsen (@startkey=3)',@class = N'm-4 text-muted'\n\tDECLARE @button_choose nvarchar(128)\n\tEXEC sp_api_modal_choose @list = N'Predefined,Custom,wert,wertr,wywer,tqyer,twertq,ewrt',@value = @button_choose OUT,@startkey=3\n\tEXEC sp_api_modal_text @button_choose\n\n\tEXEC sp_api_modal_text @text = N'Kies een optie met beginletter-toetsen (spatie = geen, @startkey=NULL)',@class = N'm-4 text-muted'\n\tDECLARE @button_choose2 nvarchar(128)\n\tEXEC sp_api_modal_choose @list = N'Predefined,Custom, wert,wertr, wywer,tqyer, twertq,ewrt2',@value = @button_choose2 OUT,@startkey=NULL\n\tEXEC sp_api_modal_text @button_choose2\n\n\nEXEC sp_api_modal_text 'pathname',@hclass\n\nEXEC sp_api_modal_text 'go to url:',@subclass\nEXEC sp_api_modal_text '{\"pathname\":\"/verkoop\"}',@codeclass\n\nEXEC sp_api_modal_text 'add to current url with optional {selectedId}:',@subclass\nEXEC sp_api_modal_text '{\"addto\":\"{selectedId}/CTR\"}',@codeclass\n\nEXEC sp_api_modal_text 'stored_procedure',@hclass\n\nEXEC sp_api_modal_text 'modal text:',@subclass\nEXEC sp_api_modal_text N'EXEC sp_api_modal_text @text = N''This is a success!''\n\t,@class = N''alert alert-primary'', @translate = 1',@codeclass\nEXEC sp_api_modal_text @text = N'This is a success!',@class = N'alert alert-primary', @translate = 1\n\nEXEC sp_api_modal_text 'modal input:',@subclass\nEXEC sp_api_modal_text N'EXEC sp_api_modal_input @name=''Naam'',@max=5, @value= @valueout OUT,@focus=1',@codeclass\nEXEC sp_api_modal_input @name='Naam',@max=5, @value= @valueout OUT,@focus=0\n\nEXEC sp_api_modal_text 'modal input decimal:',@subclass\nEXEC sp_api_modal_text N'EXEC sp_api_modal_input_decimal @name=''Percentage'',@value= @Percentage OUT,@focus=1 [,@precision=18,@scale=2]',@codeclass\nDECLARE @Percentage decimal(18,2)\nEXEC sp_api_modal_input_decimal @name='Percentage', @value= @Percentage OUT\n\n\n\nEXEC sp_api_modal_text 'modal date:',@subclass\nEXEC sp_api_modal_text N'EXEC sp_api_modal_date @name=''Datum''@value= @valueout OUT,@focus=1',@codeclass\nEXEC sp_api_modal_date @name='Datum', @value= @valueout OUT,@focus=0,@class='w-24'\n\n\nEXEC sp_api_modal_text 'modal button:',@subclass\nEXEC sp_api_modal_text N'DECLARE @button1 nvarchar(128),@button_text1 nvarchar(128) = ''Opslaan''\nEXEC sp_api_modal_button @name=''button1'',@value = @button_text1, @valueout = @button1 OUT ,@class=''btn-danger'',@key=''Enter''',@codeclass\nDECLARE @button1 nvarchar(128),@button_text1 nvarchar(128) = 'Opslaan'\nEXEC sp_api_modal_button @name='button1',@value = 'Opslaan', @valueout = @valueout OUT,@class='btn-danger',@key='Enter'\nIF @valueout = 'Opslaan'\n\tBEGIN\n\t\tEXEC sp_api_modal_clear\n\t\tEXEC sp_api_statusbar N'HELP F1 - JA gedrukt!' ,'bg-danger col-sm-2 text-truncate',1 --> 1 is rechts\n\t\tRETURN\n\tEND\n\nEXEC sp_api_modal_text 'modal route:',@subclass\nEXEC sp_api_modal_text N'EXEC  sp_api_modal_route @name = N''Verkoop Anaco'',@pathname=N''/verkoop''\n\t,@search =N''?id=2784'' ,@class = N''btn-success'' ,@key = N''F2''',@codeclass\nEXEC  sp_api_modal_route @name = N'Verkoop Anaco',@pathname=N'/verkoop',@search =N'?id=2784' ,@class = N'btn-success' ,@key = N'F2'\n\nEXEC sp_api_modal_text 'modal clear all previous components:',@subclass\nEXEC sp_api_modal_text N'EXEC sp_api_modal_clear',@codeclass\n\nEXEC sp_api_modal_text 'Alert box:',@subclass\nEXEC sp_api_modal_text N'EXEC sp_api_modal_alert N''Give me an alert''',@codeclass\n\nEXEC sp_api_modal_text 'modal get user setting:',@subclass\nEXEC sp_api_modal_text N'EXEC sp_api_modal_get N''my_fake_name'',@naam OUT',@codeclass\n\nEXEC sp_api_modal_text 'modal set user setting:',@subclass\nEXEC sp_api_modal_text N'EXEC sp_api_modal_set N''my_fake_name'',N''Jack van Vliet''',@codeclass\n\nEXEC sp_api_modal_text 'modal set modal value:',@subclass\nEXEC sp_api_modal_text N'EXEC sp_api_modal_value @name,NULL',@codeclass\n\n\nEXEC sp_api_modal_text 'modal set delete user setting:',@subclass\nEXEC sp_api_modal_text N'EXEC sp_api_modal_set N''my_fake_name'',NULL',@codeclass\n\nEXEC sp_api_modal_text 'modal set delete user setting:',@subclass\nEXEC sp_api_modal_text N'EXEC sp_api_modal_set N''my_fake_name'',NULL',@codeclass\n\nEXEC sp_api_modal_text 'Toast message:',@subclass\nEXEC sp_api_modal_text N'EXEC sp_api_toast @text = N''Toast message Toast message !!! ???''\n,@class=N''bg-danger text-white'',@translate=1,@seconds=2',@codeclass\nEXEC sp_api_toast @text = N'Toast message Toast message !!! ???',@class=N'bg-danger text-white',@translate=1,@seconds=2\n\nEXEC sp_api_modal_text 'Send dispatch to modal, to dispatch something on the client:',@subclass\nEXEC sp_api_modal_text N'EXEC sp_api_modal_dispatch N''{\"type\":\"stored_procedure\",\"name\":\"Choose columns\"}''',@codeclass\n\nEXEC sp_api_modal_text 'modal post and save to card example:',@subclass\nEXEC sp_api_modal_text N'IF TRY_CAST(@prijs as decimal) > 0 AND TRY_CAST(@aantal as int) > 0\n\tBEGIN\n\t\tEXEC sp_api_modal_post @card=''verkocht'',@column=''aantal'',@value=@aantal\n\t\tEXEC sp_api_modal_post @card=''verkocht'',@column=''prijs'',@value=@prijs\n\t\tEXEC sp_api_modal_post @card=''verkocht'',@column=''prosoort_id'',@value=@id\n\t\tEXEC sp_api_modal_save @card=''verkocht''\n\t\tEXEC sp_api_modal_clear\n\tEND',@codeclass\n\nEXEC sp_api_modal_text 'Push to statusbar:',@subclass\nEXEC sp_api_modal_text N'EXEC sp_api_statusbar N''HELP F1'' ,''bg-danger col-sm-1 text-truncate'',1 --> 1 is rechts',@codeclass\n\nEXEC sp_api_statusbar N'HELP F1' ,'bg-danger col-sm-1 text-truncate',0 --> 1 is rechts\n\nEXEC sp_api_modal_text 'Cursor for @ids:',@subclass\nEXEC sp_api_modal_text N'DECLARE @cursor CURSOR,@idval INT\nSET @cursor = CURSOR LOCAL FAST_FORWARD FOR SELECT value FROM string_split(@ids,'','')\nOPEN @cursor;\nFETCH NEXT FROM @cursor INTO @idval\nWHILE @@FETCH_STATUS = 0\n\tBEGIN\n\t\tEXEC sp_api_modal_text @idval\n\t\tFETCH NEXT FROM @cursor INTO @idval\n\tEND\nCLOSE @cursor;\nDEALLOCATE @cursor;\n',N'code'\n",
                    "action_id": 3,
                    "action_name": "sys_action_help",
                    "source_table": "api_actions"
                },
                {
                    "sql_source": "---------------------------------------------------------------\n-- #qr_action_verwerk_outbound_transport scanner action handler \n-- pre declare: @uuid int, @button_choose nvarchar(max)= null ,@origin nvarchar(1024), @sampleqrscanner nvarchar(max)= null\n-- 230510 uitbreiden met altijd foto's kunnen toevoegen aan outbound transport files\n---------------------------------------------------------------\ndeclare @hTML nvarchar(4000) \ndeclare @link_tracy nvarchar(4000)=NULL\ndeclare @gofoto nvarchar(4000)=concat(N'/wms_out_transport/',@uuid)\ndeclare @pal_id int\nexec sp_api_modal_text @uuid --230706 toon transport_id\nEXEC sp_api_modal_choose @list = N'Conform,Not_Conform,Add_Photo,Barcodes,Pallet_Sample',@value = @button_choose OUT,@startkey=3\nif @button_choose is null return\n\n if @button_choose ='Add_Photo'\n\tbegin\n\t\t--230703 dit stukje is er voor gezet om af te dwingen dat er eerst een geldige SAMPLE wordt gemaakt d.m.v. PALLET LABEL SCAN\n\t\t--230706 aangepast, controleert of er minimaal 1 geldige scan is met container, artikel en w_lot overeenkomst\n\t\tif not exists(select 1 from wms_micro_outbound where transport_id=@uuid) \n\t\t\tbegin --deze outbound is geen micro outbound, dus een normale outbound => dwing af dat er eerst een pallet scan wordt gedaan\n\t\t\t\tif not exists(select * from q_wms_out_samples \n\t\t\t\t\t\t\t\twhere xtransport_id=@uuid \n\t\t\t\t\t\t\t\t\tand out_stock_id in (select xstock_id from q_wms_out_requested where xtransport_id=@uuid) -- zelfde artikel !\n\t\t\t\t\t\t\t\t\tand w_lot_id in(select w_lot_id from q_wms_out_requested where xtransport_id=@uuid) --minimaal zelfde container\n\t\t\t\t\t\t\t\t\tand bl_id in(select bl_id from q_wms_out_requested where xtransport_id=@uuid) --minimaal zelfde BL !\n\n\t\t\t\t\t\t\t) --and info='oke') --TMP !!\n\t\t\t\t\tBEGIN --kennelijk (nog) geen correcte pallet gecand..\n\t\t\t\t\t\texec sp_api_toast N'NO VALIDATION YET; SCAN THE PALLET-LABEL FIRST! (SAMPLE)'\n\t\t\t\t\t\treturn\n\t\t\t\t\tEND\n\t\t\tend\n\n\t\tELSE --het is een micro outbound\n\t\t\tBEGIN\n\t\t\t\texec sp_api_toast N'micro outbound'\n\t\t\tEND\t\n\n\t\t-------------------------------------\n\t\t-- add_document_or_foto\n\t\t-- pre declare @api_files_id,@filename,@trans_out_id\n\t\t-------------------------------------\n\t\t/*\n\t\t(context = 'wms_out_transport' AND context_id = {[wms_out_transport].id})\n\t\tor \n\t\t(context = 'wms_out_transport' AND context_id = {[ffa_transport_out].id})\n\t\tor \n\t\t(context = 'wms_out_transport' AND context_id = {[wms_io].out_transport_id})\n\t\t*/\n\t\tdeclare @api_files_id int\n\t\tdeclare @filename nvarchar(200)\n\t\tdeclare @trans_out_id int\n\t\t\n\t\tset @trans_out_id=@uuid\n\t\t--set @trans_out_id = 1 --@uuid\n\t\tif @trans_out_id is null \n\t\t\tbegin\n\t\t\t\texec sp_api_modal_alert N'Er is geen correcte transport out referentie. (neem evt. contact op met uw consultant)'\n\t\t\t\texec sp_api_modal_clear\n\t\t\t\treturn\n\t\t\tend\n\t\tset @filename=concat('foto_',@main_db.dbo.char_left(@user,'@'),'_',@main_db.dbo.DT_FILENAME(GETDATE()))\n\t\t--exec sp_api_toast @filename\n\t\tEXEC @main_db.dbo.sp_api_modal_file @name = N'@filename', @to_file_context = 'wms_out_transport', @to_file_context_id = @trans_out_id,@filename = @filename\n\t\t\t, @category = 'pallet_foto' ,@resize_max = 2048, @resize_quality = 45,@api_files_id = @api_files_id OUT\n\t\tIF @api_files_id > 0 EXEC sp_api_modal_value N'@filename'\n\t\treturn\n\tend\n \n if @button_choose ='Conform'\n\tbegin\n\t\t--230703 dit stukje is er voor gezet om af te dwingen dat er eerst een geldige SAMPLE wordt gemaakt d.m.v. PALLET LABEL SCAN\n\t\t--230706 aangepast, controleert of er minimaal 1 geldige scan is met container, artikel en w_lot overeenkomst\n\t\tif not exists(select 1 from wms_micro_outbound where transport_id=@uuid) \n\t\t\tbegin --deze outbound is geen micro outbound, dus een normale outbound => dwing af dat er eerst een pallt scan wordt gedaan\n\t\t\t\tif not exists(select * from q_wms_out_samples \n\t\t\t\t\t\t\t\twhere xtransport_id=@uuid \n\t\t\t\t\t\t\t\t\tand out_stock_id in (select xstock_id from q_wms_out_requested where xtransport_id=@uuid) -- zelfde artikel !\n\t\t\t\t\t\t\t\t\tand w_lot_id in(select w_lot_id from q_wms_out_requested where xtransport_id=@uuid) --minimaal zelfde container\n\t\t\t\t\t\t\t\t\tand bl_id in(select bl_id from q_wms_out_requested where xtransport_id=@uuid) --minimaal zelfde BL !\n\n\t\t\t\t\t\t\t) --and info='oke') --TMP !!\n\t\t\t\t\tBEGIN --kennelijk (nog) geen correcte pallet gecand..\n\t\t\t\t\t\texec sp_api_toast N'NO VALIDATION YET; SCAN THE PALLET-LABEL FIRST! (SAMPLE)'\n\t\t\t\t\t\treturn\n\t\t\t\t\tEND\n\t\t\tend\n\n\t\tELSE --het is een micro outbound\n\t\t\tBEGIN\n\t\t\t\texec sp_api_toast N'micro outbound'\n\t\t\tEND\t\n\n\n\t\n\t\tupdate wms_io \n\t\t\tset status='CONFORM' \n\t\t\t\t,conform_user=@USER\t\t--230626\n\t\t\t\t,conform_dt=getdate()\t--230626\n\t\twhere out_transport_id=@uuid and in_out='OUT' --230316 dit kunnen meerdere regels zijn (bij multi-item-outbound)\n\t\tupdate xtransport set completed=1 where id=@uuid\n\t\tset @link_tracy=concat(@origin,N'/wms_out_transport?id=',@uuid,' ') --meegegeven parameter\n\t\tset @html=concat(N'De outbound met referentie ',(select transportinfo from xtransport where id=@uuid),' / ',(select top 1 transport_details from dbo.tr_stuff \nwhere transport_id=@uuid),' is conform verwachting verladen naar de klant. '\n\t\t\t\t\t\t,'<p><a href=\"',@link_tracy,'\" target=_blank>click hier</a>'\n\t\t\t\t\t\t)\n\n\t  \t--PROJECT CALL !!\n  \t\t--230428 GEEN OUTBOUND MAIL MEER NAAR RWS =>    EXEC sp_api_email @to = N'outbound@rwsbv.com',@subject = N'outbound conform & completed....',@body = N'tracy is the best',@html = @html\n\n\n\t\t--voeg evt foto toe\t\t\n--\t\tdeclare @gofoto nvarchar(4000)=concat(N'/wms_out_transport/',@uuid)\n\t\texec sp_api_goto @path=@gofoto\n\n\t\texec sp_api_modal_clear\n\t\treturn\n\tend\n\n\n if @button_choose ='Not_Conform'\n\tbegin\n\t\tDECLARE @opmerking nvarchar(max),@button22 nvarchar(128)\n\t\texec sp_api_modal_text N'What is wrong with this outbound loading?'\n\t\tEXEC sp_api_modal_input @name = '@opmerking', @value = @opmerking OUT --,@inline = 1\n\t\tEXEC sp_api_modal_button @name='@button22',@value = 'Save', @valueout = @button22 OUT,@class='btn-danger',@key='Enter'\n\t\tIF @button22 IS NULL RETURN\n\t\t\n\t\t\n\t\tupdate wms_io set status='NOT CONFORM' where out_transport_id=@uuid and in_out='OUT' --out check extra zekerheid, hoewel er maar 1 id is natuurlijk\n\t\tupdate xtransport set completed=0 where id=@uuid\n\t\tset @link_tracy=concat(@origin,N'/wms_out_transport?id=',@uuid,' ') --meegegeven parameter\n\t\tset @html=concat(N'Er zijn verschillen bij de outbound met referentie ',(select transportinfo from xtransport where id=@uuid),' / ',(select top 1 transport_details from dbo.tr_stuff \nwhere transport_id=@uuid),'. '\n\t\t\t\t\t\t,'<p>De opmerking is :',@opmerking,'<p>'\n\t\t\t\t\t\t,'<p><a href=\"',@link_tracy,'\" target=_blank>click hier</a>'\n\t\t\t\t\t\t)\n\n\t  \t--PROJECT CALL !!\n  \t\t--230428 GEEN OUTBOUND MAIL MEER NAAR RWS =>      \t\tEXEC sp_api_email @to = N'outbound@rwsbv.com',@subject = N'outbound NOT COFORM....',@body = N'tracy is the best',@html = @html\n\n\t\texec sp_api_modal_clear\n\t\treturn\n\tend\n\nif @button_choose ='Pallet_Sample'\n\tbegin\n\t\tEXEC sp_api_modal_qr_scanner @name=N'@sampleqrscanner',@value = @sampleqrscanner OUT\n\t\tIF @sampleqrscanner IS NULL RETURN\n\t\texec sp_api_modal_text @sampleqrscanner\n\t\tIF left(@sampleqrscanner,3) = 'ps:'\n\t\t\tBEGIN\n\t\t\t\tset @pal_id=right(@sampleqrscanner,len(@sampleqrscanner)-3) \n\t\t\t\t--230701 registreer sample\n\t\t\t\texec IINE_wms_out_samples   \n\t\t\t\t\t@user=@user\n    \t\t\t\t,@w_pallet_id =@pal_id\n    \t\t\t\t,@xTransport_id =@uuid\n\n\t\t\t\t\n\t\t\t\tif exists(select * from pallet_status \n\t\t\t\t\t\t\twhere --id=@pal_id\tAND -- ff niet lullig doen als het een andere pallet uit dezelfde container is..\n\t\t\t\t\t\t\t\tout_transport_id=@uuid \n\t\t\t\t\t\t\t\t--and artikel is oke\n\t\t\t\t\t\t)\n\t\t\t\t\tEXEC sp_api_modal_text N'GOED',N'h1'\n\t\t\t\tELSE\n\t\t\t\t\tEXEC sp_api_modal_text N'VERKEERDE PALLET!',N'h1'\n\t\t\t\t\n\t\t\tEND\n\t\tELSE\n\t\t\tBEGIN\n\t\t\t\tEXEC sp_api_modal_text N'SCAN A PALLET LABEL!',N'h1'\n\t\t\t\t--EXEC sp_api_modal_text @sampleqrscanner,N'h1'\n\t\t\t\t\n\t\t\tEND\n\tend\n\nif @button_choose ='Barcodes' --230705 verzamelde codes voor de klant in extene textfile\n\tbegin\n\t\tdeclare @barcodes nvarchar(max)\n\t\t--231017 was:\n\t\t--EXEC sp_api_modal_scanner @barcodes = 1, @value = @barcodes OUT\n\n\t\t--231017 nw\n\t\t\t-- @button_choose_2 nvarchar(max)= null, @button_laser_klaar nvarchar(max)= null\n\t\t\n\t\texec sp_api_modal_text N'Select your \"Scan Device\"'\n\t\tEXEC sp_api_modal_choose @list = N'use_camera,use_laser_scanner',@value = @button_choose_2 OUT, @button_class='secondary'\n\t\tif @button_choose_2 is null RETURN\n\t\tif @button_choose_2 = N'use_camera'\n\t\t\tEXEC sp_api_modal_scanner @barcodes = 1, @value = @barcodes OUT, @video_width= 1200\n\t\tif @button_choose_2 = N'use_laser_scanner'\n\t\tbegin\t\n\t\t\tEXEC sp_api_modal_input @name = '@Pallet_serials', @value = @barcodes OUT ,@type = 'textarea', @focus=1 --,@inline = 1\n\t\t\tEXEC sp_api_modal_button @name='@button_laser_klaar',@value = 'Save Pallet Scans', @valueout = @button_laser_klaar OUT,@class='btn-danger',@key='Enter'\n\t\t\tif @button_laser_klaar is null return\n\t\tend\t\t\n\n\n\n\n\t\tIF NULLIF(@barcodes,'') IS NOT NULL\n\t\t\tBEGIN\n\t\t\t\tset @barcodes=concat('Scanned codes at ',getdate(),char(13),@barcodes,'')\n\t\t\t\tDECLARE @name nvarchar(128) = N'outbound_barcodes.txt'\n\t\t\t\t\t,@base64data nvarchar(max) = dbo.base64encode(CONVERT(varbinary(max),CONVERT(varchar(max),@barcodes)))\n\t\t\t\tEXEC sp_sys_file_upload_base64 @base64data = @base64data,@name = @name\n\t\t\t\t\t,@description = N'Scanned barcodes at outbound'\n\t\t\t\t\t,@mimetype = N'text/plain'\n\t\t\t\t\t,@context = N'wms_out_transport'\n\t\t\t\t\t,@context_id = @uuid\n\t\t\t\t\t,@category = N'extern' --6 (maar in wms is dat 3 dus oppassen met id's!!)\n\n\t\t\t\tEXEC sp_api_modal_clear\n\t\t\tEND \n\tend\t",
                    "action_id": 491,
                    "action_name": "#qr_action_verwerk_outbound_transport",
                    "source_table": "api_actions"
                },
                {
                    "sql_source": "-----------------------------------------------------------\n-- 230127  \n-- mobile_scan; **MENU-ITEM** voer een actie uit op basis van een qr scan\n-- pre declare: @lastname,@button,@qrscanner\n-----------------------------------------------------------\n\nDECLARE @prefix nvarchar(max)\nDECLARE @uuid nvarchar(max)\nEXEC sp_api_modal_text N'Scanner',N'h1'\n--IF --1= 0 AND \n--@qrscanner IS NULL  --na post is dit gevuld\n--\tBEGIN\n\t\t--post direct als hij qr 'ziet'\nEXEC sp_api_modal_qr_scanner N'@qrscanner',@value = @qrscanner OUT, @use_camera=0\n--\t\tRETURN\n--\tEND\n\nSET @prefix = N'w_lot#'\nIF @qrscanner LIKE @prefix+'%'\n\tBEGIN\n\t\t--set @uuid = REPLACE(@qrscanner,@prefix,'')\n\t\tset @uuid=dbo.regex_match(right(@qrscanner,len(@qrscanner)-len(@prefix)),N'[0-z]+')\n\t\t--SET @uuid = 7\n\t\tEXEC #qr_action_loods_bevestiging_inslag @uuid\n\t\tRETURN\n\tEND\n\n--uitgebreid 230219 omdat oude palletstickers ook gelezen moeten kunnen worden\n-- hiermee kunnen de oude palletstickers met volledige url ook gelezen worden; vertaalt zich naar dezelfde functionaliteit als bij ps:<<pallet_id>>\nSET @prefix = concat(@origin,'/inbound/') --N'https://rws.tsql.app/inbound/' -- de palletsticker\nif left(@qrscanner,len(@prefix))=@prefix\n\tbegin \n\t\tdeclare @pallet_label nvarchar(256) = @main_db.dbo.get_url_param_val(@qrscanner,'pallet_label')\n\t\tif @pallet_label > N''\n\t\t\tBEGIN\n--\t\t\t\texecute sp_api_toast N'pallet sticker..'\n\t\t\t\tdeclare @pal_id int = (select id from w_pallet where pallet_label=@pallet_label)\n\t\t\t\tif @pal_id > 0 \n\t\t\t\t\tbegin\n\t\t\t\t\t\tEXEC #qr_action_pallet_sticker @uuid=@pal_id --230219\n\t\t\t\t\tend\n\t\t\t\tif isnull(@pal_id,0)=0\n\t\t\t\t\tbegin\n\t\t\t\t\t\texec sp_api_toast N'GEEN GELDIG PALLET LABEL.'\n\t\t\t\t\tend\t\t\n\t\t\t\tRETURN\n\t\t\tEND\n\tend\t\n--230217 nieuw\nSET @prefix = N'ps:' -- de palletsticker\nIF @qrscanner LIKE @prefix+'%'\n\tBEGIN\n--\t\texecute sp_api_toast N'pallet sticker..'\n\t\t--set @uuid = REPLACE(@qrscanner,@prefix,'')\n\t\tset @uuid=dbo.regex_match(right(@qrscanner,len(@qrscanner)-len(@prefix)),N'[0-z]+')\n\t\tEXEC #qr_action_pallet_sticker @uuid\n\t\tRETURN\n\tEND\n\n\nSET @prefix = N'out_trans#'\nIF @qrscanner LIKE @prefix+'%'\n\tBEGIN\n--\t\tset @uuid = REPLACE(@qrscanner,@prefix,'')\n\t\tset @uuid=dbo.regex_match(right(@qrscanner,len(@qrscanner)-len(@prefix)),N'[0-z]+')\n\n\t\t--SET @uuid = 7\n\t\tEXEC #qr_action_verwerk_outbound_transport @uuid ,@origin =@origin --foto?\n\t\tRETURN\n\tEND\n--EXEC sp_api_modal_qr_scanner N'@qrscanner',@value = @qrscanner OUT\nIF @qrscanner Is NOT NULL\n\tBEGIN\n\t\tEXEC sp_api_modal_text N'Onbekende code',N'h5'\n\t\tEXEC sp_api_modal_text @qrscanner\n\tEND\nEXEC sp_api_modal_value N'@qrscanner'\n/*\n\n\t--@qrscanner:  bonnetje#34535-345234-2356-234-342\nEXEC sp_api_modal_text @qrscanner,N'h5'\nEXEC sp_api_modal_input @name = '@qrscanner', @value = @qrscanner OUT --,@inline = 1\nEXEC sp_api_modal_text 'Doe er wat mee'\nEXEC sp_api_modal_button @name='@button',@value = 'Save', @valueout = @button OUT,@class='btn-danger',@key='Enter'\n--IF @button IS NULL RETURN\n*/",
                    "action_id": 504,
                    "action_name": "Scanner",
                    "source_table": "api_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_modal_values_clear",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@ignore",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@ignore n"
                },
                {
                    "name": "@reset_values",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@reset_values n"
                }
            ],
            "embedded_example": "EXEC sp_api_modal_values_clear -- @ignore='@button,company'",
            "embedded_description": null,
            "co_occurrence_stats": {
                "dbo.sp_api_modal_input": 1,
                "dbo.sp_api_toast": 1,
                "dbo.sp_api_modal_text": 1,
                "dbo.sp_api_modal_html": 1,
                "dbo.sp_api_modal_clear": 1,
                "dbo.sp_api_modal_button": 1,
                "dbo.sp_api_modal_alert": 1,
                "dbo.sp_api_email": 1,
                "dbo.sp_api_modal_table": 1,
                "dbo.sp_api_modal_value": 1,
                "dbo.sp_api_modal_restart": 1,
                "dbo.sp_api_modal_get_value": 1,
                "dbo.sp_api_modal_choose_list": 1,
                "dbo.sp_api_modal_choose": 1
            },
            "real_usage_examples": [
                {
                    "sql_source": "--241213 @GB: let op @origin gebruiken we hier niet.. maar dat is niet het probleem\r\n\r\n-------------------------------------------------------\r\n--\t#qr_action_verwerk_micro_pick_v11\r\n--\tversie met herschikking van gekoppelde miscro-items na scannen van een pallet (scanned_pallet-id) \r\n--\tPRE DECLARE: \r\n/*\r\n@uuid int ,@origin nvarchar(1024), @button_choose nvarchar(max) = null , @sampleqrscanner nvarchar(max)= null, @button5 nvarchar(max) = null, @button_choose2 nvarchar(max) = NULL, @b6 nvarchar(128) = NULL\r\n,@button nvarchar(max) = NULL,@mol nvarchar(max) = NULL,@button2 nvarchar(max) = NULL,@T nvarchar(max) = NULL,@sku_check nvarchar(max) = NULL\r\n,@button3 nvarchar(max) = NULL,@xstock_id nvarchar(max) = NULL,@aantal_serials_nodig nvarchar(max) = NULL,@sku_oke nvarchar(max) = NULL,@button4 nvarchar(max) = NULL\r\n,@pal_select_button nvarchar(128)=NULL,@pal_select nvarchar(128)=NULL,@button_choose_pal nvarchar(128)=NULL,@button_scan_serials_for_mol nvarchar(128)=NULL,@button_replenish nvarchar(128)=NULL,@replenish_loc nvarchar(128)=NULL\r\n,@ps nvarchar(128)=NULL, @pallet_mol_id int = NULL, @this_SP int = null, @pipa int = null\r\n,@but_10 nvarchar(128)=NULL\r\n\r\n*/\r\nexec sp_api_toast N'micro pick V11'\r\ndeclare @scanned_codes nvarchar(max) ; EXEC sp_api_modal_get_value @name='@scanned_codes',@value = @scanned_codes OUT --231211 IPV PREDECLARED\r\n-------------------------------------------------------\r\ndeclare @mob int = @uuid --opgeschoond scan ID \r\ndeclare @no_serials bit = null\r\ndeclare @this_pallet_id int =0 \r\ndeclare @this_pallet_nr int =0\r\ndeclare @this_pal_colli int =0\r\ndeclare @this_xstock_id int =0\r\ndeclare @this_item_lotnr nvarchar(128)\r\ndeclare @this_sku nvarchar(128)\r\ndeclare @this_pallet_type nvarchar(128) --'full, pick, replenish'\r\ndeclare @this_id int --temp table cursor\r\n--execute sp_api_toast '111111111'\r\n----------------------------------------------------------\r\n--\tafdwingen eerst replenishpallets halen en replenishen!\r\n----------------------------------------------------------\r\n\r\n\r\ndrop table if exists #mr \r\ndrop table if exists #list\r\ndeclare @button_gearriveerd_bij_pallet nvarchar(128)\r\n--declare @mob int=(select top 1 id from wms_micro_outbound order by id desc)\r\n--declare @T nvarchar(2000)\r\n\r\nselect --231130 TOP 1, zodat je per container goed bezig bent!\r\n\tp_pick.w_lot_id\r\n\t,pick_pal_id=p_pick.id\r\n\t,w_lot.container_number\r\n\t,adv_full_pos\r\n\t,p_pick.pallet_nr \r\n\t,mol.xstock_id\r\n\t,mol.id\r\n\t,mol.preferred_pallet_ids\r\n\t,mol.scanned_pallet_id\r\n\t,T=concat(N'Ga naar lokatie ',upper(mol.adv_full_pos), ' en haal daar'\r\n\t\t\t\t\t--,' en haal daar Pallet ',p_pick.pallet_nr\r\n\t\t\t\t\t--240122 eventueel willekeurig als de preferred_pallet al in gebruik is.. \r\n\t\t\t\t\t, case \r\n\t\t\t\t\t\twhen exists(select 1 from wms_micro_outbound_lines where scanned_pallet_id=mol.preferred_pallet_ids)\r\n\t\t\t\t\t\tthen ' een Pallet'\r\n\t\t\t\t\t\telse concat(' Pallet ',p_pick.pallet_nr)\r\n\t\t\t\t\t\tend\r\n\t\t\t\t\t\r\n\t\t\t\t\t,' met ',p_pick.colli,' colli' --231130\r\n\t\t\t\t\t,' van container ',upper(w_lot.container_number)\r\n\t\t\t\t\t,'. Artikel: ', upper(mol.lookupcode) \r\n\t\t\t\t\t)--* \r\n\t,remark --is dus 'replenish'\t\t\t\t\r\n\t,mol_amount=mol.amount --231130\r\ninto #mr \r\nfrom q_wms_micro_outbound_lines mol\r\n\t\t\tjoin w_lot on w_lot.id=mol.w_lot_id\r\n\t\t\tjoin w_pallet p_pick \r\n\t\t\t\t\ton p_pick.id=try_cast(preferred_pallet_ids as int) \r\n\t\t\t\t\t\t--dwing af dat de pallet uit de opgegeven mol-container komt\r\n\t\t\t\t\t\tand p_pick.w_lot_id=mol.w_lot_id\r\n\t\t\twhere mol.wms_micro_outbound_id=@mob \r\n\t\t\t\tand remark='replenish' \r\n\t\t\t\tand (\r\n\t\t\t\t\tscanned_pallet_id is null \r\n\t\t\t\t\tor NOT exists( select 1 from w_pallet where id=scanned_pallet_id and micro_pick_allowed=1)\r\n\t\t\t\t\t)\r\n\t\t\t\t\r\n\t\t\t\t--231020 met DENNIS LIVE IN MESONINE !!! (als de items al op de mol zijn toegekend, dan niet meer replenishen , want er waren er kennelijk genoeg\r\n\t\t\t\t-- nu wordt alles tegengehouden.. ook de pallets die wel gereplenished moeten worden..\r\n\t\t\t\tAND\tmol.linked_amount <> mol.amount\r\n\r\n--dev test select * from #modal_report \r\n--live \r\nselect * into #list from #mr\r\nif exists(select 1 from #list) exec sp_api_modal_text N'REPLENISH PALLETS',@class='h1'\r\nset @T = NULL\r\nif exists(select 1 from #mr)\r\nBEGIN\r\n\tSet @T='<ul>'--start lijst\r\nEND\r\n\r\nwhile exists(select 1 from #mr)\r\nBEGIN\r\n\tset @this_id=(select top 1 id from #mr)\r\n\tset @T=concat(@T,'<li>',(select T from #mr where id=@this_id),'</li>')\r\n\tdelete from #mr where id=@this_id\r\nEND\r\nif @T >''--lijst afsluiten\r\nBEGIN\r\nset @t=concat(@T,'</ul>')\r\nexec sp_api_modal_html @T\r\nEND\r\n\r\nWHILE exists(select 1 from #list) --bevat te replenishen pallets\r\nBEGIN -- 231004 REPLENISH PART\r\n\t--exec sp_api_modal_table @tmptable=N'#mr',@print=1,@excel=1 -- output to react client\r\n\tEXEC sp_api_modal_button @name='@button_gearriveerd_bij_pallet',@value = 'Ik ben bij de pallet', @valueout = @button_gearriveerd_bij_pallet OUT,@class='btn-danger',@key='Enter'\r\n\tif @button_gearriveerd_bij_pallet is null RETURN\r\n\t--scan pallet-sticker\r\n\texec sp_api_modal_text N'scan pallet sticker'\r\n\tEXEC sp_api_modal_input @name = '@ps', @value = @ps OUT ,@focus=1\r\n\r\n\tif @ps is null return\r\n\tif left(@ps,3)<>'ps:'\r\n\tBEGIN\r\n\t\texec sp_api_modal_text N'Dit is geen Tracy pallet sticker QR code'\r\n\t\t--exec sp_api_modal_restart--231130\r\n\r\n\t\tRETURN\r\n\tEND\t\r\n\r\n\r\n\tset @this_pallet_id=right(@ps,len(@ps)-3)\r\n\tif  not exists(select * from w_pallet where id=@this_pallet_id and w_lot_id in(select w_lot_id from #list) )\r\n\tBEGIN\r\n\t\tif  exists(select * from wms_micro_outbound_lines where scanned_pallet_id=@this_pallet_id )\r\n\t\tBEGIN --231009 pallet is er al.\r\n\t\t\texec sp_api_modal_text N'Deze pallet is al gescand en toegevoegd.'\r\n\t\tEND\t\r\n\t\telse BEGIN\t\r\n\t\t\texec sp_api_modal_text N'Dit is een pallet uit een ** VERKEERDE ** container'\r\n\t\tEND\r\n\t\texec sp_api_modal_beep 1100, 500 --error !\r\n\t\t--set @T=concat('pallet lot: ',(select w_lot_id from w_pallet where id=@this_pallet_id and w_lot_id in(select w_lot_id from #list) ))\r\n\t\t--exec sp_api_modal_text @T\r\n\t\t--exec sp_api_modal_table @tmptable=N'#modal_report',@print=1,@excel=1 -- output to react client\r\n\t\texec sp_api_modal_restart--231130\r\n\t\tRETURN\r\n\tEND\r\n\r\n\tif  not exists(select * from w_pallet p\r\n\t\t\t\t\twhere p.id=@this_pallet_id \r\n\t\t\t\t\t\t--\tand xstock_id in(select xstock_id from #list) \r\n\t\t\t\t\t\tand exists(select 1 from #list where #list.xstock_id=p.xstock_id and #list.mol_amount <= p.colli) --de gekozen pallet moet voor replenishen voldoende colli hebben 231130!!\r\n\t\t\t\t)\r\n\tBEGIN\r\n\t\texec sp_api_modal_text N'(1)Dit is ** NIET ** de juiste pallet. => Wel juiste container, maar verkeerd artikel of verkeerd colli aantal op de pallet!'\r\n\t\texec sp_api_modal_beep 1100, 500 --error !\r\n\t\t--set @T=concat('pallet lot: ',(select w_lot_id from w_pallet where id=@this_pallet_id and w_lot_id in(select w_lot_id from #list) ))\r\n\t\t--exec sp_api_modal_text @T\r\n\t\t--exec sp_api_modal_table @tmptable=N'#modal_report',@print=1,@excel=1 -- output to react client\r\n\t\t\t--exec sp_api_modal_restart--231130\r\n\t\t\t--EXEC sp_api_modal_values_clear @ignore='@uuid' --231130 KEEP SCANNED QR\r\n\t\t\texec sp_api_modal_value @name=N'@button_gearriveerd_bij_pallet'\r\n\t\t\texec sp_api_modal_value @name=N'@ps' -- er bij\r\n\t\tRETURN\r\n\tEND\r\n\tdeclare @foutinfo nvarchar(max)\r\n\t-- extra check 241213  -------------------------------------\r\n\tif exists(select 1 from mol where scanned_pallet_id=@this_pallet_id and mob_id<>@mob)\r\n\tBEGIN\r\n\t\texec sp_api_modal_ALERT N'FOUT','Deze pallet is al gekoppeld aan een andere outbound!'\r\n\t\texec sp_api_modal_beep 1100, 500 --error !\r\n\t\tdeclare @FOUT_bound int =(select top 1 mob_id from mol where scanned_pallet_id=@this_pallet_id and mob_id<>@mob)-- foute outbound..\r\n\r\n\r\n\t\tSET @foutinfo =\r\n\t\t\tconcat('Bij Outbound met ref: '\r\n\t\t\t\t\t,(select out_ref from mob where id=@mob)\r\n\t\t\t\t\t,' werd pallet id: ', @this_pallet_id\r\n\t\t\t\t\t,' (pal_nr: ', (select pallet_nr from w_pallet where id=@this_pallet_id),' )'\r\n\t\t\t\t\t,' gescand, maar die is (onjuist) gelinkt aan outbound : '\r\n\t\t\t\t\t,(select out_ref from mob where id=@FOUT_bound))\r\n\t\t-- Verstuur de e-mail\r\n\t\tEXEC sp_api_email \r\n\t\t\t@To = 'rick@tracy.nu + mterlouw@rwsbv.com',\r\n\t\t\t@Subject = 'Pallet FOUT ontdekt bij Replenish Scan',\r\n\t\t\t@Body = @foutinfo;\r\n\t\t\r\n\t\texec sp_api_modal_value @name=N'@button_gearriveerd_bij_pallet'\r\n\t\texec sp_api_modal_value @name=N'@ps' -- er bij\r\n\t\tRETURN\r\n\tEND\r\n\t-- einde  241213 extra check------------------------------- \r\n\r\n\r\n\t--we zitten nu absoluut op een pallet uit de juiste container en met het juiste artikel\r\n\t-- voorbereiden op replenishen\r\n\tset @this_pallet_type=N'REPLENISH'\r\n\tset @this_xstock_id=(select xstock_id from w_pallet where id=@this_pallet_id)\r\n\t--#list bevat hier alleen maar replenish regels\r\n\r\n/*\tif exists(select id from #list where scanned_pallet_id=@this_pallet_id) -- de pallet moet nog op MICRO_PICK_ALLOWED worden gezet\r\n\tBEGIN\r\n\t\texec sp_api_modal_text N'zet deze geselecteerde pallet op micro pick allowed....'\r\n\t\treturn\r\n\tEND\r\n*/\r\n/*\tif exists(select id from #list where @this_pallet_id in (select value from string_split(preferred_pallet_ids,','))) -- gewenst\r\n\tBEGIN\r\n\t\tset @T=N'Zet deze gewenste pallet definitief naar \"scanned_pallet_id\" en micro pick allowed....'\r\n\t\texec sp_api_modal_text @T\r\n\t\treturn\r\n\tEND\r\n*/\r\n\tif exists(select id from #list where scanned_pallet_id=@this_pallet_id) -- de pallet moet nog op MICRO_PICK_ALLOWED worden gezet\r\n\t\tOR exists(select id from #list where @this_pallet_id in (select value from string_split(preferred_pallet_ids,','))) -- gewenst\r\n\t\tOR exists(select id from #list where xstock_id=@this_xstock_id and @this_pallet_id not in (select value from string_split(preferred_pallet_ids,','))  ) -- alternatief\r\n\t--*************************\r\n\t-- HET RESPLENISHEN IS HIER\r\n\t--************************* \r\n\tBEGIN\r\n\t\t--231006 zorg dat er een pick pallet is\r\n\t\t--declare @pipa int = null\r\n\t\texec create_outbound_pickpallet --SELECTEERT OF MAAKT NIEUW..\r\n\t\t\t@wms_micro_outbound_id = @mob\r\n\t\t\t,@pallet_id  =@pipa output\r\n\t\t--print @pipa\r\n\r\n\t\tset @pallet_mol_id=(select top 1 id from #list where xstock_id=@this_xstock_id and scanned_pallet_id is null) -- er kan maar 1 replenish zijn voor 1 artikel !\r\n\t\t--set @T=concat(N'Deze pallet (pal.nr. ',(select pallet_nr from w_pallet where id=@this_pallet_id),') als alternatief gebruiken en definitief naar \"scanned_pallet_id\" en micro pick allowed....ipv prefrerred ', (select string_agg(preferred_pallet_ids,' *** ') from #list))\r\n\t\t--exec sp_api_modal_text @T\r\n\r\n\t\tif @replenish_loc is null \r\n\t\tBEGIN\r\n\t\t\tset @replenish_loc=(select pick_position from xstock where id=@this_xstock_id)\r\n\t\tEND\t\r\n\t\t--check of de replenishment al is geregistreerd op de pallet\r\n\t\t-- losse items picken en darvan serienummers scannen is niet hier. dit is alleen replenishen!\r\n\t\tif not exists( select * from w_pallet where id=@this_pallet_id and micro_pick_allowed=1)\r\n\t\tBEGIN\r\n\t\t\tEXEC sp_api_modal_input @name = '@replenish_loc', @value = @replenish_loc OUT \r\n\t\t\tEXEC sp_api_modal_button @name='@button_replenish',@value = 'Replenish NOW', @valueout = @button_replenish OUT,@class='btn-danger'\r\n\t\t\tif @button_replenish is null return\t\r\n\t\t\tif @replenish_loc is NULL\r\n\t\t\tBEGIN\r\n\t\t\t\texec sp_api_modal_text N'De POSITIE CODE voor de replenishmentlokatie is verplicht!'\r\n\t\t\t\treturn\r\n\t\t\tEND\r\n\t\t\t\r\n\t\t\t--update w_pallet set micro_pick_allowed=1,position_code=@replenish_loc where id=@this_pallet_id\r\n\t\t\t--update wms_micro_outbound_lines set scanned_pallet_id=@this_pallet_id where id=@pallet_mol_id\r\n\t\t\t-- is hieronder\r\n\t\t\texec sp_api_modal_clear\r\n\t\t\r\n\t\tEND\r\n\r\n\r\n\t\tupdate top(1) wms_micro_outbound_lines \r\n\t\t\tset scanned_pallet_id = @this_pallet_id\r\n\t\t\t\t,chk=1\r\n\t\t\t\t,remark='pick' --231006 van replenish naar pick\r\n\t\t\twhere ( scanned_pallet_id is null or scanned_pallet_id=@this_pallet_id)\r\n\t\t\t\tand id = @pallet_mol_id\r\n\t\t\r\n\t\tupdate w_pallet \r\n\t\t\tset micro_pick_allowed=1 \r\n\t\t\t\t,position_code=@replenish_loc--'rick'\r\n\t\t\twhere id=@this_pallet_id\t\t\r\n\r\n\t\tdeclare @assign_micro_items int =(select amount from wms_micro_outbound_lines where id=@pallet_mol_id)\r\n\t\twhile isnull(@assign_micro_items,0) >0\r\n\t\tBEGIN\r\n\t\t\tupdate top(1) wms_micro_item set w_pallet_pick_id=@pipa, wms_MICRO_OUTBOUND_LINES_ID=@pallet_mol_id where wms_micro_item.w_pallet_id=@this_pallet_id and w_pallet_pick_id is null\r\n\t\t\t--exec sp_api_toast N'  ** ITEM **'\r\n\t\t\t--exec sp_api_toast @this_pallet_id\r\n\t\t\t--exec sp_api_toast @pipa\r\n\t\t\tset @assign_micro_items = @assign_micro_items -1\r\n\t\tEND\t\r\n\t\treturn\r\n\tEND\r\n\r\n\texec sp_api_modal_text N'gelukt'\r\n\t\r\n\r\n\r\n\tset @this_SP= (select scanned_pallet_id from q_wms_micro_outbound_lines \r\n\t\t\t\t\twhere wms_micro_outbound_id=@mob \r\n\t\t\t\t\t\tand remark='replenish' \r\n\t\t\t\t\t\tand exists( select 1 from w_pallet where id=scanned_pallet_id and micro_pick_allowed=1)\r\n\t\t\t\t\t) \r\n\tif @this_SP is not NULL\r\n\tBEGIN\r\n\t\tdelete from #list where scanned_pallet_id=@this_SP and remark='replenish'\t\t\t\r\n\tEND\t\t\r\n\t\t\t\t\r\n\t\r\n\t----------------------------------------------------------------------------------------------------\r\n\t-- 231002 ALS ER NOG IETS GEREGELD MOET WORDEN BIJ REPLENISHMENT, DAN NIET VERDER. => EERST REGELEN! \r\n\t----------------------------------------------------------------------------------------------------\t\t\t\t\t\r\n\t--exec sp_api_modal_restart--231130\r\n\tEXEC sp_api_modal_value @name='@button_gearriveerd_bij_pallet' --231130 wis allleen deze waarde\r\n\tEXEC sp_api_modal_value @name='@ps' --231130 wis allleen deze waarde\r\n\t--exec sp_api_modal_restart--231130\r\n\treturn\r\nEND --REPLENISH PALLETS HALEN VAN BULK\r\n\r\n\r\n----------------------------------------------------------------------------------------------------\r\n-- 231010 VOLLE PALLETS PAKKEN VAN BULK EN KOPPELEN AAN DE MOL VAN DEZE OUTBOUND\r\n----------------------------------------------------------------------------------------------------\t\t\t\t\t\r\n\r\ndrop table if exists #fpa \r\ndrop table if exists #fpalist\r\n\r\nselect top 1 --231130 2x top 1 !!!\r\n\tp_pick.w_lot_id\r\n\t,pick_pal_id=p_pick.id\r\n\t,w_lot.container_number\r\n\t,adv_full_pos\r\n\t,p_pick.pallet_nr \r\n\t,mol.xstock_id\r\n\t,mol.id\r\n\t,mol.preferred_pallet_ids\r\n\t,mol.scanned_pallet_id\r\n\t,T=concat(N'Ga naar lokatie '\r\n\t\t\t\t--240826,upper(mol.adv_full_pos) --240826 voorheen: dit is een lokatie van een pallet die uit de container komt \r\n\t\t\t\t,isnull ((select position_code from w_pallet where id=p_pick.id) --niew: dit er voor gezet..12:05\r\n\t\t\t\t\t\t,upper(mol.adv_full_pos) --240826 nu baseren op de prefrerred pallet!\r\n\t\t\t\t\t\t)\r\n\t\t\t\t,' en haal daar'\r\n\t\t\t\t\t--240122 was,' en haal daar Pallet ',p_pick.pallet_nr\r\n\t\t\t\t\t--eventueel willekeurig als de preferred_pallet al in gebruik is.. \r\n\t\t\t\t\t, case \r\n\t\t\t\t\t\twhen exists(select 1 from wms_micro_outbound_lines where scanned_pallet_id=mol.preferred_pallet_ids)\r\n\t\t\t\t\t\tthen ' een Pallet'\r\n\t\t\t\t\t\telse concat(' Pallet ',p_pick.pallet_nr)\r\n\t\t\t\t\t\tend\r\n\t\t\t\t\t\r\n\t\t\t\t\t,' met ',p_pick.colli,' colli'--231130\r\n\t\t\t\t\t,' van container ',upper(w_lot.container_number)\r\n\t\t\t\t\t,'. Artikel: ', upper(mol.lookupcode) \r\n\t\t\t\t\t)--* \r\n\t,remark --is dus 'full'\t\t\t\t\t\t\t\r\n\t,mol_amount=mol.amount\t\t--231130\r\ninto #fpa \r\nfrom q_wms_micro_outbound_lines mol\r\n\t\t\tjoin w_lot on w_lot.id=mol.w_lot_id\r\n\t\t\tjoin w_pallet p_pick \r\n\t\t\t\t\ton p_pick.id=try_cast(preferred_pallet_ids as int) \r\n\t\t\t\t\t\t--dwing af dat de pallet uit de opgegeven mol-container komt\r\n\t\t\t\t\t\tand p_pick.w_lot_id=mol.w_lot_id\r\n\t\t\twhere mol.wms_micro_outbound_id=@mob \r\n\t\t\t\tand remark='full' \r\n\t\t\t\tand (\r\n\t\t\t\t\tscanned_pallet_id is null \r\n\t\t\t\t\t-- dit is alleen bij replenishment pallets !!!or NOT exists( select 1 from w_pallet where id=scanned_pallet_id and micro_pick_allowed=1)\r\n\t\t\t\t\t)\r\n--dev test select * from #modal_report \r\n--live \r\nselect * into #fpalist from #fpa  --FULL PALLET LIST\r\nif exists(select 1 from #fpalist) exec sp_api_modal_text N'VOLLE PALLETS OUTBOUND',@class='h1'\r\nset @T = NULL\r\nif exists(select 1 from #fpa)\r\nBEGIN\r\n\tSet @T='<ul>'--start lijst\r\nEND\r\n\r\nwhile exists(select 1 from #fpa)\r\nBEGIN\r\n\tset @this_id=(select top 1 id from #fpa)\r\n\tset @T=concat(@T,'<li>',(select T from #fpa where id=@this_id),'</li>')\r\n\tdelete from #fpa where id=@this_id\r\nEND\r\nif @T >''--lijst afsluiten\r\nBEGIN\r\nset @t=concat(@T,'</ul>')\r\nexec sp_api_modal_html @T\r\nEND\r\n\r\nWHILE exists(select 1 from #fpalist) --bevat volle pallets die op de outbound mee gaan\r\nBEGIN -- 231004 REPLENISH PART\r\n\t--exec sp_api_modal_table @tmptable=N'#mr',@print=1,@excel=1 -- output to react client\r\n\tEXEC sp_api_modal_button @name='@button_gearriveerd_bij_pallet',@value = 'Ik ben bij de pallet', @valueout = @button_gearriveerd_bij_pallet OUT,@class='btn-danger',@key='Enter'\r\n\tif @button_gearriveerd_bij_pallet is null RETURN\r\n\t--scan pallet-sticker\r\n\texec sp_api_modal_text N'scan pallet sticker'\r\n\tEXEC sp_api_modal_input @name = '@ps', @value = @ps OUT ,@focus=1\r\n\r\n\tif @ps is null return\r\n\tif left(@ps,3)<>'ps:'\r\n\tBEGIN\r\n\t\texec sp_api_modal_text N'Dit is geen Tracy pallet sticker QR code'\r\n\t\tRETURN\r\n\tEND\t\r\n\r\n\r\n\tset @this_pallet_id=right(@ps,len(@ps)-3)\r\n\tif  not exists(select * from w_pallet where id=@this_pallet_id and w_lot_id in(select w_lot_id from #fpalist) )\r\n\tBEGIN\r\n\t\tif  exists(select * from wms_micro_outbound_lines where scanned_pallet_id=@this_pallet_id )\r\n\t\tBEGIN --231009 pallet is er al.\r\n\t\t\texec sp_api_modal_text N'Deze pallet is al gescand en toegevoegd.'\r\n\t\tEND\t\r\n\t\telse BEGIN\t\r\n\t\t\texec sp_api_modal_text N'Dit is een pallet uit een ** VERKEERDE ** container'\r\n\t\tEND\r\n\t\texec sp_api_modal_beep 1100, 500 --error !\r\n\t\t--set @T=concat('pallet lot: ',(select w_lot_id from w_pallet where id=@this_pallet_id and w_lot_id in(select w_lot_id from #fpalist) ))\r\n\t\t--exec sp_api_modal_text @T\r\n\t\t--exec sp_api_modal_table @tmptable=N'#modal_report',@print=1,@excel=1 -- output to react client\r\n\t\tRETURN\r\n\tEND\r\n\r\n\tif  not exists(select * from w_pallet p where p.id=@this_pallet_id \r\n\t\t\t\t\t\t--  and xstock_id in(select xstock_id from #fpalist) \r\n\t\t\t\t\t\t--\tand xstock_id in(select xstock_id from #list) \r\n\t\t\t\t\t\tand exists(select 1 from #fpalist where #fpalist.xstock_id=p.xstock_id and #fpalist.mol_amount = p.colli) --de gekozen FULL PALLET pallet exact het opgegeven colli-aantal hebben 231130!!\r\n\t\t\t\t\t)\r\n\tBEGIN\r\n\t\texec sp_api_modal_text N'(2)Dit is ** NIET ** de juiste pallet. => Wel juiste container, maar verkeerd artikel (of CPP onjuist)!'\r\n\t\texec sp_api_modal_beep 1100, 500 --error !\r\n\t\t--set @T=concat('pallet lot: ',(select w_lot_id from w_pallet where id=@this_pallet_id and w_lot_id in(select w_lot_id from #fpalist) ))\r\n\t\t--exec sp_api_modal_text @T\r\n\t\t--exec sp_api_modal_table @tmptable=N'#modal_report',@print=1,@excel=1 -- output to react client\r\n\t\t\t\t\t--exec sp_api_modal_restart --2311390 extra probeersel..\r\n\t\t\t\t\t--EXEC sp_api_modal_values_clear @ignore='@uuid' --231130 KEEP SCANNED QR\r\n\t\t\t\t\texec sp_api_modal_value @name=N'@button_gearriveerd_bij_pallet'\r\n\t\t\t\t\texec sp_api_modal_value @name=N'@ps'\r\n\t\t\t\t\t--exec sp_api_modal_restart--231130 --er bij proberen!!\r\n\t\tRETURN\r\n\tEND\r\n\r\n\r\n\t--we zitten nu absoluut op een pallet uit de juiste container en met het juiste artikel\r\n\t-- voorbereiden op replenishen\r\n\texec sp_api_modal_beep 1800, 200\r\n\tset @this_pallet_type=N'FULL'\r\n\tset @this_xstock_id=(select xstock_id from w_pallet where id=@this_pallet_id)\r\n\tset @this_pal_colli=(select colli from w_pallet where id=@this_pallet_id) -- pallet heeft altijd colli en niet altijd 'items' \r\n\t--#fpalist bevat hier alleen maar full pallet regels (full pallets assignment)\r\n\r\n\r\n\tif  exists(select id from #fpalist where @this_pallet_id in (select value from string_split(preferred_pallet_ids,','))) -- gewenst\r\n\t\tOR exists(select id from #fpalist where xstock_id=@this_xstock_id and @this_pallet_id not in (select value from string_split(preferred_pallet_ids,','))  ) -- alternatief\r\n\t--***********************************\r\n\t-- HET FULL PALLET ASSIGNMENT IS HIER\r\n\t--*********************************** \r\n\tBEGIN\r\n\t\tset @pallet_mol_id=(select top 1 id from #fpalist where xstock_id=@this_xstock_id \r\n\t\t\t\t\t\t\t\tand scanned_pallet_id is null \r\n\t\t\t\t\t\t\t\tand mol_amount=@this_pal_colli --231130 collicheck er bij!\r\n\t\t\t\t\t\t\t) -- er mag maar 1 full pallet zijn voor 1 MOL\r\n\t\t--set @T=concat(N'Deze pallet (pal.nr. ',(select pallet_nr from w_pallet where id=@this_pallet_id),') als alternatief gebruiken en definitief naar \"scanned_pallet_id\" en micro pick allowed....ipv prefrerred ', (select string_agg(preferred_pallet_ids,' *** ') from #fpalist))\r\n\t\t--exec sp_api_modal_text @T\r\n\r\n\t\tif exists( select 1 from wms_micro_outbound_lines where scanned_pallet_id=@this_pallet_id)\r\n\t\tBEGIN --afbreken\r\n\t\t\tset @T=concat('Pallet nummer ',(select pallet_nr from w_pallet where id=@this_pallet_id),' is al gescand')\r\n\t\t\texec sp_api_modal_text @T\r\n\t\t\treturn\r\n\t\tend\r\n\r\n\t\t--=======================================extra 250502============================================================================\r\n\t\tif exists( select 1 from w_pallet_out po where w_pallet_id=@this_pallet_id and xlandfreight_id <> (select lf_id from mob where id=@mob))\r\n\t\tBEGIN --afbreken\r\n\t\t\tset @T=concat('Pallet nummer ',(select pallet_nr from w_pallet where id=@this_pallet_id),' staat gekoppeld aan een andere outbound vracht.')\r\n\t\t\texec sp_api_modal_text @T\r\n\r\n\t\t\t--rick een mailtje!\r\n\t\t\tSET @foutinfo = CONCAT(N'Mob: ',@mob, ' MOL: ',@mol, 'ScannedPallet: ',@this_pallet_id)\r\n\t\t\t\tEXEC sp_api_email @to = 'rick@tracy.nu,gb@tracy.nu',\r\n\t\t\t\t\t@subject = 'RWS - pallet geweigerd. Scanned pallet staat al op andere outbound vracht!',\r\n\t\t\t\t\t@Body = @foutinfo;\r\n\r\n\t\t\treturn\r\n\t\tend\r\n\t\t--=======================================extra 250502============================================================================\r\n\r\n\t\t-------------------------------------------------------------------------------------- A S S I G N   S C A N N E D    P A L L E T\r\n\t\t--oke verder\r\n\t\tupdate top(1) wms_micro_outbound_lines \r\n\t\t\tset scanned_pallet_id = @this_pallet_id\r\n\t\t\t\t,chk=1\r\n\t\t\t\t\r\n\t\t\twhere ( scanned_pallet_id is null or scanned_pallet_id=@this_pallet_id)\r\n\t\t\t\tand id = @pallet_mol_id\r\n\t\t\t\tand remark ='full' -- moet altijd al zo zijn\r\n\t\t--oude items van prefrerred pallet weghalen\r\n\t\t\r\n\t\tIF EXISTS( --GB241216\r\n\t\t\tSELECT * FROM wms_micro_outbound_lines WHERE id <> @pallet_mol_id AND preferred_pallet_ids =\r\n\t\t\t(select preferred_pallet_ids from wms_micro_outbound_lines where id=@pallet_mol_id)\r\n\t\t\t)\r\n\t\t\tBEGIN\r\n\t\t\t\tSET @foutinfo = CONCAT(N'SELECT * FROM wms_micro_outbound_lines WHERE preferred_pallet_ids = ''',\r\n\t\t\t\t\t\t(select preferred_pallet_ids from wms_micro_outbound_lines where id=@pallet_mol_id)\r\n\t\t\t\t\t,'''')\r\n\t\t\t\tEXEC sp_api_email @to = 'rick@tracy.nu,gb@tracy.nu',\r\n\t\t\t\t\t@subject = 'RWS - preferred_pallet_ids probleem!',\r\n\t\t\t\t\t@Body = @foutinfo;\r\n\r\n\t\t\t\t--250408 EVEN niet verder !\r\n\t\t\t\t--EXEC SP_API_MODAL_ALERT N'We breken even af!. Tracy heeft nu een mail om te kijken wat er is' \r\n\t\t\t\t--             RETURN \r\n\t\t\t\t-- 250408--------------------------\r\n\t\t\tEND\r\n\r\n\r\n\t\tupdate w_pallet set wms_micro_outbound_id=null\r\n\t\twhere wms_micro_outbound_id=@mob \r\n\t\tand id in (select preferred_pallet_ids from wms_micro_outbound_lines where id=@pallet_mol_id)\r\n\t\tupdate wms_micro_item \r\n\t\t\tset w_pallet_pick_id=NULL\r\n\t\t\t\t, wms_MICRO_OUTBOUND_LINES_ID=NULL\r\n\t\t\t\t,item_serial_number = null \r\n\t\t\twhere wms_MICRO_OUTBOUND_LINES_ID=@pallet_mol_id \r\n\t\t\t\r\n\r\n\t\t--nieuwe items van gekozen pallet\r\n\t\tupdate w_pallet set wms_micro_outbound_id=@mob where id =@this_pallet_id  --231108 IK NEEM AAN MOB! (er stond MOL )\r\n\t\tupdate wms_micro_item \r\n\t\t\tset w_pallet_pick_id=w_pallet_id\r\n\t\t\t\t, wms_MICRO_OUTBOUND_LINES_ID=@pallet_mol_id \r\n\t\t\twhere wms_micro_item.w_pallet_id=@this_pallet_id\r\n\t\t\t\t and w_pallet_pick_id is null -- in een heel fout geval zou er al een paar items aan een andere outbound kunnen zijn gekoppeld\r\n\t\t-- ?? return\r\n\tEND\r\n\r\n\texec sp_api_modal_text N'gelukt'\r\n\tdelete from #fpalist where id=@pallet_mol_id\r\n\t\r\n\tEXEC sp_api_modal_value @name='@button_gearriveerd_bij_pallet' --231130 wis alleen deze\r\n\tEXEC sp_api_modal_value @name='@ps' --231130 wis allleen deze waarde\r\n\t--exec sp_api_modal_restart--231130 --er bij proberen!!\r\n\treturn\r\n\t--exec sp_api_modal_restart\r\n\t\r\n\t\t\t\t\r\n\t\r\n\t----------------------------------------------------------------------------------------------------\r\n\t-- 231002 ALS ER NOG IETS GEREGELD MOET WORDEN BIJ REPLENISHMENT, DAN NIET VERDER. => EERST REGELEN! \r\n\t----------------------------------------------------------------------------------------------------\t\t\t\t\t\r\n\r\nEND --FULL PALLETS HALEN VOOR DE MICRO OUTBOUND\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n--afkappen na replenish pallets en volle pallets toekennen aan de MOL\r\n--RETURN\r\n\r\n/*\r\n\t--poortwachter\r\n\tif exists(select 1 from q_wms_micro_outbound_lines \r\n\t\t\t\twhere wms_micro_outbound_id=@mob \r\n\t\t\t\t\tand remark='replenish' \r\n\t\t\t\t\tand (\r\n\t\t\t\t\t\tscanned_pallet_id is null \r\n\t\t\t\t\t\tor NOT exists( select 1 from w_pallet where id=scanned_pallet_id and micro_pick_allowed=1)\r\n\t\t\t\t\t\t) \r\n\t\t\t)\r\n\tRETURN -- 231002 ALS ER NOG IETS GEREGELD MOET WORDEN BIJ REPLENISHMENT, DAN NIET VERDER.. EERST REGELEN! \t\t\t\r\n*/\r\n\r\n\r\n--check of er nog VOLLE PALLETS GEHAALD MOETEN WORDEN:\r\n\r\n\r\n--231006\r\nif exists(select 1 from @main_db.dbo.mob_pallets(@mob) where chk=0 or is_processed=0)\r\nbegin\r\n\t--hieronder misschien niet meer nodig.. tot NORMAAL\r\n\t--exec sp_api_toast N'n o r m a a l'\r\n\tgoto NORMAAL --231009 nu gan we serials toevoegen!!!\r\nend\t\r\n\r\n\r\n\r\n\r\n--exec sp_api_toast N'V6'\r\nif exists(select 1 from @main_db.dbo.mob_pallets(@mob) where chk=0 or is_processed=0)\r\nBEGIN\r\n--was\r\n\t--set @T=concat(N'Nog te scannen pallets: ',(select string_agg(concat(plts,' pallets op locatie ',position_code, ' met sku: ',sku, ' en cpp= ',cpp),' - ') from @main_db.dbo.mob_pallets(@mob) where chk=0 ))\r\n\t--exec sp_api_modal_text @T\r\n\t--set @T=concat(N'Scan een opgegeven pallet van de pick-instruction met ref: ',(select UPPER(out_ref) from wms_micro_outbound where id=@mob))\r\n\t--exec sp_api_modal_text @T\r\n--nu\r\n\tif exists(select 1 from wms_micro_outbound_lines where wms_micro_outbound_id=@mob and scanned_pallet_id is null) --231006 was is_processed=0)\r\n\tBEGIN\r\n\t\t--231013 was set @T=concat('Deze pallets zijn nog niet (volledig) op serienummers gescand. Haal de pallet op en Scan de pallet-stickers..','')\r\n\t\tset @T=concat('Deze pallets zijn nog opgehaald en pallet-sticker gescand.','Haal de pallet eerst op. Serienummers scannen komt later.')--niet (volledig) op serienummers gescand. Haal de pallet op en Scan de pallet-stickers..','')\r\n\t\texec sp_api_modal_text @T\r\n\t\tselect [nr~col-1]=pallet_nr\r\n\t\t\t\t,[sku~col-3]= sku\r\n\t\t\t\t--,[lookupcode~col-5]=lookupcode\r\n\t\t\t\t,[amt~col-2]=amount\r\n\t\t\t\t,[st~col-1]=chk\r\n\t\t\t\t,[ser.~col-2]=linked_serials\t\r\n\t\t\t\t,[remark~col-3]=remark\r\n\t\t\t\t\r\n\t\tinto #palnoser from q_wms_micro_outbound_lines where wms_micro_outbound_id=@mob and chk=0 --231013 was (is_processed=0 or chk=0) maar serienummers komen later!\r\n\t\texec sp_api_modal_table @tmptable=N'#palnoser'\r\n\t\t\r\n\r\n\tEND\r\n\r\n\r\nif NOT  exists(select 1 from wms_micro_outbound_lines where wms_micro_outbound_id=@mob and scanned_pallet_id is null) --231006 was is_processed=0)\r\nBEGIN\r\n\t--exec sp_api_modal_alert N'klaar (not)'\r\n\tgoto NORMAAL\r\n\treturn\r\nEND\t\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\tif 1=1\r\n\tbegin\r\n\t\t\r\n\t\tEXEC sp_api_modal_input @name = '@pal_select', @value = @pal_select OUT,@hidden=0,@select=1\r\n\t\tEXEC sp_api_modal_button @name='@pal_select_button',@value = N'Check', @valueout = @pal_select_button OUT,@class='btn-danger',@key='F5' --Enter kan niet verstoort de flow\r\n\t\tif @pal_select_button is null return\r\n\t\tif @pal_select is null return\r\n\t\tif left(@pal_select,3) <> N'ps:'\r\n\t\tBEGIN\r\n\t\t\texec sp_api_modal_text N'Dit is geen palletsticker'\r\n\t\t\treturn\r\n\t\tEND\r\n\t\t\r\n\t\t--oke verder\r\n\t\tset @this_pallet_id=right(@pal_select,len(@pal_select)-3)\r\n\t\tselect \r\n\t\t\t@this_pallet_nr=pallet_nr\r\n\t\t\t,@this_xstock_id=xStock_id\r\n\t\t\t,@this_item_lotnr=pallet_art_lotnr\r\n\t\t\t,@this_pal_colli=colli\r\n\t\tfrom w_pallet where id=@this_pallet_id\r\n\t\t--set @T=concat('scanned pallet stockid: ',@this_xstock_id)\r\n\t\t--exec sp_api_toast @T --231001\r\n\t\tset @this_sku=(select sku from xstock where id=@this_xstock_id)\r\n\t\t--set @T=concat('U heeft gekozen pallet nr: ',@this_pallet_nr)\r\n\t\t--exec sp_api_modal_text @T\r\n\r\n\t\t--declare @pallet_mol_id int =0 -- zoek het mol id die deze pallet als preferred heeft staan \r\n\t\tset @pallet_mol_id=( select top 1 id from wms_micro_outbound_lines \r\n\t\t\t\t\t\t\twhere wms_micro_outbound_id=@uuid \r\n\t\t\t\t\t\t\t\tand (@this_pallet_id in ([preferred_pallet_ids]) \r\n\t\t\t\t\t\t\t\t\tOR @this_pallet_id=[scanned_pallet_id] --(als hij al gekoppeld is aan een MOL)\r\n\t\t\t\t\t\t\t\t\t) \r\n\t\t\t\t\t\t\t)\r\n\t\t\r\n\t\tif @pallet_mol_id is not NULL -- het is een bekende pallet (id stemt overeen met preferred)!\r\n\t\tbegin\r\n\t\t\tset @mol=@pallet_mol_id\r\n\t\t\t----------------------------PICK / FULL / REPLENISH PALLET ?? -------------------\r\n\t\t\tSET @this_pallet_type=(select upper(remark) from wms_micro_outbound_lines where id=@mol)\r\n\t\t\t---------------------------------------------------------------------------------\r\n\t\t\tif (select chk from wms_micro_outbound_lines where id=@pallet_mol_id) =1\r\n\t\t\tBEGIN\r\n\t\t\t\t-- opmerking\r\n\t\t\t\tset @T=concat(N'Deze '\r\n\t\t\t\t\t\t\t\t--,( select UPPER(remark) from wms_micro_outbound_lines where wms_micro_outbound_id=@uuid and @this_pallet_id in ([preferred_pallet_ids]))\r\n\t\t\t\t\t\t\t\t,@this_pallet_type\r\n\t\t\t\t\t\t\t\t,' pallet is al definitief geselecteerd bij deze micro outbound.'\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\texec sp_api_modal_text @T\r\n\t\t\t\t\r\n\r\n\t\t\t\t--inserted 231001 gelijk hier mogelijkheid om serienummers te scannen:\r\n\t\t\t\tif (select is_processed from wms_micro_outbound_lines where id=@pallet_mol_id) =1\r\n\t\t\t\tBEGIN\r\n\t\t\t\t\tset @T=concat(N'Deze pallet is volledig gescand (inc. ',(select count(*) from wms_micro_item where wms_micro_outbound_lines_id=@pallet_mol_id and item_serial_number >N''),' serienummers)')\r\n\t\t\t\t\texec sp_api_modal_text @T\r\n\t\t\t\tEND\r\n\t\t\t\telse BEGIN -- go to scan\r\n\t\t\t\t\t\r\n\t\t\t\t\tif @this_pallet_type ='FULL' --> SHOW SCAN BUTTON!\r\n\t\t\t\t\t\tgoto GOFULL\r\n\t\t\t\t\t/*\t\r\n\t\t\t\t\tBEGIN\r\n\t\t\t\t\t\tEXEC sp_api_modal_button @name='@button_scan_serials_for_mol',@value = 'Scan serials', @valueout = @button_scan_serials_for_mol OUT,@class='btn-danger'\r\n\t\t\t\t\t\t--tot hier inserted 231001 gelijk hier mogelijkheid om serienummers te scannen:\r\n\t\t\t\t\t\tif @button_scan_serials_for_mol is null return\t\r\n\t\t\t\t\t\tif @button_scan_serials_for_mol='Scan serials' goto add_serials_to_mol --231001\r\n\t\t\t\t\tEND\r\n\t\t\t\t\t*/\t\r\n\r\n\t\t\t\t\tif @this_pallet_type ='REPLENISH' --> SHOW REPLENISH BUTTON!\r\n\t\t\t\t\t\tGOTO GOREPLENISH\r\n\t\t\t\t\t/*\r\n\t\t\t\t\tBEGIN\r\n\t\t\t\t\t\tif @replenish_loc is null \r\n\t\t\t\t\t\tBEGIN\r\n\t\t\t\t\t\t\tset @replenish_loc=(select pick_position from xstock where id=@this_xstock_id)\r\n\t\t\t\t\t\tEND\t\r\n\t\t\t\t\t\t--check of de replenishment al is geregistreerd op de pallet\r\n\t\t\t\t\t\t-- losse items picken en darvan serienummers scannen is niet hier. dit is alleen replenishen!\r\n\t\t\t\t\t\tif not exists( select * from w_pallet where id=@this_pallet_id and micro_pick_allowed=1)\r\n\t\t\t\t\t\tBEGIN\r\n\t\t\t\t\t\t\tEXEC sp_api_modal_input @name = '@replenish_loc', @value = @replenish_loc OUT \r\n\t\t\t\t\t\t\tEXEC sp_api_modal_button @name='@button_replenish',@value = 'Replenish NOW', @valueout = @button_replenish OUT,@class='btn-danger'\r\n\t\t\t\t\t\t\tif @button_replenish is null return\t\r\n\t\t\t\t\t\t\tif @button_replenish='Replenish NOW' --hier evt jump naar separaat replenishment\r\n\t\t\t\t\t\t\tBEGIN\r\n\t\t\t\t\t\t\t\tupdate w_pallet set micro_pick_allowed=1,position_code=@replenish_loc where id=@this_pallet_id\r\n\t\t\t\t\t\t\t\tupdate wms_micro_outbound_lines set scanned_pallet_id=@this_pallet_id where id=@pallet_mol_id\r\n\t\t\t\t\t\t\t\texec sp_api_modal_clear\r\n\t\t\t\t\t\t\t\t--PICKLOKATIE !!\r\n\t\t\t\t\t\t\t\t--TODO...\r\n\t\t\t\t\t\t\t\t--+ EVENTUEEL HELE REPLENISH KOP\r\n\t\t\t\t\t\t\tEND\r\n\t\t\t\t\t\tEND\r\n\r\n\t\t\t\t\tEND\r\n\t\t\t\t\t*/\r\n\r\n\r\n\r\n\t\t\t\tEND\r\n\r\n\r\n\r\n\r\n\t\t\tEND\r\n\t\t\tELSE BEGIN -- dus als CHK=0\r\n\t\t\t\tset @T=concat(N'Deze ',( select UPPER(remark) from wms_micro_outbound_lines where wms_micro_outbound_id=@uuid and @this_pallet_id in ([preferred_pallet_ids])),' pallet wordt nu definitief geselecteerd voor deze micro outbound.')\r\n\t\t\t\texec sp_api_modal_text @T\r\n\t\t\t\tupdate wms_micro_outbound_lines \r\n\t\t\t\t\tset chk=1 \r\n\t\t\t\t\t\t,scanned_pallet_id = @this_pallet_id\r\n\t\t\t\twhere id=@pallet_mol_id\r\n\r\n\t\t\t\t--BUSY !\r\n\t\t\t\t--if full dan optioneel serienummers\r\n\t\t\t\t--if replenish dan lokatie\r\n\t\t\t\t\r\n\t\t\t\tEXEC sp_api_modal_button @name='@button_scan_serials_for_mol',@value = 'Scan serials', @valueout = @button_scan_serials_for_mol OUT,@class='btn-danger'\r\n\t\t\t\t\t--tot hier inserted 231001 gelijk hier mogelijkheid om serienummers te scannen:\r\n\t\t\t\t\tif @button_scan_serials_for_mol is null return\t\r\n\t\t\t\t\tif @button_scan_serials_for_mol='Scan serials' goto add_serials_to_mol --231001\r\n\t\t\t\t----231001 JUMP: (2)\r\n\t\t\t\t--set @mol=@pallet_mol_id\r\n\t\t\t\t--goto add_serials_to_mol\r\n\t\t\t\r\n\t\t\tEND\r\n\t\tend\t\r\n\t\telse begin \r\n\t\t\t--\tPallet_mol_id is null, dus gescande pallet-sticker komt niet voor op de instructie.\r\n\t\t\t--\tHet gescande pallet_id komt niet voor in preferred_pallet_id's; kijk of er een mol vrij is om gewisseld te worden\r\n\t\t\t\r\n\t\t\t--\tCheck of er nog wel 'un-assigned' pallets zijn...\r\n\t\t\tif (select count(*) from q_wms_micro_outbound_lines where wms_micro_outbound_id=@mob and isnull(chk,0)=0) =0 --240607 isnull(chk,0)\r\n\t\t\t--alle pallets zijn al toegekend\r\n\t\t\tBEGIN\r\n\t\t\t\texec sp_api_modal_text N'Alle pallets zijn al toegekend, scan de palletsticker om serienummers toe te voegen',@class='h1'\r\n\t\t\tEND\t\r\n\t\t\telse BEGIN\r\n\t\t\t\texec sp_api_modal_text N'Deze pallet staat ** NIET ** in de instructie. Kies de juiste pallet of geef aan welke pallet van de pick-instructie u wilt vervangen.'\r\n\t\t\t\tif NOT exists(select * from wms_micro_outbound_lines where wms_micro_outbound_id=@mob and chk=0 and xstock_id=@this_xstock_id ) --230930 toon alleen een vervangbare pallet_mol als deze hetzelfde artikel heeft!\r\n\t\t\t\tBEGIN\r\n\t\t\t\t\t--set @T=concat(N'Er is ** GEEN ** vervangbare pallet, bevat de zojuist gescande pallet wel het bedoelde artikel? (vergelijk met de pick-instructie)','' )\r\n\t\t\t\t\tset @T=concat(N'Onjuiste pallet!. Scan een ** ANDERE PALLET ** (zie de pick-instructie)','' )\r\n\t\t\t\t\texec sp_api_modal_text @T\r\n\t\t\t\t\treturn --231001\r\n\t\t\t\tEND\r\n\t\t\t\telse BEGIN\r\n\t\t\t\t\tdeclare @replacement_mol_id int --op deze mol wordt een andere pallet uitgeboekt dan oorspronkelijk 'preferred'\r\n\t\t\t\t\t--laat de user een pallet kiezen die op de mol vervangen wordt door de gecande pallet\r\n\t\t\t\t\t/*\t\t--toon tabel:\r\n\t\t\t\t\t\t\texec sp_api_modal_text N'Kies de pallet die u vervangt door de nu gescande pallet:'\r\n\t\t\t\t\t\t\tselect \r\n\t\t\t\t\t\t\t[sku~col-sm-2]=sku\r\n\t\t\t\t\t\t\t,[lookupcode~col-sm-2]=lookupcode\r\n\t\t\t\t\t\t\t,[remark~col-sm-2]=remark\r\n\t\t\t\t\t\t\t,pos=case remark when 'full' then adv_full_pos else adv_pick_pos end\r\n\t\t\t\t\t\t\t,pal_nr=(select pallet_nr from w_pallet where id in (select value from string_split(preferred_pallet_ids,',')))\r\n\t\t\t\t\t\t\tinto #mol \r\n\t\t\t\t\t\t\t\tfrom q_wms_micro_outbound_lines \r\n\t\t\t\t\t\t\t\twhere wms_micro_outbound_id=@mob \r\n\t\t\t\t\t\t\t\t\tand chk=0 \r\n\t\t\t\t\t\t\t\t\tand xstock_id=@this_xstock_id --230930 toon alleen een vervangbare pallet_mol als deze hetzelfde artikel heeft!\r\n\t\t\t\t\t\t\texec sp_api_modal_table @tmptable=N'#mol'\r\n\t\t\t\t\t--*/\t\t\r\n\t\t\t\t\t--/*\r\n\t\t\t\t\t-- maak de keuzelijst van beschikbare micro_outbound_lines die een zelfde artikel bevatten als de gescande pallet en die nog niet aangescand zijn (chk=0)\r\n\t\t\t\t\tdeclare @list nvarchar(4000)\r\n\t\t\t\t\tset @T=concat('thispalcolli: ',@this_pal_colli)\r\n\t\t\t\t\texec sp_api_toast @T\r\n\t\t\t\t\tset @list=(\r\n\t\t\t\t\t\t\tSELECT STRING_AGG(concat(left(concat(mol.id,'          '),10)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t, ' ',upper(mol.remark)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t, ' ',replace(mol.sku,',',';'),' - ',replace(mol.lookupcode,',',';')\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t,' pal.nr: ',p.pallet_nr\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t,' colli: ',p.colli\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t, ','\r\n\t\t\t\t\t\t\t\t\t\t\t) --LET OP: GEEN KOMMA GEBRUIKEN !!!\r\n\t\t\t\t\t\t\tFROM q_wms_micro_outbound_lines mol\r\n\t\t\t\t\t\t\tCROSS APPLY STRING_SPLIT(mol.preferred_pallet_ids, ',') split_val\r\n\t\t\t\t\t\t\tJOIN w_pallet p ON p.id = CAST(split_val.value AS INT)\r\n\t\t\t\t\t\t\tWHERE mol.chk = 0 \r\n\t\t\t\t\t\t\t\tAND mol.wms_micro_outbound_id =@mob \r\n\t\t\t\t\t\t\t\t--? dit check ik zondag wel als ik het niet vergeet, want ik moet nu bikkelen met sassie \r\n\t\t\t\t\t\t\t\t--231001\r\n\t\t\t\t\t\t\t\tAND mol.xstock_id =@this_xstock_id --is not null --=@this_xstock_id --230930 toon alleen een vervangbare pallet_mol als deze hetzelfde artikel heeft!\r\n\t\t\t\t\t\t\t\tAND (mol.remark='replenish' OR (mol.amount=@this_pal_colli))\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\r\n\t\t\t\t\t--pre declare: @button_choose_pal\r\n\t\t\t\t\tEXEC sp_api_modal_text N'Kies een pallet die vervangen wordt door de gescande pallet:',@class='h1'  --je zie de pallet die oorspronkelijk op de mol bedoeld was; maar eigenlijk kiezen we de MOL om er vervolgens de gescande (alternatieve) pallet aan te koppelen\r\n\t\t\t\t\t\r\n\t\t\t\t\t--/*\r\n\t\t\t\t\t\t-- LIST:EXEC sp_api_modal_choose_list @list = @list\r\n\t\t\t\t\t\t--BUTTONS:\r\n\t\t\t\t\t\tEXEC sp_api_modal_choose @list = @list\r\n\t\t\t\t\t\t,@value = @button_choose_pal OUT\r\n\t\t\t\t\t\t--,@startkey=3 --function key starting number\r\n\t\t\t\t\t\tif @button_choose_pal is not NULL\r\n\t\t\t\t\t\tBEGIN\t\r\n\t\t\t\t\t\t\tset @replacement_mol_id=left(@button_choose_pal,10) --eerste stukje is het mol_id\r\n\t\t\t\t\t\t\t--exec sp_api_toast @button_choose_pal\r\n\t\t\t\t\t\t\tif not exists(select 1 from wms_micro_outbound_lines where id=@replacement_mol_id)\r\n\t\t\t\t\t\t\tBEGIN\r\n\t\t\t\t\t\t\t\texec sp_api_modal_alert N'Er is iets verkeerd gegaan met de selectie!!'\r\n\t\t\t\t\t\t\t\treturn\r\n\t\t\t\t\t\t\tEND\r\n\t\t\t\t\t\t\t--oke verder\r\n\t\t\t\t\t\t\tupdate wms_micro_outbound_lines \r\n\t\t\t\t\t\t\t\tset chk=1 \r\n\t\t\t\t\t\t\t\t,scanned_pallet_id = @this_pallet_id\r\n\t\t\t\t\t\t\twhere id=@replacement_mol_id\r\n\t\t\t\t\t\t\tset @mol=@replacement_mol_id\r\n\r\n\t\t\t\t\t\t\tset @this_pallet_type=(select UPPER(remark) from wms_micro_outbound_lines where id=@replacement_mol_id)\r\n\r\n\t\t\t\t\t\tEND\t\r\n\t\t\t\t\t--*/\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\tEND\t\r\n\t\t\tEND --de else\r\n\t\tend\t\r\n\t\t--exec sp_api_modal_alert @this_pallet_id --231001 TEST !!\r\n\t\treturn\r\n\tend\t\t\r\nEND\r\n\r\n\r\n--240607 was: \r\nRETURN -- EVEN AFKAPPEN ..........\r\n--nu:\r\n--if not exists(select 1 from code_mob_serials where mob_id=@uuid and amount<>codes) RETURN\r\n\r\n--240607 nu dus dus doorgaan naar scannen als er nog serienummers niet gekoppeld zijn..\r\n\r\n\r\nNORMAAL:\r\nexec sp_api_modal_text N'Scannen van items:'\r\nEXEC sp_api_modal_choose @list = N'alles,onvoltooid,volle_pallets',@value = @button_choose2 OUT\r\nif @button_choose2 is null return--set @button_choose2='onvoltooid'\t\r\n--exec sp_api_toast @uuid\r\n--MOBILE ACTION EXTRA CODE\r\n--set @button_choose2='onvoltooid'\r\nif @button_choose2='volle_pallets'\r\n\tbegin\r\n\t\texec sp_api_modal_text N'scan de labels van deze volle pallets: '\r\n\t\tselect id, pallet_label into #sfp from pallet_status where id in (select preferred_pallet_ids from wms_micro_outbound_lines where wms_micro_outbound_id=@uuid) --scanned full pallets\r\n\t\texec sp_api_modal_table @tmptable=N'#sfp'\r\n\t\treturn\r\n\tEND\r\nif @button_choose2='alles'\r\n\tbegin\r\n\t\t\r\n/*\t\tset @mol=(select top 1 id from q_wms_micro_outbound_lines mol\r\n\t\t\twhere mol.wms_micro_outbound_id =@uuid\r\n\t\t\t --AND\t(select count(*) from wms_micro_outbound_line_barcode where wms_micro_outbound_lines_id=mol.id)<mol.Amount\r\n\t\t\tand (select scan_serial_number_outbound from xstock where id=(mol.xstock_id)) = 1 -- ER MOET SERIAL GESCAND WORDEN\r\n\t\t\t--ALLES and mol.is_processed =0 -- als deze door de loods op 1 wordt gezet\r\n\t\t\torder by adv_pick_pos\r\n\t\t)  \r\n\t\t\r\n\t\tset @t=concat('mol:',@mol,N' alles')\r\n\t\texec sp_api_modal_text @t\r\n*/\r\n\t\t--exec sp_api_modal_alert @UUID\r\n\t\t--select * into #mol from Q_wms_micro_outbound_lines where wms_micro_outbound_id = @uuid\r\n\t\t/*\r\n\t\tselect  \r\n\t\t\t--is_processed,\r\n\t\t\t--container_number,\r\n\t\t\t--linked_amount,\r\n\t\t\tlinked_SERIALS as [serials@~col-sm-1],\r\n\t\t\tsku\r\n\t\t\t--lookupcode,\r\n\t\t\t\r\n\t\t\t into #mol \r\n\t\t\tfrom q_wms_micro_outbound_lines where wms_micro_outbound_id=@uuid--3297\r\n\t\texec sp_api_modal_table @tmptable=N'#mol'\t,@print=1\r\n\t\treturn\r\n\t\t*/\r\n\r\n\t\tselect [amt~col-2]=items, [sku~col-6]=sku, [ser_head~col-4]=left5 into #mob_info from mob_scan_info where mob_id=@uuid\r\n\t\texec sp_api_modal_table @tmptable=N'#mob_info'\t,@print=1, @orderby=N' order by 2'\r\n\t\treturn\r\n\r\n\t\t--exec sp_api_modal_clear\r\n\r\n\tend\r\n\r\nif @button_choose2='onvoltooid'\r\n\tbegin\r\n\t\t--infolijstje\r\n\t\tselect [mol_id~col-3]=ID -- nozzels per 240611\r\n\t\t\t\t,[pal_nr~col-3]=(select pallet_nr from w_pallet where id=scanned_pallet_id)\r\n\t\t\t\t,[scanned_pallet_id~col-6]=scanned_pallet_id\r\n\t\t\t\tinto #lijstje_onvoltooid\r\n\t\t\t\tfrom q_wms_micro_outbound_lines mol\r\n\t\t\twhere scanned_pallet_id is not NULL --240611 ! erbij moet een scanned pallet zijn voor deze mol selectie!\r\n\t\t\t\tAND remark <> 'pick' --240611 1433\r\n\t\t\t\tAND mol.wms_micro_outbound_id =@uuid\r\n\t\t\t--AND\t(select count(*) from wms_micro_outbound_line_barcode where wms_micro_outbound_lines_id=mol.id)<mol.Amount\r\n\t\t\t-- 230907 items zonder serienummer moeten wel SKU SCAN KRIJGEN... and (select scan_serial_number_outbound from xstock where id=(mol.xstock_id)) = 1 -- ER MOET SERIAL GESCAND WORDEN\r\n\t\t\tand (\r\n\t\t\t\t\tmol.is_processed =0 -- als deze door de loods op 1 wordt gezet\r\n\t\t\t\t\tOR\r\n\t\t\t\t\t--linked_serials <> amount\r\n\t\t\t\t\tlinked_amount <> amount --230901 dit betekent dat de (auto)assign nog niet compleet is (misschien nor replenish pallet maken etc.)\r\n\t\t\t\t)\t\r\n\t\tif (select count(*) from #lijstje_onvoltooid)>0 --if er voorgezet 240611\t\t\r\n\t\tBEGIN\r\n\t\t\texec sp_api_modal_table @tmptable=N'#lijstje_onvoltooid',@print=0\t\t\r\n\t\t\r\n\r\n\t\t\t--scan pallet-sticker\r\n\t\t\texec sp_api_modal_text N'scan de pallet sticker een van de genoemde pallets'\r\n\t\t\tEXEC sp_api_modal_input @name = '@ps', @value = @ps OUT ,@focus=1\r\n\t\t\t--but_10 er bij\r\n\t\t\tEXEC sp_api_modal_button @name='@but_10',@value = 'Check', @valueout = @but_10 OUT,@class='btn-danger',@key='Enter'; if @but_10 is NULL return\r\n\t\t\tif @ps is null return\r\n\t\t\tif left(@ps,3)<>'ps:'\r\n\t\t\tBEGIN\r\n\t\t\t\texec sp_api_modal_text N'Dit is geen Tracy pallet sticker QR code'\r\n\t\t\t\t--exec sp_api_modal_restart--231130\r\n\r\n\t\t\t\tRETURN\r\n\t\t\tEND\t\r\n\t\t\r\n\r\n\t\t\tset @this_pallet_id=right(@ps,len(@ps)-3)\r\n\t\t\tif not exists(select 1 from #lijstje_onvoltooid where [scanned_pallet_id~col-6]=@this_pallet_id)\r\n\t\t\tBEGIN\r\n\t\t\t\texec sp_api_modal_text 'Fout, deze pallet staat niet in de lijst..'\r\n\t\t\t\treturn\r\n\t\t\tEND\r\n\t\t\tELSE\r\n\t\t\tBEGIN\r\n\t\t\t\t-- zet @mol\r\n\t\t\t\tset @mol=(select [mol_id~col-3] from #lijstje_onvoltooid where [scanned_pallet_id~col-6]=@this_pallet_id )\r\n\t\t\tEND\r\n\t\t\t\r\n\t\t\t--einde infolijstje\r\n\t\tEND\r\n\t\tif @mol is null --fallback naar top 1 \r\n\r\n\t\tset @mol=(select top 1 id from q_wms_micro_outbound_lines mol\r\n\t\t\twhere mol.wms_micro_outbound_id =@uuid\r\n\t\t\t--AND\t(select count(*) from wms_micro_outbound_line_barcode where wms_micro_outbound_lines_id=mol.id)<mol.Amount\r\n\t\t\t-- 230907 items zonder serienummer moeten wel SKU SCAN KRIJGEN... and (select scan_serial_number_outbound from xstock where id=(mol.xstock_id)) = 1 -- ER MOET SERIAL GESCAND WORDEN\r\n\t\t\tand (\r\n\t\t\t\t\tmol.is_processed =0 -- als deze door de loods op 1 wordt gezet\r\n\t\t\t\t\tOR\r\n\t\t\t\t\t--linked_serials <> amount\r\n\t\t\t\t\tlinked_amount <> amount --230901 dit betekent dat de (auto)assign nog niet compleet is (misschien nor replenish pallet maken etc.)\r\n\t\t\t\t)\t\r\n\t\t\torder by adv_pick_pos\r\n\t\t)\r\n\t\t--set @t=concat('1:',@mol); exec sp_api_toast @T\r\n\t\tset @no_serials =(select case (select scan_serial_number_outbound from xstock where id=(select xstock_id from wms_micro_outbound_lines where id=@mol)) when 1 then 0 else 1 end)\r\n\t\t\r\n\t\t--set @t=concat('mol:',@mol,N' nog verwerken..',case when @no_serials=1 then '**NO SERIALS**' else '' end) --indicator dat er geen serienummers nodig zijn\r\n\t\t--240610\r\n\t\tset @t=concat('mol:',@mol,N' pallet nr: ',(select pallet_nr from w_pallet where id=(select scanned_pallet_id from wms_micro_outbound_lines where id=@mol)),N' op deze pallet nog ',(select l_items\t- isnull(serial_items,0) from mol where mol_id=@mol),' verwerken..',case when @no_serials=1 then '**NO SERIALS**' else '' end) --indicator dat er geen serienummers nodig zijn\r\n\t\t\r\n\t\texec sp_api_modal_text @T\r\n\t\t \r\n\tend\r\n\r\n\r\n\r\nif @mol is null \r\n\tbegin\r\n\t\texec sp_api_modal_alert N'Scan serienummers is voltooid.' --231130 was sp_api_modal_text\r\n\t\texec sp_api_modal_clear\r\n\t\tRETURN\r\n\tend\t\r\n\r\n--230918 extra dummyscan voor deze @mol, want inmiddels kan een pallet ge-replenished zijn waardoor het aantal micro-items inmiddels volledig beschikbaar is\r\n\texec auto_assign_wms_micro_items_to_wms_micro_outbound_line @LINE_id=@mol\r\n\texec assign_pallets_to_micro_outbound_from_line\t@Line =@mol\r\n------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n\r\nselect @xstock_id=xstock_id, @aantal_serials_nodig = amount  from wms_micro_outbound_lines where id=@mol\r\n\r\nselect * into #registered_serials from wms_micro_outbound_line_barcode where wms_micro_outbound_lines_id=@mol\r\nif (select count(*) from #registered_serials)>=@aantal_serials_nodig\r\n\tbegin\r\n\t\tset @T=concat(N'Er is al gescand.','')\r\n\t\texec sp_api_modal_text @T\r\n\t\tset @T=concat(N'Aantal gescande codes:',(select count(*) from wms_micro_outbound_line_barcode where wms_micro_outbound_lines_id=@mol))\r\n\t\texec sp_api_modal_text @T\r\n\t\t--exec sp_api_modal_table @tmptable=N'#registered_serials'\r\n\t\t--exec sp_api_modal_alert @uuid\r\n\t\tEXEC sp_api_modal_button @name='@button5',@value = 'Meer Scannen', @valueout = @button5 OUT,@class='btn-danger',@key='F9'\r\n\t\tif isnull(@button5,N'')<>N'Meer Scannen'\r\n\t\treturn\r\n\tend\t\r\n\r\n \r\n\r\n\r\nif isnull(@sku_oke,0)\t=0\r\n\tbegin\r\n\t\tset @T=concat(N'pickpositie: ',(select top 1 position_code from pallet_status where micro_pick_allowed=1 and xstock_id=@xstock_id and out_completed is null))\r\n\t\texec sp_api_modal_text @T, @class='h1'\r\n\t\tSET @T=concat(N'Aantal: ',@aantal_serials_nodig,'. Artikelomschrijving: ',(select lookupcode from xstock where id=@xstock_id))\r\n\t\texec sp_api_modal_text @T\r\n\t\tSET @T=concat(N'Scan de SKU: ',(select sku from xstock where id=@xstock_id))--, ' en ', @aantal_serials_nodig,' serienummers'\t)\r\n\t\texec sp_api_modal_text @T\r\n\t\t\r\n\t\tEXEC sp_api_modal_input @name = '@sku_check', @value = @sku_check OUT,@hidden=0,@focus=1 --, @type='textarea',@rows=20--,@inline = 1 -- (multi line input)\r\n\t\tEXEC sp_api_modal_button @name='@button3',@value = N'Check', @valueout = @button3 OUT,@class='btn-danger',@key='F5' --Enter kan niet verstoort de flow\r\n\t\tif @button3 is null return\r\n\t\tif @sku_check is null return\r\n\t\texec sp_api_modal_text @sku_check\r\n\t\t\r\n\tend\t\t\r\nif not exists(select 1 from wms_micro_outbound_lines mol \r\n\t\t\t\tjoin xstock s on s.id= mol.xStock_id \r\n\t\t\t\twhere mol.id=@mol and \r\n\t\t\t\t\t(\r\n\t\t\t\t\t\ttrim(s.sku)=trim(@sku_check) \r\n\t\t\t\t\t\tor \r\n\t\t\t\t\t\t--230912 OOK EAN TOESTAAN I.P.V. SKU ALS ER GEEN SERIENUMMERS GESCAND HOEVEN TE WORDEN\r\n\t\t\t\t\t\t( trim(s.EAN_CODE)>N'' AND @no_serials =1 AND trim(s.EAN_CODE)=trim(@sku_check) )\r\n\t\t\t\t\t)\r\n\t\t\t\t)\r\n\tBEGIN\r\n\t\tset @T=concat(@sku_check,' is de SKU van een verkeerd artikel.')\r\n\t\t--231128 beep er bij\r\n\t\texec sp_api_modal_beep 1100, 500 --error !\r\n\r\n\t\texec sp_api_toast @T --N'* VERKEERD ARTIKEL ! *'\r\n\t\tEXEC sp_api_modal_value @name = '@sku_check',@value = NULL\r\n\t\tEXEC sp_api_modal_value @name = '@button3',@value = NULL\r\n\t\tset @SKU_OKE=0\r\n\t\treturn\r\n\tEND\r\nset @sku_oke=1\r\n\r\n\r\n------231001-------\r\nadd_serials_to_mol:\r\n---- L A B E L ----\r\n--exec sp_api_toast N'serials to mol...'--231130\r\n--231001 als hier heen wordt gesprongen kan het zijn dat @no_serials onbekend is..\r\nset @no_serials =(select case (select scan_serial_number_outbound from xstock where id=(select xstock_id from wms_micro_outbound_lines where id=@mol)) when 1 then 0 else 1 end)\r\n\r\n\r\nset @T=concat(N'NOG: ',@aantal_serials_nodig - (select count(*) from wms_micro_outbound_line_barcode where wms_micro_outbound_lines_id=@mol),' serienummers. (save=bijwerken)')\r\nexec sp_api_modal_text @T\r\n\r\n\r\n--extra 230907\r\nif @no_serials =1 \r\n\tBEGIN\r\n\t\tset @scanned_codes='no serials required'\r\n\t\t--set @button =N'Save'\r\n\tEND\r\n\t\t--oud: voor 230907\r\n--> set @scanned_codes= (select serialnumbers from wms_micro_outbound_lines where id=@mol)\t\t--231211 NIEUW ER VOOR..\r\nEXEC sp_api_modal_input @name = '@scanned_codes', @value = @scanned_codes OUT , @type='textarea',@rows=8, @focus=1 --,@inline = 1 -- (multi line input)\r\nEXEC sp_api_modal_button @name='@button',@value = 'Save', @valueout = @button OUT,@class='btn-danger',@key='F6'\r\nif @button is null return; --231211 extra wacht op button\r\n\r\nif @button='Save' -- opslaan, zodat je ze niet kwijt raakt \r\n\tBEGIN\r\n\t\tif @scanned_codes > N''\r\n\t\t\tBEGIN\r\n\t\t\t\tif @no_serials =0 --NORMALE SITUATIE MET SERIENUMMERS VERPLICHTING\r\n\t\t\t\t\tBEGIN\r\n\t\t\t\t\t\t-- log, is al 2x een lifesaver geweest!\r\n\t\t\t\t\t\tupdate wms_micro_outbound_lines set serialnumbers=concat(serialnumbers,@scanned_codes) where id=@mol--=@ID\r\n\r\n\t\t\t\t\t\t-- unieke barcodes registreren bij de micro outbound line\r\n\t\t\t\t\t\t--declare @scanned_codes nvarchar(max) = (select top 1 serialnumbers from wms_micro_outbound_lines where nullif(trim(serialnumbers),N'') is not null)\r\n\t\t\t\t\t\t--select serialnumbers,*  from wms_micro_outbound_lines where nullif(trim(serialnumbers),N'') is not null\r\n\t\t\t\t\t\t/*\r\n\t\t\t\t\t\t--krijg de unieke codes uit de scans en \r\n\t\t\t\t\t\tselect line from scanresult_as_table(@scanned_codes) \r\n\t\t\t\t\t\t\twhere nullif(trim(line),N'') is not NULL --\tzonder blanco regels!\r\n\t\t\t\t\t\t\t\t-- evt lengrte afdwingen and len(line) >15\r\n\t\t\t\t\t\t\tgroup by line -- maak uniek\r\n\t\t\t\t\t\t*/\r\n\t\t\t\t\t\t--select * from \r\n\t\t\t\t\t\t--declare @mol int=297\r\n\t\t\t\t\t\tinsert into wms_micro_outbound_line_barcode(wms_micro_outbound_lines_id,Line)\r\n\t\t\t\t\t\t\tselect @mol, line\r\n\t\t\t\t\t\t\tfrom _1\r\n\t\t\t\t\t\t\tcross apply ( select line from scanresult_as_table(@scanned_codes) \r\n\t\t\t\t\t\t\t\t\t\t\twhere nullif(trim(line),N'') is not NULL --\tzonder blanco regels!\r\n\t\t\t\t\t\t\t\t\t\t\t\t-- evt lengte afdwingen and len(line) >15\r\n\t\t\t\t\t\t\t\t\t\t\tgroup by line -- maak uniek\r\n\t\t\t\t\t\t\t\t\t\t) sr\r\n\t\t\t\t\t\t\twhere --beter pas bij toekennen beperken, want zo blijft deze scan-actie redelijk universeel  len(sr.line) >13 and --230823 zo hebben we geen last van de EAN CODES VAN AGNEOVO\r\n\t\t\t\t\t\t\t\tnot exists(select 1 from wms_micro_outbound_line_barcode where Line=sr.line)\r\n\r\n\t\t\t\t\t\t-- select * from wms_micro_outbound_line_barcode\r\n\t\t\t\t\t\t\r\n\r\n\t\t\t\t\t\t--EXEC sp_api_modal_button @name='@button2',@value = 'Klaar', @valueout = @button2 OUT,@class='btn-danger',@key='F7'\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t--set @T=concat(N'Aantal gescande codes:',(select count(*) from wms_micro_outbound_line_barcode where wms_micro_outbound_lines_id=@mol))\r\n\t\t\t\t\t\t--exec sp_api_modal_text @T\r\n\t\t\t\t\t\t\t--select * into #unique from wms_micro_outbound_line_barcode where wms_micro_outbound_lines_id=@mol\r\n\t\t\t\t\t\t\t--exec sp_api_modal_table @tmptable=N'#unique'\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t--GELIJK TOEKENNEN\r\n\t\t\t\t\t\texec assign_scanned_serials_to_micro_items \r\n\t\t\t\t\t\t\t\t@mob=@uuid -- KOPPEL DE MICRO ITEMS (en verwijder eventueel de overscans)\r\n\t\t\t\t\t\t\t\t,@remove_unassigned =1\r\n\t\t\t\t\t\t\r\n\t\t\t\t\tEND\t--(OPLSAAN MET SERIENUMMER VERWERKEN)\r\n\t\t\t\t--AUTOMATISCH KLAARBOEKEN PER MOL\r\n\t\t\t\tif @no_serials =1 --230907 altijd conform bij NO SERIALS\r\n\t\t\t\t\t--bijserienummers moet het aantal overeenkomen\r\n\t\t\t\t\tor exists (select 1 from q_wms_micro_outbound_lines where id=@mol and linked_serials=Amount) -- volledig toegekend! was: @button2=N'Klaar' \r\n\t\t\t\t\tbegin\r\n\t\t\t\t\t\tupdate wms_micro_outbound_lines set is_processed =1 where id=@mol  -- 230824 op processed zetten,zodat de volgende gekozen kan worden..\r\n\t\t\t\t\t\t--230828 dit verwijdert de scans die niet geloppeld zijn aan items.\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t--exec sp_api_modal_alert N'items volledig gescand, scan QR voor eventueel volgende items.'\t\r\n\t\t\t\t\t\texec sp_api_toast N'items volledig gescand, scan QR voor eventueel volgende items.'\t\r\n\t\t\t\t\t\t--exec sp_api_modal_restart --231130 ipv clear\r\n\t\t\t\t\t\t--exec sp_api_modal_value @name=N'@button_gearriveerd_bij_pallet'\r\n\t\t\t\t\t\texec sp_api_modal_clear --231211 er bij\r\n\t\t\t\t\t\treturn\r\n\t\t\t\t\t\t--EXEC sp_api_modal_values_clear -- @ignore = N'company'\r\n\t\t\t\t\t\t-- voor alert gezet exec sp_api_modal_clear\r\n\t\t\t\t\t\t--EXEC sp_api_modal_restart --230907 proberen..\r\n\t\t\t\t\tend\t\r\n\t\t\t\t\r\n\t\t\tEND\r\n\t\t--EXEC sp_api_modal_value @name = '@button',@value = NULL \t\t--231211 save button un-clicken\t\r\n\t\t--EXEC sp_api_modal_value @name = '@sku_ok',@value = NULL\t\t\t--231211\r\n\t\t--EXEC sp_api_modal_value @name = '@sku_check',@value = NULL\t\t--231211\r\n\t\t--EXEC sp_api_modal_value @name = '@scanned_codes',@value = NULL\t--231211\r\n\t\t--return\t\r\n\t\texec sp_api_modal_clear --restart--231211 test restart ! clear --230907\t--als je hier niet cleart, dan kan je tussendoor opslaan..\r\n\t\treturn\r\n\tend\r\n\r\n----------------------\r\n-- LABELS\r\n----------------------\r\nexec sp_api_modal_clear -- 231211 TEST ER BIJ \r\nRETURN\r\nGOFULL:\r\nif @this_pallet_type ='FULL' --> SHOW SCAN BUTTON!\r\nBEGIN\r\n\tEXEC sp_api_modal_button @name='@button_scan_serials_for_mol',@value = 'Scan serials', @valueout = @button_scan_serials_for_mol OUT,@class='btn-danger'\r\n\t--tot hier inserted 231001 gelijk hier mogelijkheid om serienummers te scannen:\r\n\tif @button_scan_serials_for_mol is null return\t\r\n\tif @button_scan_serials_for_mol='Scan serials' goto add_serials_to_mol --231001\r\nEND\r\nRETURN --GOFULL\r\n\r\nGOREPLENISH:\r\nif @this_pallet_type ='REPLENISH' --> SHOW REPLENISH BUTTON!\r\nBEGIN\r\n\tif @replenish_loc is null \r\n\tBEGIN\r\n\t\tset @replenish_loc=(select pick_position from xstock where id=@this_xstock_id)\r\n\tEND\t\r\n\t--check of de replenishment al is geregistreerd op de pallet\r\n\t-- losse items picken en darvan serienummers scannen is niet hier. dit is alleen replenishen!\r\n\tif not exists( select * from w_pallet where id=@this_pallet_id and micro_pick_allowed=1)\r\n\tBEGIN\r\n\t\tEXEC sp_api_modal_input @name = '@replenish_loc', @value = @replenish_loc OUT \r\n\t\tEXEC sp_api_modal_button @name='@button_replenish',@value = 'Replenish NOW', @valueout = @button_replenish OUT,@class='btn-danger'\r\n\t\tif @button_replenish is null return\t\r\n\t\tif @button_replenish='Replenish NOW' --hier evt jump naar separaat replenishment\r\n\t\tBEGIN\r\n\t\t\tif nullif(trim(@replenish_loc),N'') is NULL\r\n\t\t\tBEGIN\r\n\t\t\t\texec sp_api_modal_text N'REPLENISHMENT LOCATION REQUIRED'\r\n\t\t\t\tRETURN\r\n\t\t\tEND\r\n\t\t\tupdate w_pallet set micro_pick_allowed=1,position_code=@replenish_loc where id=@this_pallet_id\r\n\t\t\tupdate wms_micro_outbound_lines set scanned_pallet_id=@this_pallet_id where id=@pallet_mol_id\r\n\t\t\texec sp_api_modal_clear\r\n\t\t\t--PICKLOKATIE !!\r\n\t\t\t--TODO...\r\n\t\t\t--+ EVENTUEEL HELE REPLENISH KOP\r\n\t\tEND\r\n\tEND\r\nEND\t\r\nRETURN --GOREPLENISH\r\n\r\n\r\n\t\t\t\t\r\n\r\n\r\n/*\r\n----231001----\r\nreplenish_mol:\r\n----LABEL-----\r\nupdate w_pallet set micro_pick_allowed=1 where id=\r\nreturn\r\n*/\r\n\r\n/* --230821 RESET UITGESCHAKELD\r\nEXEC sp_api_modal_button @name='@button4',@value = 'Reset', @valueout = @button4 OUT,@class='btn-danger',@key='F8'\r\n\r\nif @button4=N'Reset'\r\n\tBEGIN\r\n\t\tdelete from wms_micro_outbound_line_barcode where wms_micro_outbound_lines_id=@mol\r\n\t\tEXEC SP_API_MODAL_CLEAR\r\n\t\tEXEC sp_api_modal_value @name = '@button4',@value = NULL\r\n\tend\r\n*/\r\n-- als het aantal in #unique overeenkomt met het aantal nog te vullen serienummers dan kunnen ze worden toegekend\r\n\t",
                    "action_id": 692,
                    "action_name": "#qr_action_verwerk_micro_pick_v11",
                    "source_table": "api_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_modal_workflow",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@ids",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@ids n"
                },
                {
                    "name": "@identity_column",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 2048,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@identity_column n"
                },
                {
                    "name": "@tablename",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "N",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@tablename N"
                },
                {
                    "name": "@basetable",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "N",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@basetable N"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_modalchart_sql",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@data",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@data n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_modalview_add",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@json",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@json n"
                },
                {
                    "name": "@use_placeholder",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@use_placeholder n"
                }
            ],
            "embedded_example": "EXEC sp_api_modalview_add @json,@use_placeholder",
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_moodal_table_update_old_220408",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@tmptable",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@tmptable n"
                },
                {
                    "name": "@buttonclass",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "N'btn-primary'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@buttonclass n"
                },
                {
                    "name": "@focusx",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "1",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@focusx i"
                },
                {
                    "name": "@focusy",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "1",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@focusy i"
                },
                {
                    "name": "@addnew",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@addnew i"
                },
                {
                    "name": "@showheader",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "1",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@showheader b"
                },
                {
                    "name": "@identifier",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 7,
                    "full_declaration_from_def": "@identifier n"
                },
                {
                    "name": "@sort",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "''",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 8,
                    "full_declaration_from_def": "@sort n"
                },
                {
                    "name": "@reducer",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "''",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 9,
                    "full_declaration_from_def": "@reducer n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_moodal_table_update_test",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@tmptable",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@tmptable n"
                },
                {
                    "name": "@buttonclass",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "N'btn-primary'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@buttonclass n"
                },
                {
                    "name": "@focusx",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "1",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@focusx i"
                },
                {
                    "name": "@focusy",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "1",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@focusy i"
                },
                {
                    "name": "@addnew",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@addnew i"
                },
                {
                    "name": "@showheader",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "1",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@showheader b"
                },
                {
                    "name": "@identifier",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 7,
                    "full_declaration_from_def": "@identifier n"
                },
                {
                    "name": "@sort",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "''",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 8,
                    "full_declaration_from_def": "@sort n"
                },
                {
                    "name": "@reducer",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "''",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 9,
                    "full_declaration_from_def": "@reducer n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_oauth",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@url",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@url n"
                },
                {
                    "name": "@client_id",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@client_id n"
                },
                {
                    "name": "@response_type",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "'code'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@response_type n"
                },
                {
                    "name": "@redirect_uri",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@redirect_uri n"
                },
                {
                    "name": "@access_type",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "'offline'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@access_type n"
                },
                {
                    "name": "@scope",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@scope n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_openid_connect_token",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@url",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@url n"
                },
                {
                    "name": "@client_id",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@client_id n"
                },
                {
                    "name": "@client_secret",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@client_secret n"
                },
                {
                    "name": "@access_token",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@access_token n"
                },
                {
                    "name": "@json",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@json n"
                },
                {
                    "name": "@grant_type",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "'client_credentials'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@grant_type n"
                },
                {
                    "name": "@username",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 7,
                    "full_declaration_from_def": "@username n"
                },
                {
                    "name": "@password",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 8,
                    "full_declaration_from_def": "@password n"
                },
                {
                    "name": "@scope",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 9,
                    "full_declaration_from_def": "@scope n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_pdf2json",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@filename",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@filename n"
                },
                {
                    "name": "@text",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@text n"
                },
                {
                    "name": "@json",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@json n"
                },
                {
                    "name": "@tmptable",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@tmptable n"
                },
                {
                    "name": "@dataout",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@dataout n"
                },
                {
                    "name": "@api_files_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@api_files_id i"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_performance_test",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@count",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "20000",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@count i"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_places_by_id",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@place_id",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@place_id n"
                },
                {
                    "name": "@json",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@json n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_places_search",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@search",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 2048,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@search n"
                },
                {
                    "name": "@json",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@json n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {
                "dbo.sp_api_modal_alert": 1
            },
            "real_usage_examples": [
                {
                    "sql_source": "declare @json nvarchar(2048)\nexec sp_api_places_search @Search=N'abc 666 poeldijk',@json=@json OUT\nexec sp_api_modal_Alert @json",
                    "action_id": 269,
                    "action_name": "test adres",
                    "source_table": "api_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_places_search_apis_post",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@body",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@body n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_places_search_clean_string",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@search",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 2048,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@search n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_populate_card",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@card_id",
                    "type_from_sys": "int",
                    "type_from_def": "I",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@card_id I"
                },
                {
                    "name": "@toast",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "1",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@toast b"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {
                "dbo.sp_api_modal_input": 2,
                "dbo.sp_api_modal_button": 2,
                "dbo.sp_api_card_re_order": 1,
                "dbo.sp_api_modal_clear": 2,
                "dbo.sp_api_add_sql_task": 1,
                "dbo.sp_api_modal_text": 1,
                "dbo.sp_api_modal_date": 1,
                "dbo.sp_api_modal_table": 1,
                "dbo.sp_api_modal_select_table": 1,
                "dbo.sp_api_modal_choose": 1
            },
            "real_usage_examples": [
                {
                    "sql_source": "/*\n\tpredeclare: @api_card_tablename,@api_card_basetable,@button,@name\n*/\nEXEC sp_api_modal_text N'Change table, view and/or basetable',N'h4 text-muted'\nEXEC sp_api_modal_text N'Warning, this is dangerous and may lead to issues. The main purpose is to change a table to a similar view.',N'p-4 text-danger font-weight-bold'\nSELECT @api_card_tablename = tablename, @api_card_basetable = basetable,@name=name FROM api_card WHERE id = @id\nIF @api_card_basetable IS NULL SET @api_card_basetable = @api_card_tablename\nEXEC sp_api_modal_text N'Table or view name'\nEXEC sp_api_modal_input @name='@api_card_tablename', @value= @api_card_tablename OUT,@select=1\nEXEC sp_api_modal_text N'Base table for view above (or leave empty)'\nEXEC sp_api_modal_input @name='@api_card_basetable', @value= @api_card_basetable OUT,@select=1\nEXEC sp_api_modal_text N'Card name'\nEXEC sp_api_modal_input @name='@name', @value= @name OUT,@select=1\nEXEC sp_api_modal_button @name='@button',@value = 'Save', @valueout = @button OUT,@class='btn-danger',@key='Enter'\nIF @button IS NOT NULL\n\tBEGIN\n\t\tIF TRIM(@api_card_basetable) = '' SET @api_card_basetable = NULL\n\t\tUPDATE api_card SET tablename = (SELECT name FROM sys_objects WHERE name = @api_card_tablename),basetable = @api_card_basetable,name=@name WHERE id = @id\n\t\tEXEC sp_api_populate_card @id\n\t\tEXEC sp_api_modal_clear\n\tEND",
                    "action_id": 1132,
                    "action_name": "sys_change_table",
                    "source_table": "api_card_actions"
                },
                {
                    "sql_source": "EXEC sp_api_modal_alert N'Velden verbergen?',N'Alleen velden van lijstweergave tonen'\nEXEC sp_api_modal_alert N'Zeker weten?',N'De hele bestaande volgorde wordt zoals de lijstweergave!'\nEXEC sp_api_modal_alert N'Laatste waarschuwing!',N'Dit kan niet ongedaan worden!'\nUPDATE acf SET detail_order = list_order FROM api_card_fields acf WHERE card_id = @card_id\n--DELETE FROM api_card_cache WHERE cid = @card_id\nEXEC sp_api_populate_card @card_id\n--EXEC sp_api_card_re_order @card_id\nEXEC sp_api_modal_clear\n",
                    "action_id": 63,
                    "action_name": "sys_hide_fields_not_in_list",
                    "source_table": "api_actions"
                },
                {
                    "sql_source": "DECLARE @populate_card_id INT = @card_id\nIF @card_name = 'apicard' SET @populate_card_id = @id\nIF @card_name = 'card_fields' SET @populate_card_id = @parent_id\n\nEXEC sp_api_populate_card @populate_card_id\n--RETURN\nDECLARE @pop_id int,@table nvarchar\n\tDECLARE @cursor_api_card CURSOR\n\tSET @cursor_api_card = CURSOR LOCAL FAST_FORWARD FOR SELECT id FROM api_card\n\t\tWHERE id <> @populate_card_id AND (tablename = (SELECT ISNULL(tablename,'qwerq4232we2342rwe') FROM api_card WHERE id = @populate_card_id)\n\t\t\tOR basetable = (SELECT ISNULL(basetable,'qwerqw2346e23rwe') FROM api_card WHERE id = @populate_card_id))\n\tOPEN @cursor_api_card;\n\tFETCH NEXT FROM @cursor_api_card INTO @pop_id\n\tWHILE @@FETCH_STATUS = 0\n\t\tBEGIN\n\t\t\tDECLARE @sql nvarchar(max) = CONCAT(N'EXEC sp_api_populate_card ',@pop_id)\n\t\t\tEXEC sp_api_add_sql_task @sql\n\t\t\t--EXEC sp_api_populate_card @pop_id\n\t\t\tFETCH NEXT FROM @cursor_api_card INTO @pop_id\n\t\tEND\n\tCLOSE @cursor_api_card;\n\tDEALLOCATE @cursor_api_card;\n",
                    "action_id": 68,
                    "action_name": "sys_populate_card",
                    "source_table": "api_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_populate_card_views",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@card_id",
                    "type_from_sys": "int",
                    "type_from_def": "I",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@card_id I"
                },
                {
                    "name": "@tablename",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@tablename  n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {
                "dbo.sp_api_modal_input": 1,
                "dbo.sp_api_modal_text": 1,
                "dbo.sp_api_modal_select_table": 1,
                "dbo.sp_api_modal_button": 1
            },
            "real_usage_examples": [
                {
                    "sql_source": "DECLARE @json nvarchar(max),@sql nvarchar(max),@columnname nvarchar(128)\n\t,@button nvarchar(128)\n\t,@object_id nvarchar(128)\n\t,@code_table nvarchar(128)\n\t,@code_column nvarchar(128)\n\t,@caption_column nvarchar(128)\n\t,@option nvarchar(max)\n\nSELECT @sql = sql,@columnname=name FROM api_card_fields WHERE id = @card_field_id AND (sql is null OR sql = '')\nIF @columnname is null\n\tBEGIN\n\t\tEXEC sp_api_toast N'Field does not exist or already has sql output (clear first!)'\n\t\tRETURN\n\tEND\n\nEXEC sp_api_modal_text N'Choose a code TABLE'\nSELECT * INTO #sys_tables FROM (SELECT id=name, name FROM sys_tables UNION SELECT id=name, name FROM @main_db.sys.views) tbl\n\nEXEC sp_api_modal_select_table @tmptable=N'#sys_tables',@value = @code_table OUT\nSELECT @object_id = object_id FROM sys_tables WHERE name = @code_table\nIF @object_id IS NULL SELECT @object_id = object_id FROM @main_db.sys.views WHERE name = @code_table\nIF @object_id Is NOT NULL\n\tBEGIN\n\t\tEXEC sp_api_modal_text N'Choose a CODE column'\n\t\tSELECT id=name, name INTO #sys_columns_code FROM sys_columns WHERE object_id = @object_id\n\t\tEXEC sp_api_modal_select_table @tmptable=N'#sys_columns_code',@value = @code_column OUT\n\t\tIF EXISTS (SELECT * FROM sys_columns WHERE object_id = @object_id AND name = @code_column)\n\t\t\tBEGIN\n\t\t\t\tEXEC sp_api_modal_text N'Choose a CAPTION column'\n\t\t\t\tSELECT id=name, name INTO #sys_columns_caption FROM sys_columns WHERE object_id = @object_id\n\t\t\t\tEXEC sp_api_modal_select_table @tmptable=N'#sys_columns_caption',@value = @caption_column OUT\n\t\t\t\tIF EXISTS (SELECT * FROM sys_columns WHERE object_id = @object_id AND name = @caption_column)\n\t\t\t\t\tBEGIN\n--\t\t\t\t\t\tEXEC sp_api_modal_text @sql\n\t\t\t\t\t\tEXEC sp_api_modal_button @name='Sure',@value = 'Create a select', @valueout = @button OUT\t,@class='btn-primary',@key='Enter'\n\t\t\t\t\t\tIF @button IS NOT NULL\n\t\t\t\t\t\t\tBEGIN\n\t\t\t\t\t\t\t\tEXEC sp_api_populate_card_views @tablename = @code_table\n\t\t\t\t\t\t\t\tSET @sql = N'SELECT '+QUOTENAME(@code_column)+','+QUOTENAME(@caption_column)\n\t\t\t\t\t\t\t\t\t+' FROM '+QUOTENAME(@code_table)+' ORDER BY 2 FOR JSON PATH, INCLUDE_NULL_VALUES'\n\t\t\t\t\t\t\t\tDECLARE @attr_id_extra INT = (SELECT id FROM api_attributes WHERE name = 'extra')\n\t\t\t\t\t\t\t\tDECLARE @attr_id_element INT = (SELECT id FROM api_attributes WHERE name = 'element')\n\t\t\t\t\t\t\t\tDELETE FROM api_card_field_attributes WHERE field_id = @card_field_id AND attr_id IN (@attr_id_extra,@attr_id_element)\n\t\t\t\t\t\t\t\tINSERT INTO api_card_field_attributes (attr_id,sql,field_id) VALUES\n\t\t\t\t\t\t\t\t\t(@attr_id_element,'''Select''',@card_field_id),(@attr_id_extra,@sql,@card_field_id)\n\t\t\t\t\t\t\t\tEXEC sp_api_modal_clear\n\t\t\t\t\t\t\tEND\n\t\t\t\t\tEND\n\t\t\tEND\n\tEND\n\n/*\nRETURN\n\n\nSELECT @sql = sql,@columnname=name FROM api_card_fields WHERE id = @card_field_id AND (sql is null OR sql = '')\nIF @columnname is null\n\tBEGIN\n\t\tEXEC sp_api_toast N'Field does not exist or has sql output'\n\t\tRETURN\n\tEND\nEXEC sp_api_modal_input @name='Add option',@max=5, @value= @option OUT,@focus=1\n\nSET @sql = N'SET @json = (SELECT id = ' + QUOTENAME(@columnname) + ',name = ' + QUOTENAME(@columnname) + ' FROM\n\t\t(SELECT DISTINCT ' + QUOTENAME(@columnname) + ' FROM '+ QUOTENAME(@tablename) + ' UNION SELECT ' + QUOTENAME(@columnname) + ' = @option) tbl WHERE ' + QUOTENAME(@columnname) + ' IS NOT NULL AND ' + QUOTENAME(@columnname) + ' <> '''' GROUP BY ' + QUOTENAME(@columnname) + ' ORDER BY 1 FOR JSON AUTO)'\nEXEC sp_executesql @sql, N'@json  nvarchar(max) OUT,@option nvarchar(max)', @json = @json OUT,@option = @option\nEXEC sp_api_modal_text @json,N'code'\nEXEC sp_api_modal_button @name='Sure',@value = 'Create a select', @valueout = @valueout OUT\t,@class='btn-primary',@key='Enter'\nIF @valueout IS NOT NULL\n\tBEGIN\n\t\tDECLARE @attr_id_extra INT = (SELECT id FROM api_attributes WHERE name = 'extra')\n\t\tDECLARE @attr_id_element INT = (SELECT id FROM api_attributes WHERE name = 'element')\n\t\tDELETE FROM api_card_field_attributes WHERE field_id = @card_field_id AND attr_id IN (@attr_id_extra,@attr_id_element)\n\t\tINSERT INTO api_card_field_attributes (attr_id,sql,field_id) VALUES\n\t\t\t(@attr_id_element,'''Select''',@card_field_id),(@attr_id_extra,dbo.escape_string(@json),@card_field_id)\n\t\tEXEC sp_api_modal_clear\n\tEND\n*/\n\n\n",
                    "action_id": 51,
                    "action_name": "sys_convert_field_to_code_table",
                    "source_table": "api_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_populate_cards",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": [
                {
                    "sql_source": "EXEC sp_api_modal_alert N'Populate all cards?',N'Action will be scheduled.'\nEXEC sp_api_modal_clear\nEXEC sp_api_populate_cards\nEXEC sp_api_push_bullet @channel_tag = 'tracy',@title=@User_name, @body='Populate ALL', @type='link', @url=N'https://agfx.nl'\nEXEC sp_api_modal_route @name = N'Go to tasks',@pathname=N'/api_sql_tasks'\t,@search =N'?ord=16594d' ,@class = N'btn-success' ,@key = N'Enter'\n",
                    "action_id": 93,
                    "action_name": "sys_populate_all",
                    "source_table": "api_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_populate_lang",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@lang",
                    "type_from_sys": "nchar",
                    "type_from_def": "n",
                    "max_length_bytes": 4,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@lang n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_push_bullet",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@channel_tag",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@channel_tag n"
                },
                {
                    "name": "@title",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@title n"
                },
                {
                    "name": "@body",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@body n"
                },
                {
                    "name": "@token",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 2000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "N'o.RIxgCEDTI5eXdTOZHwYSb8M4FX2J9YQt'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@token n"
                },
                {
                    "name": "@status",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@status i"
                },
                {
                    "name": "@response",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@response n"
                },
                {
                    "name": "@type",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 100,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "N'note'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 7,
                    "full_declaration_from_def": "@type n"
                },
                {
                    "name": "@url",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 8,
                    "full_declaration_from_def": "@url n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {
                "dbo.sp_api_email": 1,
                "dbo.sp_api_modal_input": 1,
                "dbo.sp_api_modal_choose": 1,
                "dbo.sp_api_modal_text": 1,
                "dbo.sp_api_modal_clear": 1,
                "dbo.sp_api_modal_button": 1
            },
            "real_usage_examples": [
                {
                    "sql_source": "EXEC sp_api_modal_alert N'Populate all cards?',N'Action will be scheduled.'\nEXEC sp_api_modal_clear\nEXEC sp_api_populate_cards\nEXEC sp_api_push_bullet @channel_tag = 'tracy',@title=@User_name, @body='Populate ALL', @type='link', @url=N'https://agfx.nl'\nEXEC sp_api_modal_route @name = N'Go to tasks',@pathname=N'/api_sql_tasks'\t,@search =N'?ord=16594d' ,@class = N'btn-success' ,@key = N'Enter'\n",
                    "action_id": 93,
                    "action_name": "sys_populate_all",
                    "source_table": "api_actions"
                },
                {
                    "sql_source": "-------------------------------------------------------------\n-- #qr_action_loods_bevestiging_inslag\n--\t#qr_action_pallet_sticker scanner action handler\n-- pre declare: @uuid int, @button_choose nvarchar(max)= null\n--\n-------------------------------------------------------------\ndeclare @hTML nvarchar(4000) \ndeclare @link_tracy nvarchar(4000)=NULL\ndeclare @T nvarchar(512)=concat(N'Afsluitende handeling voor de inslag van container ',(select container_number from w_lot WHERE Id = @uuid))\nexec sp_api_modal_text @T,@class='h2'\n\ndeclare @current_state nvarchar(512)= (select status from wms_io where w_lot_id=@uuid and in_out='IN' )\nset @T=concat('De huidige status van de inbound is: ',@current_state)\nexec sp_api_modal_text @T,@class='h2'\n\n\nEXEC sp_api_modal_choose @list = N'Conform,Niet_Conform',@value = @button_choose OUT,@startkey=3\nif @button_choose is null return\n \n if @button_choose ='Conform'\n\tbegin\n\t\tif @current_state  ='CONFORM'\n\t\t\tbegin\n\t\t\t\texec sp_api_modal_alert N'De status van deze inslag is al \"CONFORM\"'\n\t\t\t\tEXEC sp_api_modal_clear --!! nodig anders kom je niet weg hier\n\t\t\t\texec sp_api_goto N'\\'\n\t\t\t\treturn\n\t\t\tend\n\t\t\n\t\t\t\t--230516\n\t\t\t\tupdate wms_io \n\t\t\t\t\tset status='CONFORM' \n\t\t\t\t\t\t,conform_user=@USER\n\t\t\t\t\t\t,conform_dt=getdate()\n\t\t\t\t\twhere w_lot_id=@uuid and in_out='IN' \n\t\t\t\n\t\t\t\t--WEBHOOK\n\t\t\t\tdeclare @supplier_id int = (select ffa_id from w_lot where id=@uuid)\n\t\t\t\texec sp_add_webhook_post @target_company_id=@supplier_id, @context_code=N'inbound_booked', @context_id=@uuid\n\t\t\t\t\n\t\t\t\t--notification rick\n\t\t\t\tEXEC tracy_wms_proj.dbo.sp_api_push_bullet @channel_tag = 'tracy_wmsx_rws',@title=N'webhook api inbound completed',@body=N'api inbound voltooid, klant geinformeerd via webhook.'\n\t\t\t\t--EXEC sp_api_email @to=N'inboundrwsbv.com@tracy.nu',@subject='API - BL - INBOUND POST WEBHOOK COMPLETED',@body=N'Er is een INBOUND POST ontvangen uit een extern systeem.'\n\t\t\t\t--exec sp_api_toast N'sp_add_webhook_post....' \n\n\t\t\t\n\t\t\t\n\t\t\t\n\n\t\t--\tLET OP: TEVENS TRIGGER ACTIE MAIL NAAR FFA, ZIE WMS_IO\n\t\t--\tALTER TRIGGER [dbo].[au_wms_io_send_mail] \n\t\t\n\n\n\n\t\t\n/* 230214 deze hoeft niet meer van Dennis\n\t\t--hier mail naar inbound@rws met een link naar de container zodat het verder afgewerkt en bevestigd kan worden naar de klant subject INSLAG CONFORM\n\t\tset @link_tracy=concat(N'https://rws.tsql.app/inbound?id=',@uuid,' ') --meegegeven parameter\n\t\tset @html=concat(N'Container ',(select container_number from w_lot where id=@uuid),' is conform verwachting ingeslagen in de loods. '\n\t\t\t\t\t\t,'Ga naar de betreffende container in Tracy voor de laatste afhandeling. Daarbij kunt u de klant bevestigen via de email button.'\n\t\t\t\t\t\t,'<p><a href=\"',@link_tracy,'\" target=_blank>click hier</a>'\n\t\t\t\t\t\t)\n\n\t  \t--PROJECT CALL !!\n  \t\tEXEC sp_api_email @to = N'inbound@rwsbv.com',@subject = N'inbound conform, s.v.p. afwerken..',@body = N'tracy is the best',@html = @html\n*/\n\t\texec sp_api_modal_clear\n\t\treturn\n\tend\n\n \nif @button_choose ='Niet_Conform'\n\tbegin\n\t\tif @current_state ='NOT CONFORM'\n\t\t\tbegin\n\t\t\t\texec sp_api_modal_alert N'Deze inslag is al als \"NOT CONFORM\" gemeld..'\n\t\t\t\tEXEC sp_api_modal_clear\n\t\t\t\texec sp_api_goto N'\\'\t\t\t\t\n\t\t\t\treturn\n\t\t\tend\n\n\t\tDECLARE @opmerking nvarchar(max),@button22 nvarchar(128)\n\t\texec sp_api_modal_text N'opmerking op container'\n\t\tEXEC sp_api_modal_input @name = '@opmerking', @value = @opmerking OUT --,@inline = 1\n\t\tEXEC sp_api_modal_button @name='@button22',@value = 'Save', @valueout = @button22 OUT,@class='btn-danger',@key='Enter'\n\t\tIF @button22 IS NULL RETURN\n\t\tUPDATE w_lot SET inbound_remark =  @opmerking WHERE Id = @uuid\n\n\t\tupdate wms_io set status='NOT CONFORM' where w_lot_id=@uuid and in_out='IN' \n\t\n\t\n\t\t--hier mail naar inbound@rws met een link naar de container zodat het verder afgewerkt en bevestigd kan worden naar de klant subject: AFWIJKENDE INSLAG\n\t\tset @link_tracy=concat(N'https://rws.tsql.app/inbound?id=',@uuid,' ') --meegegeven parameter\n\t\tset @html=concat(N'Let op: bij het inslaan van de container zijn verschillen geconstateerd. Het betreft container ',(select container_number from w_lot where id=@uuid),'. '\n\t\t\t\t\t\t,'Ga naar de betreffende container en pas de pallets aan. -> '\n\t\t\t\t\t\t,'<p>De opmerking is :',@opmerking,'<p>'\n\t\t\t\t\t\t,'Als de registratie compleet is verwerkt dient u de klant nog de bevestigings mail te sturen via de email button'\n\t\t\t\t\t\t,'<p><a href=\"',@link_tracy,'\" target=_blank>click hier om naar de container te gaan.</a>'\n\t\t\t\t\t\t)\n\n\t  \t--PROJECT CALL !!\n  \t\tEXEC sp_api_email @to = N'inbound@rwsbv.com',@subject = N'AFWIJKENDE INBOUND! S.V.P AFWERKEN..',@body = N'tracy is the best',@html = @html\n\n\t\tEXEC sp_api_modal_clear\n\t\treturn\n\tend\n\n",
                    "action_id": 486,
                    "action_name": "#qr_action_loods_bevestiging_inslag",
                    "source_table": "api_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_qr_sync",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_query_to_html",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@query",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@query n"
                },
                {
                    "name": "@orderBy",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@orderBy n"
                },
                {
                    "name": "@html",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@html n"
                },
                {
                    "name": "@style",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "'border: 1px solid #ccc'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@style n"
                },
                {
                    "name": "@htmlfooter",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@htmlfooter n"
                },
                {
                    "name": "@stylefooter",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@stylefooter n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_raw_json_example",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_readFile",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@filename",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 4096,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@filename n"
                },
                {
                    "name": "@base64data",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@base64data n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_referer_update",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@card_name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@card_name n"
                },
                {
                    "name": "@id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@id i"
                },
                {
                    "name": "@search",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@search n"
                },
                {
                    "name": "@insert",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "1",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@insert b"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_regex_build_sql",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@api_regex_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@api_regex_id i"
                },
                {
                    "name": "@sql",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@sql n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_regex_build_tvf",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@api_regex_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@api_regex_id i"
                },
                {
                    "name": "@sql",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@sql n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_reload_db",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_rename",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_report",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@report_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@report_id i"
                },
                {
                    "name": "@record_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@record_id i"
                },
                {
                    "name": "@base64data",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@base64data n"
                },
                {
                    "name": "@to_preview",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@to_preview b"
                },
                {
                    "name": "@fixed_printer_name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@fixed_printer_name n"
                },
                {
                    "name": "@description",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "N'run report'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@description n"
                },
                {
                    "name": "@test",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 7,
                    "full_declaration_from_def": "@test b"
                },
                {
                    "name": "@fixed_email_address",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 8,
                    "full_declaration_from_def": "@fixed_email_address n"
                },
                {
                    "name": "@printer_copies",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "1",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 9,
                    "full_declaration_from_def": "@printer_copies i"
                },
                {
                    "name": "@report_name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 10,
                    "full_declaration_from_def": "@report_name n"
                },
                {
                    "name": "@printer_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 11,
                    "full_declaration_from_def": "@printer_id i"
                },
                {
                    "name": "@to_download",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 12,
                    "full_declaration_from_def": "@to_download b"
                },
                {
                    "name": "@store_preview",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 13,
                    "full_declaration_from_def": "@store_preview b"
                },
                {
                    "name": "@replace",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 14,
                    "full_declaration_from_def": "@replace b"
                },
                {
                    "name": "@fixed_email_subject",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 15,
                    "full_declaration_from_def": "@fixed_email_subject n"
                },
                {
                    "name": "@fixed_email_body",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 16,
                    "full_declaration_from_def": "@fixed_email_body n"
                },
                {
                    "name": "@fixed_email_html",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 17,
                    "full_declaration_from_def": "@fixed_email_html n"
                },
                {
                    "name": "@json_preview",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 18,
                    "full_declaration_from_def": "@json_preview b"
                },
                {
                    "name": "@store_only",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 19,
                    "full_declaration_from_def": "@store_only b"
                },
                {
                    "name": "@context",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 20,
                    "full_declaration_from_def": "@context n"
                },
                {
                    "name": "@context_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 21,
                    "full_declaration_from_def": "@context_id i"
                },
                {
                    "name": "@show_actions",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 22,
                    "full_declaration_from_def": "@show_actions b"
                },
                {
                    "name": "@email_to_user_instead",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "1",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 23,
                    "full_declaration_from_def": "@email_to_user_instead b"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_report_download",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@context",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@context n"
                },
                {
                    "name": "@context_id",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 64,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@context_id n"
                },
                {
                    "name": "@ReportName",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@ReportName n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_report_download_base64",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@context",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@context n"
                },
                {
                    "name": "@context_id",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 64,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@context_id n"
                },
                {
                    "name": "@base64",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@base64 n"
                },
                {
                    "name": "@filename",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@filename n"
                },
                {
                    "name": "@retries",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@retries i"
                },
                {
                    "name": "@to_file_context",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@to_file_context n"
                },
                {
                    "name": "@to_file_context_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 7,
                    "full_declaration_from_def": "@to_file_context_id i"
                },
                {
                    "name": "@description",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 8,
                    "full_declaration_from_def": "@description n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {
                "dbo.sp_api_modal_url": 2,
                "dbo.sp_api_add_sql_task": 2,
                "dbo.sp_api_modal_text": 2,
                "dbo.sp_api_modal_button": 2
            },
            "real_usage_examples": [
                {
                    "sql_source": "\nIF @id<>@ids --BULK naar Exact\n\tBEGIN\n\t\tDECLARE @cursor CURSOR,@idval INT,@count int = 0,@seconds int = 0\n\t\tSET @cursor = CURSOR LOCAL FAST_FORWARD FOR SELECT value FROM string_split(@ids,',')\n\t\tOPEN @cursor;\n\t\tFETCH NEXT FROM @cursor INTO @idval\n\t\tWHILE @@FETCH_STATUS = 0\n\t\t\tBEGIN\n\t\t\t\tSET @seconds+=6\n\t\t\t\tSET @subject = CONCAT(\n\t\t\t\t\t(SELECT [xCompany].[Code] FROM [xCompany] WHERE [id] = (SELECT [Q_xInvoice].[fromCompany_ID] FROM [Q_xInvoice] WHERE [id] = @idval))\n\t\t\t\t\t,' - ',(SELECT [Q_xInvoice].[dateInvoice] FROM [Q_xInvoice] WHERE [id] = @idval)\n\t\t\t\t\t,' - ',(SELECT [Q_xInvoice].[calcLegal] FROM [Q_xInvoice] WHERE [id] = @idval)\n\t\t\t\t\t)\n\t\t\t\tSET @sql = CONCAT(N'DECLARE @base64 nvarchar(max),@filename nvarchar(4000)\n', --EXEC sp_api_report_download_base64 @context = ''invoice_out'', @context_id = ',@idval,' , @filename =  @filename OUT, @base64 =  @base64 OUT\n'BEGIN TRY\n\tEXEC @main_db.dbo.sp_iu_finance_invoice ',@idval,',@groupbycostcodes = 1\nEND TRY BEGIN CATCH\n\tUPDATE xInvoice SET status = ''Exact Error'',statusHistory = ERROR_MESSAGE() WHERE id = ',@idval,'\nEND CATCH') -- = @filename,@subject = ',dbo.escape_string(@subject),',@base64 = @base64')\n\t\t\t\tSET @subject = N'To Exact: ' + @subject\n\t\t\t\tEXEC sp_api_add_sql_task @sql=@sql,@description=@subject,@seconds = @seconds\n\t\t\t\tUPDATE xInvoice SET status='Sending to Exact' WHERE id = @idval\n\t\t\t\tSET @count+=1\n\t\t\t\tFETCH NEXT FROM @cursor INTO @idval\n\t\t\tEND\n\t\tCLOSE @cursor;\n\t\tDEALLOCATE @cursor;\n\t\texecute sp_api_modal_clear\n\t\tIF @count > 0 EXEC sp_api_toast N'Verzenden is ingepland, F5 voor refresh'\n\t\tEXEC sp_api_modal_select_all_clear\n\t\tRETURN\n\tEND\n\nBEGIN TRY\n\tEXEC @main_db.dbo.sp_iu_finance_invoice @id, @groupbycostcodes = 1\nEND TRY BEGIN CATCH\n\tDECLARE @text nvarchar(max) = ERROR_MESSAGE(),@ERROR_SEVERITY int = ERROR_SEVERITY()\n\tIF @ERROR_SEVERITY = 17\n\t\tBEGIN\n\t\t\tEXEC sp_api_modal_url @text\n\t\t\tRETURN\n\t\tEND\n\tEXEC sp_api_modal_text @text\n\tDECLARE @valueout nvarchar(128)\n\tEXEC sp_api_modal_button @name='Retry',@value = 'Retry', @valueout = @valueout OUT\n\t\t,@class='btn-primary',@key='Enter'\nEND CATCH",
                    "action_id": 28,
                    "action_name": "Naar ExactOnline",
                    "source_table": "api_card_actions"
                },
                {
                    "sql_source": "\nIF @id<>@ids --BULK naar Exact\n\tBEGIN\n\t\tDECLARE @cursor CURSOR,@idval INT,@count int = 0,@seconds int = 0\n\t\tSET @cursor = CURSOR LOCAL FAST_FORWARD FOR SELECT value FROM string_split(@ids,',')\n\t\tOPEN @cursor;\n\t\tFETCH NEXT FROM @cursor INTO @idval\n\t\tWHILE @@FETCH_STATUS = 0\n\t\t\tBEGIN\n\t\t\t\tSET @seconds+=6\n\t\t\t\tSET @subject = CONCAT(\n\t\t\t\t\t(SELECT [xCompany].[Code] FROM [xCompany] WHERE [id] = (SELECT [Q_xInvoice].[toCompany_ID] FROM [Q_xInvoice] WHERE [id] = @idval))\n\t\t\t\t\t,' - ',(SELECT [Q_xInvoice].[dateInvoice] FROM [Q_xInvoice] WHERE [id] = @idval)\n\t\t\t\t\t,' - ',(SELECT [Q_xInvoice].[calcLegal] FROM [Q_xInvoice] WHERE [id] = @idval)\n\t\t\t\t\t)\n\t\t\t\tSET @sql = CONCAT(N'DECLARE @base64 nvarchar(max),@filename nvarchar(4000)\n', --EXEC sp_api_report_download_base64 @context = ''invoice_out'', @context_id = ',@idval,' , @filename =  @filename OUT, @base64 =  @base64 OUT\n'BEGIN TRY\n\tEXEC @main_db.dbo.sp_iu_finance_invoice ',@idval,',@groupbycostcodes = 1\nEND TRY BEGIN CATCH\n\tUPDATE xInvoice SET status = ''Exact Error'',statusHistory = ERROR_MESSAGE() WHERE id = ',@idval,'\nEND CATCH') -- = @filename,@subject = ',dbo.escape_string(@subject),',@base64 = @base64')\n\t\t\t\tSET @subject = N'To Exact: ' + @subject\n\t\t\t\tEXEC sp_api_add_sql_task @sql=@sql,@description=@subject,@seconds = @seconds\n\t\t\t\tUPDATE xInvoice SET status='Sending to Exact' WHERE id = @idval\n\t\t\t\tSET @count+=1\n\t\t\t\tFETCH NEXT FROM @cursor INTO @idval\n\t\t\tEND\n\t\tCLOSE @cursor;\n\t\tDEALLOCATE @cursor;\n\t\texecute sp_api_modal_clear\n\t\tIF @count > 0 EXEC sp_api_toast N'Verzenden is ingepland, F5 voor refresh'\n\t\tEXEC sp_api_modal_select_all_clear\n\t\tRETURN\n\tEND\n\nBEGIN TRY\n\tEXEC @main_db.dbo.sp_iu_finance_invoice @id, @groupbycostcodes = 1\nEND TRY BEGIN CATCH\n\tDECLARE @text nvarchar(max) = ERROR_MESSAGE(),@ERROR_SEVERITY int = ERROR_SEVERITY()\n\tIF @ERROR_SEVERITY = 17\n\t\tBEGIN\n\t\t\tEXEC sp_api_modal_url @text\n\t\t\tRETURN\n\t\tEND\n\tEXEC sp_api_modal_text @text\n\tDECLARE @valueout nvarchar(128)\n\tEXEC sp_api_modal_button @name='Retry',@value = 'Retry', @valueout = @valueout OUT\n\t\t,@class='btn-primary',@key='Enter'\nEND CATCH",
                    "action_id": 29,
                    "action_name": "Naar ExactOnline",
                    "source_table": "api_card_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_report_download_base64_devexpress",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@RequestKey",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@RequestKey n"
                },
                {
                    "name": "@base64data",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@base64data n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_report_download_to_file",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@json",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@json n"
                },
                {
                    "name": "@to_file_context",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@to_file_context n"
                },
                {
                    "name": "@to_file_context_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@to_file_context_id i"
                },
                {
                    "name": "@url",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@url n"
                },
                {
                    "name": "@filename",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@filename n"
                },
                {
                    "name": "@to_preview",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@to_preview b"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_report_generate",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@id",
                    "type_from_sys": "int",
                    "type_from_def": "I",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@id I"
                },
                {
                    "name": "@sys_report_key",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 400,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@sys_report_key n"
                },
                {
                    "name": "@toCompany_ID",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@toCompany_ID i"
                },
                {
                    "name": "@fromCompany_ID",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@fromCompany_ID i"
                },
                {
                    "name": "@DestinationLoc_ID",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@DestinationLoc_ID i"
                },
                {
                    "name": "@fixedRepRouting_ID",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@fixedRepRouting_ID i"
                },
                {
                    "name": "@test",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "1",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 7,
                    "full_declaration_from_def": "@test b"
                },
                {
                    "name": "@fixedEmail",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 1024,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 8,
                    "full_declaration_from_def": "@fixedEmail n"
                },
                {
                    "name": "@fixedFrom",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 1024,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 9,
                    "full_declaration_from_def": "@fixedFrom n"
                },
                {
                    "name": "@check_translations",
                    "type_from_sys": "bit",
                    "type_from_def": "B",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 10,
                    "full_declaration_from_def": "@check_translations B"
                },
                {
                    "name": "@FixedRepAction_ID",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 11,
                    "full_declaration_from_def": "@FixedRepAction_ID i"
                },
                {
                    "name": "@FixedPrinter_ID",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 12,
                    "full_declaration_from_def": "@FixedPrinter_ID i"
                },
                {
                    "name": "@PrinterCopies",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 13,
                    "full_declaration_from_def": "@PrinterCopies i"
                },
                {
                    "name": "@downloadOnly",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 14,
                    "full_declaration_from_def": "@downloadOnly b"
                },
                {
                    "name": "@Meta1",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 400,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "''",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 15,
                    "full_declaration_from_def": "@Meta1 n"
                },
                {
                    "name": "@Meta2",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 400,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "''",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 16,
                    "full_declaration_from_def": "@Meta2 n"
                },
                {
                    "name": "@taskname",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 512,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 17,
                    "full_declaration_from_def": "@taskname n"
                },
                {
                    "name": "@priority",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 18,
                    "full_declaration_from_def": "@priority i"
                },
                {
                    "name": "@dontTask",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 19,
                    "full_declaration_from_def": "@dontTask b"
                },
                {
                    "name": "@to_preview",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 20,
                    "full_declaration_from_def": "@to_preview b"
                },
                {
                    "name": "@replace",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 21,
                    "full_declaration_from_def": "@replace b"
                },
                {
                    "name": "@to_file_context",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 22,
                    "full_declaration_from_def": "@to_file_context n"
                },
                {
                    "name": "@to_file_context_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 23,
                    "full_declaration_from_def": "@to_file_context_id i"
                },
                {
                    "name": "@to_file_context_and_continue",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 24,
                    "full_declaration_from_def": "@to_file_context_and_continue b"
                },
                {
                    "name": "@url",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 25,
                    "full_declaration_from_def": "@url n"
                },
                {
                    "name": "@email_to_user_instead",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "1",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 26,
                    "full_declaration_from_def": "@email_to_user_instead b"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {
                "dbo.sp_api_toast": 36,
                "dbo.sp_api_modal_table": 1,
                "dbo.sp_api_modal_text": 2,
                "dbo.sp_api_modal_select": 1,
                "dbo.sp_api_modal_button": 1,
                "dbo.sp_api_add_sql_task": 4,
                "dbo.sp_api_modal_clear": 3
            },
            "real_usage_examples": [
                {
                    "sql_source": "EXEC sp_api_toast N'leveringsbevestiging....' \n\nDECLARE @cursor_ids CURSOR,@cid INT\nDECLARE @toCompany_ID INT \nDECLARE @fromCompany_ID INT = (select top 1 id from xTenantKey)\n\t\t\n\nSET @cursor_ids = CURSOR LOCAL FAST_FORWARD FOR SELECT value FROM string_split(@ids,',')\nOPEN @cursor_ids;\nFETCH NEXT FROM @cursor_ids INTO @cid\nWHILE @@FETCH_STATUS = 0\n\tBEGIN\n\t\tEXEC sp_api_toast @cid\n\t\t--dit is nu alleen voor tellers en checks, zodat we weten dat het report al is gemaakt:\n\t\t--was\t\tEXEC @main_db.dbo.RunReport\t@TABLECONTEXT = N'CTH'\t,@Context_Key_ID=@cid,@Report_CODE=N'CONF_DELIVERY' -- zie runreport \n\t\t--nu\n\t\tEXEC @main_db.dbo.SetDelConf @cid --210224 Registreer verzending van DeliveryConfirmation via xMarker\n\n\t\t--dit is de feitelijke \"run\"\n\t\tSET @toCompany_ID = (select Counterparty_id from xtransactionheader where id=@cid)\n\t\tEXEC sp_api_report_generate @id = @cid\n\t\t\t,@sys_report_key = 'deliveryconfirmation_out' --zie xrepdef\n\t\t\t,@toCompany_ID = @toCompany_ID\n\t\t\t,@fromCompany_ID = @fromCompany_ID\n\t\t\t,@fixedprinter_ID=2\n\t\t\t,@test=0\n\n\n\n\n\t\tFETCH NEXT FROM @cursor_ids INTO @cid\n\tEND\nCLOSE @cursor_ids;\nDEALLOCATE @cursor_ids;",
                    "action_id": 12,
                    "action_name": "leveringsbevestiging",
                    "source_table": "api_card_actions"
                },
                {
                    "sql_source": "declare @sys_report_key nvarchar(50) = N'confirmation_out'\ndeclare @test bit =1 -- 0:LIVE ; 1=TEST\nEXEC sp_api_toast @sys_report_key--N'Orderbevestiging' \n\nDECLARE @cursor_ids CURSOR,@cid INT\nDECLARE @toCompany_ID INT \nDECLARE @fromCompany_ID INT = (select top 1 id from xTenantKey)\n\t\t\n\nSET @cursor_ids = CURSOR LOCAL FAST_FORWARD FOR SELECT value FROM string_split(@ids,',')\nOPEN @cursor_ids;\nFETCH NEXT FROM @cursor_ids INTO @cid\nWHILE @@FETCH_STATUS = 0\n\tBEGIN\n\t\t--EXEC sp_api_toast @cid\n\t\t--dit is de feitelijke \"run\"\n\t\tSET @toCompany_ID = (select Counterparty_id from xtransactionheader where id=@cid)\n\t\tEXEC sp_api_report_generate @id = @cid\n\t\t\t,@sys_report_key = @sys_report_key--'confirmation_out' --zie xrepdef\n\t\t\t,@toCompany_ID = @toCompany_ID\n\t\t\t,@fromCompany_ID = @fromCompany_ID\n\t\t\t,@test=@test\n\n\t\t--dit is nu alleen voor tellers en checks:\n\t\tEXEC @main_db.dbo.RunReport\t@TABLECONTEXT = N'CTH'\t,@Context_Key_ID=@cid,@Report_CODE=N'CONF'\n\n\t\tFETCH NEXT FROM @cursor_ids INTO @cid\n\tEND\nCLOSE @cursor_ids;\nDEALLOCATE @cursor_ids;",
                    "action_id": 79,
                    "action_name": "orderbevestiging",
                    "source_table": "api_card_actions"
                },
                {
                    "sql_source": "declare @sys_report_key nvarchar(50) = N'confirmation_out'\ndeclare @test bit =0 -- 0:LIVE ; 1=TEST\nEXEC sp_api_toast @sys_report_key--N'Orderbevestiging' \n\nDECLARE @cursor_ids CURSOR,@cid INT\nDECLARE @toCompany_ID INT \nDECLARE @fromCompany_ID INT = (select top 1 id from xTenantKey)\n\t\t\n\nSET @cursor_ids = CURSOR LOCAL FAST_FORWARD FOR SELECT value FROM string_split(@ids,',')\nOPEN @cursor_ids;\nFETCH NEXT FROM @cursor_ids INTO @cid\nWHILE @@FETCH_STATUS = 0\n\tBEGIN\n\t\t--EXEC sp_api_toast @cid\n\t\t--dit is de feitelijke \"run\"\n\t\tSET @toCompany_ID = (select Counterparty_id from xtransactionheader where id=@cid)\n\t\tEXEC sp_api_report_generate @id = @cid\n\t\t\t,@sys_report_key = @sys_report_key--'confirmation_out' --zie xrepdef\n\t\t\t,@toCompany_ID = @toCompany_ID\n\t\t\t,@fromCompany_ID = @fromCompany_ID\n\t\t\t,@test=@test\n\n\t\t--dit is nu alleen voor tellers en checks:\n\t\tEXEC @main_db.dbo.RunReport\t@TABLECONTEXT = N'CTH'\t,@Context_Key_ID=@cid,@Report_CODE=N'CONF'\n\n\t\tFETCH NEXT FROM @cursor_ids INTO @cid\n\tEND\nCLOSE @cursor_ids;\nDEALLOCATE @cursor_ids;",
                    "action_id": 80,
                    "action_name": "orderbevestiging",
                    "source_table": "api_card_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_report_generate_replace_null",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@sql",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@sql n"
                },
                {
                    "name": "@id",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 24,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "'0'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@id n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_report_generate_routing",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@ids",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@ids n"
                },
                {
                    "name": "@sys_report_key",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@sys_report_key n"
                },
                {
                    "name": "@json",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@json n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_report_generate_task",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@id",
                    "type_from_sys": "int",
                    "type_from_def": "I",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@id I"
                },
                {
                    "name": "@sys_report_key",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 400,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@sys_report_key n"
                },
                {
                    "name": "@toCompany_ID",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@toCompany_ID i"
                },
                {
                    "name": "@fromCompany_ID",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@fromCompany_ID i"
                },
                {
                    "name": "@DestinationLoc_ID",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@DestinationLoc_ID i"
                },
                {
                    "name": "@fixedRepRouting_ID",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@fixedRepRouting_ID i"
                },
                {
                    "name": "@test",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "1",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 7,
                    "full_declaration_from_def": "@test b"
                },
                {
                    "name": "@fixedEmail",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 1024,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 8,
                    "full_declaration_from_def": "@fixedEmail n"
                },
                {
                    "name": "@fixedFrom",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 1024,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 9,
                    "full_declaration_from_def": "@fixedFrom n"
                },
                {
                    "name": "@check_translations",
                    "type_from_sys": "bit",
                    "type_from_def": "B",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 10,
                    "full_declaration_from_def": "@check_translations B"
                },
                {
                    "name": "@FixedRepAction_ID",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 11,
                    "full_declaration_from_def": "@FixedRepAction_ID i"
                },
                {
                    "name": "@FixedPrinter_ID",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 12,
                    "full_declaration_from_def": "@FixedPrinter_ID i"
                },
                {
                    "name": "@PrinterCopies",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 13,
                    "full_declaration_from_def": "@PrinterCopies i"
                },
                {
                    "name": "@downloadOnly",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 14,
                    "full_declaration_from_def": "@downloadOnly b"
                },
                {
                    "name": "@Meta1",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 400,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "''",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 15,
                    "full_declaration_from_def": "@Meta1 n"
                },
                {
                    "name": "@Meta2",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 400,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "''",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 16,
                    "full_declaration_from_def": "@Meta2 n"
                },
                {
                    "name": "@taskname",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 512,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 17,
                    "full_declaration_from_def": "@taskname n"
                },
                {
                    "name": "@priority",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 18,
                    "full_declaration_from_def": "@priority i"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_report_print",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@filename",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@filename n"
                },
                {
                    "name": "@options",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@options n"
                },
                {
                    "name": "@data",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@data n"
                },
                {
                    "name": "@printer_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@printer_id i"
                },
                {
                    "name": "@operation",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "N'Print-Job'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@operation n"
                },
                {
                    "name": "@api_files_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@api_files_id i"
                },
                {
                    "name": "@printer_name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 7,
                    "full_declaration_from_def": "@printer_name n"
                },
                {
                    "name": "@printer_copies",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "1",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 8,
                    "full_declaration_from_def": "@printer_copies i"
                },
                {
                    "name": "@custom_message",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 9,
                    "full_declaration_from_def": "@custom_message n"
                },
                {
                    "name": "@printer_log",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "1",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 10,
                    "full_declaration_from_def": "@printer_log b"
                },
                {
                    "name": "@max_retries",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "5",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 11,
                    "full_declaration_from_def": "@max_retries i"
                },
                {
                    "name": "@retry_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 12,
                    "full_declaration_from_def": "@retry_id i"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_report_print_get_printers",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@json",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@json n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_report_print_job_cancel",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@printer_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@printer_id i"
                },
                {
                    "name": "@job_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@job_id i"
                },
                {
                    "name": "@json",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@json n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_report_print_job_create",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@printer_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@printer_id i"
                },
                {
                    "name": "@job_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@job_id i"
                },
                {
                    "name": "@json",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@json n"
                },
                {
                    "name": "@printer_copies",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@printer_copies i"
                },
                {
                    "name": "@print_quality",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@print_quality i"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_report_send",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@body",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@body n"
                },
                {
                    "name": "@quietmode",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@quietmode b"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_report_server_download",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@RequestKey",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 512,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@RequestKey n"
                },
                {
                    "name": "@file",
                    "type_from_sys": "varbinary",
                    "type_from_def": "v",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@file v"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {
                "dbo.sp_api_modal_download_report": 1,
                "dbo.sp_api_modal_text": 1,
                "dbo.sp_api_modal_download": 1
            },
            "real_usage_examples": [
                {
                    "sql_source": "\nEXEC sp_api_modal_download_report @context = 'anaco_invoice_FV',@context_id = @id\n\n/*SELECT @RequestKey = RequestKey FROM api_report_server_log WHERE MetaReportName LIKE 'anaco_invoice_FV' AND MetaContextID = @id\nEXEC sp_api_modal_text @RequestKey\nDECLARE @file varbinary(max)\nEXEC sp_api_report_server_download 'b7cb4d42-4245-43a0-b74f-55f2f96b35ce',@file OUT\n*/\n--EXEC sp_api_report_server_download @RequestKey,@file OUT\n\n--EXEC sp_api_modal_download @filename='geert.pdf',@mimetype='application/pdf',@rawdata = @rawdata",
                    "action_id": 767,
                    "action_name": "Download invoice",
                    "source_table": "api_card_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_report_server_key",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@TenantKey",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@TenantKey n"
                },
                {
                    "name": "@register",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@register b"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_report_server_log",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@json",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@json n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_report_use_dev_express_reporting",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_report_validate",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@report_id",
                    "type_from_sys": "int",
                    "type_from_def": "I",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@report_id I"
                },
                {
                    "name": "@ReportSQL",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@ReportSQL n"
                },
                {
                    "name": "@id",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 24,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "'0'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@id n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_restore_from_audit",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@id",
                    "type_from_sys": "int",
                    "type_from_def": "I",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@id I"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_run_at_tsql_app_slaves",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@sql",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@sql n"
                },
                {
                    "name": "@push_card",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@push_card n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_run_task",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@sql",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@sql n"
                },
                {
                    "name": "@task_id",
                    "type_from_sys": "int",
                    "type_from_def": "I",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@task_id I"
                },
                {
                    "name": "@timeout_ms",
                    "type_from_sys": "int",
                    "type_from_def": "I",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@timeout_ms I"
                },
                {
                    "name": "@context_user",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 512,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@context_user n"
                },
                {
                    "name": "@wait",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@wait i"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_run_tasks",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_script_get",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@script_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@script_id i"
                },
                {
                    "name": "@script",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@script n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_search",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@search",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@search n"
                },
                {
                    "name": "@card_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@card_id i"
                },
                {
                    "name": "@top",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "100",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@top i"
                },
                {
                    "name": "@notext",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@notext b"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_send_report",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@id",
                    "type_from_sys": "int",
                    "type_from_def": "I",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "749",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@id I"
                },
                {
                    "name": "@value2",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "N'GEerttertegwert wertesterje'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@value2 n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_set_lang",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 510,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@name n"
                },
                {
                    "name": "@context",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 510,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@context n"
                },
                {
                    "name": "@lang",
                    "type_from_sys": "nchar",
                    "type_from_def": "n",
                    "max_length_bytes": 4,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@lang n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_set_lang_delete_all",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_set_query_parameter",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@key",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@key n"
                },
                {
                    "name": "@val",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 2048,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@val n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_set_query_var_from_context",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_set_user",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 512,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@name n"
                },
                {
                    "name": "@update",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@update b"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_setting_get",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@key",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@key n"
                },
                {
                    "name": "@value",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@value n"
                },
                {
                    "name": "@default",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@default n"
                },
                {
                    "name": "@default_enabled",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@default_enabled b"
                },
                {
                    "name": "@for_client",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@for_client b"
                },
                {
                    "name": "@is_required",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@is_required b"
                }
            ],
            "embedded_example": "DECLARE @environment nvarchar(128)\r\n EXEC sp_api_setting_get @key = 'environment', @value = @environment OUT, @default = 'prod', @default_enabled = 1\r\n\t,@for_client = 1,@is_required = 1",
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_setting_set",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@key",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@key n"
                },
                {
                    "name": "@value",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@value n"
                }
            ],
            "embedded_example": "EXEC sp_api_setting_set @key = 'setting', @value = 'test'",
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_setup_config",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_sftp_put",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@host",
                    "type_from_sys": "varchar",
                    "type_from_def": "v",
                    "max_length_bytes": 4000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@host v"
                },
                {
                    "name": "@user",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@user n"
                },
                {
                    "name": "@password",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@password n"
                },
                {
                    "name": "@filepath",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@filepath n"
                },
                {
                    "name": "@data",
                    "type_from_sys": "varbinary",
                    "type_from_def": "v",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@data v"
                },
                {
                    "name": "@port",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "22",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@port i"
                },
                {
                    "name": "@dataout",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 7,
                    "full_declaration_from_def": "@dataout n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": [
                {
                    "sql_source": "declare @data varbinary(max) = cast(N'Hallo hier text\\n' as varbinary(max))\n\nexec sp_api_sftp_put @host='matthijsict.nl', @user='Matthijs',@password='mati1980'\n\t, @filepath='/root/rick2021.txt' -- tilde = honme directory\n\t,@data=@data",
                    "action_id": 365,
                    "action_name": "sftp Mati",
                    "source_table": "api_actions"
                },
                {
                    "sql_source": "declare @data varbinary(max) = cast((SELECT * FROM xCountry FOR JSON AUTO) as varbinary(max))\n\nexec sp_api_sftp_put @host='matthijsict.nl', @user='matthijs',@password='mati1980'\n\t, @filepath='./rick2021.txt' -- tilde = honme directory\n\t,@data=@data\n",
                    "action_id": 366,
                    "action_name": "sftp matthijs",
                    "source_table": "api_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_snippet_action_create",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": "-- this will create a card action on the current card\r\nexec sp_api_create_card_action\r\n\t@card_id = @card_id -- current card\r\n\t,@name = N'\ud83d\ude80 My Test Action \ud83d\ude80 '\r\n\t,@sql = NULL",
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_snippet_action_name",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": "-- this will show the action name\r\nDECLARE @action_name NVARCHAR(128)=concat(N'action_name: ',(SELECT name from api_card_actions where id=@current_card_action_id)); EXEC sp_api_modal_text @action_name, @class='h2'",
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_snippet_add_button",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": "DECLARE @button02 --(ctrl-f to rename)\r\n\t\tNVARCHAR(MAX); EXEC sp_api_modal_get_value @name='@button02', @value=@button02 OUT; \t\t\t\r\n\t\r\n-- do something and wait for button\r\n\t\r\nEXEC sp_api_modal_button @name='@button02',@value = 'text for button', @valueout = @button02 OUT, @class='btn-danger' \r\n\t--,@key='Enter'\t\t\r\nIF @button02 IS NULL RETURN\t--button needs to be clicked to continue, otherwise action code ends here..\r\n\t\r\nEXEC sp_api_toast N'You clicked the button....'",
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_snippet_attach_excel_report_to_card",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": "--\tattach_excel_report_to_card\r\n--\texample of saving data from a (child) table to an excel file and attach this file to the current card record\r\n--\tfun: try to talk to our custom GPT at https://t-sql.app\r\n--\tneed help? mail to support@t-sql.app\r\n\r\n--\t@card_name is the current card name; @id is the currently selected table record primary key (int)\r\nif exists(select 1 from api_files where [context]=@card_name AND context_id= @id)\r\nbegin\r\n\texec sp_api_modal_alert N'File already exist',N'You can erase them on the card bij pressing F2 and go to TAB-name \"Files\"'\r\n\treturn\r\nend\r\n\r\nDECLARE @api_files_id int,@url nvarchar(4000)\r\n\r\n--\tchange to any select query of choice like:\r\n--DECLARE @SQL nvarchar(4000)= concat(N' select * from sales where customerID=',@id)\r\n--DECLARE @Filename nvarchar(4000)=concat(N'sales_',(select trim(customername) from customers where customerID=@id  ),'.xlsx')\r\n\r\n--\tdemo data:\r\nDECLARE @SQL nvarchar(4000)=concat(N'SELECT TOP 10 * FROM ',@card_name) --show 10 records from current card\r\nDECLARE @Filename nvarchar(4000)=concat(@card_name,N'_list.xlsx')\r\n\r\nEXEC sp_api_excel\r\n\t@sql\t\t\t= @SQL\r\n\t,@filename\t\t= @filename\r\n\t,@context\t\t= @card_name\t\t\t--required to save as file\r\n\t,@context_id\t= @id\t\t\t\t\t--required to save as file\r\n\t,@api_files_id\t= @api_files_id OUT\r\n\t,@url\t\t\t= @url OUT\r\n\r\nexec sp_api_toast @url",
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_snippet_card_record_select",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": "--\tAI assistent at: https://tsql.app\r\n--\tsp_api_modal_select lets you select a record from a card.\r\n--\tthe ID of the selected table record will be returned.\r\n--\texample:\r\nDECLARE @var01 -- please rename @var01 to your situation\r\n\t\tNVARCHAR(MAX); EXEC sp_api_modal_get_value @name='@var01', @value=@var01 OUT;\t\r\n\r\nEXEC sp_api_modal_select \r\n\t@card_name = @card_name -- @card_name is a global variable holding the current Card Name --N'carbrands'\r\n\t,@value = @var01 OUT\r\n\t\r\n\t-- other optional parameters:\r\n\t--,@reducer nvarchar(max)=''\r\n\t--,@class nvarchar(256)='' --'m-1 mb-2'\r\n\t--,@focus bit = 0\r\n\t--,@select bit = 0\r\n\t--,@placeholder nvarchar(256)=N'Choose...'\r\n\t--,@top nvarchar(32) = 10\r\n\t--,@fieldname nvarchar(128) = NULL\r\n\t--,@card_id int = NULL --GB210130\r\n\t--,@no_isam bit = 1 --GB230509 dit was default 0, nu andersom\r\n\t--,@ajaxDelay int = 500\r\n\t--,@modalRoute nvarchar(2000) = NULL\r\n\t--,@modalRouteSql nvarchar(max) = NULL\r\n\t--,@initial_id int = NULL\r\n\t--,@searchvalue nvarchar(max) = NULL OUT\r\n\t--,@use_placeholder nvarchar(128) = NULL\r\n\t--,@show_id bit = 0\r\n\t\r\n\r\nif @var01 is null return\r\nEXEC sp_api_modal_alert N'Selected record ID:',@var01",
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_snippet_card_table_schema",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": "--\tAI assistant at: https://tsql.app\r\n--  table_schema\r\n--  this action code displays the schema of the current card table\r\n\r\n-- Step 1: Check if @TableName exists\r\nIF @TableName IS NULL\r\nBEGIN\r\n    EXEC sp_api_modal_text @text=N'Error: Table name is not defined in @TableName.', @class='text-danger';\r\n    RETURN;\r\nEND\r\n\r\n-- Step 2: Find the base_object_name of the synonym\r\nDECLARE @BaseObject NVARCHAR(255);\r\n\r\nSELECT \r\n    @BaseObject = base_object_name\r\nFROM \r\n    sys.synonyms\r\nWHERE \r\n    name = @TableName;\r\n\r\n-- Check if base_object_name was found\r\nIF @BaseObject IS NULL\r\nBEGIN\r\n    EXEC sp_api_modal_text @text=N'Error: Synonym does not resolve to a valid base object.', @class='text-danger';\r\n    RETURN;\r\nEND\r\n\r\n-- Step 3: Prepare dynamic SQL\r\nDECLARE @DynamicSQL NVARCHAR(MAX);\r\n\r\nSET @DynamicSQL = N'\r\nUSE ' + QUOTENAME(PARSENAME(@BaseObject, 3)) + N'; -- Switch to the correct database\r\nSELECT \r\n    c.name AS [Column Name],\r\n    t.name AS [Data Type],\r\n    CASE c.is_nullable WHEN 1 THEN ''Yes'' ELSE ''No'' END AS [Is Nullable],\r\n    c.max_length AS [Max Length],\r\n    CASE WHEN i.is_primary_key = 1 THEN ''Yes'' ELSE ''No'' END AS [Primary Key]\r\nFROM \r\n    sys.columns c\r\nINNER JOIN \r\n    sys.types t ON c.user_type_id = t.user_type_id\r\nLEFT JOIN \r\n    sys.index_columns ic ON c.column_id = ic.column_id AND c.object_id = ic.object_id\r\nLEFT JOIN \r\n    sys.indexes i ON ic.object_id = i.object_id AND ic.index_id = i.index_id\r\nWHERE \r\n    c.object_id = OBJECT_ID(''' + PARSENAME(@BaseObject, 2) + N'.' + PARSENAME(@BaseObject, 1) + N''')';\r\n\r\n-- Step 4: Create a temporary table for the results\r\nIF OBJECT_ID('tempdb..#TableSchema') IS NOT NULL DROP TABLE #TableSchema;\r\nCREATE TABLE #TableSchema (\r\n    [Column Name] NVARCHAR(128),\r\n    [Data Type] NVARCHAR(128),\r\n    [Is Nullable] NVARCHAR(3),\r\n    [Max Length] INT,\r\n    [Primary Key] NVARCHAR(3)\r\n);\r\n\r\n-- Step 5: Execute dynamic SQL and populate the temporary table\r\nINSERT INTO #TableSchema\r\nEXEC sp_executesql @DynamicSQL;\r\n\r\n-- Step 6: Display the results in a modal\r\nDECLARE @ModalTitle NVARCHAR(MAX) = CONCAT(N'Schema for Table: ', @TableName);\r\nEXEC sp_api_modal_text @text=@ModalTitle, @class='h3';\r\n\r\nEXEC sp_api_modal_table \r\n    @tmptable='#TableSchema', \r\n    @print=1, \r\n    @excel=1, \r\n    @orderby='order by [Column Name]';\r\n\r\n-- Step 7: Add a close button\r\nDECLARE @CloseButton NVARCHAR(MAX);\r\nEXEC sp_api_modal_button \r\n    @name='@CloseButton', \r\n    @value='Close', \r\n    @valueout=@CloseButton OUT, \r\n    @class='btn-secondary';\r\n\r\n-- Step 8: Clean up the modal when closing\r\nIF @CloseButton IS NOT NULL\r\nBEGIN\r\n    EXEC sp_api_modal_clear;\r\nEND",
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_snippet_chart_line",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": "DECLARE @ChartData NVARCHAR(MAX);\r\nDECLARE @ChartOptions NVARCHAR(MAX);\r\nDECLARE @ChartTitle NVARCHAR(100) = 'Revenue Trend 2023';\r\nDECLARE @ChartType NVARCHAR(20) = 'line';\r\nDECLARE @ChartName NVARCHAR(100) = 'RevenueTrendChart';\r\nDECLARE @ChartHeight NVARCHAR(10) = '400px';\r\nDECLARE @CloseButton NVARCHAR(100);\r\n\r\nIF OBJECT_ID('tempdb..#RevenueTrend') IS NOT NULL DROP TABLE #RevenueTrend;\r\nCREATE TABLE #RevenueTrend (\r\n    dataset NVARCHAR(20),\r\n    label NVARCHAR(20),\r\n    number DECIMAL(10,2),\r\n    [order] INT,\r\n    color NVARCHAR(20)\r\n);\r\n\r\nINSERT INTO #RevenueTrend (dataset, label, number, [order], color)\r\nVALUES \r\n('2023', 'Q1', 150000, 1, '#4BC0C0'),\r\n('2023', 'Q2', 175000, 2, '#4BC0C0'),\r\n('2023', 'Q3', 190000, 3, '#4BC0C0'),\r\n('2023', 'Q4', 220000, 4, '#4BC0C0');\r\n\r\nSET @ChartOptions = '{\"responsive\": true, \"maintainAspectRatio\": false, \"elements\": {\"line\": {\"tension\": 0.4}}}';\r\n\r\nEXEC sp_api_modal_get_value @name='@CloseButton', @value=@CloseButton OUT;\r\nEXEC sp_api_modal_text @text='Quarterly Revenue Trend', @class='h2';\r\nEXEC sp_api_modal_chart\r\n    @name = @ChartName,\r\n    @tmptable = '#RevenueTrend',\r\n    @class = 'w-100',\r\n    @type = @ChartType,\r\n    @options = @ChartOptions,\r\n    @title = @ChartTitle,\r\n    @height = @ChartHeight;\r\n\r\nEXEC sp_api_modal_text @text='Quarterly revenue progression throughout 2023.';\r\nEXEC sp_api_modal_button \r\n    @name='close', \r\n    @value='Close Chart', \r\n    @valueout=@CloseButton OUT,\r\n    @class='btn-primary';\r\n\r\nIF @CloseButton IS NOT NULL\r\nBEGIN\r\n    EXEC sp_api_modal_clear;\r\n    EXEC sp_api_toast @text='Chart view closed.', @class='success';\r\n    RETURN;\r\nEND\r\n\r\nDROP TABLE #RevenueTrend;",
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_snippet_choose_example",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": "-- learn more from the TSQL.APP Assistant at https://tsql.app\r\nEXEC sp_api_modal_text @text=N'TSQL.APP Choose Example',@class='h2'\r\nDECLARE @var01 \r\n\t\tNVARCHAR(MAX); EXEC sp_api_modal_get_value @name='@var01', @value=@var01 OUT;\t\r\nDECLARE @selected_ids nvarchar(128)\r\nDECLARE @T nvarchar(max)\r\n\r\nDECLARE @switch_1 nvarchar(max); EXEC sp_api_modal_get_value @name='@switch_1',@value = @switch_1 OUT \r\nEXEC sp_api_modal_switch @name = '@switch_1', @value = @switch_1 OUT,@label = N'Single / Multi', @direct_post = 1\r\nDECLARE @multi bit = case when isnull(@switch_1,'false')='false' then 0 else 1 end\r\n\r\nDECLARE @switch_2 nvarchar(max); EXEC sp_api_modal_get_value @name='@switch_2',@value = @switch_2 OUT \r\nEXEC sp_api_modal_switch @name = '@switch_2', @value = @switch_2 OUT,@label = N'List / Table', @direct_post = 1\r\nDECLARE @use_table bit = case when isnull(@switch_2,'false')='false' then 0 else 1 end\r\n\r\n--exit button (action ends)\r\nDECLARE @exit nvarchar(max); EXEC sp_api_modal_get_value @name='@exit',@value = @exit OUT \r\nEXEC sp_api_modal_button @name='@exit',@value = 'Exit', @valueout = @exit OUT,@class='btn-danger',@key='Esc'\r\nIF @exit is not NULL\r\nBEGIN\r\n\tEXEC sp_api_modal_clear\r\nEND\t\r\n--prepare table and list\r\nSELECT top 10 id=id, name=name, selected=0  INTO #tmptable FROM api_card order by id DESC\r\nDECLARE @list nvarchar(128)=N'A,B,C,D'\r\n\r\nif @use_table =0 -- gebruik dan de list !\r\nBEGIN\r\n\tEXEC sp_api_modal_choose \r\n\t\t@list = @list,\r\n\t\t@value = @var01 OUT \r\n\t\t--,@name = '@button_choose'\r\n\t\t--,@class = 'btn-outline-danger'\r\n\t\t--,@class_updated = 'btn-danger'\r\n\t\t--,@startkey = 1 -- 0 = no keys or NULL = first character of text\r\n\t\t--,@keyprefix = 'F'\r\n\t\t,@multi = @multi --1 --allow multiple values\r\n\t\t--,@tmptable = '#tmptable'\r\n\t\t--,@ids =@selected_ids OUT\r\n\t\t--,@orderby = 'ORDER BY name'\r\n\t\t--,@inline = 1\r\n\t\t--,@reducer = NULL\r\n\t\t--,@reset_values = N'@button,lastname,etc' -- onchange, reset other values\r\n\tSET @T=concat('selected: ',@var01)\r\n\tEXEC sp_api_modal_text @T\r\nEND\r\n\r\nif @use_table =1 -- gebruik dan de table\r\nBEGIN\r\n\tEXEC sp_api_modal_choose \r\n\t\t--@list = @list,\r\n\t\t@value = @var01 OUT \r\n\t\t--,@name = '@button_choose'\r\n\t\t--,@class = 'btn-outline-danger'\r\n\t\t--,@class_updated = 'btn-danger'\r\n\t\t--,@startkey = 1 -- 0 = no keys or NULL = first character of text\r\n\t\t--,@keyprefix = 'F'\r\n\t\t,@multi = @multi --1 --allow multiple values\r\n\t\t,@tmptable = '#tmptable'\r\n\t\t--,@ids =@selected_ids OUT\r\n\t\t--,@orderby = 'ORDER BY name'\r\n\t\t--,@inline = 1\r\n\t\t--,@reducer = NULL\r\n\t\t--,@reset_values = N'@button,lastname,etc' -- onchange, reset other values\r\n\tSET @T=concat('selected: ',@var01)\r\n\tEXEC sp_api_modal_text @T\t\r\n\tEXEC sp_api_modal_table @tmptable=N'#tmptable'\r\nEND\r\n\r\n-- Add 'Quit' button\r\nexec sp_api_modal_text N'click Quit/Exit button to end the action.'\r\nDECLARE @ButtonQuit nvarchar(128)\r\nEXEC sp_api_modal_get_value @name='@ButtonQuit', @value=@ButtonQuit OUT;\r\nEXEC sp_api_modal_button \r\n\t@name='quit',\r\n\t@value='Quit this Action', \r\n\t@class='btn-secondary', \r\n\t@valueout=@ButtonQuit OUT;\r\n\r\nIF @ButtonQuit IS NOT NULL\r\nBEGIN\r\n\t--SET @Quit = 1;\r\n\tEXEC sp_api_modal_clear;\r\n\tRETURN;\r\nEND",
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_snippet_clone_record",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": "DECLARE @new_id int, @set nvarchar(max) = 'Name_0=NULL,Name_1=''Legoland'''\r\nEXEC @new_id = dbo.sp_clone_record @tablename = N'xCountry',@ids = @id, @set = @set",
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_snippet_color_picker_demo",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": "-- Created by TSQL.APP Agent (https://www.ux1.nl)\r\n-- 1. Pre-declare all sp parameters\r\nDECLARE @text NVARCHAR(MAX);\r\nDECLARE @class NVARCHAR(MAX);\r\nDECLARE @title NVARCHAR(MAX);\r\nDECLARE @name NVARCHAR(MAX);\r\nDECLARE @value NVARCHAR(MAX);\r\nDECLARE @valueout NVARCHAR(MAX);\r\nDECLARE @placeholder NVARCHAR(MAX);\r\nDECLARE @inline BIT;\r\nDECLARE @html NVARCHAR(MAX);\r\nDECLARE @type NVARCHAR(128);\r\nDECLARE @number_min INT;\r\nDECLARE @number_max INT;\r\nDECLARE @direct_post BIT;\r\nDECLARE @label NVARCHAR(MAX);\r\n\r\n-- 2. Business variables\r\nDECLARE @RedValue INT;\r\nDECLARE @GreenValue INT;\r\nDECLARE @BlueValue INT;\r\nDECLARE @ColorName NVARCHAR(100);\r\nDECLARE @SaveButton NVARCHAR(MAX);\r\nDECLARE @DebugMode BIT = 0;\r\nDECLARE @SavedColors NVARCHAR(MAX);\r\nDECLARE @ColorHex NVARCHAR(7);\r\nDECLARE @Message NVARCHAR(MAX);\r\nDECLARE @JsonState NVARCHAR(MAX);\r\nDECLARE @CurrentColor NVARCHAR(100);\r\n\r\n-- 3. State synchronization\r\nDECLARE @RedValueFromModal NVARCHAR(MAX);\r\nDECLARE @GreenValueFromModal NVARCHAR(MAX);\r\nDECLARE @BlueValueFromModal NVARCHAR(MAX);\r\n\r\nEXEC sp_api_modal_get_value @name=N'@RedValue', @value=@RedValueFromModal OUT;\r\nIF @RedValueFromModal IS NOT NULL SET @RedValue = TRY_CAST(@RedValueFromModal AS INT);\r\n\r\nEXEC sp_api_modal_get_value @name=N'@GreenValue', @value=@GreenValueFromModal OUT;\r\nIF @GreenValueFromModal IS NOT NULL SET @GreenValue = TRY_CAST(@GreenValueFromModal AS INT);\r\n\r\nEXEC sp_api_modal_get_value @name=N'@BlueValue', @value=@BlueValueFromModal OUT;\r\nIF @BlueValueFromModal IS NOT NULL SET @BlueValue = TRY_CAST(@BlueValueFromModal AS INT);\r\n\r\nEXEC sp_api_modal_get_value @name=N'@ColorName', @value=@ColorName OUT;\r\nEXEC sp_api_modal_get_value @name=N'@SaveButton', @value=@SaveButton OUT;\r\nEXEC sp_api_modal_get_value @name=N'@SavedColors', @value=@SavedColors OUT;\r\n\r\n--if @SavedColors IS NULL SET @SavedColors = N'[{\"ColorName\":\"TSQL Pink\",\"RedValue\":231,\"GreenValue\":200,\"BlueValue\":251,\"HexValue\":\"#E7C8FB\"}]'\r\n\t\r\n\r\n-- 4. Initialize values if needed\r\nIF @RedValue IS NULL SET @RedValue = 231;\r\nIF @GreenValue IS NULL SET @GreenValue = 200;\r\nIF @BlueValue IS NULL SET @BlueValue = 251;\r\nIF @SavedColors IS NULL SET @SavedColors = N'[{\"ColorName\":\"TSQL Pink\",\"RedValue\":231,\"GreenValue\":200,\"BlueValue\":251,\"HexValue\":\"#E7C8FB\"}]';\r\n\r\n-- Calculate color hex value\r\nSET @ColorHex = N'#' + \r\n\tRIGHT(N'0' + CONVERT(NVARCHAR(2), CONVERT(VARBINARY(1), @RedValue), 2), 2) +\r\n\tRIGHT(N'0' + CONVERT(NVARCHAR(2), CONVERT(VARBINARY(1), @GreenValue), 2), 2) +\r\n\tRIGHT(N'0' + CONVERT(NVARCHAR(2), CONVERT(VARBINARY(1), @BlueValue), 2), 2);\r\n\r\n-- Create a temporary table for saved colors\r\nIF OBJECT_ID('tempdb..#SavedColors') IS NOT NULL DROP TABLE #SavedColors;\r\nCREATE TABLE #SavedColors (\r\n\tColorName NVARCHAR(100),\r\n\tRedValue INT,\r\n\tGreenValue INT,\r\n\tBlueValue INT,\r\n\tHexValue NVARCHAR(7)\r\n);\r\n\r\n-- Populate from JSON if exists\r\nIF @SavedColors != N'[]'\r\nBEGIN\r\n\tDECLARE @JsonImportSql NVARCHAR(MAX);\r\n\t\r\n\tSET @JsonImportSql = N'INSERT INTO #SavedColors\r\n\tSELECT \r\n\t\tc.ColorName,\r\n\t\tc.RedValue,\r\n\t\tc.GreenValue,\r\n\t\tc.BlueValue,\r\n\t\tc.HexValue\r\n\tFROM OPENJSON(''' + @SavedColors + ''')\r\n\tWITH (\r\n\t\tColorName NVARCHAR(100) ''$.ColorName'',\r\n\t\tRedValue INT ''$.RedValue'',\r\n\t\tGreenValue INT ''$.GreenValue'',\r\n\t\tBlueValue INT ''$.BlueValue'',\r\n\t\tHexValue NVARCHAR(7) ''$.HexValue''\r\n\t) c';\r\n\t\r\n\tEXEC sp_api_exec @sql = @JsonImportSql;\r\nEND\r\n\r\n-- Display interface\r\nSET @title = N'Color Picker Demo';\r\nEXEC sp_api_modal_text @text = @title, @class = N'h3';\r\nEXEC sp_api_modal_text @text = N'Create and save your favorite colors', @class = N'text-muted mb-3';\r\n\r\n-- Color preview\r\nDECLARE @ColorPreviewHtml NVARCHAR(MAX);\r\nSET @ColorPreviewHtml = CONCAT(N'<div style=\"width:100%;height:100px;background-color:', @ColorHex, N';border-radius:8px;margin-bottom:15px;\"></div>');\r\nEXEC sp_api_modal_html @name = N'@ColorPreview', @html = @ColorPreviewHtml;\r\n\r\n-- RGB sliders\r\nDECLARE @RedLabel NVARCHAR(MAX);\r\nDECLARE @GreenLabel NVARCHAR(MAX);\r\nDECLARE @BlueLabel NVARCHAR(MAX);\r\nDECLARE @RedValueText NVARCHAR(3);\r\nDECLARE @GreenValueText NVARCHAR(3);\r\nDECLARE @BlueValueText NVARCHAR(3);\r\n\r\n-- Prepare text values first (following mandated practices)\r\nSET @RedValueText = CAST(@RedValue AS NVARCHAR(3));\r\nSET @GreenValueText = CAST(@GreenValue AS NVARCHAR(3));\r\nSET @BlueValueText = CAST(@BlueValue AS NVARCHAR(3));\r\n\r\nSET @RedLabel = CONCAT(N'Red: ', @RedValueText);\r\nSET @GreenLabel = CONCAT(N'Green: ', @GreenValueText);\r\nSET @BlueLabel = CONCAT(N'Blue: ', @BlueValueText);\r\n\r\n-- Now pass the prepared values to the procedures\r\nEXEC sp_api_modal_text @text = @RedLabel, @class = N'mb-1', @inline = 1;\r\nEXEC sp_api_modal_input @name = N'@RedValue', @value = @RedValue, @type = N'range', @number_min = 0, @number_max = 255;\r\n\r\nEXEC sp_api_modal_text @text = @GreenLabel, @class = N'mb-1', @inline = 1;\r\nEXEC sp_api_modal_input @name = N'@GreenValue', @value = @GreenValue, @type = N'range', @number_min = 0, @number_max = 255;\r\n\r\nEXEC sp_api_modal_text @text = @BlueLabel, @class = N'mb-1', @inline = 1;\r\nEXEC sp_api_modal_input @name = N'@BlueValue', @value = @BlueValue, @type = N'range', @number_min = 0, @number_max = 255;\r\n\r\n-- Debug mode toggle\r\nEXEC sp_api_modal_switch \r\n\t@name = N'@DebugMode', \r\n\t@value = @DebugMode OUT, \r\n\t@label = N'Show Snapshot Code', \r\n\t@inline = 1,\r\n\t@direct_post = 1;\r\n\r\n-- Display debug information if enabled\r\nIF @DebugMode = 1\r\nBEGIN\r\n\tEXEC sp_api_modal_text @text = N'Snapshot Code (Copy & Paste to Create a New Action):', @class = N'mt-3 mb-2 font-weight-bold';\r\n\tEXEC sp_api_modal_show_json_values\r\nEND\r\n\r\n-- Saved colors table if any exist\r\nIF EXISTS (SELECT 1 FROM #SavedColors)\r\nBEGIN\r\n\tEXEC sp_api_modal_text @text = N'Your Saved Colors:', @class = N'mt-4 mb-2 font-weight-bold';\r\n\tEXEC sp_api_modal_table @name = N'@ColorTable', @tmptable = N'#SavedColors';\r\nEND\r\n\r\n-- Save color form\r\nEXEC sp_api_modal_text @text = N'Save Current Color:', @class = N'mt-4 mb-2 font-weight-bold';\r\nEXEC sp_api_modal_input @name = N'@ColorName', @value = @ColorName OUT, @placeholder = N'Enter a name for this color';\r\nEXEC sp_api_modal_button @name = N'@SaveButton', @value = N'Save Color', @valueout = @SaveButton OUT, @class = N'btn-success mt-2';\r\n\r\n-- Handle save action\r\nIF @SaveButton IS NOT NULL\r\nBEGIN\r\n\t-- Validate input\r\n\tIF LEN(TRIM(ISNULL(@ColorName, N''))) < 2\r\n\tBEGIN\r\n\t\tSET @Message = N'Please enter a valid color name (at least 2 characters)';\r\n\t\tEXEC sp_api_toast @text = @Message, @class = N'btn-warning';\r\n\t\tRETURN;\r\n\tEND\r\n\t\r\n\t-- Check if color name already exists\r\n\tIF EXISTS (SELECT 1 FROM #SavedColors WHERE ColorName = @ColorName)\r\n\tBEGIN\r\n\t\tSET @Message = N'A color with this name already exists';\r\n\t\tEXEC sp_api_toast @text = @Message, @class = N'btn-warning';\r\n\t\tRETURN;\r\n\tEND\r\n\t\r\n\t-- Add new color to the table\r\n\tINSERT INTO #SavedColors (ColorName, RedValue, GreenValue, BlueValue, HexValue)\r\n\tVALUES (@ColorName, @RedValue, @GreenValue, @BlueValue, @ColorHex);\r\n\t\r\n\t-- Get updated JSON for state persistence\r\n\tSELECT @SavedColors = (SELECT * FROM #SavedColors FOR JSON PATH);\r\n\t\r\n\t-- Reset input field and update state\r\n\tSET @JsonState = (\r\n\t\tSELECT \r\n\t\t\t[@RedValue]=@RedValue, \r\n\t\t\t[@GreenValue]=@GreenValue,\r\n\t\t\t[@BlueValue]=@BlueValue,\r\n\t\t\t[@SavedColors]=@SavedColors,\r\n\t\t\t[@ColorName]=NULL\r\n\t\tFOR JSON PATH, WITHOUT_ARRAY_WRAPPER\r\n\t);\r\n\t\r\n\t-- Show success message and restart\r\n\tSET @Message = N'Color \"' + @ColorName + N'\" saved successfully!';\r\n\tEXEC sp_api_toast @text = @Message, @class = N'btn-success';\r\n\tEXEC sp_api_modal_restart @values = @JsonState;\r\n\tRETURN;\r\nEND",
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_snippet_confirm_button",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": "DECLARE @confirm_button_1 NVARCHAR(MAX); EXEC sp_api_modal_get_value @name='@confirm_button_1', @value=@confirm_button_1 OUT;\t--rename @confirm_button_1 to match with your code\r\nEXEC sp_api_modal_button @name='@confirm_button_1',@value = 'go', @valueout = @confirm_button_1 OUT,@class='btn-danger',@key='Enter'\r\nIF @confirm_button_1 IS NULL RETURN",
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_snippet_cursor",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": "DECLARE @cursor CURSOR,@idval INT\r\nSET @cursor = CURSOR LOCAL FAST_FORWARD FOR SELECT value FROM string_split(@ids,',')\r\nOPEN @cursor;\r\nFETCH NEXT FROM @cursor INTO @idval\r\nWHILE @@FETCH_STATUS = 0\r\n\tBEGIN\r\n\t\tEXEC sp_api_modal_text @idval\r\n\t\tFETCH NEXT FROM @cursor INTO @idval\r\n\tEND\r\nCLOSE @cursor;\r\nDEALLOCATE @cursor;",
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_snippet_cursor_while",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": "DECLARE @rowkey nvarchar(128)\r\n\tDECLARE @myVar nvarchar(128)\r\n\tSelect rowkey=newid(),* into #loop from [ a table name ] -- where ...\r\n\t\r\n\t--\tloop through the data row by row\r\n\tWHILE Exists(select 1 from #loop)\r\n\tBEGIN\r\n\t--\tprepare: (Select one row with tmp data)\r\n\t\tset @rowkey=(select top 1 rowkey from #loop)\r\n\t\t\r\n\t--\taction: (work with the data of one row)\r\n\t\tset @myVar=concat('This is ',(SELECT [ a field name ] from #loop where rowkey=@rowkey))\r\n\t\texec sp_api_toast @myvar\r\n\r\n\t--\tfinalize: (Remove the processed row)\r\n\t\tdelete from #loop where rowkey=@rowkey\r\n\tEND",
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_snippet_data_transfer_object",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": "declare @select_text nvarchar(max)=N'Kies een positie'\r\n\r\n\t--tracy_dto_example van HM1 naar ANACOWMSX\r\n\t--stel de gevraagde service in:\r\n\tdeclare @base_url nvarchar(max); SET @base_url = CONCAT(N'https://apide.agfx.nl/anaco_wmsx/v1/',NULL)\r\n\tdeclare @method nvarchar(max); SET @method = CONCAT(N'api_select_positions',NULL) -- select van de method: select api_lookup=code ,api_desc=concat('code is ',code)  from @main_db.dbo.wms_stage_of_ripeness\r\n\tdeclare @json nvarchar(max); --hier komt de result data van de service in (data transfer object)\r\n\r\n\t--evt url paramaters (filters op result set)\r\n\tDECLARE @zoek nvarchar(max); EXEC sp_api_modal_get_value @name='@zoek', @value=@zoek OUT;\t\r\n\tDECLARE @zoek_button nvarchar(max); EXEC sp_api_modal_get_value @name='@zoek_button', @value=@zoek_button OUT;\t\t\t\r\n\tEXEC sp_api_modal_input @name = '@zoek', @value = @zoek OUT\r\n\tEXEC sp_api_modal_button @name='@zoek_button',@value = 'Confirm input', @valueout = @zoek_button OUT,@class='btn-danger',@key='Enter'\t\t\r\n\tIF @zoek_button IS NULL RETURN\t;\r\n\r\n\t--maak het een like seek\r\n\tif right(@zoek,1) <> '%' set @zoek=concat(@zoek,'%')\r\n\r\n\tDECLARE @params nvarchar(max) =case when @zoek >N'' then concat('code=',@zoek) else NULL end --filter op de result set wordt bij GET aan url toegevoegd als ?code=4\r\n\t--SET @json = STRING_ESCAPE(@json ,'json')\r\n\t--tracy data transfer, beveiligd met 2x locksmith (zender en ontvanger) zie https://colab.research.google.com/drive/16iI8P-XMAZCYopyeKjeZVRQ-BExJvYr5#scrollTo=RG6mN-wq4t67\r\n\tEXEC api_json_get\t\t\t--\tapi_json_get controleert of je mag vragen; => de PROC zorgt zelf voor afzender context in de body\r\n\t\t\t@base_url=@base_url \t--@base_url mag * GEEN * method en parameters bevatten !!\r\n\t\t\t,@method=@method\r\n\t\t\t,@params=@params \t\t\t--&code=4 --filter op de result set wordt bij GET aan url toegevoegd als ?code=4\r\n\t\t\t,@apikey=N'anaco_wmsx'\t--pseudo key, zie api_json_get\r\n\t\t\t,@json =@json OUT\r\n\t\t\t,@requestType=N'POST' \r\n\t\t\t,@user=@user\r\n--exec sp_api_toast @params\r\n\texec sp_api_toast @json\r\n\tif @json like N'%\"ok\"%' return -- avoid error, ok is not a dataset\r\n\r\n\tdrop table if exists ##dto;\r\n\t--api data transfer object \r\n\texecute api_dto\t@json =@json\r\n\t\t\t\t\t,@tablename =N'##dto'\r\n\t\t\t\t\t,@fill =1;\r\n\texec sp_api_modal_table @tmptable=N'##dto', @print=1;\r\n\t\r\n\r\n\t-- Add 'Quit' button\r\n\texec sp_api_modal_text N'click Quit/Exit button to end the action.'\r\n\tDECLARE @ButtonQuit nvarchar(128); EXEC sp_api_modal_get_value @name='@ButtonQuit', @value=@ButtonQuit OUT;\r\n\tEXEC sp_api_modal_button @name='quit',@value='Quit this Action', @class='btn-secondary', @valueout=@ButtonQuit OUT;\r\n\tIF @ButtonQuit IS NOT NULL EXEC sp_api_modal_clear;",
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_snippet_declare_variable",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": "DECLARE @var01 NVARCHAR(MAX); EXEC sp_api_modal_get_value @name='@var01', @value=@var01 OUT;",
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_snippet_erd_display_relations_for_card",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": "EXEC sp_api_modal_modal @class=N'w100', @printStyle=N'font-size:70%', @landscape=1\r\n-- Eventueel als global action:  CTRL-ALT-E\r\n\r\n-- SECTION 1: Variable declarations (following mandated practices)\r\nDECLARE @text NVARCHAR(MAX);\r\nDECLARE @class NVARCHAR(MAX);\r\nDECLARE @html NVARCHAR(MAX);\r\nDECLARE @ButtonValue NVARCHAR(MAX);\r\nDECLARE @ButtonValueOut NVARCHAR(MAX);\r\nDECLARE @name NVARCHAR(MAX);\r\nDECLARE @description NVARCHAR(MAX);\r\n\r\n-- Business variables\r\nDECLARE @NodesJson NVARCHAR(MAX);\r\nDECLARE @LinksJson NVARCHAR(MAX);\r\nDECLARE @FinalJson NVARCHAR(MAX);\r\nDECLARE @ErrorMsg NVARCHAR(MAX);\r\nDECLARE @Message NVARCHAR(MAX);\r\nDECLARE @Title NVARCHAR(MAX);\r\nDECLARE @CurrentTable NVARCHAR(128);\r\nDECLARE @CardTitle NVARCHAR(MAX);\r\nDECLARE @TempSql NVARCHAR(MAX);\r\nDECLARE @TablesList NVARCHAR(MAX);\r\nDECLARE @RelationshipDescription NVARCHAR(MAX);\r\n\r\n-- Synchronize with modal state\r\nEXEC sp_api_modal_get_value @name=N'@ButtonValue', @value=@ButtonValue OUT;\r\n\r\n    -- Get current card info\r\n    SET @CurrentTable = ISNULL(@basetable, @tablename);\r\n    IF @CurrentTable IS NULL SET @CurrentTable = @card_name;\r\n    \r\n    -- Set title\r\n    SET @CardTitle = ISNULL(@card_name, 'Current Card');\r\n    SET @Title = N'Database ERD for ' + @CardTitle;\r\n    \r\n    -- Create temporary tables for our node and link data\r\n    IF OBJECT_ID('tempdb..#Nodes') IS NOT NULL DROP TABLE #Nodes;\r\n    CREATE TABLE #Nodes (\r\n        TableName NVARCHAR(128),\r\n        TableColor NVARCHAR(50),\r\n        Category NVARCHAR(50),\r\n        ToolTip NVARCHAR(MAX)\r\n    );\r\n    \r\n    IF OBJECT_ID('tempdb..#Links') IS NOT NULL DROP TABLE #Links;\r\n    CREATE TABLE #Links (\r\n        FromTable NVARCHAR(128),\r\n        ToTable NVARCHAR(128)\r\n    );\r\n    \r\n    -- Add the current table\r\n    INSERT INTO #Nodes (TableName, TableColor, Category, ToolTip)\r\n    VALUES (@CurrentTable, 'lightcoral', 'Current', 'Current Table: ' + @CurrentTable);\r\n    \r\n    -- Find parent tables (tables referenced by the current table)\r\n    -- Create a temporary table to store foreign key relationships\r\n    IF OBJECT_ID('tempdb..#ForeignKeyRels') IS NOT NULL DROP TABLE #ForeignKeyRels;\r\n    CREATE TABLE #ForeignKeyRels (\r\n        ParentTable NVARCHAR(128),\r\n        ParentColumn NVARCHAR(128),\r\n        ReferencedTable NVARCHAR(128),\r\n        ReferencedColumn NVARCHAR(128)\r\n    );\r\n    \r\n    -- Using sys_foreign_key_columns to find relationships\r\n    SET @TempSql = N'\r\n    INSERT INTO #ForeignKeyRels (ParentTable, ParentColumn, ReferencedTable, ReferencedColumn)\r\n    SELECT \r\n        c.name AS ParentTable,\r\n        cc.name AS ParentColumn,\r\n        p.name AS ReferencedTable,\r\n        pc.name AS ReferencedColumn\r\n    FROM sys_foreign_key_columns fk\r\n    JOIN sys_columns cc ON cc.object_id = fk.parent_object_id AND fk.parent_column_id = cc.column_id\r\n    JOIN sys_columns pc ON pc.object_id = fk.referenced_object_id AND fk.referenced_column_id = pc.column_id\r\n    JOIN sys_tables c ON c.object_id = fk.parent_object_id\r\n    JOIN sys_tables p ON p.object_id = fk.referenced_object_id\r\n    WHERE c.name = @CurrentTable OR p.name = @CurrentTable';\r\n    \r\n    EXEC sp_executesql @TempSql, N'@CurrentTable NVARCHAR(128)', @CurrentTable;\r\n    \r\n    -- Add parent tables (tables that the current table references)\r\n    INSERT INTO #Nodes (TableName, TableColor, Category, ToolTip)\r\n    SELECT DISTINCT \r\n        ReferencedTable,\r\n        'lightblue',\r\n        'Parent',\r\n        'Parent Table: ' + ReferencedTable + ' (Referenced by column: ' + ParentColumn + ')'\r\n    FROM #ForeignKeyRels\r\n    WHERE ParentTable = @CurrentTable\r\n    AND ReferencedTable <> @CurrentTable;\r\n    \r\n    -- Add links for parent relationships\r\n    INSERT INTO #Links (FromTable, ToTable)\r\n    SELECT DISTINCT \r\n        ParentTable,\r\n        ReferencedTable\r\n    FROM #ForeignKeyRels\r\n    WHERE ParentTable = @CurrentTable\r\n    AND ReferencedTable <> @CurrentTable;\r\n    \r\n    -- Find child tables (tables referencing the current table)\r\n    -- Add child tables (tables that reference the current table)\r\n    INSERT INTO #Nodes (TableName, TableColor, Category, ToolTip)\r\n    SELECT DISTINCT \r\n        ParentTable,\r\n        'lightgreen',\r\n        'Child',\r\n        'Child Table: ' + ParentTable + ' (References current table via column: ' + ParentColumn + ')'\r\n    FROM #ForeignKeyRels\r\n    WHERE ReferencedTable = @CurrentTable\r\n    AND ParentTable <> @CurrentTable;\r\n    \r\n    -- Add links for child relationships\r\n    INSERT INTO #Links (FromTable, ToTable)\r\n    SELECT DISTINCT \r\n        ParentTable,\r\n        ReferencedTable\r\n    FROM #ForeignKeyRels\r\n    WHERE ReferencedTable = @CurrentTable\r\n    AND ParentTable <> @CurrentTable;\r\n    \r\n    -- Look for app-specific relationships in api_card_children\r\n    IF OBJECT_ID('tempdb..#CardChildren') IS NOT NULL DROP TABLE #CardChildren;\r\n    CREATE TABLE #CardChildren (\r\n        ParentCard NVARCHAR(128),\r\n        ChildCard NVARCHAR(128),\r\n        RefColumn NVARCHAR(128)\r\n    );\r\n    \r\n    -- Get relationships from api_card_children\r\n    SET @TempSql = N'\r\n    INSERT INTO #CardChildren (ParentCard, ChildCard, RefColumn)\r\n    SELECT \r\n        p.name AS ParentCard,\r\n        c.name AS ChildCard,\r\n        acc.ref AS RefColumn\r\n    FROM api_card_children acc\r\n    JOIN api_card p ON acc.parent = p.id\r\n    JOIN api_card c ON acc.child = c.id\r\n    WHERE p.name = @CardTitle OR c.name = @CardTitle';\r\n    \r\n    EXEC sp_executesql @TempSql, N'@CardTitle NVARCHAR(128)', @CardTitle;\r\n    \r\n    -- Add TSQL.APP-specific parent relationships\r\n    INSERT INTO #Nodes (TableName, TableColor, Category, ToolTip)\r\n    SELECT DISTINCT \r\n        ParentCard,\r\n        'lightblue',\r\n        'Parent',\r\n        'Parent Card: ' + ParentCard + ' (App relationship via: ' + RefColumn + ')'\r\n    FROM #CardChildren\r\n    WHERE ChildCard = @CardTitle\r\n    AND ParentCard <> @CardTitle\r\n    AND NOT EXISTS (SELECT 1 FROM #Nodes WHERE TableName = ParentCard);\r\n    \r\n    -- Add links for TSQL.APP-specific parent relationships\r\n    INSERT INTO #Links (FromTable, ToTable)\r\n    SELECT DISTINCT \r\n        ChildCard,\r\n        ParentCard\r\n    FROM #CardChildren\r\n    WHERE ChildCard = @CardTitle\r\n    AND ParentCard <> @CardTitle;\r\n    \r\n    -- Add TSQL.APP-specific child relationships\r\n    INSERT INTO #Nodes (TableName, TableColor, Category, ToolTip)\r\n    SELECT DISTINCT \r\n        ChildCard,\r\n        'lightgreen',\r\n        'Child',\r\n        'Child Card: ' + ChildCard + ' (App relationship via: ' + RefColumn + ')'\r\n    FROM #CardChildren\r\n    WHERE ParentCard = @CardTitle\r\n    AND ChildCard <> @CardTitle\r\n    AND NOT EXISTS (SELECT 1 FROM #Nodes WHERE TableName = ChildCard);\r\n    \r\n    -- Add links for TSQL.APP-specific child relationships\r\n    INSERT INTO #Links (FromTable, ToTable)\r\n    SELECT DISTINCT \r\n        ChildCard,\r\n        ParentCard\r\n    FROM #CardChildren\r\n    WHERE ParentCard = @CardTitle\r\n    AND ChildCard <> @CardTitle;\r\n    \r\n    -- Convert to JSON format for the diagram\r\n    SET @NodesJson = (\r\n        SELECT \r\n            TableName AS [key],\r\n            TableColor AS [color],\r\n            Category AS [category],\r\n            ToolTip AS [tooltip]\r\n        FROM #Nodes\r\n        FOR JSON PATH\r\n    );\r\n    \r\n    SET @LinksJson = (\r\n        SELECT \r\n            FromTable AS [from],\r\n            ToTable AS [to]\r\n        FROM #Links\r\n        FOR JSON PATH\r\n    );\r\n    \r\n    -- Combine into final JSON\r\n    SET @FinalJson = N'{';\r\n    SET @FinalJson = @FinalJson + N'\"nodes\": ' + ISNULL(@NodesJson, N'[]') + N',';\r\n    SET @FinalJson = @FinalJson + N'\"links\": ' + ISNULL(@LinksJson, N'[]');\r\n    SET @FinalJson = @FinalJson + N'}';\r\n    \r\n    -- Display the title\r\n    SET @text = @Title;\r\n    EXEC sp_api_modal_text @text=@text, @class=N'h3';\r\n    \r\n    -- Add legend for node colors\r\n    SET @text = N'<div style=\"margin: 10px 0; font-size: 14px;\"><span style=\"background-color: lightcoral; padding: 2px 8px; margin-right: 10px; border: 1px solid #666;\">Current Table</span><span style=\"background-color: lightblue; padding: 2px 8px; margin-right: 10px; border: 1px solid #666;\">Parent Tables</span><span style=\"background-color: lightgreen; padding: 2px 8px; margin-right: 10px; border: 1px solid #666;\">Child Tables</span></div>';\r\n    EXEC sp_api_modal_html @name=N'legend', @html=@text, @iframe=0;\r\n    \r\n    -- Show ERD in iframe\r\n    SET @html = N'\r\n    <!DOCTYPE html>\r\n    <html lang=\"en\">\r\n    <head>\r\n        <meta charset=\"UTF-8\">\r\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n        <title>ERD - ' + @CardTitle + N'</title>\r\n        <script src=\"https://cdnjs.cloudflare.com/ajax/libs/gojs/2.3.11/go.js\"></script>\r\n        <style>\r\n            html, body { height: 100%; margin: 0; }\r\n            #diagramDiv { width: 100%; height: 100%; background-color: #f8f9fa; }\r\n        </style>\r\n    </head>\r\n    <body>\r\n        <div id=\"diagramDiv\"></div>\r\n        <script>\r\n            // GoJS initialization\r\n            var $ = go.GraphObject.make;\r\n            var myDiagram = $(go.Diagram, \"diagramDiv\", {\r\n                \"undoManager.isEnabled\": true,\r\n                layout: $(go.ForceDirectedLayout, { \r\n                    defaultSpringLength: 100,\r\n                    defaultElectricalCharge: 100\r\n                })\r\n            });\r\n\r\n            // Define tooltips\r\n            var tooltipTemplate = $(go.Adornment, \"Auto\",\r\n                $(go.Shape, { fill: \"#FFFFCC\" }),\r\n                $(go.TextBlock, { margin: 4 },\r\n                    new go.Binding(\"text\", \"\", function(data) { return data.tooltip; }))\r\n            );\r\n\r\n            // Node template\r\n            myDiagram.nodeTemplate = $(go.Node, \"Auto\",\r\n                { \r\n                    locationSpot: go.Spot.Center,\r\n                    toolTip: tooltipTemplate\r\n                },\r\n                new go.Binding(\"location\", \"loc\"),\r\n                $(go.Shape, \"Rectangle\", { \r\n                    fill: \"lightblue\", \r\n                    strokeWidth: 2,\r\n                    width: 160,\r\n                    height: 40\r\n                },\r\n                new go.Binding(\"fill\", \"color\")),\r\n                $(go.TextBlock, { \r\n                    margin: 10, \r\n                    font: \"bold 14px sans-serif\",\r\n                    stroke: \"black\",\r\n                    width: 140,\r\n                    textAlign: \"center\",\r\n                    wrap: go.TextBlock.WrapFit\r\n                },\r\n                new go.Binding(\"text\", \"key\"))\r\n            );\r\n\r\n            // Link template\r\n            myDiagram.linkTemplate = $(go.Link,\r\n                { routing: go.Link.AvoidsNodes, corner: 5 },\r\n                $(go.Shape, { strokeWidth: 1.5 }),\r\n                $(go.Shape, { toArrow: \"Standard\", stroke: null, fill: \"black\" })\r\n            );\r\n\r\n            // Load the data\r\n            var erdData = ' + @FinalJson + ';\r\n            \r\n            // Position the current table in the center\r\n            if (erdData.nodes && erdData.nodes.length > 0) {\r\n                for (var i = 0; i < erdData.nodes.length; i++) {\r\n                    if (erdData.nodes[i].category === \"Current\") {\r\n                        erdData.nodes[i].loc = new go.Point(0, 0);\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n            \r\n            // Set the model\r\n            myDiagram.model = new go.GraphLinksModel(erdData.nodes, erdData.links);\r\n        </script>\r\n    </body>\r\n    </html>';\r\n    \r\n    -- Display the ERD using HTML iframe\r\n    EXEC sp_api_modal_html \r\n        @name=N'ERD', \r\n        @html=@html, \r\n        @iframe=1, \r\n        @height=N'768px'; --'600px';\r\n    \r\n    -- Generate automatic markdown description\r\n    -- Count tables by category\r\n    DECLARE @ParentCount INT = (SELECT COUNT(*) FROM #Nodes WHERE Category = 'Parent');\r\n    DECLARE @ChildCount INT = (SELECT COUNT(*) FROM #Nodes WHERE Category = 'Child');\r\n    DECLARE @RelationshipCount INT = (SELECT COUNT(*) FROM #Links);\r\n    DECLARE @ParentTables NVARCHAR(MAX) = '';\r\n    DECLARE @ChildTables NVARCHAR(MAX) = '';\r\n    \r\n    -- Get list of parent tables\r\n    SELECT @ParentTables = @ParentTables + '- ' + TableName + CHAR(13) + CHAR(10)\r\n    FROM #Nodes \r\n    WHERE Category = 'Parent'\r\n    ORDER BY TableName;\r\n    \r\n    -- Get list of child tables\r\n    SELECT @ChildTables = @ChildTables + '- ' + TableName + CHAR(13) + CHAR(10)\r\n    FROM #Nodes \r\n    WHERE Category = 'Child'\r\n    ORDER BY TableName;\r\n    \r\n    -- Build the markdown description\r\n    SET @description = N'## Database Relationship Diagram for ' + @CurrentTable + CHAR(13) + CHAR(10) + CHAR(13) + CHAR(10);\r\n    SET @description = @description + N'This diagram shows the database relationships for the **' + @CurrentTable + '** table.' + CHAR(13) + CHAR(10) + CHAR(13) + CHAR(10);\r\n    SET @description = @description + N'### Overview' + CHAR(13) + CHAR(10);\r\n    SET @description = @description + N'- **Central table** (shown in red): ' + @CurrentTable + CHAR(13) + CHAR(10);\r\n    \r\n    IF @ParentCount > 0\r\n        SET @description = @description + N'- **Parent tables** (shown in blue): ' + CAST(@ParentCount AS NVARCHAR) + ' tables that ' + @CurrentTable + ' references' + CHAR(13) + CHAR(10);\r\n    ELSE\r\n        SET @description = @description + N'- **Parent tables**: None found' + CHAR(13) + CHAR(10);\r\n    \r\n    IF @ChildCount > 0\r\n        SET @description = @description + N'- **Child tables** (shown in green): ' + CAST(@ChildCount AS NVARCHAR) + ' tables that reference ' + @CurrentTable + CHAR(13) + CHAR(10);\r\n    ELSE\r\n        SET @description = @description + N'- **Child tables**: None found' + CHAR(13) + CHAR(10);\r\n    \r\n    SET @description = @description + N'- **Total relationships**: ' + CAST(@RelationshipCount AS NVARCHAR) + CHAR(13) + CHAR(10) + CHAR(13) + CHAR(10);\r\n    \r\n    IF @ParentCount > 0\r\n    BEGIN\r\n        SET @description = @description + N'### Parent Tables' + CHAR(13) + CHAR(10);\r\n        SET @description = @description + N'The following tables are referenced by ' + @CurrentTable + ':' + CHAR(13) + CHAR(10) + CHAR(13) + CHAR(10);\r\n        SET @description = @description + @ParentTables + CHAR(13) + CHAR(10);\r\n    END\r\n    \r\n    IF @ChildCount > 0\r\n    BEGIN\r\n        SET @description = @description + N'### Child Tables' + CHAR(13) + CHAR(10);\r\n        SET @description = @description + N'The following tables reference ' + @CurrentTable + ':' + CHAR(13) + CHAR(10) + CHAR(13) + CHAR(10);\r\n        SET @description = @description + @ChildTables + CHAR(13) + CHAR(10);\r\n    END\r\n    \r\n    SET @description = @description + N'### How to Read This Diagram' + CHAR(13) + CHAR(10);\r\n    SET @description = @description + N'- **Arrows point from** the table that contains the foreign key **to** the referenced table' + CHAR(13) + CHAR(10);\r\n    SET @description = @description + N'- **Hover over a table** to see additional information' + CHAR(13) + CHAR(10);\r\n    SET @description = @description + N'- **Tables are color-coded**: red (current table), blue (parent tables), green (child tables)' + CHAR(13) + CHAR(10);\r\n    \r\n    -- Display the markdown description\r\n    EXEC sp_api_modal_text @text=@description, @markdown=1;\r\n    \r\n    -- Add a close button\r\n    SET @ButtonValue = N'Close';\r\n    EXEC sp_api_modal_button \r\n        @name=N'@ButtonValue', \r\n        @value=@ButtonValue, \r\n        @valueout=@ButtonValueOut OUT,\r\n        @class=N'btn-secondary';\r\n    \r\n    -- Handle button click\r\n    IF @ButtonValueOut IS NOT NULL\r\n    BEGIN\r\n        SET @Message = N'ERD closed';\r\n        EXEC sp_api_toast @text=@Message, @class=N'btn-info';\r\n        EXEC sp_api_modal_clear;\r\n        RETURN;\r\n    END\r\n    \r\n\r\n-- Clean up temporary tables\r\nIF OBJECT_ID('tempdb..#Nodes') IS NOT NULL DROP TABLE #Nodes;\r\nIF OBJECT_ID('tempdb..#Links') IS NOT NULL DROP TABLE #Links;\r\nIF OBJECT_ID('tempdb..#ForeignKeyRels') IS NOT NULL DROP TABLE #ForeignKeyRels;\r\nIF OBJECT_ID('tempdb..#CardChildren') IS NOT NULL DROP TABLE #CardChildren;",
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_snippet_file_preview",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": "--\tAction code to \"Preview\" the last uploaded file to the card in a modal page\r\nDECLARE @file_id INT; EXEC sp_api_modal_get_value @name='@file_id', @value=@file_id OUT;\r\nSET @file_id =\r\n\t(\r\n\t\tSELECT TOP 1 ID from api_files \r\n\t\tWHERE context=@CARD_NAME AND\t-- current card \r\n\t\t\tcontext_id=@ID\t\t\t\t-- card card record ID\r\n\t\t\t-- AND file_category_id = (select top 1 id from api_file_category where name='service_report')\r\n\t\tORDER BY id DESC\r\n\t)\r\nIF @file_id IS NULL\tEXEC sp_api_modal_alert N'No files uploaded (yet).'\r\nELSE EXEC sp_sys_file_preview @file_id = @file_id",
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_snippet_guess_game",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": "-- Language Learning Game: Match Emoji to Word\r\n\r\n-- Step 1: Declare necessary variables\r\nDECLARE @CorrectEmoji NVARCHAR(10);\r\nDECLARE @CorrectWord NVARCHAR(50);  -- The word in the target language\r\nDECLARE @UserChoice NVARCHAR(50);\r\nDECLARE @Result NVARCHAR(MAX);\r\nDECLARE @Quit NVARCHAR(MAX);\r\nDECLARE @Score INT;\r\nDECLARE @Round INT;\r\nDECLARE @GameState NVARCHAR(MAX);\r\nDECLARE @TimeLeft INT = 10;\r\nDECLARE @Language NVARCHAR(50) = 'Spanish'; -- You can change this to another language\r\nDECLARE @Hint NVARCHAR(50) = NULL; -- Optional hint\r\n\r\n-- Step 2: Synchronize values with the client\r\nEXEC sp_api_modal_get_value @name='@GameState', @value=@GameState OUT;\r\n\r\n-- Step 3: Parse game state if it exists\r\nIF @GameState IS NOT NULL\r\nBEGIN\r\n    SET @Score = JSON_VALUE(@GameState, '$.Score');\r\n    SET @Round = JSON_VALUE(@GameState, '$.Round');\r\n    SET @CorrectEmoji = JSON_VALUE(@GameState, '$.CorrectEmoji');\r\n    SET @CorrectWord = JSON_VALUE(@GameState, '$.CorrectWord');\r\n    SET @TimeLeft = JSON_VALUE(@GameState, '$.TimeLeft');\r\nEND\r\nELSE\r\nBEGIN\r\n    SET @Score = 0;\r\n    SET @Round = 1;\r\n    SET @CorrectEmoji = NULL;\r\n    SET @TimeLeft = 10;\r\nEND\r\n\r\n-- Step 4: Process user's choice and select a new emoji if needed\r\nEXEC sp_api_modal_get_value @name='@UserChoice', @value=@UserChoice OUT;\r\nIF @UserChoice IS NOT NULL\r\nBEGIN\r\n    DECLARE @ResultText NVARCHAR(MAX);\r\n    IF @UserChoice = @CorrectWord\r\n    BEGIN\r\n        SET @ResultText = N'\ud83c\udf89 Correct! You earned a point!';\r\n        SET @Score = @Score + 1;\r\n        EXEC sp_api_modal_beep @frequency=1000, @duration=500;\r\n    END\r\n    ELSE\r\n    BEGIN\r\n        SET @ResultText = N'\ud83d\ude22 Sorry, the correct word was: ' + @CorrectWord;\r\n        EXEC sp_api_modal_beep @frequency=200, @duration=500;\r\n    END\r\n    SET @Result = @ResultText;\r\n    SET @Round = @Round + 1;\r\n    SET @CorrectEmoji = NULL;\r\n    SET @TimeLeft = 10;\r\nEND\r\n\r\n-- Step 5: Timer logic\r\nIF @TimeLeft > 0\r\nBEGIN\r\n    SET @TimeLeft = @TimeLeft - 1;\r\n    EXEC sp_api_modal_beep @frequency=500, @duration=200;\r\nEND\r\nELSE IF @UserChoice IS NULL\r\nBEGIN\r\n    SET @Result = N'\u23f0 Time''s up! The correct word was: ' + @CorrectWord;\r\n    EXEC sp_api_modal_beep @frequency=200, @duration=500;\r\n    SET @Round = @Round + 1;\r\n    SET @CorrectEmoji = NULL;\r\n    SET @TimeLeft = 10;\r\nEND\r\n\r\n-- Step 6: Select new emoji and word in the target language\r\nIF @CorrectEmoji IS NULL\r\nBEGIN\r\n    DECLARE @EmojiWordList TABLE (Emoji NVARCHAR(10), Word NVARCHAR(50));\r\n    \r\n    -- Populate with words in the target language (e.g., Spanish)\r\n    INSERT INTO @EmojiWordList VALUES\r\n        (N'\ud83d\ude00', N'Cara Feliz'), -- Happy Face\r\n        (N'\ud83d\udc31', N'Gato'),       -- Cat\r\n        (N'\ud83c\udf33', N'\u00c1rbol'),      -- Tree\r\n        (N'\ud83c\udf55', N'Pizza'),      -- Pizza\r\n        (N'\ud83d\ude97', N'Coche');      -- Car\r\n\r\n    IF @Round > 5\r\n        INSERT INTO @EmojiWordList VALUES (N'\u26bd', N'F\u00fatbol'), (N'\ud83c\udfb8', N'Guitarra');\r\n    \r\n    IF @Round > 10\r\n        INSERT INTO @EmojiWordList VALUES (N'\ud83d\ude80', N'Cohete'), (N'\ud83c\udf08', N'Arco\u00edris');\r\n    \r\n    -- Randomly select a new emoji and word\r\n    SELECT TOP 1 \r\n        @CorrectEmoji = Emoji,\r\n        @CorrectWord = Word\r\n    FROM @EmojiWordList\r\n    ORDER BY NEWID();\r\n    \r\n    -- Optional hint (e.g., the word in English)\r\n    IF @Language = 'Spanish'\r\n    BEGIN\r\n        SET @Hint = CASE @CorrectWord\r\n            WHEN 'Cara Feliz' THEN N'Happy Face'\r\n            WHEN 'Gato' THEN N'Cat'\r\n            WHEN '\u00c1rbol' THEN N'Tree'\r\n            WHEN 'Pizza' THEN N'Pizza'\r\n            WHEN 'Coche' THEN N'Car'\r\n            WHEN 'F\u00fatbol' THEN N'Soccer'\r\n            WHEN 'Guitarra' THEN N'Guitar'\r\n            WHEN 'Cohete' THEN N'Rocket'\r\n            WHEN 'Arco\u00edris' THEN N'Rainbow'\r\n        END;\r\n    END\r\nEND\r\n\r\n-- Step 7: Prepare display texts\r\nDECLARE @GameTitle NVARCHAR(MAX) = CONCAT(N'\ud83c\udfae Learn ', @Language, N' Words \ud83c\udfae');\r\nDECLARE @ScoreRoundText NVARCHAR(MAX) = CONCAT(N'Score: ', CAST(@Score AS NVARCHAR), N' | Round: ', CAST(@Round AS NVARCHAR));\r\nDECLARE @TimerText NVARCHAR(MAX) = CONCAT(N'Time left: ', CAST(@TimeLeft AS NVARCHAR), N' seconds');\r\nDECLARE @QuestionText NVARCHAR(MAX) = CONCAT(N'What does this emoji represent? ', @CorrectEmoji);\r\nDECLARE @HintText NVARCHAR(MAX) = CONCAT(N'Hint: ', @Hint); -- Display the hint\r\n\r\n-- Step 8: Display game information\r\nEXEC sp_api_modal_text @text=@GameTitle, @class='h2';\r\nEXEC sp_api_modal_text @text=@ScoreRoundText, @class='h4';\r\nEXEC sp_api_modal_text @text=@TimerText, @class='h5';\r\nEXEC sp_api_modal_text @text=@QuestionText, @class='h3';\r\nEXEC sp_api_modal_text @text=@HintText, @class='h6'; -- Display hint for learning assistance\r\n\r\n-- Step 9: Display result if there is one\r\nIF @Result IS NOT NULL\r\nBEGIN\r\n    EXEC sp_api_modal_text @text=@Result, @class='h3';\r\n    SET @Result = NULL;\r\nEND\r\n\r\n-- Step 10: Create buttons for each description option using sp_api_modal_choose\r\nDECLARE @ChoiceList NVARCHAR(MAX) = N'Cara Feliz,Gato,\u00c1rbol,Pizza,Coche';\r\nIF @Round > 5\r\n    SET @ChoiceList = @ChoiceList + N',F\u00fatbol,Guitarra';\r\nIF @Round > 10\r\n    SET @ChoiceList = @ChoiceList + N',Cohete,Arco\u00edris';\r\n\r\nEXEC sp_api_modal_choose @name='@UserChoice', @list=@ChoiceList, @value=@UserChoice OUT;--, @class='btn-group';\r\n\r\n-- Step 11: Add a button to quit the game\r\nDECLARE @QuitButtonText NVARCHAR(20) = N'End Game \ud83c\udfc1';\r\nDECLARE @QuitButtonClass NVARCHAR(20) = 'btn-danger';\r\nEXEC sp_api_modal_button @name='quit', @value=@QuitButtonText, @valueout=@Quit OUT, @class=@QuitButtonClass;\r\n\r\n-- Step 12: Handle game end\r\nIF @Quit IS NOT NULL\r\nBEGIN\r\n    DECLARE @FinalScoreText NVARCHAR(MAX) = CONCAT(N'Thanks for playing! Your final score: ', CAST(@Score AS NVARCHAR));\r\n    EXEC sp_api_modal_text @text=@FinalScoreText, @class='h2';\r\n    EXEC sp_api_modal_clear;\r\n    RETURN;\r\nEND\r\n\r\n-- Step 13: Prepare and save game state for the next roundtrip\r\nSET @GameState = (SELECT @Score AS Score, @Round AS Round, @CorrectEmoji AS CorrectEmoji, @CorrectWord AS CorrectWord, @TimeLeft AS TimeLeft FOR JSON PATH, WITHOUT_ARRAY_WRAPPER);\r\nEXEC sp_api_modal_value @name='@GameState', @value=@GameState;",
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_snippet_input_button",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": "-- ** input snippet begins here **\r\n\tDECLARE @input NVARCHAR(MAX); EXEC sp_api_modal_get_value @name='@input', @value=@input OUT;\t\r\n\tDECLARE @input_button NVARCHAR(MAX); EXEC sp_api_modal_get_value @name='@input_button', @value=@input_button OUT;\t\t\t\r\n\tEXEC sp_api_modal_input @name = '@input', @value = @input OUT \r\n\t\t--,@inline = 1\r\n\t\t--,@class = ''\r\n\t\t--,@max = 8 -- max chars\r\n\t\t--,@focus = 0\r\n\t\t--,@select = NULL\r\n\t\t--,@inline = 0\r\n\t\t--,@hidden = 0\r\n\t\t--,@identifier = NULL\r\n\t\t--,@class_updated = NULL\r\n\t\t--,@type = 'textarea'\r\n\t\t--,@placeholder nvarchar(128) = NULL\r\n\t\t--,@rows = NULL --when @type = 'textarea'\r\n\t\t--,@use_placeholder = NULL\r\n\t\t--,@ignore_keys nvarchar(max) = NULL --ignore key codes from buttons\r\n\tEXEC sp_api_modal_button @name='@input_button',@value = 'Confirm input', @valueout = @input_button OUT,@class='btn-danger'--,@key='Enter'\t\t\r\n\tIF @input_button IS NULL RETURN\t--input is required, otherwise action code ends here..\r\n\tEXEC sp_api_toast @input, @speech=@input\r\n\t-- ** input snippet ends here **",
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_snippet_iso_week",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": "DECLARE @t NVARCHAR(512)= concat(N'Today is ISO week ',dbo.iso_week_nr(GETDATE()))\r\nEXEC sp_api_toast @t, @speech=@t, @speech_lang=N'en-en'",
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_snippet_mail_card_files",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": "--\tMail all linked files from the current card item to the logged-in user\r\n--\thttps://www.t-sql.app code example\r\n--\task AI: https://t-sql.app\r\n\r\nif NOT exists(SELECT 1 FROM api_files WHERE context = @card_name AND context_id = @id)\r\nBEGIN\r\n\tdeclare @t nvarchar(512)=concat(upper(@card_name),N' with record ID: ',@id,', has no linked files.')\r\n\texec sp_api_modal_alert @t,N'Nothing can be mailed to you.'\r\n\tRETURN\r\nEND\r\n\r\ndeclare @filename nvarchar(512)\r\ndeclare @url nvarchar(512)\r\ndeclare @mail_to nvarchar(256) = @user -- the user who is currently logged-in\r\nDECLARE @bodytext nvarchar(max) \r\nCREATE TABLE #files (filename nvarchar(4000),path nvarchar(4000))\r\nSELECT id,name FROM api_files WHERE context = @card_name AND context_id = @id\r\n\r\nDECLARE @cursor CURSOR,@idval INT\r\nSET @cursor = CURSOR LOCAL FAST_FORWARD FOR \r\n\t\tSELECT id,name FROM api_files \r\n\t\tWHERE context = @card_name AND context_id = @id -- IN ({@ids})\r\nOPEN @cursor;\r\nFETCH NEXT FROM @cursor INTO @idval,@filename\r\nWHILE @@FETCH_STATUS = 0\r\n\tBEGIN\r\n\t\tEXEC sp_api_file_set @api_files_id=@idval,@url = @url OUT\r\n        INSERT INTO #files (filename,path) VALUES(@filename,@url)\r\n        SET @bodytext = CONCAT(@bodytext,CHAR(13),@url)\r\n\t\tFETCH NEXT FROM @cursor INTO @idval,@filename\r\n\tEND\r\nCLOSE @cursor;\r\nDEALLOCATE @cursor;\r\nDECLARE @attachments nvarchar(max) = (SELECT * FROM #files FOR JSON PATH)\r\n\r\nDECLARE @subject nvarchar(256)=concat(' Files from card: ',@card_name,': ',@ID)\r\nif @bodytext is not null set @bodytext=CONCAT(N'Links for direct download:',CHAR(13),@bodytext)\r\nif @bodytext is null set @bodytext=concat(N'Hereby we send you the files for dossier ',@id,' (',@card_name,')')\r\nEXEC sp_api_email @mail_to,@subject,@bodytext,@attachments = @attachments --filename en path\r\n\r\nDECLARE @T1 nvarchar(256)=concat(N'All files for record ',@ID,N' are sent by mail to ',@mail_to)\r\nexec sp_api_toast @T1",
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_snippet_mail_yourself",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": "--\tSend an e-mail to yourself\r\n--\thttps://www.t-sql.app code example\r\n--\task AI: https://t-sql.app\r\n\r\nDECLARE @To NVARCHAR(255) = @user; -- @user is een context-aware variabele die het e-mailadres van de ingelogde gebruiker bevat\r\nDECLARE @Subject NVARCHAR(255) = 'Test e-mail van TSQL.APP';\r\nDECLARE @Body NVARCHAR(MAX) = 'Dit is een test e-mail verstuurd vanuit TSQL.APP.';\r\n\r\n-- Verstuur de e-mail\r\nEXEC sp_api_email \r\n    @To = @To,\r\n    @Subject = @Subject, \r\n    @Body = @Body;\r\n\r\n-- Toon een bevestigingsbericht\r\n--EXEC sp_api_modal_text @text = 'E-mail is verstuurd!', @class = 'h2';\r\nEXEC sp_api_toast @text = 'E-mail is verstuurd!';",
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_snippet_md_view",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": "--\tAction code to view .MD text in a modal page on the Card\r\n--  haal markdown tekst op uit de tabel [md_documents] waar het [id] gelijk is aan de primary key van de huidige card.\r\nDECLARE @t nvarchar(max)=(SELECT text_md FROM support_log WHERE id=@id)\r\n\r\n--  toon de text op een modal page met de parameter @markdown=1 voor rendering van markdown tekst.\r\nEXEC sp_api_modal_text @text=@t,@markdown=1,@print=1",
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_snippet_multi_step_form",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": "-- TSQL.APP Multi-Step Forms Implementation\r\n\r\nDECLARE @Step INT;\r\nDECLARE @Name NVARCHAR(100);\r\nDECLARE @Email NVARCHAR(100);\r\nDECLARE @Confirm BIT;\r\nDECLARE @NextButton NVARCHAR(100);\r\nDECLARE @BackButton NVARCHAR(100);\r\nDECLARE @Title NVARCHAR(MAX) = N'User Registration';\r\nDECLARE @StepTitle NVARCHAR(MAX);\r\nDECLARE @Message NVARCHAR(MAX);\r\nDECLARE @SubmitButton NVARCHAR(100);\r\n\r\nEXEC sp_api_modal_get_value @name='@Step', @value=@Step OUT;\r\nEXEC sp_api_modal_get_value @name='@Name', @value=@Name OUT;\r\nEXEC sp_api_modal_get_value @name='@Email', @value=@Email OUT;\r\nEXEC sp_api_modal_get_value @name='@Confirm', @value=@Confirm OUT;\r\n\r\nIF @Step IS NULL SET @Step = 1;\r\n\r\nIF @Step = 1\r\nBEGIN\r\n    SET @StepTitle = CONCAT(@Title, N' - Step 1');\r\n    EXEC sp_api_modal_text @text=@StepTitle, @class='h3';\r\n    EXEC sp_api_modal_input @name='@Name', @value=@Name OUT, @placeholder=N'Enter name';\r\n    EXEC sp_api_modal_button @name='@NextButton', @value=N'Next', @valueout=@NextButton OUT;\r\n    \r\n    IF @NextButton IS NOT NULL AND @Name IS NOT NULL\r\n    BEGIN\r\n        SET @Message = CONCAT(N'Welcome ', @Name, N'! \ud83d\udc4b');\r\n        EXEC sp_api_toast @text=@Message, @class='btn-success';\r\n        \r\n        DECLARE @step2Json NVARCHAR(MAX) = (\r\n            SELECT [@Step]=2, [@Name]=@Name \r\n                , [@Email]=@Email \r\n            FOR JSON PATH, WITHOUT_ARRAY_WRAPPER\r\n        );\r\n        EXEC sp_api_modal_restart @values=@step2Json;\r\n        RETURN;\r\n    END\r\nEND\r\n\r\nIF @Step = 2\r\nBEGIN\r\n    SET @StepTitle = CONCAT(@Title, N' - Step 2');\r\n    EXEC sp_api_modal_text @text=@StepTitle, @class='h3';\r\n    EXEC sp_api_modal_input @name='@Email', @value=@Email OUT, @placeholder=N'Enter email';\r\n    EXEC sp_api_modal_button @name='@BackButton', @value=N'Back', @valueout=@BackButton OUT;\r\n    EXEC sp_api_modal_button @name='@NextButton', @value=N'Next', @valueout=@NextButton OUT;\r\n    \r\n    IF @BackButton IS NOT NULL\r\n    BEGIN\r\n        DECLARE @backToStep1Json NVARCHAR(MAX) = (\r\n            SELECT [@Step]=1, [@Name]=@Name \r\n                , [@Email]=@Email \r\n            FOR JSON PATH, WITHOUT_ARRAY_WRAPPER\r\n        );\r\n        EXEC sp_api_modal_restart @values=@backToStep1Json;\r\n        RETURN;\r\n    END\r\n    \r\n    IF @NextButton IS NOT NULL AND @Email IS NOT NULL\r\n    BEGIN\r\n        SET @Message = N'Email saved! \ud83d\udce7';\r\n        EXEC sp_api_toast @text=@Message, @class='btn-success';\r\n        \r\n        DECLARE @step3Json NVARCHAR(MAX) = (\r\n            SELECT [@Step]=3, [@Name]=@Name, [@Email]=@Email \r\n            FOR JSON PATH, WITHOUT_ARRAY_WRAPPER\r\n        );\r\n        EXEC sp_api_modal_restart @values=@step3Json;\r\n        RETURN;\r\n    END\r\nEND\r\n\r\nIF @Step = 3\r\nBEGIN\r\n    SET @StepTitle = CONCAT(@Title, N' - Review');\r\n    EXEC sp_api_modal_text @text=@StepTitle, @class='h3';\r\n    \r\n    SET @Message = CONCAT(N'Name: ', @Name);\r\n    EXEC sp_api_modal_text @text=@Message;\r\n    \r\n    SET @Message = CONCAT(N'Email: ', @Email);\r\n    EXEC sp_api_modal_text @text=@Message;\r\n    \r\n    EXEC sp_api_modal_button @name='@BackButton', @value=N'Back', @valueout=@BackButton OUT;\r\n    EXEC sp_api_modal_button @name='@SubmitButton', @value=N'Submit', @valueout=@SubmitButton OUT;\r\n    \r\n    IF @BackButton IS NOT NULL\r\n    BEGIN\r\n        DECLARE @backToStep2Json NVARCHAR(MAX) = (\r\n            SELECT [@Step]=2, [@Name]=@Name, [@Email]=@Email \r\n            FOR JSON PATH, WITHOUT_ARRAY_WRAPPER\r\n        );\r\n        EXEC sp_api_modal_restart @values=@backToStep2Json;\r\n        RETURN;\r\n    END\r\n    \r\n    IF @SubmitButton IS NOT NULL\r\n    BEGIN\r\n        SET @Message = N'Registration complete! \u2728';\r\n        EXEC sp_api_toast @text=@Message, @class='btn-success';\r\n        EXEC sp_api_modal_clear;\r\n        RETURN;\r\n    END\r\nEND\r\n\r\n\r\n--Looking at this code, there are a few interesting patterns to note:\r\n\r\n--State Management: The code demonstrates proper multi-step form handling in TSQL.APP using JSON state management. It maintains state between steps using the sp_api_modal_restart procedure with JSON values, following the required FOR JSON PATH pattern.\r\n--Step Navigation: It implements bidirectional navigation (forward/back) while preserving form values, which is a good practice for user experience. Each step transition carries forward all relevant state data.\r\n--Modal Dialog Components: The code uses several TSQL.APP modal components:\r\n\r\n\r\n--sp_api_modal_text for headings and messages\r\n--sp_api_modal_input for form fields\r\n--sp_api_modal_button for navigation\r\n--sp_api_toast for feedback messages\r\n\r\n\r\n--Code Organization: It follows TSQL.APP mandated practices well:\r\n\r\n\r\n--All variables declared at the start\r\n--Clear step-based logical structure\r\n--Proper state synchronization after declarations\r\n--Consistent use of Unicode (N prefix)\r\n\r\n--One notable pattern is how it handles the email value preservation during back navigation:\r\n--sqlCopy[@Email]=@Email --bewaar de email waarde ook bij back\r\n--This ensures the email field state persists even when going backwards, which is a thoughtful user experience detail.\r\n--The code is a good example of proper TSQL.APP implementation, adhering to the framework's core principles while creating an interactive multi-step form interface.",
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_snippet_multi_step_table_sync",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": "-- Created with TSQL.APP AI\r\n-- 1. Pre-declare all sp parameters\r\nDECLARE @text NVARCHAR(MAX);\r\nDECLARE @class NVARCHAR(MAX);\r\nDECLARE @title NVARCHAR(MAX);\r\nDECLARE @name NVARCHAR(MAX);\r\nDECLARE @value NVARCHAR(MAX);\r\nDECLARE @valueout NVARCHAR(MAX);\r\nDECLARE @placeholder NVARCHAR(MAX);\r\nDECLARE @buttonclass NVARCHAR(MAX);\r\nDECLARE @tmptable NVARCHAR(MAX);\r\nDECLARE @print BIT;\r\nDECLARE @inline BIT;\r\nDECLARE @order NVARCHAR(MAX);\r\n\r\n-- 2. Business variables\r\nDECLARE @Step INT;\r\nDECLARE @AddButton NVARCHAR(MAX);\r\nDECLARE @DeleteButton NVARCHAR(MAX);\r\nDECLARE @NextButton NVARCHAR(MAX);\r\nDECLARE @BackButton NVARCHAR(MAX);\r\nDECLARE @NewProductName NVARCHAR(MAX);\r\nDECLARE @NewPrice DECIMAL(10,2);\r\nDECLARE @NewQuantity INT;\r\nDECLARE @DeleteProductID INT;\r\nDECLARE @Message NVARCHAR(MAX);\r\nDECLARE @StepTitle NVARCHAR(MAX);\r\nDECLARE @DisplayText NVARCHAR(MAX);\r\nDECLARE @JsonState NVARCHAR(MAX);\r\nDECLARE @ProductsJson NVARCHAR(MAX);\r\nDECLARE @ProductExists BIT;\r\nDECLARE @DeletedProductName NVARCHAR(100);\r\nDECLARE @NextID INT;\r\nDECLARE @MaxProductID INT;  -- New variable to track the highest ProductID ever used\r\nDECLARE @DebugMode BIT = 0; -- Debug mode switch - default off (only used in Step 2)\r\n\r\n-- 3. State synchronization\r\nEXEC sp_api_modal_get_value @name=N'@Step', @value=@Step OUT;\r\nEXEC sp_api_modal_get_value @name=N'@AddButton', @value=@AddButton OUT;\r\nEXEC sp_api_modal_get_value @name=N'@NextButton', @value=@NextButton OUT;\r\nEXEC sp_api_modal_get_value @name=N'@BackButton', @value=@BackButton OUT;\r\nEXEC sp_api_modal_get_value @name=N'@DeleteButton', @value=@DeleteButton OUT;\r\nEXEC sp_api_modal_get_value @name=N'@NewProductName', @value=@NewProductName OUT;\r\nEXEC sp_api_modal_get_value @name=N'@JsonState', @value=@JsonState OUT;\r\nEXEC sp_api_modal_get_value @name=N'@ProductsJson', @value=@ProductsJson OUT;\r\n\r\n-- Retrieve @MaxProductID from state\r\nDECLARE @MaxProductIDText NVARCHAR(MAX);\r\nEXEC sp_api_modal_get_value @name=N'@MaxProductID', @value=@MaxProductIDText OUT;\r\nIF @MaxProductIDText IS NOT NULL SET @MaxProductID = TRY_CAST(@MaxProductIDText AS INT);\r\n\r\n-- Parse numeric values safely\r\nDECLARE @NewPriceText NVARCHAR(MAX);\r\nDECLARE @NewQuantityText NVARCHAR(MAX);\r\nDECLARE @DeleteProductIDText NVARCHAR(MAX);\r\n\r\nEXEC sp_api_modal_get_value @name=N'@NewPrice', @value=@NewPriceText OUT;\r\nEXEC sp_api_modal_get_value @name=N'@NewQuantity', @value=@NewQuantityText OUT; \r\nEXEC sp_api_modal_get_value @name=N'@DeleteProductID', @value=@DeleteProductIDText OUT;\r\n\r\n-- Safe conversion from text to numbers\r\nIF @NewPriceText IS NOT NULL SET @NewPrice = TRY_CAST(@NewPriceText AS DECIMAL(10,2));\r\nIF @NewQuantityText IS NOT NULL SET @NewQuantity = TRY_CAST(@NewQuantityText AS INT);\r\nIF @DeleteProductIDText IS NOT NULL SET @DeleteProductID = TRY_CAST(@DeleteProductIDText AS INT);\r\n\r\n-- 4. Initialize step if needed\r\nIF @Step IS NULL SET @Step = 1;\r\n\r\n-- Clean up any existing temp tables at the start to avoid conflicts\r\nIF OBJECT_ID('tempdb..#Products') IS NOT NULL DROP TABLE #Products;\r\nIF OBJECT_ID('tempdb..#Inventory') IS NOT NULL DROP TABLE #Inventory;\r\nIF OBJECT_ID('tempdb..#UpdatedProducts') IS NOT NULL DROP TABLE #UpdatedProducts;\r\n\r\n-- STEP 1: Products table\r\nIF @Step = 1\r\n\r\nBEGIN\r\n    -- 5. Create Products table\r\n    CREATE TABLE #Products (\r\n        ProductID INT IDENTITY(1,1),\r\n        ProductName NVARCHAR(100),\r\n        Price DECIMAL(10,2),\r\n        Quantity INT\r\n    );\r\n    \r\n    -- If we have JSON from a previous interaction, populate the table\r\n    IF @ProductsJson IS NOT NULL\r\n    BEGIN\r\n        SET @text = N'INSERT INTO #Products (ProductID, ProductName, Price, Quantity)\r\n        SELECT * FROM OPENJSON(''' + @ProductsJson + ''')\r\n        WITH (\r\n            ProductID INT ''$.ProductID'',\r\n            ProductName NVARCHAR(100) ''$.ProductName'',\r\n            Price DECIMAL(10,2) ''$.Price'',\r\n            Quantity INT ''$.Quantity''\r\n        ) ORDER BY ProductID';\r\n        \r\n        -- Use SET IDENTITY_INSERT to preserve IDs\r\n        SET @text = N'SET IDENTITY_INSERT #Products ON; ' + @text + '; SET IDENTITY_INSERT #Products OFF;';\r\n        EXEC sp_api_exec @sql = @text;\r\n    END\r\n    ELSE\r\n    BEGIN\r\n        -- Add default data if no JSON data exists (your initial list with IDs 1, 2, 3)\r\n        INSERT INTO #Products (ProductName, Price, Quantity)\r\n        VALUES \r\n            (N'Laptop', 1299.99, 10),\r\n            (N'Smartphone', 699.99, 25),\r\n            (N'Tablet', 499.99, 15);\r\n    END\r\n    \r\n    -- Initialize @MaxProductID if it's NULL (first run)\r\n    IF @MaxProductID IS NULL\r\n    BEGIN\r\n        SELECT @MaxProductID = ISNULL(MAX(ProductID), 0) FROM #Products;\r\n    END\r\n    \r\n    -- 6. Display Step 1 interface\r\n    SET @StepTitle = N'Step 1: Add Products';\r\n    SET @DisplayText = N'Add new products to the inventory';\r\n    \r\n    EXEC sp_api_modal_text @text = @StepTitle, @class = N'h3';\r\n    EXEC sp_api_modal_text @text = @DisplayText, @class = N'text-muted';\r\n    \r\n    -- Show current products\r\n    EXEC sp_api_modal_text @text = N'Current Products:', @class = N'mt-3 mb-2 font-weight-bold';\r\n    EXEC sp_api_modal_table @name = N'@ProductTable', @tmptable = N'#Products', @orderby = N'ORDER BY ProductID', @print = 1;\r\n    \r\n    -- Input form\r\n    EXEC sp_api_modal_text @text = N'Add New Product:', @class = N'mt-4 mb-2 font-weight-bold';\r\n    EXEC sp_api_modal_input @name = N'@NewProductName', @value = @NewProductName OUT, @placeholder = N'Product name';\r\n    EXEC sp_api_modal_input @name = N'@NewPrice', @value = @NewPriceText OUT, @placeholder = N'Price (e.g., 99.99)', @type = N'number';\r\n    EXEC sp_api_modal_input @name = N'@NewQuantity', @value = @NewQuantityText OUT, @placeholder = N'Quantity', @type = N'number';\r\n    \r\n    -- Buttons\r\n    EXEC sp_api_modal_button @name = N'@AddButton', @value = N'Add Product', \r\n        @valueout = @AddButton OUT, @class = N'btn-success', @inline = 1;\r\n    EXEC sp_api_modal_button @name = N'@NextButton', @value = N'Next Step \u2192', \r\n        @valueout = @NextButton OUT, @class = N'btn-primary ml-2', @inline = 1;\r\n    \r\n    -- Handle button actions\r\n    -- Add Product button clicked\r\n    IF @AddButton IS NOT NULL\r\n    BEGIN\r\n        -- Validate input\r\n        IF LEN(TRIM(ISNULL(@NewProductName, N''))) < 2\r\n        BEGIN\r\n            SET @Message = N'Please enter a valid product name (at least 2 characters)';\r\n            EXEC sp_api_toast @text = @Message, @class = N'btn-warning';\r\n            RETURN;\r\n        END\r\n        \r\n        IF @NewPrice IS NULL OR @NewPrice <= 0\r\n        BEGIN\r\n            SET @Message = N'Please enter a valid price greater than 0';\r\n            EXEC sp_api_toast @text = @Message, @class = N'btn-warning';\r\n            RETURN;\r\n        END\r\n        \r\n        IF @NewQuantity IS NULL OR @NewQuantity < 0\r\n        BEGIN\r\n            SET @Message = N'Please enter a valid quantity (0 or greater)';\r\n            EXEC sp_api_toast @text = @Message, @class = N'btn-warning';\r\n            RETURN;\r\n        END\r\n        \r\n        -- Calculate the next ProductID using @MaxProductID\r\n        SET @NextID = @MaxProductID + 1;\r\n        \r\n        -- Insert the new product with the calculated ProductID\r\n        SET IDENTITY_INSERT #Products ON;\r\n        INSERT INTO #Products (ProductID, ProductName, Price, Quantity)\r\n        VALUES (@NextID, @NewProductName, @NewPrice, @NewQuantity);\r\n        SET IDENTITY_INSERT #Products OFF;\r\n        \r\n        -- Update @MaxProductID to the new ProductID\r\n        SET @MaxProductID = @NextID;\r\n        \r\n        -- Get JSON for state persistence\r\n        SELECT @ProductsJson = (SELECT * FROM #Products FOR JSON PATH);\r\n        \r\n        -- Reset input fields and update state\r\n        SET @JsonState = (\r\n            SELECT \r\n                [@Step]=1, \r\n                [@ProductsJson]=@ProductsJson,\r\n                [@MaxProductID]=@MaxProductID,  -- Persist @MaxProductID in state\r\n                [@NewProductName]=NULL,\r\n                [@NewPrice]=NULL,\r\n                [@NewQuantity]=NULL\r\n            FOR JSON PATH, WITHOUT_ARRAY_WRAPPER\r\n        );\r\n        \r\n        -- Show success message and restart\r\n        SET @Message = N'Product added successfully!';\r\n        EXEC sp_api_toast @text = @Message, @class = N'btn-success';\r\n        EXEC sp_api_modal_restart @values = @JsonState;\r\n        RETURN;\r\n    END\r\n    \r\n    -- Next button clicked - transition to Step 2\r\n    IF @NextButton IS NOT NULL\r\n    BEGIN\r\n        -- Get JSON for state persistence\r\n        SELECT @ProductsJson = (SELECT * FROM #Products FOR JSON PATH);\r\n        \r\n        -- Prepare state for next step\r\n        SET @JsonState = (\r\n            SELECT \r\n                [@Step]=2, \r\n                [@ProductsJson]=@ProductsJson,\r\n                [@MaxProductID]=@MaxProductID  -- Persist @MaxProductID in state\r\n            FOR JSON PATH, WITHOUT_ARRAY_WRAPPER\r\n        );\r\n        \r\n        -- Move to next step\r\n        EXEC sp_api_modal_restart @values = @JsonState;\r\n        RETURN;\r\n    END\r\nEND\r\n\r\n-- STEP 2: Inventory management - delete products\r\nIF @Step = 2\r\nBEGIN\r\n    -- Create inventory table with calculated fields\r\n    CREATE TABLE #Inventory (\r\n        ProductID INT,\r\n        ProductName NVARCHAR(100),\r\n        Price DECIMAL(10,2),\r\n        Quantity INT,\r\n        Value DECIMAL(10,2),\r\n        Status NVARCHAR(20)\r\n    );\r\n    \r\n    -- Populate the inventory table from JSON\r\n    IF @ProductsJson IS NOT NULL\r\n    BEGIN\r\n        SET @text = N'INSERT INTO #Inventory\r\n        SELECT \r\n            p.ProductID,\r\n            p.ProductName,\r\n            p.Price,\r\n            p.Quantity,\r\n            p.Price * p.Quantity AS Value,\r\n            CASE \r\n                WHEN p.Quantity = 0 THEN N''Out of Stock''\r\n                WHEN p.Quantity < 5 THEN N''Low Stock''\r\n                WHEN p.Quantity >= 20 THEN N''Well Stocked''\r\n                ELSE N''In Stock''\r\n            END AS Status\r\n        FROM OPENJSON(''' + @ProductsJson + ''')\r\n        WITH (\r\n            ProductID INT ''$.ProductID'',\r\n            ProductName NVARCHAR(100) ''$.ProductName'',\r\n            Price DECIMAL(10,2) ''$.Price'',\r\n            Quantity INT ''$.Quantity''\r\n        ) p';\r\n        \r\n        EXEC sp_api_exec @sql = @text;\r\n    END\r\n    \r\n    -- Display Step 2 interface\r\n    SET @StepTitle = N'Step 2: Manage Inventory';\r\n    SET @DisplayText = N'Remove products from inventory';\r\n    \r\n    EXEC sp_api_modal_text @text = @StepTitle, @class = N'h3';\r\n    EXEC sp_api_modal_text @text = @DisplayText, @class = N'text-muted';\r\n    \r\n    -- Show current inventory\r\n    EXEC sp_api_modal_text @text = N'Current Inventory:', @class = N'mt-3 mb-2 font-weight-bold';\r\n    EXEC sp_api_modal_table @name = N'@InventoryTable', @tmptable = N'#Inventory', @orderby = N'ORDER BY ProductID', @print = 1;\r\n    \r\n    -- Debug mode toggle with direct post to update immediately\r\n    EXEC sp_api_modal_switch \r\n        @name = N'@DebugMode', \r\n        @value = @DebugMode OUT, \r\n        @label = N'Debug Mode', \r\n        @inline = 1,\r\n        @direct_post = 1;  -- This causes immediate post when toggled\r\n        \r\n    -- Display debug information if enabled\r\n    IF @DebugMode = 1\r\n    BEGIN\r\n        EXEC sp_api_modal_show_json_values\r\n    END\r\n    \r\n    -- Remove product form\r\n    EXEC sp_api_modal_text @text = N'Remove Product:', @class = N'mt-4 mb-2 font-weight-bold';\r\n    EXEC sp_api_modal_input @name = N'@DeleteProductID', @value = @DeleteProductIDText OUT, \r\n                           @placeholder = N'Enter Product ID to delete', @type = N'number';\r\n    \r\n    -- Buttons\r\n    EXEC sp_api_modal_button @name = N'@DeleteButton', @value = N'Delete Product', \r\n                            @valueout = @DeleteButton OUT, @class = N'btn-danger', @inline = 1;\r\n    EXEC sp_api_modal_button @name = N'@BackButton', @value = N'\u2190 Back', \r\n                            @valueout = @BackButton OUT, @class = N'btn-secondary ml-2', @inline = 1;\r\n    \r\n    -- Delete Product button clicked\r\n    IF @DeleteButton IS NOT NULL\r\n    BEGIN\r\n        -- Validate input\r\n        IF @DeleteProductID IS NULL\r\n        BEGIN\r\n            SET @Message = N'Please enter a valid Product ID';\r\n            EXEC sp_api_toast @text = @Message, @class = N'btn-warning';\r\n            EXEC sp_api_modal_value @name = N'@DeleteButton', @value = NULL;\r\n            RETURN;\r\n        END\r\n        \r\n        -- Check if product exists using temporary table approach\r\n        DECLARE @ProductExistsTable TABLE (ProductExists BIT);\r\n        \r\n        SET @text = N'\r\n        SELECT CASE\r\n            WHEN EXISTS (SELECT 1 FROM #Inventory WHERE ProductID = ' + CAST(@DeleteProductID AS NVARCHAR(10)) + ')\r\n            THEN 1\r\n            ELSE 0\r\n        END AS ProductExists';\r\n        \r\n        INSERT INTO @ProductExistsTable\r\n        EXEC sp_api_exec @sql = @text;\r\n        \r\n        -- Get the existence result\r\n        SELECT @ProductExists = ProductExists FROM @ProductExistsTable;\r\n        \r\n        -- Get product name using a table variable\r\n        DECLARE @ProductNameTable TABLE (ProductName NVARCHAR(100));\r\n        \r\n        SET @text = N'\r\n        SELECT ProductName\r\n        FROM #Inventory \r\n        WHERE ProductID = ' + CAST(@DeleteProductID AS NVARCHAR(10));\r\n        \r\n        INSERT INTO @ProductNameTable\r\n        EXEC sp_api_exec @sql = @text;\r\n        \r\n        -- Get the product name\r\n        SELECT @DeletedProductName = ProductName FROM @ProductNameTable;\r\n        \r\n        IF @ProductExists = 0\r\n        BEGIN\r\n            SET @Message = N'Product ID not found';\r\n            EXEC sp_api_toast @text = @Message, @class = N'btn-warning';\r\n            RETURN;\r\n        END\r\n        \r\n        -- Create temporary table for products without the deleted one\r\n        CREATE TABLE #UpdatedProducts (\r\n            ProductID INT,\r\n            ProductName NVARCHAR(100),\r\n            Price DECIMAL(10,2),\r\n            Quantity INT\r\n        );\r\n        \r\n        SET @text = N'\r\n        INSERT INTO #UpdatedProducts\r\n        SELECT ProductID, ProductName, Price, Quantity\r\n        FROM #Inventory\r\n        WHERE ProductID != ' + CAST(@DeleteProductID AS NVARCHAR(10));\r\n        \r\n        EXEC sp_api_exec @sql = @text;\r\n        \r\n        -- Get JSON for state persistence\r\n        SELECT @ProductsJson = (SELECT * FROM #UpdatedProducts FOR JSON PATH);\r\n        \r\n        -- If all products were deleted, set empty array\r\n        IF @ProductsJson IS NULL\r\n            SET @ProductsJson = N'[]';\r\n        \r\n        -- Reset input field and prepare state\r\n        SET @JsonState = (\r\n            SELECT \r\n                [@Step]=2, \r\n                [@ProductsJson]=@ProductsJson,\r\n                [@MaxProductID]=@MaxProductID,  -- Persist @MaxProductID in state\r\n                [@DeleteProductID]=NULL\r\n            FOR JSON PATH, WITHOUT_ARRAY_WRAPPER\r\n        );\r\n        \r\n        -- Show success message\r\n        SET @Message = N'Product \"' + ISNULL(@DeletedProductName, N'Unknown') + N'\" deleted successfully!';\r\n        EXEC sp_api_toast @text = @Message, @class = N'btn-success';\r\n        \r\n        -- Restart with updated state\r\n        EXEC sp_api_modal_restart @values = @JsonState;\r\n        RETURN;\r\n    END\r\n    \r\n    -- Back button clicked - return to Step 1\r\n    IF @BackButton IS NOT NULL\r\n    BEGIN\r\n        -- Prepare state for previous step\r\n        SET @JsonState = (\r\n            SELECT \r\n                [@Step]=1, \r\n                [@ProductsJson]=@ProductsJson,\r\n                [@MaxProductID]=@MaxProductID  -- Persist @MaxProductID in state\r\n            FOR JSON PATH, WITHOUT_ARRAY_WRAPPER\r\n        );\r\n        \r\n        -- Move back to previous step\r\n        EXEC sp_api_modal_restart @values = @JsonState;\r\n        RETURN;\r\n    END\r\nEND",
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_snippet_paste_excel_to_temp_table",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": "--\tcopy and paste example for Excel data to TSQL.APP \r\n--\tfun: try to talk to our custom GPT at https://t-sql.app\r\n--\tneed help? mail to support@t-sql.app\r\n\r\n-- Declare all variables\r\nDECLARE @json NVARCHAR(MAX);\r\nDECLARE @PasteInstruction NVARCHAR(100) = N'Als de Excel drop (CTRL-V) niet lukt, zorg dan voor kolomnamen met alleen normale letters.';\r\nDECLARE @TN NVARCHAR(100) = '#ExcelData';\r\nDECLARE @QuitButtonLabel NVARCHAR(20) = 'Quit';\r\nDECLARE @QuitButton NVARCHAR(128);\r\n\r\n-- Create a paste area for Excel data\r\nEXEC sp_api_modal_text @text = @PasteInstruction;\r\nEXEC sp_api_modal_paste @json = @json OUT\r\n\r\n-- Create a quit button\r\nEXEC sp_api_modal_button \r\n    @name = '@QuitButton', \r\n    @value = @QuitButtonLabel, \r\n    @valueout = @QuitButton OUT, \r\n    @class = 'btn-secondary';\r\n\r\nEXEC sp_api_modal_text @text =N'De Excel data in een Tijdelijke Tracy Tabel:',@class='h2'\r\n\r\n-- Maak eerst de tabel aan met de tsql_key kolom\r\nDROP TABLE IF EXISTS #MijnTabel\r\nCREATE TABLE #MijnTabel (\r\n\ttsql_key INT IDENTITY(1,1) PRIMARY KEY\r\n);\r\n\r\n-- Voorbeeld JSON-data\r\n--DECLARE @Json NVARCHAR(MAX) = N'[{\"id\":\"5\",\"omschrijving\":\"Desch 10,5 cm 5 graden\",\"artikelnummer\":\"1\",\"fr_kleur_id\":\"6\"},{\"id\":\"8\",\"omschrijving\":\"Desch 12 cm 5 graden\",\"artikelnummer\":\"2\",\"fr_kleur_id\":\"3\"}]';\r\n\r\n-- Voer de procedure uit om de #MijnTabel te vullen\r\nEXEC JSON_TABLE @Json, '#MijnTabel';\r\n\r\n-- Nu kun je de gevulde #MijnTabel gebruiken\r\nexec sp_api_modal_table @tmptable=N'#MijnTabel'\r\n\r\n-- Optioneel: Als je klaar bent, kun je de tijdelijke tabel verwijderen\r\nDROP TABLE IF EXISTS #MijnTabel;\r\n\r\n-- Check if the Quit button was clicked\r\nIF @QuitButton IS NOT NULL\r\nBEGIN\r\n    EXEC sp_api_modal_clear;\r\n    RETURN;\r\nEND",
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_snippet_podcast",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": "--\ttracy_agfx_podcast\r\n--\t1. insert this code into a new action with name: tracy_podcast. Make it a Global Action\r\n--\t2. Add this line to the main menu: EXEC sp_api_modal_action @name='tracy_podcast'\r\n\r\nexec sp_api_modal_text N'Listen to the podcast about tracy agfx, built with TSQL.APP'\r\nEXEC sp_api_modal_audio @url = N'https://apis.tsql.app/storage/3ymnoftu9ybxaw8jm4boaayakx4jllx9', @autoplay = 0, @controls = 1\r\n\r\nEXEC sp_api_modal_text N'click Quit/Exit button to end the action.'\r\nDECLARE @ButtonQuit nvarchar(128)\r\nEXEC sp_api_modal_get_value @name='@ButtonQuit', @value=@ButtonQuit OUT;\r\nEXEC sp_api_modal_button \r\n\t@name='quit',\r\n\t@value='Quit this Action', \r\n\t@class='btn-secondary', \r\n\t@valueout=@ButtonQuit OUT;\r\n\r\nIF @ButtonQuit IS NOT NULL\r\nBEGIN\r\n\t--SET @Quit = 1;\r\n\tEXEC sp_api_modal_clear;\r\n\tRETURN;\r\nEND",
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_snippet_quit_exit_button",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": "-- Add 'Quit' button\r\n\texec sp_api_modal_text N'click Quit/Exit button to end the action.'\r\n\tDECLARE @ButtonQuit nvarchar(128)\r\n\tEXEC sp_api_modal_get_value @name='@ButtonQuit', @value=@ButtonQuit OUT;\r\n\tEXEC sp_api_modal_button \r\n\t\t@name='quit',\r\n\t\t@value='Quit this Action', \r\n\t\t@class='btn-secondary', \r\n\t\t@valueout=@ButtonQuit OUT;\r\n\r\n\tIF @ButtonQuit IS NOT NULL\r\n\tBEGIN\r\n\t\t--SET @Quit = 1;\r\n\t\tEXEC sp_api_modal_clear;\r\n\t\tRETURN;\r\n\tEND",
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_snippet_regex_split",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": "SELECT * FROM dbo.regex_split(N'a,b,,c,.,.,g-p','[,.]+')\r\n\r\nvalue\tindex\r\n\ta\t0\r\n\tb\t1\r\n\tc\t2\r\n\tg-p\t3",
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_snippet_report",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": "EXEC sp_api_report @report_name = N'dev_out', @record_id = @id, @to_preview = 1\r\n\t, @test = 1\r\n\t,@fixed_email_address = @context_user\r\n\t,@fixed_printer_name = N'printer1'",
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_snippet_select_from_table",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": "DECLARE @selected_value -- please rename @selected_value to your situation\r\n\tNVARCHAR(MAX); EXEC sp_api_modal_get_value @name='@selected_value', @value=@selected_value OUT;\t\r\n\r\nSELECT * INTO #tmp FROM api_user\r\nEXEC sp_api_modal_select_table @tmptable = '#tmp', @value = @selected_value OUT ,@no_isam = 1\r\n\t\r\n\t-- optional parameters:\r\n\t--,@class = 'p-4'\r\n\t--,@select = 1\r\n\t--,@placeholder = 'Choose a car'\r\n\t--,@top = 10\r\n\t--,@orderby = 'ORDER BY field3 DESC'\r\n\t--,@initial_id = 34\r\n\t--,@searchvalue = @searchvalue OUT -- the user typed string \r\n\t--,@use_placeholder = 'placeholder3' -- display in a placeholder above\r\n\r\nDECLARE @button02 --(ctrl-f to rename)\r\n\t\tNVARCHAR(MAX); EXEC sp_api_modal_get_value @name='@button02', @value=@button02 OUT; \t\t\t\r\n\t\r\n-- do something and wait for button\r\n\t\r\nEXEC sp_api_modal_button @name='@button02',@value = 'text for button', @valueout = @button02 OUT, @class='btn-danger' \r\n\t--,@key='Enter'\t\t\r\nIF @button02 IS NULL RETURN\t--button needs to be clicked to continue, otherwise action code ends here..\r\n\t\r\nDECLARE @t NVARCHAR(MAX) = CONCAT('Selected user is : ',(SELECT name from api_user where id=@selected_value))\r\nEXEC sp_api_modal_text @text=@t, @class='h2'",
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_snippet_sure_example",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": "-- This script creates a fun interactive experience for the user, asking them about their pizza preferences with emojis and humorous messages. It uses sp_api_modal_sure to ask yes/no questions about pineapple on pizza and extra cheese, then provides funny responses based on the user's choices. The script follows TSQL.APP best practices by preparing variables before passing them to stored procedures and using context-aware variables.\r\n\t\r\n-- Declare variables for our pizza choices\r\nDECLARE @pineapple_on_pizza bit;\r\nDECLARE @extra_cheese bit;\r\n\r\n-- Synchronize values with the client\r\nEXEC sp_api_modal_get_value @name='@pineapple_on_pizza', @value=@pineapple_on_pizza OUT;\r\nEXEC sp_api_modal_get_value @name='@extra_cheese', @value=@extra_cheese OUT;\r\n\r\n-- Set the mood with a title\r\nEXEC sp_api_modal_text @text=N'\ud83c\udf55 Ultimate Pizza Decision Time! \ud83c\udf55', @class='h2';\r\n\r\n-- Ask about pineapple on pizza\r\nDECLARE @pineapple_question nvarchar(max) = N'Do you dare to put pineapple on your pizza? \ud83c\udf4d\ud83d\ude31';\r\nEXEC sp_api_modal_sure \r\n    @alert_text=@pineapple_question,\r\n    @value=@pineapple_on_pizza OUT,\r\n    @seed=N'pineapple_pizza',\r\n    @button_true=N'Yes, I''m brave! \ud83d\udcaa',\r\n    @button_false=N'No way! \ud83d\ude45\u200d\u2642\ufe0f';\r\n\r\n-- Ask about extra cheese\r\nDECLARE @cheese_question nvarchar(max) = N'Should we make it extra cheesy? \ud83e\uddc0\ud83e\uddc0\ud83e\uddc0';\r\nEXEC sp_api_modal_sure \r\n    @alert_text=@cheese_question,\r\n    @value=@extra_cheese OUT,\r\n    @seed=N'extra_cheese',\r\n    @button_true=N'Cheese me up! \ud83d\ude0b',\r\n    @button_false=N'I''m good, thanks \ud83d\ude0a';\r\n\r\n-- Process user responses with some humor\r\nIF @pineapple_on_pizza = 1\r\nBEGIN\r\n    EXEC sp_api_modal_text @text=N'\ud83c\udf4d Pineapple added! You''re either a culinary genius or a pizza rebel! \ud83c\udfb8', @class='text-warning';\r\n    EXEC sp_api_toast @text=N'Pineapple: Making pizza controversial since forever! \ud83d\ude02', @class='warning';\r\nEND\r\nELSE\r\nBEGIN\r\n    EXEC sp_api_modal_text @text=N'No pineapple for you. Playing it safe, huh? \ud83d\ude09', @class='text-info';\r\n    EXEC sp_api_toast @text=N'Pineapple crisis averted! \ud83d\ude05', @class='success';\r\nEND\r\n\r\nIF @extra_cheese = 1\r\nBEGIN\r\n    EXEC sp_api_modal_text @text=N'\ud83e\uddc0 Extra cheese coming up! Hope you brought your stretchy pants! \ud83d\udc56', @class='text-info';\r\n    EXEC sp_api_toast @text=N'Cheese level: Over 9000! \ud83d\ude80', @class='success';\r\nEND\r\nELSE\r\nBEGIN\r\n    EXEC sp_api_modal_text @text=N'Regular cheese it is. Keeping it classy! \ud83c\udfa9', @class='text-info';\r\n    EXEC sp_api_toast @text=N'Cheese level: Just right! \ud83d\udc4c', @class='success';\r\nEND\r\n\r\n-- Add a 'Finish' button to close the modal\r\nDECLARE @finish_button nvarchar(128);\r\nEXEC sp_api_modal_get_value @name='@finish_button', @value=@finish_button OUT;\r\nEXEC sp_api_modal_button \r\n    @name='finish',\r\n    @value=N'Finish and Eat! \ud83c\udf7d\ufe0f', \r\n    @class='btn-primary', \r\n    @valueout=@finish_button OUT;\r\n\r\nIF @finish_button IS NOT NULL\r\nBEGIN\r\n    EXEC sp_api_modal_clear;\r\n    EXEC sp_api_toast @text=N'Enjoy your perfect (or perfectly controversial) pizza! \ud83c\udf55\ud83d\ude04', @class='success'\r\n\t\t--, @speech=N'Enjoy your perfect (or perfectly controversial) pizza!',@speech_lang='en-en'\r\n\t\t;\r\n    RETURN;\r\nEND",
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_snippet_survey_example",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": "--FROM THE AI:\r\n--I can create action code for TSQL.APP. Based on the information provided, action code in TSQL.APP is written in T-SQL and uses special stored procedures to create interactive modal interfaces. \r\n\r\n--Here's an example of a simple action code that creates a survey with three questions:\r\n\r\n--This code:\r\n\r\n--- Declares and synchronizes all necessary variables.\r\n--- Creates temporary tables for questions and answers.\r\n--- Populates these tables with sample data.\r\n--- Displays a survey title.\r\n--- Loops through questions, displaying each with answer options.\r\n--- Shows a summary of answers.\r\n--- Creates a submit button.\r\n--- Handles the submission with a confirmation message and toast notification.\r\n--- Cleans up temporary tables.\r\n\r\n--This complete script should run immediately in TSQL.APP, creating an interactive survey form. The user can answer the questions, see a summary of their responses, and submit the survey. Upon submission, they'll see a confirmation message and a toast notification.\r\n--This example demonstrates several key features of TSQL.APP:\r\n\r\n--- Creating interactive forms using T-SQL\r\n--- Utilizing temporary tables for dynamic content\r\n--- Using various UI elements like text displays, dropdowns (sp_api_modal_choose), and buttons\r\n--- Handling user input and providing feedback\r\n--- Implementing a multi-step process within a single action\r\n\r\n\r\n-- ===============================================================\r\n-- Customer Satisfaction Survey - TSQL.APP Action Code\r\n-- Project: TSQL.APP 6-files-3.5\r\n-- Created by Claude 3.7 Sonnet\r\n-- ===============================================================\r\n\r\n-- 1. Pre-declare all variables at the start of the script\r\n-- Modal state variables\r\nDECLARE @questionList NVARCHAR(MAX);\r\nDECLARE @answerList NVARCHAR(MAX);\r\nDECLARE @submitButton NVARCHAR(MAX);\r\nDECLARE @answer1 NVARCHAR(MAX);\r\nDECLARE @answer2 NVARCHAR(MAX);\r\nDECLARE @answer3 NVARCHAR(MAX);\r\n\r\n-- Business logic variables\r\nDECLARE @currentQuestion NVARCHAR(MAX);\r\nDECLARE @questionCounter INT;\r\nDECLARE @seedValue NVARCHAR(128);\r\nDECLARE @headerText NVARCHAR(MAX);\r\nDECLARE @summaryTitle NVARCHAR(MAX);\r\nDECLARE @answer1Summary NVARCHAR(MAX);\r\nDECLARE @answer2Summary NVARCHAR(MAX);\r\nDECLARE @answer3Summary NVARCHAR(MAX);\r\nDECLARE @buttonText NVARCHAR(MAX);\r\nDECLARE @confirmationText NVARCHAR(MAX);\r\nDECLARE @toastText NVARCHAR(MAX);\r\nDECLARE @ErrorMessage NVARCHAR(MAX);\r\n\r\n-- 2. Synchronize with modal state\r\nEXEC sp_api_modal_get_value @name=N'@questionList', @value=@questionList OUT;\r\nEXEC sp_api_modal_get_value @name=N'@answerList', @value=@answerList OUT;\r\nEXEC sp_api_modal_get_value @name=N'@submitButton', @value=@submitButton OUT;\r\nEXEC sp_api_modal_get_value @name=N'@answer1', @value=@answer1 OUT;\r\nEXEC sp_api_modal_get_value @name=N'@answer2', @value=@answer2 OUT;\r\nEXEC sp_api_modal_get_value @name=N'@answer3', @value=@answer3 OUT;\r\n\r\n-- 3. Begin error handling\r\nBEGIN TRY\r\n    -- 4. Create temporary tables for questions and answers\r\n    IF OBJECT_ID('tempdb..#Questions') IS NOT NULL \r\n        DROP TABLE #Questions;\r\n    IF OBJECT_ID('tempdb..#Answers') IS NOT NULL \r\n        DROP TABLE #Answers;\r\n\r\n    CREATE TABLE #Questions (\r\n        QuestionID INT,\r\n        QuestionText NVARCHAR(MAX)\r\n    );\r\n    \r\n    CREATE TABLE #Answers (\r\n        AnswerID INT,\r\n        AnswerText NVARCHAR(MAX)\r\n    );\r\n\r\n    -- 5. Add survey questions\r\n    INSERT INTO #Questions (QuestionID, QuestionText) VALUES \r\n        (1, N'How satisfied are you with our service?'),\r\n        (2, N'How likely are you to recommend us?'),\r\n        (3, N'How often do you use our product?');\r\n\r\n    -- 6. Add answer options\r\n    INSERT INTO #Answers (AnswerID, AnswerText) VALUES \r\n        (1, N'Very dissatisfied'), \r\n        (2, N'Dissatisfied'), \r\n        (3, N'Neutral'), \r\n        (4, N'Satisfied'), \r\n        (5, N'Very satisfied');\r\n\r\n    -- 7. Build the answer list\r\n    SELECT @answerList = STRING_AGG(AnswerText, N',') \r\n    FROM #Answers;\r\n\r\n    -- 8. Display survey title\r\n    SET @headerText = N'Customer Satisfaction Survey';\r\n    EXEC sp_api_modal_text @text=@headerText, @class=N'h1';\r\n\r\n    -- 9. Loop through the questions\r\n    SET @questionCounter = 1;\r\n\r\n    WHILE @questionCounter <= 3\r\n    BEGIN\r\n        -- Retrieve the current question\r\n        SELECT @currentQuestion = QuestionText \r\n        FROM #Questions \r\n        WHERE QuestionID = @questionCounter;\r\n\r\n        -- Display the question\r\n        EXEC sp_api_modal_text @text=@currentQuestion, @class=N'h3';\r\n\r\n        -- Generate a unique seed for each question\r\n        SET @seedValue = CONCAT(N'question_', @questionCounter);\r\n\r\n        -- Display answer options and store the answer with a unique seed\r\n        IF @questionCounter = 1\r\n            EXEC sp_api_modal_choose @list=@answerList, @value=@answer1 OUT, @name=N'@answer1', @seed=@seedValue;\r\n        ELSE IF @questionCounter = 2\r\n            EXEC sp_api_modal_choose @list=@answerList, @value=@answer2 OUT, @name=N'@answer2', @seed=@seedValue;\r\n        ELSE\r\n            EXEC sp_api_modal_choose @list=@answerList, @value=@answer3 OUT, @name=N'@answer3', @seed=@seedValue;\r\n\r\n        SET @questionCounter = @questionCounter + 1;\r\n    END\r\n\r\n    -- 10. Display a summary of the answers\r\n    SET @summaryTitle = N'Summary of your answers:';\r\n    EXEC sp_api_modal_text @text=@summaryTitle, @class=N'h2';\r\n\r\n    SET @answer1Summary = CONCAT(N'Question 1: ', ISNULL(@answer1, N'No answer'));\r\n    SET @answer2Summary = CONCAT(N'Question 2: ', ISNULL(@answer2, N'No answer'));\r\n    SET @answer3Summary = CONCAT(N'Question 3: ', ISNULL(@answer3, N'No answer'));\r\n\r\n    EXEC sp_api_modal_text @text=@answer1Summary, @class=N'p';\r\n    EXEC sp_api_modal_text @text=@answer2Summary, @class=N'p';\r\n    EXEC sp_api_modal_text @text=@answer3Summary, @class=N'p';\r\n\r\n    -- 11. Create a 'Submit' button\r\n    SET @buttonText = N'Submit Survey';\r\n    EXEC sp_api_modal_button \r\n        @name=N'@submitButton', \r\n        @value=@buttonText, \r\n        @valueout=@submitButton OUT, \r\n        @class=N'btn-primary', \r\n        @key=N'Enter';\r\n\r\n    -- 12. Check if the button is clicked\r\n    IF @submitButton IS NOT NULL\r\n    BEGIN\r\n        -- Validate inputs (optional based on requirements)\r\n        IF @answer1 IS NULL OR @answer2 IS NULL OR @answer3 IS NULL\r\n        BEGIN\r\n            SET @ErrorMessage = N'Please answer all questions before submitting.';\r\n            EXEC sp_api_toast @text=@ErrorMessage, @class=N'btn-warning';\r\n            RETURN;\r\n        END\r\n\r\n        -- Process the submission\r\n        SET @confirmationText = N'Thank you for completing the survey!';\r\n        SET @toastText = N'Survey successfully submitted';\r\n        \r\n        -- Show confirmation\r\n        EXEC sp_api_modal_clear;\r\n        EXEC sp_api_modal_text @text=@confirmationText, @class=N'h2';\r\n        EXEC sp_api_toast @text=@toastText, @class=N'btn-success';\r\n    END\r\n\r\nEND TRY\r\nBEGIN CATCH\r\n    -- Handle any errors\r\n    SET @ErrorMessage = ERROR_MESSAGE();\r\n    EXEC sp_api_toast @text=@ErrorMessage, @class=N'btn-danger';\r\nEND CATCH\r\n\r\n-- 13. Clean up temporary tables in FINALLY-like section\r\nIF OBJECT_ID('tempdb..#Questions') IS NOT NULL \r\n    DROP TABLE #Questions;\r\nIF OBJECT_ID('tempdb..#Answers') IS NOT NULL \r\n    DROP TABLE #Answers;",
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_soap_vies",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@vatNumber",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 40,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@vatNumber n"
                },
                {
                    "name": "@result",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@result n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_sql2pdf",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@filename",
                    "type_from_sys": "varchar",
                    "type_from_def": "V",
                    "max_length_bytes": 100,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@filename V"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_start",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@context",
                    "type_from_sys": "api_main_context_table",
                    "type_from_def": "dbo.a",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@context dbo.a"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_start_next_year",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@context",
                    "type_from_sys": "api_main_context_table",
                    "type_from_def": "dbo.a",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@context dbo.a"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_start_prev_year",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@context",
                    "type_from_sys": "api_main_context_table",
                    "type_from_def": "dbo.a",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@context dbo.a"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_statusbar",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@value",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@value n"
                },
                {
                    "name": "@class",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "''",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@class n"
                },
                {
                    "name": "@position",
                    "type_from_sys": "int",
                    "type_from_def": "I",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@position I"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {
                "dbo.hasRole": 1,
                "dbo.ABCDATE": 1
            },
            "real_usage_examples": [
                {
                    "sql_source": "\nDECLARE @hclass nvarchar(255) = N'h4 pt-4'\n\t,@subclass nvarchar(255) = N'text-muted blockquote mt-4'\n\t,@codeclass nvarchar(255) = N'code pre mb-2'\n\t,@valueout nvarchar(255)\n\nEXEC sp_api_modal_text 'Action Help','h3 text-muted'\n\nEXEC sp_api_modal_text 'Performance tips',@hclass\nEXEC sp_api_modal_text 'To disable triggers on temp inserts/updates:',@subclass\nEXEC sp_api_modal_text 'IF TRY_CAST(SESSION_CONTEXT(N''api_save_confirmed'') as INT) = 0 RETURN',@codeclass\n\nEXEC sp_api_modal_text 'Choose option',@hclass\n\n\n\n\nEXEC sp_api_modal_text 'Choose option',@hclass\n\n\tEXEC sp_api_modal_text N'EXEC sp_api_modal_choose @list = N''Predefined,Custom,Later, Maybe'',@value = @button_choose OUT,@startkey=NULL',@codeclass\n\n\n\tEXEC sp_api_modal_text @text = N'Kies een optie met F-toetsen (@startkey=3)',@class = N'm-4 text-muted'\n\tDECLARE @button_choose nvarchar(128)\n\tEXEC sp_api_modal_choose @list = N'Predefined,Custom,wert,wertr,wywer,tqyer,twertq,ewrt',@value = @button_choose OUT,@startkey=3\n\tEXEC sp_api_modal_text @button_choose\n\n\tEXEC sp_api_modal_text @text = N'Kies een optie met beginletter-toetsen (spatie = geen, @startkey=NULL)',@class = N'm-4 text-muted'\n\tDECLARE @button_choose2 nvarchar(128)\n\tEXEC sp_api_modal_choose @list = N'Predefined,Custom, wert,wertr, wywer,tqyer, twertq,ewrt2',@value = @button_choose2 OUT,@startkey=NULL\n\tEXEC sp_api_modal_text @button_choose2\n\n\nEXEC sp_api_modal_text 'pathname',@hclass\n\nEXEC sp_api_modal_text 'go to url:',@subclass\nEXEC sp_api_modal_text '{\"pathname\":\"/verkoop\"}',@codeclass\n\nEXEC sp_api_modal_text 'add to current url with optional {selectedId}:',@subclass\nEXEC sp_api_modal_text '{\"addto\":\"{selectedId}/CTR\"}',@codeclass\n\nEXEC sp_api_modal_text 'stored_procedure',@hclass\n\nEXEC sp_api_modal_text 'modal text:',@subclass\nEXEC sp_api_modal_text N'EXEC sp_api_modal_text @text = N''This is a success!''\n\t,@class = N''alert alert-primary'', @translate = 1',@codeclass\nEXEC sp_api_modal_text @text = N'This is a success!',@class = N'alert alert-primary', @translate = 1\n\nEXEC sp_api_modal_text 'modal input:',@subclass\nEXEC sp_api_modal_text N'EXEC sp_api_modal_input @name=''Naam'',@max=5, @value= @valueout OUT,@focus=1',@codeclass\nEXEC sp_api_modal_input @name='Naam',@max=5, @value= @valueout OUT,@focus=0\n\nEXEC sp_api_modal_text 'modal input decimal:',@subclass\nEXEC sp_api_modal_text N'EXEC sp_api_modal_input_decimal @name=''Percentage'',@value= @Percentage OUT,@focus=1 [,@precision=18,@scale=2]',@codeclass\nDECLARE @Percentage decimal(18,2)\nEXEC sp_api_modal_input_decimal @name='Percentage', @value= @Percentage OUT\n\n\n\nEXEC sp_api_modal_text 'modal date:',@subclass\nEXEC sp_api_modal_text N'EXEC sp_api_modal_date @name=''Datum''@value= @valueout OUT,@focus=1',@codeclass\nEXEC sp_api_modal_date @name='Datum', @value= @valueout OUT,@focus=0,@class='w-24'\n\n\nEXEC sp_api_modal_text 'modal button:',@subclass\nEXEC sp_api_modal_text N'DECLARE @button1 nvarchar(128),@button_text1 nvarchar(128) = ''Opslaan''\nEXEC sp_api_modal_button @name=''button1'',@value = @button_text1, @valueout = @button1 OUT ,@class=''btn-danger'',@key=''Enter''',@codeclass\nDECLARE @button1 nvarchar(128),@button_text1 nvarchar(128) = 'Opslaan'\nEXEC sp_api_modal_button @name='button1',@value = 'Opslaan', @valueout = @valueout OUT,@class='btn-danger',@key='Enter'\nIF @valueout = 'Opslaan'\n\tBEGIN\n\t\tEXEC sp_api_modal_clear\n\t\tEXEC sp_api_statusbar N'HELP F1 - JA gedrukt!' ,'bg-danger col-sm-2 text-truncate',1 --> 1 is rechts\n\t\tRETURN\n\tEND\n\nEXEC sp_api_modal_text 'modal route:',@subclass\nEXEC sp_api_modal_text N'EXEC  sp_api_modal_route @name = N''Verkoop Anaco'',@pathname=N''/verkoop''\n\t,@search =N''?id=2784'' ,@class = N''btn-success'' ,@key = N''F2''',@codeclass\nEXEC  sp_api_modal_route @name = N'Verkoop Anaco',@pathname=N'/verkoop',@search =N'?id=2784' ,@class = N'btn-success' ,@key = N'F2'\n\nEXEC sp_api_modal_text 'modal clear all previous components:',@subclass\nEXEC sp_api_modal_text N'EXEC sp_api_modal_clear',@codeclass\n\nEXEC sp_api_modal_text 'Alert box:',@subclass\nEXEC sp_api_modal_text N'EXEC sp_api_modal_alert N''Give me an alert''',@codeclass\n\nEXEC sp_api_modal_text 'modal get user setting:',@subclass\nEXEC sp_api_modal_text N'EXEC sp_api_modal_get N''my_fake_name'',@naam OUT',@codeclass\n\nEXEC sp_api_modal_text 'modal set user setting:',@subclass\nEXEC sp_api_modal_text N'EXEC sp_api_modal_set N''my_fake_name'',N''Jack van Vliet''',@codeclass\n\nEXEC sp_api_modal_text 'modal set modal value:',@subclass\nEXEC sp_api_modal_text N'EXEC sp_api_modal_value @name,NULL',@codeclass\n\n\nEXEC sp_api_modal_text 'modal set delete user setting:',@subclass\nEXEC sp_api_modal_text N'EXEC sp_api_modal_set N''my_fake_name'',NULL',@codeclass\n\nEXEC sp_api_modal_text 'modal set delete user setting:',@subclass\nEXEC sp_api_modal_text N'EXEC sp_api_modal_set N''my_fake_name'',NULL',@codeclass\n\nEXEC sp_api_modal_text 'Toast message:',@subclass\nEXEC sp_api_modal_text N'EXEC sp_api_toast @text = N''Toast message Toast message !!! ???''\n,@class=N''bg-danger text-white'',@translate=1,@seconds=2',@codeclass\nEXEC sp_api_toast @text = N'Toast message Toast message !!! ???',@class=N'bg-danger text-white',@translate=1,@seconds=2\n\nEXEC sp_api_modal_text 'Send dispatch to modal, to dispatch something on the client:',@subclass\nEXEC sp_api_modal_text N'EXEC sp_api_modal_dispatch N''{\"type\":\"stored_procedure\",\"name\":\"Choose columns\"}''',@codeclass\n\nEXEC sp_api_modal_text 'modal post and save to card example:',@subclass\nEXEC sp_api_modal_text N'IF TRY_CAST(@prijs as decimal) > 0 AND TRY_CAST(@aantal as int) > 0\n\tBEGIN\n\t\tEXEC sp_api_modal_post @card=''verkocht'',@column=''aantal'',@value=@aantal\n\t\tEXEC sp_api_modal_post @card=''verkocht'',@column=''prijs'',@value=@prijs\n\t\tEXEC sp_api_modal_post @card=''verkocht'',@column=''prosoort_id'',@value=@id\n\t\tEXEC sp_api_modal_save @card=''verkocht''\n\t\tEXEC sp_api_modal_clear\n\tEND',@codeclass\n\nEXEC sp_api_modal_text 'Push to statusbar:',@subclass\nEXEC sp_api_modal_text N'EXEC sp_api_statusbar N''HELP F1'' ,''bg-danger col-sm-1 text-truncate'',1 --> 1 is rechts',@codeclass\n\nEXEC sp_api_statusbar N'HELP F1' ,'bg-danger col-sm-1 text-truncate',0 --> 1 is rechts\n\nEXEC sp_api_modal_text 'Cursor for @ids:',@subclass\nEXEC sp_api_modal_text N'DECLARE @cursor CURSOR,@idval INT\nSET @cursor = CURSOR LOCAL FAST_FORWARD FOR SELECT value FROM string_split(@ids,'','')\nOPEN @cursor;\nFETCH NEXT FROM @cursor INTO @idval\nWHILE @@FETCH_STATUS = 0\n\tBEGIN\n\t\tEXEC sp_api_modal_text @idval\n\t\tFETCH NEXT FROM @cursor INTO @idval\n\tEND\nCLOSE @cursor;\nDEALLOCATE @cursor;\n',N'code'\n",
                    "action_id": 3,
                    "action_name": "sys_action_help",
                    "source_table": "api_actions"
                },
                {
                    "sql_source": "/*\nGebruik elders dit:\n\tEXEC sp_api_modal_set N'statusbar_1',N'Gooi dit in de statusbar!'\n\tof\n\tEXEC sp_api_modal_set N'statusbar_all_green',N'Dit overschrijft alles in de statusbar!'\n*/\n--EXEC sp_api_modal_set N'last_access_date',N'2020-01-01'\n\n\nDECLARE @status nvarchar(256)\nEXEC sp_api_modal_get N'last_access_date',@status OUT \nIF @status IS NULL OR @status <> dbo.strdate(NULL)\n\tBEGIN\n\t\tEXEC sp_api_toast N'Welkom deze nieuwe dag!!!'\n\t\tEXEC sp_api_modal_set N'workdate',NULL\n\t\tSET @status = dbo.strdate(NULL)\n\t\tEXEC sp_api_modal_set N'last_access_date',@status\n\t\tEXEC sp_api_modal_set N'statusbar_all_green',NULL -- wissen!\n\t\t--SP_DAILY HIER\n\t\tEXEC sp_api_health_status\n\tEND\nEXEC sp_api_health_status\n\nEXEC sp_api_modal_get N'workdate',@status OUT \nIF @status IS NULL\n\tBEGIN\n\t\tSET @status = dbo.abcdate()\n\t\tEXEC sp_api_modal_set N'workdate',@status \n\tEND\n\n\n/* --=> statusbar_all overschrijft alle status */\nEXEC sp_api_modal_get N'statusbar_all_red',@status OUT \nIF @status IS NOT NULL\n\tBEGIN\n\t\tEXEC sp_api_statusbar @status ,'bg-danger col-sm-3 text-truncate',0 --> 0 is links\n\t\tRETURN\n\tEND\n\nEXEC sp_api_modal_get N'statusbar_all_blue',@status OUT \nIF @status IS NOT NULL --OR  1=1\n\tBEGIN\n\t\tEXEC sp_api_statusbar @status ,'bg-primary col-sm text-truncate',1 --> 0 is links\n\t\tRETURN\n\tEND\n\nEXEC sp_api_modal_get N'statusbar_all_green',@status OUT \nIF @status IS NOT NULL\n\tBEGIN\n\t\tEXEC sp_api_statusbar @status ,'bg-success col-sm-3 text-truncate',1 --> 0 is links\n\t\tRETURN\n\tEND\n\nEXEC sp_api_modal_get N'statusbar_all_yellow',@status OUT \nIF @status IS NOT NULL\n\tBEGIN\n\t\tEXEC sp_api_statusbar @status ,'bg-warning col-sm-3 text-truncate',1 --> 0 is links\n\t\tRETURN\n\tEND\n\n\n\n\n\nEXEC sp_api_modal_get N'workdate',@status OUT\nDECLARE @class nvarchar(255) = N'bg-danger col-sm-1 text-truncate' -- zet kleur danger...\nIF dbo.abcdate() = @status SET @class = N'col-sm-1 text-truncate' -- als workdate gelijk is aan echte datum, dan geen kleur\n\nSET @status = dbo.strdate(@status)\nIF @status IS NOT NULL EXEC sp_api_statusbar @status ,@class,0 --> 0 is links\n-----------------------------------\n/* hier verder als statusbar_all NULL is */\nIF OBJECT_ID('xtenant') IS NOT NULL\n\tBEGIN\n\t\tif (select isnull(xtenant.forceToTestmodus,0) from xtenant where id=7)=1\n\t\t\tbegin\n\t\t\t\tEXEC sp_api_statusbar N'*TESTMODUS*' ,'bg-warning col-sm-1 text-truncate',0 --> 0 is links --'bg-danger col-sm-1 text-truncate'\n\t\t\tend\n\t\telse\n\t\t\tbegin\t\n\n\t\t\t\tEXEC sp_api_modal_get N'statusbar_1',@status OUT\n\t\t\t\tIF @status IS NOT NULL EXEC sp_api_statusbar @status ,'col-sm-1 text-truncate',0 --> 0 is links --'bg-danger col-sm-1 text-truncate'\n\t\t\tend\n\tEND\nDECLARE @is_admin bit = dbo.hasRole('admin')\nIF object_id('@main_db.dbo.debug_trigger_xCompany') IS NOT NULL AND @is_admin = 1\n\tbegin\n\t\tEXEC sp_api_statusbar N'DEBUG ON' ,'bg-primary col-sm-1 text-truncate',0 --> 0 is links --'bg-danger col-sm-1 text-truncate'\n\tend\n\nDECLARE @forcedRole nvarchar(4000)\nEXEC sp_api_modal_get N'forcedRole',@forcedRole OUT \nIF @forcedRole IS NOT NULL EXEC sp_api_statusbar @forcedRole ,'bg-primary col-sm-1 text-truncate',0 --> 0 is links\n/*\n\t\tEXEC sp_api_modal_get N'statusbar_1',@status OUT\n\t\tIF @status IS NOT NULL EXEC sp_api_statusbar @status ,'col-sm-1 text-truncate',0 --> 0 is links --'bg-danger col-sm-1 text-truncate'\n*/\t\t\n----------------------------------------------\n \n\nEXEC sp_api_modal_get N'statusbar_2',@status OUT\nIF @status IS NOT NULL EXEC sp_api_statusbar @status ,'col-sm-1-2 text-truncate',1 --> 1 is rechts -- 'bg-warning col-sm-1-2 text-truncate'\nEXEC sp_api_modal_get N'statusbar_4',@status OUT\nEXEC sp_api_statusbar @status ,'col-sm-1-3 text-truncate',1 --> 1 is rechts -- vijv success kleur: 'bg-success col-sm-1-3 text-truncate'\n\nEXEC sp_api_statusbar @user_name,'col-sm-1 text-truncate',0 --> 0 is links -- bijv rood: 'bg-warning col-sm-1 text-truncate'\n\n\nEXEC sp_api_statusbar @card_name,'col-sm-1 text-truncate text-right',1 --> 1 is rechts\n\n/*\nDECLARE @filter_reducer_name nvarchar(128) = TRY_CAST(SESSION_CONTEXT(N'query_red') as nvarchar(128))\nIF @filter_reducer_name > ''\n\tBEGIN\n\t\tSET @filter_reducer_name = N'Filter: '+(SELECT * FROM get_lang(@filter_reducer_name,'menu'))\n\t\tEXEC sp_api_statusbar @filter_reducer_name,'col-sm-2 text-truncate bg-primary',1 --> 1 is rechts\n\tEND\n\nEXEC sp_api_statusbar '','col-sm-1-2 text-center' -- 'bg-danger col-sm-1-2 text-center'\nEXEC sp_api_statusbar '','col-sm-1-2 text-center',1 --> 1 is rechts -- 'bg-primary col-sm-1-2 text-center'\nEXEC sp_api_statusbar '','col-sm-1-2 text-center',1 --> 1 is rechts --'bg-danger col-sm-1-2 text-center'\n*/\n/* the end */",
                    "action_id": 71,
                    "action_name": "sys_run_always",
                    "source_table": "api_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_storage",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@tablename",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "N",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@tablename N"
                },
                {
                    "name": "@identity_column",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "N",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@identity_column N"
                },
                {
                    "name": "@card_id",
                    "type_from_sys": "int",
                    "type_from_def": "I",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@card_id I"
                },
                {
                    "name": "@id",
                    "type_from_sys": "int",
                    "type_from_def": "I",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@id I"
                },
                {
                    "name": "@delete",
                    "type_from_sys": "bit",
                    "type_from_def": "B",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@delete B"
                },
                {
                    "name": "@parent_id",
                    "type_from_sys": "int",
                    "type_from_def": "I",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@parent_id I"
                },
                {
                    "name": "@parent_card_id",
                    "type_from_sys": "int",
                    "type_from_def": "I",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 7,
                    "full_declaration_from_def": "@parent_card_id I"
                },
                {
                    "name": "@save_confirmed",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 8,
                    "full_declaration_from_def": "@save_confirmed b"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_sync_users_to_main_db",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_tls_info",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@domain",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@domain n"
                },
                {
                    "name": "@json",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@json n"
                },
                {
                    "name": "@port",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "443",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@port i"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_toast",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@text",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@text n"
                },
                {
                    "name": "@class",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "''",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@class n"
                },
                {
                    "name": "@translate",
                    "type_from_sys": "bit",
                    "type_from_def": "B",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@translate B"
                },
                {
                    "name": "@seconds",
                    "type_from_sys": "int",
                    "type_from_def": "I",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@seconds I"
                },
                {
                    "name": "@s1",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@s1 n"
                },
                {
                    "name": "@s2",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@s2 n"
                },
                {
                    "name": "@s3",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 7,
                    "full_declaration_from_def": "@s3 n"
                },
                {
                    "name": "@audio_url",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 8,
                    "full_declaration_from_def": "@audio_url n"
                },
                {
                    "name": "@vibrate",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 9,
                    "full_declaration_from_def": "@vibrate i"
                },
                {
                    "name": "@speech",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 10,
                    "full_declaration_from_def": "@speech n"
                },
                {
                    "name": "@speech_lang",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 11,
                    "full_declaration_from_def": "@speech_lang n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {
                "dbo.sp_api_modal_text": 60,
                "dbo.sp_api_modal_route": 4,
                "dbo.sp_api_modal_clear": 19,
                "dbo.sp_api_modal_button": 64,
                "dbo.sp_api_report_generate": 36,
                "dbo.sp_api_goto": 13,
                "dbo.sp_api_modal_input": 47,
                "dbo.sp_api_modal_alert": 26,
                "dbo.sp_api_modal_select": 13,
                "dbo.sp_api_modal_date": 8,
                "dbo.sp_api_modal_table": 25,
                "dbo.sp_api_modal_modal": 7,
                "dbo.sp_api_modal_print": 1,
                "dbo.sp_api_modal_select_all_clear": 6,
                "dbo.sp_api_modal_reload": 1,
                "dbo.sp_api_modal_dispatch": 1,
                "dbo.sp_api_modal_pathname": 1,
                "dbo.abcLeft": 1,
                "dbo.ABCDATE": 6,
                "dbo.sp_api_add_sql_task": 4,
                "dbo.sp_api_modal_table_update": 4,
                "dbo.sp_api_modal_input_decimal": 3,
                "dbo.sp_api_modal_csv": 1,
                "dbo.hasRole": 3,
                "dbo.sp_api_modal_save": 1,
                "dbo.sp_api_modal_value": 2,
                "dbo.sp_api_modal_post": 1,
                "dbo.sp_api_modal_choose": 6,
                "dbo.sp_api_modal_menu_user": 1,
                "dbo.sp_api_modal_action": 1,
                "dbo.sp_api_modal_html": 3,
                "dbo.sp_sys_admin_main_menu": 1,
                "dbo.sp_api_email": 8,
                "dbo.sp_api_broker_request": 1,
                "dbo.sp_api_modal_date_from_to": 1,
                "dbo.sp_api_modal_scanner": 1,
                "dbo.sp_sys_file_upload_base64": 1,
                "dbo.sp_api_modal_qr_scanner": 1,
                "dbo.sp_api_file_set": 1,
                "dbo.sp_api_modal_values_clear": 1,
                "dbo.sp_api_modal_restart": 1,
                "dbo.sp_api_modal_get_value": 4,
                "dbo.sp_api_modal_choose_list": 1,
                "dbo.sp_api_modal_select_table": 1
            },
            "real_usage_examples": [
                {
                    "sql_source": "DECLARE @clone_id INT, @sure nvarchar(255), @text nvarchar(255)\r\nEXEC sp_api_modal_get N'my_last_clone_id',@text OUT\r\nEXEC sp_api_modal_text @text,'h1'\r\nEXEC sp_api_modal_text @basetable,'h1'\r\nEXEC sp_api_modal_button @name='Sure',@value = 'Clone? (Esc=Nee)', @valueout = @sure OUT,@class='btn-danger',@key='Enter'\r\nIF @sure is not null\r\n\tBEGIN\r\n\t\tEXEC sp_api_modal_clear\r\n\t\t--EXEC @clone_id = sp_clone_record @basetable,@ids\r\n\t\tEXEC @clone_id = sp_clone_record @basetable,@ids,N'size=''EDIT'', stock=0'\r\n\t\tSET @path = @path+'/'+dbo.nv(@clone_id)\r\n\t\tEXEC sp_api_toast @text = N'Record cloned'\r\n\t\tEXEC sp_api_modal_route @name = N'Ga met Enter naar de kopie en vul de nieuwe maat in',@pathname=@path,@search='?focus=7377' ,@class = N'btn-danger' ,@key='Enter'\r\n\tEND\r\n",
                    "action_id": 6,
                    "action_name": "kopieer-artikel",
                    "source_table": "api_card_actions"
                },
                {
                    "sql_source": "EXEC sp_api_toast N'leveringsbevestiging....' \n\nDECLARE @cursor_ids CURSOR,@cid INT\nDECLARE @toCompany_ID INT \nDECLARE @fromCompany_ID INT = (select top 1 id from xTenantKey)\n\t\t\n\nSET @cursor_ids = CURSOR LOCAL FAST_FORWARD FOR SELECT value FROM string_split(@ids,',')\nOPEN @cursor_ids;\nFETCH NEXT FROM @cursor_ids INTO @cid\nWHILE @@FETCH_STATUS = 0\n\tBEGIN\n\t\tEXEC sp_api_toast @cid\n\t\t--dit is nu alleen voor tellers en checks, zodat we weten dat het report al is gemaakt:\n\t\t--was\t\tEXEC @main_db.dbo.RunReport\t@TABLECONTEXT = N'CTH'\t,@Context_Key_ID=@cid,@Report_CODE=N'CONF_DELIVERY' -- zie runreport \n\t\t--nu\n\t\tEXEC @main_db.dbo.SetDelConf @cid --210224 Registreer verzending van DeliveryConfirmation via xMarker\n\n\t\t--dit is de feitelijke \"run\"\n\t\tSET @toCompany_ID = (select Counterparty_id from xtransactionheader where id=@cid)\n\t\tEXEC sp_api_report_generate @id = @cid\n\t\t\t,@sys_report_key = 'deliveryconfirmation_out' --zie xrepdef\n\t\t\t,@toCompany_ID = @toCompany_ID\n\t\t\t,@fromCompany_ID = @fromCompany_ID\n\t\t\t,@fixedprinter_ID=2\n\t\t\t,@test=0\n\n\n\n\n\t\tFETCH NEXT FROM @cursor_ids INTO @cid\n\tEND\nCLOSE @cursor_ids;\nDEALLOCATE @cursor_ids;",
                    "action_id": 12,
                    "action_name": "leveringsbevestiging",
                    "source_table": "api_card_actions"
                },
                {
                    "sql_source": "DECLARE @wat nvarchar(200), @linktoME int,@text nvarchar(max)\n\nIF {[ctr2].cth_fase} NOT IN (N'openSale','openPrice')\n\tBEGIN\n\tEXEC sp_api_modal_Alert N'Let op!', N'De verkoop is reeds gesloten. U kan niet meer de toewijzing wijzigen.' \n\tEXEC sp_api_modal_clear\n\tRETURN\n\tEND\n\nSET @linktoME ={[ctr2].id}\n--201028 erbij ivm overbrengen..\nif @LinkToMe is NULL set @LinkToMe={[ctr_overbrengen].id}\n\nDECLARE @maxTeLinken INT,@maxBeschikbaar INT\nSELECT @maxTeLinken = (ctrAmount-IVTOTAL) FROM Q_xTransactionDetail WHERE ID=@LinkToME\n\nIF @maxTeLinken = 0\n\tBEGIN\n\t\tEXEC sp_api_modal_alert N'Regel is al volledig toegewezen'\n\t\tEXEC\t sp_api_go2 1 -- 1 stap terug (+list view; detailviewgebruik EXEC sp_api_go2 1,0)\n\t\tRETURN;\n\tEND\n\n\nSET @maxBeschikbaar = {[ctr1_toewijsbaar].available}\nIF @maxBeschikbaar < @maxTeLinken\n\tBEGIN\n\t\tdeclare @Melding nvarchar(200)\n\t\tset @Melding = concat(N'Niet genoeg beschikbaar! Te linken:',N' ',@maxTeLinken)\n\t\tEXEC sp_api_modal_text @Melding,N'h4 text-muted'\n\t\tSET @text = CONCAT('U kunt maximaal ',@maxBeschikbaar,' van de ',@maxTeLinken,' linken')\n\t\tEXEC sp_api_modal_text @text,N'm-4'\n\t\tSET @maxTeLinken = @maxBeschikbaar\n\tEND\n\nIF @maxTeLinken < 0\n\tBEGIN\n\t\tEXEC sp_api_modal_alert N'Probleem!',N'Regel heeft meer toegewezen dan mag. Ga naar de toewijzing (IV link) en verlaag deze.'\n\t\tEXEC sp_api_modal_clear\n\tEND\n\nDECLARE @aantalTeLinken INT = @maxTeLinken\n\t,@button nvarchar(50)\n\nEXEC sp_api_modal_input @name='Aantal',@value = @aantalTeLinken OUT,@focus=1,@select=1\nEXEC sp_api_modal_button @name='button',@value = 'Link aantal',@valueout=@button OUT,@key=N'Enter'\nIF @button IS NULL RETURN\nset @wat=N'Gekozen ID: '+str(@ID)+' wordt gekoppeld aan CTR: '+str(@LinktoME)\nexec sp_api_toast @wat\n--RETURN; --test\n\nif @linktoME is not null\n\tBEGIN\n\t\texec @main_db.dbo.map @linktoME,@ID, @aantalTeLinken\n\t\t\n\t\t--zet return path\n\t\tSET @ctr2_id = {[ctr2].id}\n\t\tSET @verkoop_id = {[verkoop].id}\n\t\tIF @ctr2_id IS NOT NULL AND @verkoop_id IS NOT NULL AND @aantalTeLinken = @maxTeLinken\n\t\t\tBEGIN\n\t\t\t\tSET @goto = CONCAT('/verkoop/',@verkoop_id,'/ctr2/',@ctr2_id,'/iv2')\n\t\t\t\tSET @referer_path = CONCAT('/verkoop/',@verkoop_id,'/ctr2')\n\t\t\t\tSET @referer_search = CONCAT(N'?id=',@ctr2_id)\n\t\t\t\tEXEC sp_api_toast N'Regel(s) is/zijn gelink bla',N'alert-primary'\t\t\t\t\n\t\t\t\tEXEC sp_api_goto @goto,@referer_path=@referer_path,@referer_search=@referer_search\n\t\t\tEND\n\t\t--210115 \n--\t\texec sp_api_go3\n\t\texec sp_api_modal_clear\n\tEND\n\n\n--if @parent_card_name='ctr2'\n--\tBEGIN\n--\t\texec @main_db.dbo.map @ID, @Parent_ID\n--\tEND\n--else --neem aan parent_parent...\n--\tBEGIN\n--\t\texec @main_db.dbo.map @ID, @Parent_Parent_ID\n--\tEND\n\n--EXEC sp_api_goto @path",
                    "action_id": 13,
                    "action_name": "link_this",
                    "source_table": "api_card_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_toast_timer",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@procid",
                    "type_from_sys": "int",
                    "type_from_def": "I",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@procid I"
                },
                {
                    "name": "@value",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@value n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_translate",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@text",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@text n"
                },
                {
                    "name": "@from_lang",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@from_lang n"
                },
                {
                    "name": "@to_lang",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@to_lang n"
                },
                {
                    "name": "@json",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@json n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_translate_bulk",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@from_lang",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@from_lang n"
                },
                {
                    "name": "@to_lang",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@to_lang n"
                },
                {
                    "name": "@json",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@json n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_translate_languages",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@json",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@json n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_update_dispatcher",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_update_from_kernel",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@backup_tables",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@backup_tables b"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_update_react_client",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_update_system_data",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@trigger_object_id",
                    "type_from_sys": "int",
                    "type_from_def": "I",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@trigger_object_id I"
                },
                {
                    "name": "@json",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@json n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_validate_reducer",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@tablename",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@tablename n"
                },
                {
                    "name": "@reducer",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@reducer n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_version_os",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@version",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@version n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_whatsapp",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@to",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 64,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@to n"
                },
                {
                    "name": "@text",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@text n"
                },
                {
                    "name": "@template",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@template n"
                },
                {
                    "name": "@type",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@type n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_api_writeFile",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@filename",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 4096,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@filename n"
                },
                {
                    "name": "@base64data",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@base64data n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_sys_admin_main_menu",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@hclass",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "'h5'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@hclass n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {
                "dbo.sp_api_modal_menu_user": 1,
                "dbo.sp_api_toast": 1,
                "dbo.sp_api_modal_action": 1,
                "dbo.sp_api_modal_html": 1,
                "dbo.sp_api_modal_route": 1,
                "dbo.sp_api_modal_text": 1,
                "dbo.sp_api_modal_button": 1,
                "dbo.sp_api_modal_modal": 1,
                "dbo.hasRole": 1
            },
            "real_usage_examples": [
                {
                    "sql_source": "DECLARE @text nvarchar(max)\n,@hclass nvarchar(128) = 'h5 text-muted mt-3'\n,@bclass nvarchar(128) = 'btn-primary'\n\nEXEC sp_api_modal_modal @class = 'pt-5'\nIF dbo.hasRole('admin') > 0 BEGIN\n\tSET @text = N'You''re at ' + @hostname + ' [@main_db]'\n\tEXEC sp_api_toast @text=@text,@seconds=3\nEND\n\nDECLARE @colorblind BIT = 0\nIF dbo.hasClaims('sub=email@anacogreeve.nl') > 0\nBEGIN\nSET @colorblind = 1\nEND\n\nDECLARE @extendedMenu BIT = 0\nIF dbo.hasClaims('sub=email@anacogreeve.nl') > 0\nBEGIN\nSET @extendedMenu = 1\nEND\n\nDECLARE @loods BIT = 0\nIF dbo.hasRole('loodsbaas,loodsmedewerker,ompakker,keurmeester') > 0\nBEGIN\nSET @loods = 1\nEND\n\n--ALS EERSTE!\n--EXEC sp_api_modal_action N'Scanner Test',@class='btn-danger'\nEXEC sp_api_modal_action N'Scanner',@class='btn-danger'\nEXEC sp_api_modal_action N'Mobilephone',@class='btn-danger'\nEXEC sp_api_modal_action N'detepo',@class='btn-danger'\nEXEC sp_api_modal_action N'micro_check_scan',@class='btn-danger' --rh 230825\nEXEC sp_api_modal_action N'test_rick_2',@class='btn-danger' --rh 230825\nEXEC sp_api_modal_action N'NEOVO_PALLET_SCAN',@class='btn-danger'\nEXEC sp_api_modal_action N'Barcode Scanner',@class='btn-tracy'\nEXEC sp_api_modal_action N'check_serial_number' --rh231218\nEXEC sp_api_modal_action N'check_pallets' --241129\nEXEC sp_api_modal_action N'check_pallets_in_stock' --241129\nEXEC sp_api_modal_action N'check_data' --rh240719\nEXEC sp_api_modal_action @name='RWS-podcast'\nEXEC sp_api_modal_action @name='rick_delete'\n\n\n--START\n\nIF @button = 'Quick menu'\n\tBEGIN\n\t\tEXEC #sys_quick_menu @path\n\t\tRETURN\n\tEND\n\nEXEC sp_api_modal_text 'Hoofdmenu','h1'\n\nif  dbo.hasClaims(N'tenant=AGNEOVO') >0 or dbo.hasRole('admin,directie') > 0\n\tbegin \n\t\t--EXEC sp_api_modal_action @name='pallet_status_agneovo',@class = 'btn-white border-dark text-dark' --test 230808\n\t\tEXEC sp_api_modal_route @cardname='pallet_status_agneovo'\t\n\tend\n\nEXEC sp_api_modal_route @cardname='wms_micro_outbound'\n\nIF dbo.hasClaims('sub=mterlouw@rwsbv.com') > 0 or dbo.hasClaims('sub=kterlouw@rwsbv.com') > 0 --250415\n\tor dbo.hasClaims('sub=rick@tracy.nu') > 0 OR dbo.hasRole('admin,directie,barsan,barsan_bo') > 0\nBEGIN\n\tEXEC sp_api_modal_route @cardname='douanevoorraadmutatie'\nEND\t\n\nIF dbo.hasRole('admin,directie,loodsmedewerker') > 0\nBEGIN\n\tEXEC sp_api_modal_route @cardname='vehicle_export_staging',@search= '?red=open'\nEND\t\n\n BEGIN\n\t-----------------\n\t-- ADMIN QUICK LIJST\n\t-----------------\n\n\t\tIF dbo.hasRole('admin') > 0\n\t\tBEGIN\n--\t\tEXEC sp_api_modal_text 'Admin Knopjes',@hclass\n--\t\tSET @bclass = 'btn btn-linkt border-danger text-dark'\n\t\t/*\n\t\tEXEC sp_api_modal_route @name='Product (Hoofdgroup)',@pathname='/xproduct',@search= '?red=',@class=@bclass,@key='P',@group = 'Voorraadbeheer'\n\t\tEXEC sp_api_modal_route @name='Intrastat Fout of Geen',@pathname='/xproduct',@search= '?red=Intrastat_ID+Empty+OR+Wrong',@class=@bclass,@key='I',@group = 'Voorraadbeheer'\n\t\tEXEC sp_api_modal_route @name='Geen Customs Group',@pathname='/xproduct',@search= '?red=Geen+Douane+Groep',@class=@bclass,@key='D',@group = 'Voorraadbeheer'\n\t\tEXEC sp_api_modal_route @name='Onvolledig Customs Art',@pathname='/xproduct',@search= '?red=Niet+(Volledig)+in+Customs+Art',@class=@bclass,@key='L',@group = 'Voorraadbeheer'\n\t\t*/\n\t\t\n\t\tEXEC sp_api_modal_route @name='To Do',@pathname='/api_todo',@search= '?red=Niet+klaar',@class='btn btn-linkt border-danger text-dark',@key='T'\n\t\tEXEC sp_api_modal_route @name='API DATASET',@pathname='/api_data_set'\n\t\tEND\n\t\n\t--------------\n\t-- Warehouse\n\t--------------\n--\tEXEC sp_api_modal_text 'Warehouse',@hclass\n\n\tIF @colorblind = 1\n\t\tBEGIN\n\t\t\tSET @bclass = 'btn-primary'\n\t\tEND\n\tELSE\n\t\tBEGIN\n\t\t\tSET @bclass = 'btn-secondary'\n\t\tEND\nIF dbo.hasRole('user,admin,directie') > 0\n\tbegin\n\n\t\n\t\tEXEC sp_api_modal_route @name='Vessel',@pathname='/w_vessel',@class=@bclass,@key='V'--, @Search='?red=Open+en+Nieuw',@group = 'main'\n\t\tEXEC sp_api_modal_route @name='Bill of Lading',@pathname='/w_bl',@class=@bclass,@key='Alt+B'--, @Search='?red=recent'--,@group = 'main'\n\t\tEXEC sp_api_modal_route @name='Forecast',@pathname='/forecast',@class=@bclass,@key='F'--, @Search='?red=Open+en+Nieuw',@group = 'main'\n\t\t\n\n\t--\tEXEC sp_api_modal_route @name='Inbound',@pathname='/inbound',@class=@bclass,@key='I'--, @Search='?red=Open+en+Nieuw',@group = 'main'\n\t--\tEXEC sp_api_modal_route @name='Outbound Transport',@pathname='/wms_out_transport',@class=@bclass,@key='O'--, @Search='?red=Open+en+Nieuw',@group = 'main'\n--\t\tEXEC sp_api_modal_action @name='report_menu',@class = 'btn-white border-dark text-dark'\n\t\t\n\n\t\t\n\tend\n--@name='Inbound Transport.',\n--\t\tEXEC sp_api_modal_route @name='Inbound Transport',@pathname='/wms_in_transport',@class=@bclass,@key='T'--, @Search='?red=Open+en+Nieuw',@group = 'main'\n\t\tEXEC sp_api_modal_route @name='Inbound Transport',@cardname='wms_in_transport',@class=@bclass,@key='T'--, @Search='?red=Open+en+Nieuw',@group = 'main'\n\n--IF dbo.hasRole('viewer') > 0\n\t--begin\n\n  \n\n\t--220319 NIEUW: DE CARD BEPAALT ZELF AAN DE HAND VAN DE ROLLEN OF HIJ GERENDERD WORDT..\nIF dbo.hasRole('loodsmedewerker') = 0 --specifiek ** UITSLUITEN ** bij menu voor loodsmedewerker\n\tbegin\n\t\tEXEC sp_api_modal_route @name='Inbound',@cardname='inbound',@class=@bclass,@key='I'\n\t\tEXEC sp_api_modal_route @name='Outbound Transport',@cardname='wms_out_transport',@class=@bclass,@key='O',@group = 'outbound'\n\t\tEXEC sp_api_modal_route @name='Micro outbound form',@cardname='wms_micro_outbound',@class=@bclass,@key='O'\t,@group=N'micro_outbound'\t\n\t\t\n\tend\n--230306 specifiek uitsluiten voor ensign\nif  dbo.hasClaims(N'tenant=VIAROT') =0 \t--iedereen behalve viaensign\t\n\tEXEC sp_api_modal_route @name='Outbound orders',@cardname='outbound_form',@class=@bclass,@key='O',@group = 'outbound'\n\n\t\tIF dbo.hasRole('admin,directie') > 0 -- micro werk!\n\t\t\tbegin\n\t\t\t\tEXEC sp_api_modal_route @name='Micro outbound form',@cardname='wms_micro_outbound',@class=@bclass,@key='O'\t,@group=N'micro_outbound'\t\n\t\t\t\tEXEC sp_api_modal_route @name='Replenishment',@cardname='w_pallet_replenishment',@class=@bclass,@key='R'\t,@group=N'micro_outbound'\t\t\n--\t\t\t\tEXEC sp_api_modal_route @name='Micro item stock info',@cardname='wms_micro_item_stock_info',@class=@bclass,@key='R'\t,@group=N'micro_outbound',@search= '?red=selecteerbare_pallets'\n\t\t\t\tEXEC sp_api_modal_route @name='micro_totals',@cardname='micro_totals',@class=@bclass,@key='T'\t,@group=N'micro_outbound'\n\n\t\t\t\t--231024\n\t\t\t\tEXEC sp_api_modal_route @cardname='micro_items_stock_per_position_agneovo'\n\t\t\tend\t\n\t\tEXEC sp_api_modal_route @name='Stock by Client',@cardname='wms_rv_pal_stock',@class=@bclass,@key='C'\n\n--230306 specifiek uitsluiten voor ensign\nif  dbo.hasClaims(N'tenant=VIAROT') =0 \n\t--alleen viarot uitsluiten, dus als je de claim niet hebt mag je dit item zien\n\tEXEC sp_api_modal_route @name='Stock by BL',@cardname='wms_rv_pal_stock_bl',@class=@bclass,@key='B'\n\n\t\tEXEC sp_api_modal_route @name='Stock by Container',@cardname='wms_rv_pal_stock_cnt',@class=@bclass,@key='N'\n\t\t--micro stock info\n--\t\tEXEC sp_api_modal_route @name='Stock per micro item',@cardname='micro_totals',@class=@bclass,@key='T'\t\n--per lotnumber\nIF dbo.hasRole('loodsmedewerker') = 0\n\tbegin --specifiek uitsluiten bij menu voor loodsmedewerker\n\t\tEXEC sp_api_modal_route @name='Stock per micro item',@cardname='micro_totals_lotnr_w_lot',@class=@bclass,@key='T'\t\n\tend\t\n\n\t\t--230114\n\t\tEXEC sp_api_modal_route @cardname='wms_io'\t\n\t\t--230710 uitgezet, driver-screen wordt via link direct gestart EXEC sp_api_modal_route @cardname='driver_screen'\t\n\t\tEXEC sp_api_modal_route @cardname='inbound_form_barsan'\t\n\t\t\n--\tend\n\t\t\n\t--------------\n\t-- Rapportage\n\t--------------\n\tEXEC sp_api_modal_action @name='report_menu',@class = 'btn-success'--'btn-white border-dark text-dark'\n\n\tIF dbo.hasRole('user,admin,directie') > 0\n\t\tBEGIN\n\t\t\t--EXEC sp_api_modal_text 'Rapportage (Maand Afsluiten)',@hclass\n\t\t\t--EXEC sp_api_modal_route @name='Aangifte',@pathname='/aangifte',@search= '',@class = 'btn-white border-dark text-dark',@key='A'\n\t\t\tEXEC sp_api_modal_route @name='Crossdock',@pathname='/w_crossdock',@class=@bclass,@key='C'\n\t\t\t\n\t\tEND\n\n\n/*\n\t-----------------\n\t-- VOORRAAD LIJST\n\t-----------------\n--\tEXEC sp_api_modal_text 'Artikelbestand (Voorraad)',@hclass\n--\tSET @bclass = 'btn-secondary'\n\t--EXEC sp_api_modal_route @name='xstock',@pathname='/xstock',@search= '',@class=@bclass,@key='X'\n\n\tIF @colorblind = 1\n\t\tBEGIN\n\t\t\tEXEC sp_api_modal_route @name='Totaal Voorraad per lokatie',@pathname='/stocklocation',@search= '',@class='btn-primary',@key='T',@group = 'Voorraad'\n\t\t\tEXEC sp_api_modal_route @name='Voorraad per lokatie',@pathname='/voorraadlokatie',@search= '',@class='btn-primary',@key='X',@group = 'Voorraad'\n\t\t\tEXEC sp_api_modal_route @name='Voorraad [Artikelen]',@pathname='/xstock',@search= '?red=',@class='btn-primary',@key='S',@group = 'Voorraad'\n\t\t\t\n\t\tEND\n\tELSE\n\t\tBEGIN\n\t\tEXEC sp_api_modal_route @name='Totaal Voorraad per lokatie',@pathname='/stocklocation',@search= '',@class=@bclass,@key='T',@group = 'Voorraad'\n\t\t\tEXEC sp_api_modal_route @name='Voorraad per lokatie',@pathname='/voorraadlokatie',@search= '',@class=@bclass,@key='X',@group = 'Voorraad'\n\t\t\tEXEC sp_api_modal_route @name='Voorraad [Artikelen]',@pathname='/xstock',@search= '?red=',@class=@bclass,@key='S',@group = 'Voorraad'\n\t\t\t\n\t\tEND\n*/\n\n\t------------\n\t-- Transactions\n\t------------\n--\tEXEC sp_api_modal_text 'Transacties',@hclass\n/*\n\tBEGIN\n\n\tEXEC sp_api_modal_route @name='Verkoop [Pakbon Niet Geprint]',@pathname='/verkoop',@search= '?red=Pickbon+NOG+NIET+GEPRINT' ,@class='btn-primary',@key='V',@group = 'verkoop'\n\n\tEXEC sp_api_modal_route @name='Filter [Pickbon Geprint]',@pathname='/verkoop',@search= '?red=Pickbon+Geprint' ,@class='btn-primary',@key='P',@group = 'verkoop'\n\tEXEC sp_api_modal_route @name='Verkoop [Alles]',@pathname='/verkoop',@search= '?red=' ,@class='btn-primary',@key='A',@group = 'verkoop'\n\tEXEC sp_api_modal_route @name='Filter [Commission]',@pathname='/verkoop',@search= '?red=Commission+%5BopenPrice%5D' ,@class='btn-primary',@key='C',@group = 'verkoop'\n\n\t--EXEC sp_api_modal_route @name='Verkoop [Vandaag]',@pathname='/verkoop',@search= '?red=Werkdatum+openSale' ,@class='btn-primary',@key='Ctrl+V',@group = 'verkoop'\n\n\tEXEC sp_api_modal_route @name='Filter [Pickbon Veranderd]',@pathname='/verkoop',@search= '?red=Pickbon+VERANDERD' ,@class='btn-primary',@key='W',@group = 'verkoop'\n\tEXEC sp_api_modal_route @name='Filter [Klaar voor Factuur]',@pathname='/verkoop',@search= '?red=Fase+Klaar+voor+Factuur' ,@class='btn-primary',@key='K',@group = 'verkoop'\n\tEXEC sp_api_modal_route @name='Filter [Gefactureerd]',@pathname='/verkoop',@search= '?red=Orders%3A+gefactureerd' ,@class='btn-primary',@key='F',@group = 'verkoop'\n\tEXEC sp_api_modal_route @name='Filter [Nog Toewijzen]',@pathname='/verkoop',@search= '?red=Toewijzen' ,@class='btn-primary',@key='T',@group = 'verkoop'\n\tEXEC sp_api_modal_route @name='Inkoop',@pathname='/inkoop',@search= '?red=',@class='btn-warning',@key='I',@group = 'inkoop'\n\tEXEC sp_api_modal_route @name='Open inkopen',@pathname='/inkoop',@search= '?red=Open+inkopen',@class='btn-primary',@key='O',@group = 'inkoop'\n\tEXEC sp_api_modal_route @name='Gesloten inkopen',@pathname='/inkoop',@search= '?red=Gesloten+inkopen',@class='btn-primary',@key='G',@group = 'inkoop'\n\tEXEC sp_api_modal_route @name='Inkoop [Vandaag]',@pathname='/inkoop',@search= '?red=Werkdatum',@class='btn-warning',@key='Ctrl+I',@group = 'inkoop'\n\tEXEC sp_api_modal_route @name='Douane Actie Nodig',@pathname='/inkoop',@search= '?red=Actie+nodig+(douane+tafel)',@class='btn-warning',@key='D',@group = 'inkoop'\n\tEXEC sp_api_modal_route @name='Verkoop Claims [New]',@pathname='/xclaim',@search= '?red=Status+%3D+New',@class='btn-danger',@key='Alt+C',@group = 'verkoop'\n\tEXEC sp_api_modal_route @name='AccountSale [Open]',@pathname='/xcth_accountsale',@search= '?red=Open',@class='btn-warning',@key='A',@group = 'accountsale'\n\tEXEC sp_api_modal_route @name='AccountSale [Invoiced]',@pathname='/xcth_accountsale',@search= '?red=Factuur+gemaakt',@class='btn-warning',@key='F',@group = 'accountsale'\n\t--EXEC sp_api_modal_route @name='Fust Inname',@pathname='/xfustreturned',@search= '?red=',@class='btn-white border-dark text-dark',@key='F'\n\t\tIF @extendedMenu = 1\n\t\tBEGIN\n\t\tEXEC sp_api_modal_route @name='Verkoop [Gereserveerd]',@pathname='/verkoop',@search= '?red=Orders+Reserved' ,@class='btn-primary',@key='Ctrl+V',@group = 'verkoop'\n\t\tEXEC sp_api_modal_route @name='Inkoop [Gereserveerd]',@pathname='/inkoop',@search= '?red=Orders+Reserved',@class='btn-warning',@key='Ctrl+I',@group = 'inkoop'\n\t\tEND\n\t\t\n\tEND\n*/\t\n\t\n/*\t\n\tEXEC sp_api_modal_text '',@class='row'\n\tEXEC sp_api_modal_action @name='Nieuwe Verkoop',@class='btn-primary',@keycode='ArrowUp'\n\tEXEC sp_api_modal_action @name='Nieuwe Inkoop',@class='btn-warning',@keycode='ArrowDown'\n*/\n\n/*\n\tIF dbo.hasRole('douane,admin') > 0\n\t\tBEGIN\n\t\t\n\t\t--------------\n\t\t-- Douane\n\t\t--------------\n\t\tEXEC sp_api_modal_text 'Douane',@hclass\n\t\t\n\t\tSET @bclass = 'btn-dark'\n\t\t\n\t\t\tIF EXISTS (SELECT * FROM check_lfctr_at_entrepot)\n\t\t\t\tBEGIN\n\t\t\t\t\tEXEC sp_api_modal_route @name='Verkoop Correctie',@pathname='/check_lfctr_at_entrepot',@search= '',@class='btn-danger',@key='E'\n\t\t\t\tEND\n\t\t\n\t\t\tEXEC sp_api_modal_route @name='Douane Saldo',@pathname='/douanesaldo',@search= '',@class=@bclass,@key='S',@group = 'Douaneoverzicht'--,@group = 'Container'\n\t\t\tEXEC sp_api_modal_route @name='Contingent',@pathname='/sf_femimp',@search= '',@class=@bclass,@key='C',@group = 'Douaneoverzicht'\n\t\t\t\n\t\t\tEXEC sp_api_modal_route @name='Import',@pathname='/xvessel',@search= '?red=Nog+Niet+Uitgelost&ord=22636,26417,22107',@class=@bclass,@key='B',@group = 'Container'\n\t\t\tEXEC sp_api_modal_route @name='Inslag document',@pathname='/xbol',@class=@bclass,@key='D',@group = 'Container'\n\t\t\tEXEC sp_api_modal_route @name='Containers',@pathname='/xcontainer',@class=@bclass,@key='C',@group = 'Container'\n\t\t\tEXEC sp_api_modal_route @name='Partij Douane Artikelen',@pathname='/xcthcustomsrows',@class=@bclass,@key='P',@group = 'Container'\n\t\t\t\n\t\t\t\n\t\t\tEXEC sp_api_modal_route @name='Douane Artikelen',@pathname='/xproductcustomsgroup',@search= '',@class=@bclass,@key='D',@group = 'DouaneArtikelGroup'\n\t\t\tEXEC sp_api_modal_route @name='Douane Artikelen Per Land',@pathname='/xcthcustomsart',@search= '',@class=@bclass,@key='A',@group = 'DouaneArtikelGroup'\n\t\t\tEXEC sp_api_modal_route @name='E-cert Groep',@pathname='/xclientbotanic',@search= '',@class=@bclass,@key='G',@group = 'DouaneArtikelGroup'\n\t\t\tEXEC sp_api_modal_route @name='E-cert Vari\u00ebteit',@pathname='/xclientexport',@search= '',@class=@bclass,@key='V',@group = 'DouaneArtikelGroup'\n\t\t\tEXEC sp_api_modal_route @name='Product (Hoofdgroup)',@pathname='/xproduct',@search= '?red=',@class=@bclass,@key='P',@group = 'DouaneArtikelGroup'\n\t\t\t\n\t\t\t--EXEC sp_api_modal_route @name='Binnenkomend (LF)',@pathname='/lf_aanvoer_inkomend',@search= '',@class=@bclass,@key='I',@group = 'Container'\n\t\t\t--EXEC sp_api_modal_route @name='Uitgaand (LF)',@pathname='/lf_aanvoer_uitgaand',@search= '',@class=@bclass,@key='U',@group = 'Container'\n\t\t\t\n\t\t\t\n\t\tEND\n*/\n\n\t--------------\n\t-- Facturatie\n\t--------------\n--\tEXEC sp_api_modal_text 'Facturatie',@hclass\n\n\tIF @colorblind = 1\n\t\tBEGIN\n\t\t\tSET @bclass = 'btn-primary'\n\t\tEND\n\tELSE\n\t\tBEGIN\n\t\t\tSET @bclass = 'btn-secondary'\n\t\tEND\nIF dbo.hasRole('user,admin,directie') > 0\n\tbegin\n\t--\tEXEC sp_api_modal_route @name='Uitgaande facturen',@pathname='/invoice',@class=@bclass,@key='Alt+U', @Search='?red=Open+en+Nieuw',@group = 'Factuuruit'\n\t\tEXEC sp_api_modal_route @name='Uitgaande facturen',@pathname='/invoice_wms',@class=@bclass,@key='Alt+U', @Search='?red=Open+en+Nieuw',@group = 'Factuuruit'\n\t\tEXEC sp_api_modal_route @name='Filter [Klaar voor Export]',@pathname='/invoice_wms',@class=@bclass,@key='', @Search='?red=Klaar+voor+Export',@group = 'Factuuruit'\n\t\tEXEC sp_api_modal_route @name='Voorbereiding weekfacturen',@pathname='/wms_week_data_for_invoice',@class=@bclass,@key='' ,@group = 'Factuuruit'--, @Search='?red=Klaar+voor+Export'\n\t\tEXEC sp_api_modal_route @name='Inslagen',@pathname='/w_applied_actions',@class=@bclass,@key='' ,@group = 'Factuuruit'--, @Search='?red=Klaar+voor+Export'\t\t\n\t\t\n\t\tEXEC sp_api_modal_route @name='Inkoopfacturen',@pathname='/incoming_invoice',@class=@bclass,@key='Alt+I',@group = 'Factuurin'\n\t\tEXEC sp_api_modal_route @name='Status Exact',@pathname='/incoming_invoice',@class=@bclass,@key='Alt+I',@Search='?red=Status+Exact',@group = 'Factuurin'\n\t\tEXEC sp_api_modal_route @name='Status Draft / Empty',@pathname='/incoming_invoice',@class=@bclass,@key='Alt+I',@Search='?red=Draft+%2F+Empty',@group = 'Factuurin'\n\tend\n\t------------\n\t-- ADRESSEN\n\t------------\n--\tEXEC sp_api_modal_text 'Adressen',@hclass\n\n\tIF @colorblind = 1\n\t\tBEGIN\n\t\t\tSET @bclass = 'btn-primary'\n\t\tEND\n\tELSE\n\t\tBEGIN\n\t\t\tSET @bclass = 'btn-success'\n\t\tEND\n\n\nIF dbo.hasRole('user,admin,directie') > 0\n\tbegin\n\t\t\t\n\t\tEXEC sp_api_modal_route @name='Alle bedrijven',@pathname='/adres',@search= '',@class=@bclass,@key='F1',@group = 'stamgegevens'\n\t\tEXEC sp_api_modal_route @name='Leveranciers',@pathname='/leverancier',@search= '',@class=@bclass,@key='F2',@group = 'stamgegevens'\n\t\tEXEC sp_api_modal_route @name='Klanten',@pathname='/klant',@search= '?ord=23124,27062',@class=@bclass,@key='F3',@group = 'stamgegevens'\n\t\tEXEC sp_api_modal_route @name='Transporteurs',@pathname='/transporteur',@search= '',@class=@bclass,@key='F4',@group = 'stamgegevens'\n\t\t\n\t\tEXEC sp_api_modal_route @name='Lokaties',@pathname='/xlocation',@search= '',@class=@bclass,@key='L',@group = 'Locaties'\n\t\tEXEC sp_api_modal_route @name='Pickup lokaties',@pathname='/wms_pickup_location',@search= '',@class=@bclass,@key='P',@group = 'Locaties'\n\n\tend\t\n\nIF dbo.hasRole('barsan_bo') > 0\n\tbegin\n\t\t--BARSAN_BO OOK DEZE LOKATIE OPTIE\n\t\tEXEC sp_api_modal_route @name='Lokaties',@pathname='/xlocation',@search= '',@class=@bclass,@key='L'\t\n\t\t\n\tend\t\n\nIF dbo.hasRole('barsan,barsan_bo,loodsmedewerker,directie') > 0 OR @user='alex_dong_nl@ensignfreight.com' --231110 alex specifiek OOK\n\tbegin\n\t\tEXEC sp_api_modal_route @cardname='barsan_micro_out'\n\tend\t\n\nIF dbo.hasRole('admin,directie') > 0\n\tbegin\n\t\t\t\n\t\tEXEC sp_api_modal_route @name='wms_artikelen',@pathname='/wms_item',@search= '',@class=@bclass,@key='Alt+A',@group = 'base'\n\t\tEXEC sp_api_modal_route @name='wms_groepen',@pathname='/xproduct',@search= '',@class=@bclass,@key='ALT+G',@group = 'base'\n\t\tEXEC sp_api_modal_route @name='wms_loodshuur_artikel',@pathname='/wms_price_per_week',@search= '',@class=@bclass,@key='ALT+W',@group = 'base'\t\n\t\tEXEC sp_api_modal_route @name='wms_tarief_inslag',@pathname='/w_action_tariff',@search= '',@class=@bclass,@key='ALT+i',@group = 'base'\t\n\t\tEXEC sp_api_modal_route @name='wms_notification_settings',@pathname='/wms_notification_settings',@search= '',@class=@bclass,@key='ALT+N',@group = 'base'\t\n\t\tEXEC sp_api_modal_route @name='wms_invoice_method',@pathname='/wms_invoice_method',@search= '',@class=@bclass,@key='ALT+M',@group = 'base'\t\n\t\tEXEC sp_api_modal_route @name='wms_verpakking_micro_items',@pathname='/fust',@search= '',@class=@bclass,@key='ALT+V',@group = 'base'\t\n\t\tEXEC sp_api_modal_route @name='pallets toevoegen',@pathname='/wms_purchase',@search= '',@class=@bclass,@key='ALT+P',@group = 'base'\t\n\t\t--https://rws.tsql.app/wms_notification_settings\t\n\tend\t\n\n\nEND\n------------\n-- GEBRUIKER\n------------\n--EXEC sp_api_modal_menu_user\t@user_id,@path\nDECLARE @key nvarchar(128) = IIF(@path='/','Escape','Home')\nSET @bclass = 'btn-tracy'\n\nEXEC sp_api_modal_route @name='Home',@pathname='/',@search= '',@class=@bclass,@key=@key\n\nEXEC sp_api_modal_button @name='logout',@value='Log Out',@valueout = @b_logout OUT,@class=@bclass,@key='End'\n\tIF @b_logout = 'Log Out'\n\t\tBEGIN\n\t\t\tEXEC sp_api_modal_dispatch N'{\"type\":\"logOut\"}'\n\t\t\tRETURN\n\t\tEND\n\n\n\n\n-----------\n-- ADMIN --\n-----------\n--if @user_name<>'rick@tracy.nu' \nEXEC sp_sys_admin_main_menu @hclass\n--https://rws.tsql.app/api_actions/32\n\ndeclare @T nvarchar(512)=N'&nbsp;'\nexec sp_api_modal_html @T\nexec sp_api_modal_html @T\nexec sp_api_modal_html @T\nset @T =concat(N'<a href=\"https://tracy.nu\" target=_blank>Solution &copy;',year(getdate()),' TDS B.V.</a><br/><a href=\"https://www.ux1.nl\" target=_blank>Technology &copy;',year(getdate()),' UX1 B.V.</a>'   \t)\nexec sp_api_modal_html @T, @class='m-1 w-24 btn btn-link2 btn-sm float-right' ",
                    "action_id": 32,
                    "action_name": "main_menu",
                    "source_table": "api_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_sys_card_field_settings",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@card_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@card_id i"
                },
                {
                    "name": "@card_field_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@card_field_id i"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": [
                {
                    "sql_source": "EXEC sp_sys_card_field_settings @card_id,@card_field_id",
                    "action_id": 573,
                    "action_name": "sys_card_field_settings",
                    "source_table": "api_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_sys_card_help",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@card_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@card_id i"
                },
                {
                    "name": "@card_name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@card_name n"
                },
                {
                    "name": "@card_field_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@card_field_id i"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": [
                {
                    "sql_source": "EXEC sp_sys_card_help @card_id,@card_name,@card_field_id",
                    "action_id": 48,
                    "action_name": "sys_card_help",
                    "source_table": "api_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_sys_card_lock_layouts",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": [
                {
                    "sql_source": "EXEC sp_api_modal_alert N'Lock Layouts, prevent master update',N'This will lock all list, form en handler layouts (list_order/detail_order/handler_order) from all cards. Unlocking per card can be done in \"Model differences\"'\nEXEC sp_sys_card_lock_layouts",
                    "action_id": 272,
                    "action_name": "sys_card_lock_layouts",
                    "source_table": "api_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_sys_card_modal_code",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@card_name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "N'country'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@card_name n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_sys_children",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@card_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@card_id i"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": [
                {
                    "sql_source": "EXEC sp_sys_children @card_id",
                    "action_id": 716,
                    "action_name": "sys_children",
                    "source_table": "api_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_sys_choose_columns",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@card_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@card_id i"
                },
                {
                    "name": "@is_form",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@is_form i"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": [
                {
                    "sql_source": "EXEC sp_sys_choose_columns @card_id,@is_form",
                    "action_id": 10,
                    "action_name": "Choose columns",
                    "source_table": "api_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_sys_choose_context_year",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_sys_compare_with_master",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_sys_convert_field_to_select",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@card_field_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@card_field_id i"
                },
                {
                    "name": "@tablename",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@tablename n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": [
                {
                    "sql_source": "EXEC sp_sys_convert_field_to_select @card_field_id,@tablename",
                    "action_id": 52,
                    "action_name": "sys_convert_field_to_select",
                    "source_table": "api_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_sys_convert_to_type_table",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@card_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@card_id i"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": [
                {
                    "sql_source": "EXEC sp_sys_convert_to_type_table @card_id",
                    "action_id": 277,
                    "action_name": "sys_convert_to_type_table",
                    "source_table": "api_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_sys_data_set_info_mail",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@ids",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@ids n"
                },
                {
                    "name": "@to",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 512,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@to n"
                },
                {
                    "name": "@subject",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 512,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@subject n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_sys_delete",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@ids",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@ids n"
                },
                {
                    "name": "@id",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 64,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@id n"
                },
                {
                    "name": "@tablename",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "'api_history' EXEC sp_api_history_delete @id",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@tablename n"
                },
                {
                    "name": "@basetable",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@basetable n"
                },
                {
                    "name": "@identity_column",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@identity_column n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {
                "dbo.sp_api_history_delete": 1
            },
            "real_usage_examples": [
                {
                    "sql_source": "/*\nIndien je anders wilt deleten (EXEC DeleteCTR bijvoorbeeld) dan moet je VLAK ERVOOR(!) per id dit aanroepen:\n\n\tEXEC sp_api_history_delete @id,@tablename,@basetable,@identity_column\n\nDan wordt het verwijderde record in api_history opgeslagen!\n\n*/\nEXEC sp_sys_delete @ids,@id,@tablename,@basetable,@identity_column",
                    "action_id": 55,
                    "action_name": "sys_delete",
                    "source_table": "api_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_sys_edit_actions",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@card_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@card_id i"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": [
                {
                    "sql_source": "EXEC sp_sys_edit_actions @card_id",
                    "action_id": 144,
                    "action_name": "sys_edit_actions",
                    "source_table": "api_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_sys_edit_attributes",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@card_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@card_id i"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": [
                {
                    "sql_source": "EXEC sp_sys_edit_attributes @card_id",
                    "action_id": 278,
                    "action_name": "sys_edit_attributes",
                    "source_table": "api_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_sys_edit_fields",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@id i"
                },
                {
                    "name": "@is_form",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@is_form b"
                },
                {
                    "name": "@path",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@path n"
                },
                {
                    "name": "@card_field_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@card_field_id i"
                },
                {
                    "name": "@card_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@card_id i"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": [
                {
                    "sql_source": "EXEC sp_sys_edit_fields @id,@is_form,@path,@card_field_id,@card_id",
                    "action_id": 57,
                    "action_name": "sys_edit",
                    "source_table": "api_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_sys_escape",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@is_form",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 64,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@is_form n"
                },
                {
                    "name": "@path",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@path n"
                },
                {
                    "name": "@previous_path",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@previous_path n"
                },
                {
                    "name": "@parent_id",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 64,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@parent_id n"
                },
                {
                    "name": "@card_id",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 64,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@card_id n"
                },
                {
                    "name": "@card_name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@card_name n"
                },
                {
                    "name": "@id",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 64,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 7,
                    "full_declaration_from_def": "@id n"
                },
                {
                    "name": "@user_id",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 64,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 8,
                    "full_declaration_from_def": "@user_id n"
                },
                {
                    "name": "@ids",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 9,
                    "full_declaration_from_def": "@ids n"
                },
                {
                    "name": "@picklist_type",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 10,
                    "full_declaration_from_def": "@picklist_type i"
                },
                {
                    "name": "@parent_card_name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 11,
                    "full_declaration_from_def": "@parent_card_name n"
                },
                {
                    "name": "@picklist_fieldname",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 12,
                    "full_declaration_from_def": "@picklist_fieldname n"
                },
                {
                    "name": "@parent_card_id",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 64,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 13,
                    "full_declaration_from_def": "@parent_card_id n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": [
                {
                    "sql_source": "EXEC sp_sys_escape @is_form,@path,@previous_path,@parent_id,@card_id,@card_name,@id,@user_id\r\n\t,@ids,@picklist_type,@parent_card_name,@picklist_fieldname,@parent_card_id",
                    "action_id": 59,
                    "action_name": "sys_escape",
                    "source_table": "api_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_sys_excel_from_list",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@columns",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@columns n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": [
                {
                    "sql_source": "EXEC sp_sys_excel_from_list",
                    "action_id": 393,
                    "action_name": "sys_excel_from_list",
                    "source_table": "api_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_sys_field_info",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@card_field_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@card_field_id i"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": [
                {
                    "sql_source": "EXEC sp_sys_field_info @card_field_id",
                    "action_id": 319,
                    "action_name": "sys_field_info",
                    "source_table": "api_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_sys_file_check_all",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_sys_file_delete",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@card_name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@card_name n"
                },
                {
                    "name": "@id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@id i"
                },
                {
                    "name": "@file_id",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@file_id n"
                },
                {
                    "name": "@user_name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 512,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@user_name n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": [
                {
                    "sql_source": "EXEC sp_sys_file_delete @card_name,@id,@file_id,@user_name",
                    "action_id": 397,
                    "action_name": "sys_file_delete",
                    "source_table": "api_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_sys_file_delete_global_unused",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_sys_file_delete_multi",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@api_file_ids",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@api_file_ids n"
                },
                {
                    "name": "@user_name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 512,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@user_name n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_sys_file_delete_undo",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@api_files_deleted_ids",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@api_files_deleted_ids n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_sys_file_download",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@card_name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@card_name n"
                },
                {
                    "name": "@id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@id i"
                },
                {
                    "name": "@file_id",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@file_id n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": [
                {
                    "sql_source": "EXEC sp_sys_file_download @card_name,@id,@file_id",
                    "action_id": 268,
                    "action_name": "sys_file_download",
                    "source_table": "api_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_sys_file_preview",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@card_name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@card_name n"
                },
                {
                    "name": "@id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@id i"
                },
                {
                    "name": "@file_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@file_id i"
                },
                {
                    "name": "@print",
                    "type_from_sys": "bit",
                    "type_from_def": "B",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "1",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@print B"
                },
                {
                    "name": "@height",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@height n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": [
                {
                    "sql_source": "EXEC sp_sys_file_preview @card_name,@id,@file_id",
                    "action_id": 494,
                    "action_name": "sys_file_preview",
                    "source_table": "api_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_sys_file_to_base64",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@file_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@file_id i"
                },
                {
                    "name": "@base64",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@base64 n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_sys_file_to_text",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@file_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@file_id i"
                },
                {
                    "name": "@text",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@text n"
                },
                {
                    "name": "@ascii",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@ascii b"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_sys_file_upload",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@card_name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@card_name n"
                },
                {
                    "name": "@user_name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 512,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@user_name n"
                },
                {
                    "name": "@path",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@path n"
                },
                {
                    "name": "@id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@id i"
                },
                {
                    "name": "@name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@name n"
                },
                {
                    "name": "@mimetype",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@mimetype n"
                },
                {
                    "name": "@modified",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 7,
                    "full_declaration_from_def": "@modified n"
                },
                {
                    "name": "@filesize",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 8,
                    "full_declaration_from_def": "@filesize n"
                },
                {
                    "name": "@description",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 9,
                    "full_declaration_from_def": "@description n"
                },
                {
                    "name": "@api_files_ids",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 10,
                    "full_declaration_from_def": "@api_files_ids n"
                },
                {
                    "name": "@category",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 11,
                    "full_declaration_from_def": "@category n"
                },
                {
                    "name": "@toast",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "1",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 12,
                    "full_declaration_from_def": "@toast b"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": [
                {
                    "sql_source": "EXEC sp_sys_file_upload @card_name, @user_name, @path, @id, @name ,@mimetype ,@modified ,@filesize ,@description",
                    "action_id": 262,
                    "action_name": "sys_file_upload",
                    "source_table": "api_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_sys_file_upload_base64",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@base64data",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@base64data n"
                },
                {
                    "name": "@name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@name n"
                },
                {
                    "name": "@mimetype",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "'application/octet-stream'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@mimetype n"
                },
                {
                    "name": "@description",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@description n"
                },
                {
                    "name": "@modified",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@modified n"
                },
                {
                    "name": "@context",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@context n"
                },
                {
                    "name": "@context_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 7,
                    "full_declaration_from_def": "@context_id i"
                },
                {
                    "name": "@api_files_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 8,
                    "full_declaration_from_def": "@api_files_id i"
                },
                {
                    "name": "@url",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 9,
                    "full_declaration_from_def": "@url n"
                },
                {
                    "name": "@category",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 10,
                    "full_declaration_from_def": "@category n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {
                "dbo.sp_api_modal_input": 1,
                "dbo.sp_api_modal_scanner": 1,
                "dbo.sp_api_toast": 1,
                "dbo.sp_api_modal_text": 1,
                "dbo.sp_api_modal_button": 1,
                "dbo.sp_api_email": 1,
                "dbo.sp_api_goto": 1,
                "dbo.sp_api_modal_qr_scanner": 1,
                "dbo.sp_api_modal_choose": 1
            },
            "real_usage_examples": [
                {
                    "sql_source": "---------------------------------------------------------------\n-- #qr_action_verwerk_outbound_transport scanner action handler \n-- pre declare: @uuid int, @button_choose nvarchar(max)= null ,@origin nvarchar(1024), @sampleqrscanner nvarchar(max)= null\n-- 230510 uitbreiden met altijd foto's kunnen toevoegen aan outbound transport files\n---------------------------------------------------------------\ndeclare @hTML nvarchar(4000) \ndeclare @link_tracy nvarchar(4000)=NULL\ndeclare @gofoto nvarchar(4000)=concat(N'/wms_out_transport/',@uuid)\ndeclare @pal_id int\nexec sp_api_modal_text @uuid --230706 toon transport_id\nEXEC sp_api_modal_choose @list = N'Conform,Not_Conform,Add_Photo,Barcodes,Pallet_Sample',@value = @button_choose OUT,@startkey=3\nif @button_choose is null return\n\n if @button_choose ='Add_Photo'\n\tbegin\n\t\t--230703 dit stukje is er voor gezet om af te dwingen dat er eerst een geldige SAMPLE wordt gemaakt d.m.v. PALLET LABEL SCAN\n\t\t--230706 aangepast, controleert of er minimaal 1 geldige scan is met container, artikel en w_lot overeenkomst\n\t\tif not exists(select 1 from wms_micro_outbound where transport_id=@uuid) \n\t\t\tbegin --deze outbound is geen micro outbound, dus een normale outbound => dwing af dat er eerst een pallet scan wordt gedaan\n\t\t\t\tif not exists(select * from q_wms_out_samples \n\t\t\t\t\t\t\t\twhere xtransport_id=@uuid \n\t\t\t\t\t\t\t\t\tand out_stock_id in (select xstock_id from q_wms_out_requested where xtransport_id=@uuid) -- zelfde artikel !\n\t\t\t\t\t\t\t\t\tand w_lot_id in(select w_lot_id from q_wms_out_requested where xtransport_id=@uuid) --minimaal zelfde container\n\t\t\t\t\t\t\t\t\tand bl_id in(select bl_id from q_wms_out_requested where xtransport_id=@uuid) --minimaal zelfde BL !\n\n\t\t\t\t\t\t\t) --and info='oke') --TMP !!\n\t\t\t\t\tBEGIN --kennelijk (nog) geen correcte pallet gecand..\n\t\t\t\t\t\texec sp_api_toast N'NO VALIDATION YET; SCAN THE PALLET-LABEL FIRST! (SAMPLE)'\n\t\t\t\t\t\treturn\n\t\t\t\t\tEND\n\t\t\tend\n\n\t\tELSE --het is een micro outbound\n\t\t\tBEGIN\n\t\t\t\texec sp_api_toast N'micro outbound'\n\t\t\tEND\t\n\n\t\t-------------------------------------\n\t\t-- add_document_or_foto\n\t\t-- pre declare @api_files_id,@filename,@trans_out_id\n\t\t-------------------------------------\n\t\t/*\n\t\t(context = 'wms_out_transport' AND context_id = {[wms_out_transport].id})\n\t\tor \n\t\t(context = 'wms_out_transport' AND context_id = {[ffa_transport_out].id})\n\t\tor \n\t\t(context = 'wms_out_transport' AND context_id = {[wms_io].out_transport_id})\n\t\t*/\n\t\tdeclare @api_files_id int\n\t\tdeclare @filename nvarchar(200)\n\t\tdeclare @trans_out_id int\n\t\t\n\t\tset @trans_out_id=@uuid\n\t\t--set @trans_out_id = 1 --@uuid\n\t\tif @trans_out_id is null \n\t\t\tbegin\n\t\t\t\texec sp_api_modal_alert N'Er is geen correcte transport out referentie. (neem evt. contact op met uw consultant)'\n\t\t\t\texec sp_api_modal_clear\n\t\t\t\treturn\n\t\t\tend\n\t\tset @filename=concat('foto_',@main_db.dbo.char_left(@user,'@'),'_',@main_db.dbo.DT_FILENAME(GETDATE()))\n\t\t--exec sp_api_toast @filename\n\t\tEXEC @main_db.dbo.sp_api_modal_file @name = N'@filename', @to_file_context = 'wms_out_transport', @to_file_context_id = @trans_out_id,@filename = @filename\n\t\t\t, @category = 'pallet_foto' ,@resize_max = 2048, @resize_quality = 45,@api_files_id = @api_files_id OUT\n\t\tIF @api_files_id > 0 EXEC sp_api_modal_value N'@filename'\n\t\treturn\n\tend\n \n if @button_choose ='Conform'\n\tbegin\n\t\t--230703 dit stukje is er voor gezet om af te dwingen dat er eerst een geldige SAMPLE wordt gemaakt d.m.v. PALLET LABEL SCAN\n\t\t--230706 aangepast, controleert of er minimaal 1 geldige scan is met container, artikel en w_lot overeenkomst\n\t\tif not exists(select 1 from wms_micro_outbound where transport_id=@uuid) \n\t\t\tbegin --deze outbound is geen micro outbound, dus een normale outbound => dwing af dat er eerst een pallt scan wordt gedaan\n\t\t\t\tif not exists(select * from q_wms_out_samples \n\t\t\t\t\t\t\t\twhere xtransport_id=@uuid \n\t\t\t\t\t\t\t\t\tand out_stock_id in (select xstock_id from q_wms_out_requested where xtransport_id=@uuid) -- zelfde artikel !\n\t\t\t\t\t\t\t\t\tand w_lot_id in(select w_lot_id from q_wms_out_requested where xtransport_id=@uuid) --minimaal zelfde container\n\t\t\t\t\t\t\t\t\tand bl_id in(select bl_id from q_wms_out_requested where xtransport_id=@uuid) --minimaal zelfde BL !\n\n\t\t\t\t\t\t\t) --and info='oke') --TMP !!\n\t\t\t\t\tBEGIN --kennelijk (nog) geen correcte pallet gecand..\n\t\t\t\t\t\texec sp_api_toast N'NO VALIDATION YET; SCAN THE PALLET-LABEL FIRST! (SAMPLE)'\n\t\t\t\t\t\treturn\n\t\t\t\t\tEND\n\t\t\tend\n\n\t\tELSE --het is een micro outbound\n\t\t\tBEGIN\n\t\t\t\texec sp_api_toast N'micro outbound'\n\t\t\tEND\t\n\n\n\t\n\t\tupdate wms_io \n\t\t\tset status='CONFORM' \n\t\t\t\t,conform_user=@USER\t\t--230626\n\t\t\t\t,conform_dt=getdate()\t--230626\n\t\twhere out_transport_id=@uuid and in_out='OUT' --230316 dit kunnen meerdere regels zijn (bij multi-item-outbound)\n\t\tupdate xtransport set completed=1 where id=@uuid\n\t\tset @link_tracy=concat(@origin,N'/wms_out_transport?id=',@uuid,' ') --meegegeven parameter\n\t\tset @html=concat(N'De outbound met referentie ',(select transportinfo from xtransport where id=@uuid),' / ',(select top 1 transport_details from dbo.tr_stuff \nwhere transport_id=@uuid),' is conform verwachting verladen naar de klant. '\n\t\t\t\t\t\t,'<p><a href=\"',@link_tracy,'\" target=_blank>click hier</a>'\n\t\t\t\t\t\t)\n\n\t  \t--PROJECT CALL !!\n  \t\t--230428 GEEN OUTBOUND MAIL MEER NAAR RWS =>    EXEC sp_api_email @to = N'outbound@rwsbv.com',@subject = N'outbound conform & completed....',@body = N'tracy is the best',@html = @html\n\n\n\t\t--voeg evt foto toe\t\t\n--\t\tdeclare @gofoto nvarchar(4000)=concat(N'/wms_out_transport/',@uuid)\n\t\texec sp_api_goto @path=@gofoto\n\n\t\texec sp_api_modal_clear\n\t\treturn\n\tend\n\n\n if @button_choose ='Not_Conform'\n\tbegin\n\t\tDECLARE @opmerking nvarchar(max),@button22 nvarchar(128)\n\t\texec sp_api_modal_text N'What is wrong with this outbound loading?'\n\t\tEXEC sp_api_modal_input @name = '@opmerking', @value = @opmerking OUT --,@inline = 1\n\t\tEXEC sp_api_modal_button @name='@button22',@value = 'Save', @valueout = @button22 OUT,@class='btn-danger',@key='Enter'\n\t\tIF @button22 IS NULL RETURN\n\t\t\n\t\t\n\t\tupdate wms_io set status='NOT CONFORM' where out_transport_id=@uuid and in_out='OUT' --out check extra zekerheid, hoewel er maar 1 id is natuurlijk\n\t\tupdate xtransport set completed=0 where id=@uuid\n\t\tset @link_tracy=concat(@origin,N'/wms_out_transport?id=',@uuid,' ') --meegegeven parameter\n\t\tset @html=concat(N'Er zijn verschillen bij de outbound met referentie ',(select transportinfo from xtransport where id=@uuid),' / ',(select top 1 transport_details from dbo.tr_stuff \nwhere transport_id=@uuid),'. '\n\t\t\t\t\t\t,'<p>De opmerking is :',@opmerking,'<p>'\n\t\t\t\t\t\t,'<p><a href=\"',@link_tracy,'\" target=_blank>click hier</a>'\n\t\t\t\t\t\t)\n\n\t  \t--PROJECT CALL !!\n  \t\t--230428 GEEN OUTBOUND MAIL MEER NAAR RWS =>      \t\tEXEC sp_api_email @to = N'outbound@rwsbv.com',@subject = N'outbound NOT COFORM....',@body = N'tracy is the best',@html = @html\n\n\t\texec sp_api_modal_clear\n\t\treturn\n\tend\n\nif @button_choose ='Pallet_Sample'\n\tbegin\n\t\tEXEC sp_api_modal_qr_scanner @name=N'@sampleqrscanner',@value = @sampleqrscanner OUT\n\t\tIF @sampleqrscanner IS NULL RETURN\n\t\texec sp_api_modal_text @sampleqrscanner\n\t\tIF left(@sampleqrscanner,3) = 'ps:'\n\t\t\tBEGIN\n\t\t\t\tset @pal_id=right(@sampleqrscanner,len(@sampleqrscanner)-3) \n\t\t\t\t--230701 registreer sample\n\t\t\t\texec IINE_wms_out_samples   \n\t\t\t\t\t@user=@user\n    \t\t\t\t,@w_pallet_id =@pal_id\n    \t\t\t\t,@xTransport_id =@uuid\n\n\t\t\t\t\n\t\t\t\tif exists(select * from pallet_status \n\t\t\t\t\t\t\twhere --id=@pal_id\tAND -- ff niet lullig doen als het een andere pallet uit dezelfde container is..\n\t\t\t\t\t\t\t\tout_transport_id=@uuid \n\t\t\t\t\t\t\t\t--and artikel is oke\n\t\t\t\t\t\t)\n\t\t\t\t\tEXEC sp_api_modal_text N'GOED',N'h1'\n\t\t\t\tELSE\n\t\t\t\t\tEXEC sp_api_modal_text N'VERKEERDE PALLET!',N'h1'\n\t\t\t\t\n\t\t\tEND\n\t\tELSE\n\t\t\tBEGIN\n\t\t\t\tEXEC sp_api_modal_text N'SCAN A PALLET LABEL!',N'h1'\n\t\t\t\t--EXEC sp_api_modal_text @sampleqrscanner,N'h1'\n\t\t\t\t\n\t\t\tEND\n\tend\n\nif @button_choose ='Barcodes' --230705 verzamelde codes voor de klant in extene textfile\n\tbegin\n\t\tdeclare @barcodes nvarchar(max)\n\t\t--231017 was:\n\t\t--EXEC sp_api_modal_scanner @barcodes = 1, @value = @barcodes OUT\n\n\t\t--231017 nw\n\t\t\t-- @button_choose_2 nvarchar(max)= null, @button_laser_klaar nvarchar(max)= null\n\t\t\n\t\texec sp_api_modal_text N'Select your \"Scan Device\"'\n\t\tEXEC sp_api_modal_choose @list = N'use_camera,use_laser_scanner',@value = @button_choose_2 OUT, @button_class='secondary'\n\t\tif @button_choose_2 is null RETURN\n\t\tif @button_choose_2 = N'use_camera'\n\t\t\tEXEC sp_api_modal_scanner @barcodes = 1, @value = @barcodes OUT, @video_width= 1200\n\t\tif @button_choose_2 = N'use_laser_scanner'\n\t\tbegin\t\n\t\t\tEXEC sp_api_modal_input @name = '@Pallet_serials', @value = @barcodes OUT ,@type = 'textarea', @focus=1 --,@inline = 1\n\t\t\tEXEC sp_api_modal_button @name='@button_laser_klaar',@value = 'Save Pallet Scans', @valueout = @button_laser_klaar OUT,@class='btn-danger',@key='Enter'\n\t\t\tif @button_laser_klaar is null return\n\t\tend\t\t\n\n\n\n\n\t\tIF NULLIF(@barcodes,'') IS NOT NULL\n\t\t\tBEGIN\n\t\t\t\tset @barcodes=concat('Scanned codes at ',getdate(),char(13),@barcodes,'')\n\t\t\t\tDECLARE @name nvarchar(128) = N'outbound_barcodes.txt'\n\t\t\t\t\t,@base64data nvarchar(max) = dbo.base64encode(CONVERT(varbinary(max),CONVERT(varchar(max),@barcodes)))\n\t\t\t\tEXEC sp_sys_file_upload_base64 @base64data = @base64data,@name = @name\n\t\t\t\t\t,@description = N'Scanned barcodes at outbound'\n\t\t\t\t\t,@mimetype = N'text/plain'\n\t\t\t\t\t,@context = N'wms_out_transport'\n\t\t\t\t\t,@context_id = @uuid\n\t\t\t\t\t,@category = N'extern' --6 (maar in wms is dat 3 dus oppassen met id's!!)\n\n\t\t\t\tEXEC sp_api_modal_clear\n\t\t\tEND \n\tend\t",
                    "action_id": 491,
                    "action_name": "#qr_action_verwerk_outbound_transport",
                    "source_table": "api_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_sys_file_upload_move_from_tmp",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@context",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@context n"
                },
                {
                    "name": "@context_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@context_id i"
                },
                {
                    "name": "@description",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@description n"
                },
                {
                    "name": "@user_name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 512,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@user_name n"
                },
                {
                    "name": "@category",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@category n"
                },
                {
                    "name": "@modified",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@modified n"
                },
                {
                    "name": "@toast",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 7,
                    "full_declaration_from_def": "@toast b"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_sys_file_upload_xml",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@xml",
                    "type_from_sys": "xml",
                    "type_from_def": "x",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@xml x"
                },
                {
                    "name": "@filename",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 4096,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@filename n"
                },
                {
                    "name": "@description",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@description n"
                },
                {
                    "name": "@context",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@context n"
                },
                {
                    "name": "@context_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@context_id i"
                },
                {
                    "name": "@api_files_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@api_files_id i"
                },
                {
                    "name": "@url",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 7,
                    "full_declaration_from_def": "@url n"
                },
                {
                    "name": "@category",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 8,
                    "full_declaration_from_def": "@category n"
                },
                {
                    "name": "@modified",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 9,
                    "full_declaration_from_def": "@modified n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_sys_filter_defaults_show_hide",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@card_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@card_id i"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": [
                {
                    "sql_source": "EXEC sp_sys_filter_defaults_show_hide @card_id",
                    "action_id": 580,
                    "action_name": "sys_filter_defaults_show_hide",
                    "source_table": "api_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_sys_filters_custom",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@card_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@card_id i"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": [
                {
                    "sql_source": "EXEC sp_sys_filters_custom @card_id = @card_id",
                    "action_id": 590,
                    "action_name": "sys_filters_custom",
                    "source_table": "api_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_sys_find_fields",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@card_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@card_id i"
                },
                {
                    "name": "@path",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@path n"
                },
                {
                    "name": "@id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@id i"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": [
                {
                    "sql_source": "EXEC sp_sys_find_fields @card_id,@path,@id",
                    "action_id": 25,
                    "action_name": "Find Fields",
                    "source_table": "api_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_sys_get_translations",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@context",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 510,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "N'%xcth_ac3countsale%",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@context n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_sys_gui_insert",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@card_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@card_id i"
                },
                {
                    "name": "@card_field_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@card_field_id i"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": [
                {
                    "sql_source": "EXEC sp_sys_gui_insert @card_id,@card_field_id",
                    "action_id": 95,
                    "action_name": "sys_gui_insert_text",
                    "source_table": "api_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_sys_history_table",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@card_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@card_id i"
                },
                {
                    "name": "@id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@id i"
                },
                {
                    "name": "@ids",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@ids n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": [
                {
                    "sql_source": "EXEC sp_sys_history_table @card_id,@id,@ids",
                    "action_id": 605,
                    "action_name": "sys_history_table",
                    "source_table": "api_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_sys_identity_management",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@api_user_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@api_user_id i"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_sys_import_action",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@card_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@card_id i"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": [
                {
                    "sql_source": "EXEC sp_sys_import_action @card_id",
                    "action_id": 283,
                    "action_name": "sys_import_action",
                    "source_table": "api_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_sys_insert_todo",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@card_name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@card_name n"
                },
                {
                    "name": "@user_name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 512,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@user_name n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": [
                {
                    "sql_source": "EXEC sp_sys_insert_todo @card_name,@user_name",
                    "action_id": 280,
                    "action_name": "sys_insert_todo",
                    "source_table": "api_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_sys_json_to_sql",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@json",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "N'''+REPLACE(@json",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@json n"
                },
                {
                    "name": "@sql",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "'' OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@sql n"
                },
                {
                    "name": "@prefix",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "''",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@prefix n"
                },
                {
                    "name": "@indent",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "''",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@indent n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_sys_list_classes",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@card_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@card_id i"
                },
                {
                    "name": "@is_form",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@is_form b"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": [
                {
                    "sql_source": "EXEC sp_sys_list_classes @card_id = @card_id , @is_form = @is_form",
                    "action_id": 279,
                    "action_name": "sys_list_classes",
                    "source_table": "api_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_sys_list_editable",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@card_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@card_id i"
                },
                {
                    "name": "@id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@id i"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": [
                {
                    "sql_source": "EXEC sp_sys_list_editable @card_id,@id",
                    "action_id": 99,
                    "action_name": "sys_list_editable",
                    "source_table": "api_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_sys_menu_admin",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@hclass",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "'h5'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@hclass n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_sys_menu_admin_add_cards",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": [
                {
                    "sql_source": "EXEC sp_sys_menu_admin_add_cards",
                    "action_id": 715,
                    "action_name": "sys_menu_admin_add_cards",
                    "source_table": "api_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_sys_menu_groups",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_sys_menu_info",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": [
                {
                    "sql_source": "EXEC sp_sys_menu_info",
                    "action_id": 492,
                    "action_name": "sys_menu_info",
                    "source_table": "api_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_sys_menu_info_context",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": [
                {
                    "sql_source": "EXEC sp_sys_menu_info_context",
                    "action_id": 708,
                    "action_name": "sys_menu_info_context",
                    "source_table": "api_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_sys_menu_info_data_browser",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@card_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@card_id i"
                },
                {
                    "name": "@id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@id i"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": [
                {
                    "sql_source": "EXEC [sp_sys_menu_info_data_browser] @card_id = @card_id, @id = @id",
                    "action_id": 707,
                    "action_name": "sys_menu_info_data_browser",
                    "source_table": "api_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_sys_menu_info_distinct_fields",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@card_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@card_id i"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": [
                {
                    "sql_source": "EXEC sp_sys_menu_info_distinct_fields @card_id",
                    "action_id": 755,
                    "action_name": "sys_menu_info_distinct_fields",
                    "source_table": "api_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_sys_menu_info_field_history",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@tablename",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@tablename n"
                },
                {
                    "name": "@selected_field_name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@selected_field_name n"
                },
                {
                    "name": "@ids",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@ids n"
                },
                {
                    "name": "@is_form",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@is_form b"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": [
                {
                    "sql_source": "EXEC sp_sys_menu_info_field_history @tablename = @tablename,@selected_field_name = @selected_field_name,@ids = @ids,@is_form = @is_form",
                    "action_id": 709,
                    "action_name": "sys_menu_info_field_history",
                    "source_table": "api_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_sys_menu_info_kill_processes",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": [
                {
                    "sql_source": "EXEC sp_sys_menu_info_kill_processes\r\n",
                    "action_id": 756,
                    "action_name": "sys_menu_info_kill_processes",
                    "source_table": "api_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_sys_menu_info_memory_usage",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": [
                {
                    "sql_source": "EXEC sp_sys_menu_info_memory_usage",
                    "action_id": 581,
                    "action_name": "sys_menu_info_memory_usage",
                    "source_table": "api_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_sys_menu_info_params",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@card_id",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 64,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@card_id n"
                },
                {
                    "name": "@id",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 64,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@id n"
                },
                {
                    "name": "@ids",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@ids n"
                },
                {
                    "name": "@basetable",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@basetable n"
                },
                {
                    "name": "@tablename",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@tablename n"
                },
                {
                    "name": "@identity_column",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 2048,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@identity_column n"
                },
                {
                    "name": "@parent_card_id",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 64,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 7,
                    "full_declaration_from_def": "@parent_card_id n"
                },
                {
                    "name": "@parent_id",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 64,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 8,
                    "full_declaration_from_def": "@parent_id n"
                },
                {
                    "name": "@path",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 9,
                    "full_declaration_from_def": "@path n"
                },
                {
                    "name": "@previous_path",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 10,
                    "full_declaration_from_def": "@previous_path n"
                },
                {
                    "name": "@is_new",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 64,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 11,
                    "full_declaration_from_def": "@is_new n"
                },
                {
                    "name": "@user_id",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 64,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 12,
                    "full_declaration_from_def": "@user_id n"
                },
                {
                    "name": "@is_form",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 64,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 13,
                    "full_declaration_from_def": "@is_form n"
                },
                {
                    "name": "@hostname",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 14,
                    "full_declaration_from_def": "@hostname n"
                },
                {
                    "name": "@is_picklist",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 64,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 15,
                    "full_declaration_from_def": "@is_picklist n"
                },
                {
                    "name": "@picklist_fieldname",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 16,
                    "full_declaration_from_def": "@picklist_fieldname n"
                },
                {
                    "name": "@picklist_type",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 32,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 17,
                    "full_declaration_from_def": "@picklist_type n"
                },
                {
                    "name": "@card_field_id",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 64,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 18,
                    "full_declaration_from_def": "@card_field_id n"
                },
                {
                    "name": "@card_name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 19,
                    "full_declaration_from_def": "@card_name n"
                },
                {
                    "name": "@parent_card_name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 20,
                    "full_declaration_from_def": "@parent_card_name n"
                },
                {
                    "name": "@parent_parent_id",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 64,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 21,
                    "full_declaration_from_def": "@parent_parent_id n"
                },
                {
                    "name": "@user_name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 512,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 22,
                    "full_declaration_from_def": "@user_name n"
                },
                {
                    "name": "@user",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 512,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 23,
                    "full_declaration_from_def": "@user n"
                },
                {
                    "name": "@uri",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 24,
                    "full_declaration_from_def": "@uri n"
                },
                {
                    "name": "@selected_field_name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 25,
                    "full_declaration_from_def": "@selected_field_name n"
                },
                {
                    "name": "@origin",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 2048,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 26,
                    "full_declaration_from_def": "@origin n"
                },
                {
                    "name": "@current_card_action_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 27,
                    "full_declaration_from_def": "@current_card_action_id i"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": [
                {
                    "sql_source": "EXEC sp_sys_menu_info_params \t@card_id\r\n\t,@id\r\n\t,@ids\r\n\t,@basetable\r\n\t,@tablename\r\n\t,@identity_column\r\n\t,@parent_card_id\r\n\t,@parent_id\r\n\t,@path\r\n\t,@previous_path\r\n\t,@is_new\r\n\t,@user_id\r\n\t,@is_form\r\n\t,@hostname\r\n\t,@is_picklist\r\n\t,@picklist_fieldname\r\n\t,@picklist_type\r\n\t,@card_field_id\r\n\t,@card_name\r\n\t,@parent_card_name\r\n\t,@parent_parent_id\r\n\t,@user_name\r\n\t,@user\r\n\t,@uri\r\n\t,@selected_field_name\r\n\t,@origin\r\n\t,@current_card_action_id",
                    "action_id": 701,
                    "action_name": "sys_menu_info_params",
                    "source_table": "api_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_sys_menu_info_top_table_usage",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": [
                {
                    "sql_source": "EXEC sp_sys_menu_info_top_table_usage",
                    "action_id": 640,
                    "action_name": "sys_menu_info_top_table_usage",
                    "source_table": "api_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_sys_menu_info_whatsapp",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": [
                {
                    "sql_source": "EXEC sp_sys_menu_info_whatsapp\r\n",
                    "action_id": 758,
                    "action_name": "sys_menu_info_whatsapp",
                    "source_table": "api_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_sys_menu_quick",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@path",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@path n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": [
                {
                    "sql_source": "EXEC sp_sys_menu_quick @path",
                    "action_id": 69,
                    "action_name": "sys_quick_menu",
                    "source_table": "api_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_sys_menu_two_factor",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_sys_modal_code_generator",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_sys_modal_code_insert",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@card_field_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@card_field_id i"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_sys_modal_report_from_view",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": [
                {
                    "sql_source": "EXEC sp_sys_modal_report_from_view",
                    "action_id": 731,
                    "action_name": "sys_report_from_view",
                    "source_table": "api_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_sys_modal_sql_import",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": [
                {
                    "sql_source": "EXEC sp_sys_modal_sql_import\r\n",
                    "action_id": 632,
                    "action_name": "sys_modal_sql_import",
                    "source_table": "api_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_sys_modal_table_builder",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": [
                {
                    "sql_source": "EXEC sp_sys_modal_table_builder",
                    "action_id": 757,
                    "action_name": "sys_table_builder",
                    "source_table": "api_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_sys_modal_table_creator",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_sys_modal_view_builder",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": [
                {
                    "sql_source": "\tEXEC sp_sys_modal_view_builder\r\n",
                    "action_id": 579,
                    "action_name": "sys_view_builder",
                    "source_table": "api_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_sys_modal_view_builder_recursive",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@object_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@object_id i"
                },
                {
                    "name": "@alias",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@alias n"
                },
                {
                    "name": "@sql",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "'' OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@sql n"
                },
                {
                    "name": "@seed",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "'0'",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@seed n"
                },
                {
                    "name": "@show_fields",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@show_fields b"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_sys_model_diff",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@card_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@card_id i"
                },
                {
                    "name": "@id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@id i"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": [
                {
                    "sql_source": "EXEC sp_sys_model_diff @card_id,@id",
                    "action_id": 67,
                    "action_name": "sys_model_diff",
                    "source_table": "api_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_sys_parent_cards",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@card_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "203",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@card_id i"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": [
                {
                    "sql_source": "EXEC sp_sys_parent_cards @card_id",
                    "action_id": 276,
                    "action_name": "sys_parent_cards",
                    "source_table": "api_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_sys_performance_listview",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@card_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@card_id i"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": [
                {
                    "sql_source": "EXEC sp_sys_performance_listview @card_id",
                    "action_id": 493,
                    "action_name": "sys_performance_listview",
                    "source_table": "api_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_sys_performance_query_store",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": [
                {
                    "sql_source": "EXEC sp_sys_performance_query_store",
                    "action_id": 591,
                    "action_name": "sys_performance_query_store",
                    "source_table": "api_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_sys_pick_from_list",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@id",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 64,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@id n"
                },
                {
                    "name": "@ids",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@ids n"
                },
                {
                    "name": "@picklist_type",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 32,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@picklist_type n"
                },
                {
                    "name": "@parent_card_name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@parent_card_name n"
                },
                {
                    "name": "@picklist_fieldname",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@picklist_fieldname n"
                },
                {
                    "name": "@previous_path",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 8000,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 6,
                    "full_declaration_from_def": "@previous_path n"
                },
                {
                    "name": "@card_id",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 64,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 7,
                    "full_declaration_from_def": "@card_id n"
                },
                {
                    "name": "@parent_id",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 64,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 8,
                    "full_declaration_from_def": "@parent_id n"
                },
                {
                    "name": "@parent_card_id",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 64,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 9,
                    "full_declaration_from_def": "@parent_card_id n"
                },
                {
                    "name": "@user_id",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 64,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 10,
                    "full_declaration_from_def": "@user_id n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": [
                {
                    "sql_source": "EXEC sp_sys_pick_from_list @id, @ids ,@picklist_type, @parent_card_name, @picklist_fieldname, @previous_path, @card_id, @parent_id, @parent_card_id, @user_id",
                    "action_id": 39,
                    "action_name": "Pick from list",
                    "source_table": "api_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_sys_refresh_all_views",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": [
                {
                    "sql_source": "EXEC sp_sys_refresh_all_views\r\n",
                    "action_id": 70,
                    "action_name": "sys_refresh_all_views",
                    "source_table": "api_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_sys_restore_backup",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_sys_save_sorting_order",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@card_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@card_id i"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": [
                {
                    "sql_source": "EXEC sp_sys_save_sorting_order @card_id",
                    "action_id": 402,
                    "action_name": "sys_save_sorting_order",
                    "source_table": "api_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_sys_search_all",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@card_id_reduced",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@card_id_reduced n"
                },
                {
                    "name": "@reducer",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@reducer n"
                },
                {
                    "name": "@focus",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@focus b"
                },
                {
                    "name": "@highlight",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@highlight n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": [
                {
                    "sql_source": "EXEC sp_sys_search_all @card_id_reduced,@reducer,@focus,@highlight",
                    "action_id": 92,
                    "action_name": "sys_search_all",
                    "source_table": "api_actions"
                },
                {
                    "sql_source": "EXEC sp_sys_search_all @card_id_reduced,@reducer,@focus,@highlight",
                    "action_id": 574,
                    "action_name": "sys_search_all_clone",
                    "source_table": "api_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_sys_select_text",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": [
                {
                    "sql_source": "EXEC sp_sys_select_text",
                    "action_id": 732,
                    "action_name": "sys_select_text",
                    "source_table": "api_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_sys_set_workdate",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@date_only",
                    "type_from_sys": "bit",
                    "type_from_def": "b",
                    "max_length_bytes": 1,
                    "precision": 1,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "0",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@date_only b"
                },
                {
                    "name": "@workdate",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": true,
                    "default_value": "NULL OUT",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@workdate  n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_sys_switch_role",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@claim_context",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@claim_context n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": [
                {
                    "sql_source": "EXEC sp_sys_switch_role",
                    "action_id": 285,
                    "action_name": "sys_switch_role",
                    "source_table": "api_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_sys_switch_role_setter",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@claim_context",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@claim_context n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": [
                {
                    "sql_source": "EXEC sp_sys_switch_role_setter",
                    "action_id": 334,
                    "action_name": "sys_switch_role_setter",
                    "source_table": "api_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_sys_sync_system_cards",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_sys_table_size",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@basetable",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@basetable n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": [
                {
                    "sql_source": "EXEC sp_sys_table_size @basetable",
                    "action_id": 75,
                    "action_name": "sys_table_size",
                    "source_table": "api_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_sys_toggle_isam_search",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": [
                {
                    "sql_source": "EXEC sp_sys_toggle_isam_search",
                    "action_id": 255,
                    "action_name": "sys_toggle_isam_search",
                    "source_table": "api_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_sys_translate",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@id i"
                },
                {
                    "name": "@card_field_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@card_field_id i"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": [
                {
                    "sql_source": "EXEC sp_sys_translate @id,@card_field_id",
                    "action_id": 76,
                    "action_name": "sys_translate",
                    "source_table": "api_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_sys_user_settings",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@user_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "NULL",
                    "has_default": true,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@user_id i"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": []
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_sys_view_performance",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@card_id",
                    "type_from_sys": "int",
                    "type_from_def": "i",
                    "max_length_bytes": 4,
                    "precision": 10,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@card_id i"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": [
                {
                    "sql_source": "EXEC sp_sys_view_performance @card_id",
                    "action_id": 256,
                    "action_name": "sys_view_performance",
                    "source_table": "api_actions"
                }
            ]
        },
        {
            "schema_name": "dbo",
            "object_name": "sp_sys_workflow",
            "object_type": "SQL_STORED_PROCEDURE",
            "object_type_short": "P",
            "parameters": [
                {
                    "name": "@card_name",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 1,
                    "full_declaration_from_def": "@card_name n"
                },
                {
                    "name": "@ids",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": -1,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 2,
                    "full_declaration_from_def": "@ids  n"
                },
                {
                    "name": "@tablename",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 3,
                    "full_declaration_from_def": "@tablename n"
                },
                {
                    "name": "@basetable",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 4,
                    "full_declaration_from_def": "@basetable n"
                },
                {
                    "name": "@identity_column",
                    "type_from_sys": "nvarchar",
                    "type_from_def": "n",
                    "max_length_bytes": 256,
                    "precision": 0,
                    "scale": 0,
                    "is_output": false,
                    "default_value": "",
                    "has_default": false,
                    "is_readonly": false,
                    "order": 5,
                    "full_declaration_from_def": "@identity_column n"
                }
            ],
            "embedded_example": null,
            "embedded_description": null,
            "co_occurrence_stats": {},
            "real_usage_examples": [
                {
                    "sql_source": "EXEC sp_sys_workflow @card_name,@ids,@tablename,@basetable,@identity_column",
                    "action_id": 77,
                    "action_name": "sys_workflow",
                    "source_table": "api_actions"
                }
            ]
        }
    ],
    "action_script_analysis_summary": {
        "total_scripts_in_corpus": 742,
        "scripts_analyzed_in_detail_sample_count": 20,
        "analysis_samples": [
            {
                "sql_source": "--RH210215 BEZIG DOWNLOAD ALS CSV ER BIJ.. lukt nofg niet..\nDECLARE @date nvarchar(128),@date2 nvarchar(128),@button nvarchar(128),@button2 nvarchar(128),@companyname nvarchar(128), @FileName nvarchar(128)\nset @date = dbo.workDate()\nset @date2 = dbo.workDate()\nSET @companyname = (select CompanyName from xcompany where id = @id)\nset @Filename=concat(@Companyname,'.csv')\n/*EXEC sp_api_modal_text 'Zoek op transport bedrijf'\nEXEC sp_api_modal_input @name='Transporteur',@value = @TransComp OUT,@focus=1,@select=1 -- zoek veld\n*/\nEXEC sp_api_modal_text 'Van:'\nEXEC sp_api_modal_date @name='Date',@value = @date OUT,@class='w-24',@focus=1,@select=1  -- zoek veld\nEXEC sp_api_modal_text 'Tot en met:'\nEXEC sp_api_modal_date @name='Date2',@value = @date2 OUT,@class='w-24' -- zoek veld\n--SET @date2 = CONCAT(@date2,' 23:59:59.999')\nSET @button = 'Intrastat_Melding'\nEXEC sp_api_modal_button @name='button',@value = 'Intrastat_Melding',@valueout = @button OUT,@class = 'btn-primary',@key = 'Enter'\nEXEC sp_api_modal_button @name='button',@value = 'Excel_CSV',@valueout = @button OUT,@class = 'btn-primary',@key = 'F5'\nEXEC sp_api_modal_text @companyname,N'h4 text-muted',@printonly=1\nEXEC sp_api_modal_print\n\nIF @button =  'Intrastat_Melding'\nBEGIN\nSELECT distinct [QUANTITY@] = sum(QUANTITY@), [ARTICLE~col-sm-5] = ARTICLE, LAND, INTRASTAT_CODE, [NETT_WEIGHT@] = sum(NETT_WEIGHT@), ISO, [AMOUNT@] = sum(AMOUNT@)\nINTO #Intrastat_Melding\nFROM          RV_INTRASTAT_MELDING\nWHERE\t\t(INTRASTAT_CODE is not NULL) AND (CompanyID = @id) AND (TransactionDate BETWEEN @date AND @date2) AND (THTDT = 2)\nGROUP BY ARTICLE,LAND,INTRASTAT_CODE,ISO\nEXEC sp_api_modal_table @tmptable=N'#Intrastat_Melding',@orderby=N'ORDER BY 2 ASC',@print=1\n\nEND \n\t\n\nIF @button =  'Excel_CSV'\nBEGIN\nSELECT distinct [QUANTITY] = sum(QUANTITY@), [ARTICLE] = ARTICLE, LAND, INTRASTAT_CODE, [NETT_WEIGHT] = sum(NETT_WEIGHT@), ISO, [AMOUNT] = sum(AMOUNT@)\nINTO #Intrastat_CSV\nFROM          RV_INTRASTAT_MELDING\nWHERE\t\t(INTRASTAT_CODE is not NULL) AND (CompanyID = @id) AND (TransactionDate BETWEEN @date AND @date2) AND (THTDT = 2)\nGROUP BY ARTICLE,LAND,INTRASTAT_CODE,ISO\n--EXEC sp_api_modal_table @tmptable=N'#Intrastat_CSV',@print=1\n--EXEC sp_api_modal_csv\t@tmptable = '#Intrastat_CSV'\t,@filename = @filename\t,@sep = ';'\n\n--EXEC sp_api_modal_table @tmptable=N'#Intrastat_CSV'\nEXEC sp_api_modal_csv @tmptable=N'#Intrastat_CSV',@ansi =1,@filename=@FileName\n\nEND \n\n\n\n\n\n\n\n",
                "action_id": 1,
                "action_name": "INTRASTAT_MELDING",
                "source_table": "api_card_actions",
                "analysis_findings": {
                    "sps_called": [
                        "dbo.sp_api_modal_button",
                        "dbo.sp_api_modal_csv",
                        "dbo.sp_api_modal_date",
                        "dbo.sp_api_modal_input",
                        "dbo.sp_api_modal_table",
                        "dbo.sp_api_modal_text"
                    ],
                    "udfs_called": [],
                    "context_vars_found": "{'@id'}"
                },
                "script_snippet": "--RH210215 BEZIG DOWNLOAD ALS CSV ER BIJ.. lukt nofg niet..\nDECLARE @date nvarchar(128),@date2 nvarchar(128),@button nvarchar(128),@button2 nvarchar(128),@companyname nvarchar(128), @FileName nvarchar(128)\nset @date = dbo.workDate()\nset @date2 = dbo.workDate()\nSET @companyname = (select CompanyName ..."
            },
            {
                "sql_source": "exec @main_db.dbo.cthFase @ID, N'closedSaleReadyForInvoice'",
                "action_id": 2,
                "action_name": "klaar voor facturatie",
                "source_table": "api_card_actions",
                "analysis_findings": {
                    "sps_called": [],
                    "udfs_called": [],
                    "context_vars_found": "{'@id'}"
                },
                "script_snippet": "exec @main_db.dbo.cthFase @ID, N'closedSaleReadyForInvoice'"
            },
            {
                "sql_source": "exec @main_db.dbo.cthFase @ID, N'closedSaleReadyForInvoice'",
                "action_id": 3,
                "action_name": "klaar voor facturatie",
                "source_table": "api_card_actions",
                "analysis_findings": {
                    "sps_called": [],
                    "udfs_called": [],
                    "context_vars_found": "{'@id'}"
                },
                "script_snippet": "exec @main_db.dbo.cthFase @ID, N'closedSaleReadyForInvoice'"
            },
            {
                "sql_source": "DECLARE @MES NVARCHAR(200)\r\nSET @MES=concat(N'Verloop van de koers ',{[currency].CodeISO})\r\nif @MES IS NULL SET @MES=concat(N'Verloop van de waarde ''',{[xvalrate].code},''' voor ',(select companyname from xCompany where id={[xvalrate].contextID}))\r\nEXEC sp_api_modal_text @text = @MES,@class = 'h3 text-muted'\r\nSELECT TOP 100 code as [code*],startdate, enddate,f as [koers] INTO #table1 FROM xValrate where code={[xvalrate].code} and contextID={[xvalrate].contextID}\r\nEXEC sp_api_modal_table @tmptable=N'#table1'\r\n",
                "action_id": 4,
                "action_name": "koerslijst",
                "source_table": "api_card_actions",
                "analysis_findings": {
                    "sps_called": [
                        "dbo.sp_api_modal_table",
                        "dbo.sp_api_modal_text"
                    ],
                    "udfs_called": [],
                    "context_vars_found": "set()"
                },
                "script_snippet": "DECLARE @MES NVARCHAR(200)\r\nSET @MES=concat(N'Verloop van de koers ',{[currency].CodeISO})\r\nif @MES IS NULL SET @MES=concat(N'Verloop van de waarde ''',{[xvalrate].code},''' voor ',(select companyname from xCompany where id={[xvalrate].contextID}))\r\nEXEC sp_api_modal_text @text = @MES,@class = 'h3 t..."
            },
            {
                "sql_source": "exec @main_db.[dbo].[Create_CTR_ForOwnNegativeStock] @ID",
                "action_id": 5,
                "action_name": "Koop alles (neg)",
                "source_table": "api_card_actions",
                "analysis_findings": {
                    "sps_called": [],
                    "udfs_called": [],
                    "context_vars_found": "{'@id'}"
                },
                "script_snippet": "exec @main_db.[dbo].[Create_CTR_ForOwnNegativeStock] @ID"
            },
            {
                "sql_source": "DECLARE @clone_id INT, @sure nvarchar(255), @text nvarchar(255)\r\nEXEC sp_api_modal_get N'my_last_clone_id',@text OUT\r\nEXEC sp_api_modal_text @text,'h1'\r\nEXEC sp_api_modal_text @basetable,'h1'\r\nEXEC sp_api_modal_button @name='Sure',@value = 'Clone? (Esc=Nee)', @valueout = @sure OUT,@class='btn-danger',@key='Enter'\r\nIF @sure is not null\r\n\tBEGIN\r\n\t\tEXEC sp_api_modal_clear\r\n\t\t--EXEC @clone_id = sp_clone_record @basetable,@ids\r\n\t\tEXEC @clone_id = sp_clone_record @basetable,@ids,N'size=''EDIT'', stock=0'\r\n\t\tSET @path = @path+'/'+dbo.nv(@clone_id)\r\n\t\tEXEC sp_api_toast @text = N'Record cloned'\r\n\t\tEXEC sp_api_modal_route @name = N'Ga met Enter naar de kopie en vul de nieuwe maat in',@pathname=@path,@search='?focus=7377' ,@class = N'btn-danger' ,@key='Enter'\r\n\tEND\r\n",
                "action_id": 6,
                "action_name": "kopieer-artikel",
                "source_table": "api_card_actions",
                "analysis_findings": {
                    "sps_called": [
                        "dbo.sp_api_modal_button",
                        "dbo.sp_api_modal_clear",
                        "dbo.sp_api_modal_route",
                        "dbo.sp_api_modal_text",
                        "dbo.sp_api_toast"
                    ],
                    "udfs_called": [],
                    "context_vars_found": "{'@ids', '@basetable', '@path'}"
                },
                "script_snippet": "DECLARE @clone_id INT, @sure nvarchar(255), @text nvarchar(255)\r\nEXEC sp_api_modal_get N'my_last_clone_id',@text OUT\r\nEXEC sp_api_modal_text @text,'h1'\r\nEXEC sp_api_modal_text @basetable,'h1'\r\nEXEC sp_api_modal_button @name='Sure',@value = 'Clone? (Esc=Nee)', @valueout = @sure OUT,@class='btn-danger..."
            },
            {
                "sql_source": "EXEC sp_api_toast N'leveringsbevestiging....' \n\nDECLARE @cursor_ids CURSOR,@cid INT\nDECLARE @toCompany_ID INT \nDECLARE @fromCompany_ID INT = (select top 1 id from xTenantKey)\n\t\t\n\nSET @cursor_ids = CURSOR LOCAL FAST_FORWARD FOR SELECT value FROM string_split(@ids,',')\nOPEN @cursor_ids;\nFETCH NEXT FROM @cursor_ids INTO @cid\nWHILE @@FETCH_STATUS = 0\n\tBEGIN\n\t\tEXEC sp_api_toast @cid\n\t\t--dit is nu alleen voor tellers en checks, zodat we weten dat het report al is gemaakt:\n\t\t--was\t\tEXEC @main_db.dbo.RunReport\t@TABLECONTEXT = N'CTH'\t,@Context_Key_ID=@cid,@Report_CODE=N'CONF_DELIVERY' -- zie runreport \n\t\t--nu\n\t\tEXEC @main_db.dbo.SetDelConf @cid --210224 Registreer verzending van DeliveryConfirmation via xMarker\n\n\t\t--dit is de feitelijke \"run\"\n\t\tSET @toCompany_ID = (select Counterparty_id from xtransactionheader where id=@cid)\n\t\tEXEC sp_api_report_generate @id = @cid\n\t\t\t,@sys_report_key = 'deliveryconfirmation_out' --zie xrepdef\n\t\t\t,@toCompany_ID = @toCompany_ID\n\t\t\t,@fromCompany_ID = @fromCompany_ID\n\t\t\t,@fixedprinter_ID=2\n\t\t\t,@test=0\n\n\n\n\n\t\tFETCH NEXT FROM @cursor_ids INTO @cid\n\tEND\nCLOSE @cursor_ids;\nDEALLOCATE @cursor_ids;",
                "action_id": 12,
                "action_name": "leveringsbevestiging",
                "source_table": "api_card_actions",
                "analysis_findings": {
                    "sps_called": [
                        "dbo.sp_api_report_generate",
                        "dbo.sp_api_toast"
                    ],
                    "udfs_called": [],
                    "context_vars_found": "{'@ids', '@id'}"
                },
                "script_snippet": "EXEC sp_api_toast N'leveringsbevestiging....' \n\nDECLARE @cursor_ids CURSOR,@cid INT\nDECLARE @toCompany_ID INT \nDECLARE @fromCompany_ID INT = (select top 1 id from xTenantKey)\n\t\t\n\nSET @cursor_ids = CURSOR LOCAL FAST_FORWARD FOR SELECT value FROM string_split(@ids,',')\nOPEN @cursor_ids;\nFETCH NEXT FRO..."
            },
            {
                "sql_source": "DECLARE @wat nvarchar(200), @linktoME int,@text nvarchar(max)\n\nIF {[ctr2].cth_fase} NOT IN (N'openSale','openPrice')\n\tBEGIN\n\tEXEC sp_api_modal_Alert N'Let op!', N'De verkoop is reeds gesloten. U kan niet meer de toewijzing wijzigen.' \n\tEXEC sp_api_modal_clear\n\tRETURN\n\tEND\n\nSET @linktoME ={[ctr2].id}\n--201028 erbij ivm overbrengen..\nif @LinkToMe is NULL set @LinkToMe={[ctr_overbrengen].id}\n\nDECLARE @maxTeLinken INT,@maxBeschikbaar INT\nSELECT @maxTeLinken = (ctrAmount-IVTOTAL) FROM Q_xTransactionDetail WHERE ID=@LinkToME\n\nIF @maxTeLinken = 0\n\tBEGIN\n\t\tEXEC sp_api_modal_alert N'Regel is al volledig toegewezen'\n\t\tEXEC\t sp_api_go2 1 -- 1 stap terug (+list view; detailviewgebruik EXEC sp_api_go2 1,0)\n\t\tRETURN;\n\tEND\n\n\nSET @maxBeschikbaar = {[ctr1_toewijsbaar].available}\nIF @maxBeschikbaar < @maxTeLinken\n\tBEGIN\n\t\tdeclare @Melding nvarchar(200)\n\t\tset @Melding = concat(N'Niet genoeg beschikbaar! Te linken:',N' ',@maxTeLinken)\n\t\tEXEC sp_api_modal_text @Melding,N'h4 text-muted'\n\t\tSET @text = CONCAT('U kunt maximaal ',@maxBeschikbaar,' van de ',@maxTeLinken,' linken')\n\t\tEXEC sp_api_modal_text @text,N'm-4'\n\t\tSET @maxTeLinken = @maxBeschikbaar\n\tEND\n\nIF @maxTeLinken < 0\n\tBEGIN\n\t\tEXEC sp_api_modal_alert N'Probleem!',N'Regel heeft meer toegewezen dan mag. Ga naar de toewijzing (IV link) en verlaag deze.'\n\t\tEXEC sp_api_modal_clear\n\tEND\n\nDECLARE @aantalTeLinken INT = @maxTeLinken\n\t,@button nvarchar(50)\n\nEXEC sp_api_modal_input @name='Aantal',@value = @aantalTeLinken OUT,@focus=1,@select=1\nEXEC sp_api_modal_button @name='button',@value = 'Link aantal',@valueout=@button OUT,@key=N'Enter'\nIF @button IS NULL RETURN\nset @wat=N'Gekozen ID: '+str(@ID)+' wordt gekoppeld aan CTR: '+str(@LinktoME)\nexec sp_api_toast @wat\n--RETURN; --test\n\nif @linktoME is not null\n\tBEGIN\n\t\texec @main_db.dbo.map @linktoME,@ID, @aantalTeLinken\n\t\t\n\t\t--zet return path\n\t\tSET @ctr2_id = {[ctr2].id}\n\t\tSET @verkoop_id = {[verkoop].id}\n\t\tIF @ctr2_id IS NOT NULL AND @verkoop_id IS NOT NULL AND @aantalTeLinken = @maxTeLinken\n\t\t\tBEGIN\n\t\t\t\tSET @goto = CONCAT('/verkoop/',@verkoop_id,'/ctr2/',@ctr2_id,'/iv2')\n\t\t\t\tSET @referer_path = CONCAT('/verkoop/',@verkoop_id,'/ctr2')\n\t\t\t\tSET @referer_search = CONCAT(N'?id=',@ctr2_id)\n\t\t\t\tEXEC sp_api_toast N'Regel(s) is/zijn gelink bla',N'alert-primary'\t\t\t\t\n\t\t\t\tEXEC sp_api_goto @goto,@referer_path=@referer_path,@referer_search=@referer_search\n\t\t\tEND\n\t\t--210115 \n--\t\texec sp_api_go3\n\t\texec sp_api_modal_clear\n\tEND\n\n\n--if @parent_card_name='ctr2'\n--\tBEGIN\n--\t\texec @main_db.dbo.map @ID, @Parent_ID\n--\tEND\n--else --neem aan parent_parent...\n--\tBEGIN\n--\t\texec @main_db.dbo.map @ID, @Parent_Parent_ID\n--\tEND\n\n--EXEC sp_api_goto @path",
                "action_id": 13,
                "action_name": "link_this",
                "source_table": "api_card_actions",
                "analysis_findings": {
                    "sps_called": [
                        "dbo.sp_api_goto",
                        "dbo.sp_api_modal_button",
                        "dbo.sp_api_modal_input",
                        "dbo.sp_api_modal_text",
                        "dbo.sp_api_toast"
                    ],
                    "udfs_called": [],
                    "context_vars_found": "{'@parent_id', '@id', '@path'}"
                },
                "script_snippet": "DECLARE @wat nvarchar(200), @linktoME int,@text nvarchar(max)\n\nIF {[ctr2].cth_fase} NOT IN (N'openSale','openPrice')\n\tBEGIN\n\tEXEC sp_api_modal_Alert N'Let op!', N'De verkoop is reeds gesloten. U kan niet meer de toewijzing wijzigen.' \n\tEXEC sp_api_modal_clear\n\tRETURN\n\tEND\n\nSET @linktoME ={[ctr2].id}..."
            },
            {
                "sql_source": "EXEC sp_api_modal_text @ids",
                "action_id": 14,
                "action_name": "LinkActionGroterDan",
                "source_table": "api_card_actions",
                "analysis_findings": {
                    "sps_called": [
                        "dbo.sp_api_modal_text"
                    ],
                    "udfs_called": [],
                    "context_vars_found": "{'@ids'}"
                },
                "script_snippet": "EXEC sp_api_modal_text @ids"
            },
            {
                "sql_source": "declare @ctrtoloc int, @ctrfromloc int ,@checkamt int-- (oorspronkelijke) advieslokaties\ndeclare @Direct int=1\ndeclare @Normaal int=2\ndeclare @isEqual bit=0\n\nselect @ctrtoloc =tocloc_id, @ctrfromloc=frmloc_id,@checkamt=iif(stockmut=1,amount,0) from xtransactiondetail where id=@ID\nupdate xtransactiondetail set Flowmodel_id=@Normaal where id=@ID\nupdate xlfctr set ltrtoloc=@ctrtoloc,ltrfromloc=@ctrfromloc, @isEqual=iif(lfctr_amount-@checkamt=0,1,0) where ctr_id=@ID and lfctr_amount=@checkamt -- let op: dit gaat alleen goed bij volledige ctr op lfctr!\n\n\nif @isEqual=1 begin\n\t--pas ook de lfctr aan van de aan deze inkoopregel gelinkte verkoopregels\n\tDECLARE @cursor_ids CURSOR,@cid INT\n\tSET @cursor_ids = CURSOR LOCAL FAST_FORWARD FOR (select ITD as ivCTR from xivlink where vtd=@ID UNION select VTD as ivCTR from xivlink where itd=@ID) --SELECT value FROM string_split(@ids,',')\n\tOPEN @cursor_ids;\n\tFETCH NEXT FROM @cursor_ids INTO @cid\n\tWHILE @@FETCH_STATUS = 0\n\t\tBEGIN\n\t\t\t--geef de lfctr van de verkoop ctr een nieuwe laadlokatie\n\t\t\tupdate xtransactiondetail set Flowmodel_id=@Normaal where id=@cid\n\t\t\tupdate xlfctr set ltrfromloc=@ctrtoloc where ctr_id=@cid\n\t\t\tFETCH NEXT FROM @cursor_ids INTO @cid\n\t\tEND\n\tCLOSE @cursor_ids;\n\tDEALLOCATE @cursor_ids;\n\nend",
                "action_id": 16,
                "action_name": "Loods Verlading (normaal)",
                "source_table": "api_card_actions",
                "analysis_findings": {
                    "sps_called": [],
                    "udfs_called": [],
                    "context_vars_found": "{'@ids', '@id'}"
                },
                "script_snippet": "declare @ctrtoloc int, @ctrfromloc int ,@checkamt int-- (oorspronkelijke) advieslokaties\ndeclare @Direct int=1\ndeclare @Normaal int=2\ndeclare @isEqual bit=0\n\nselect @ctrtoloc =tocloc_id, @ctrfromloc=frmloc_id,@checkamt=iif(stockmut=1,amount,0) from xtransactiondetail where id=@ID\nupdate xtransaction..."
            },
            {
                "sql_source": "update xlandfreight SET transport_id = NULL WHERE id ={[xlandfreight].id}",
                "action_id": 17,
                "action_name": "Maak Los Van Transport",
                "source_table": "api_card_actions",
                "analysis_findings": {
                    "sps_called": [],
                    "udfs_called": [],
                    "context_vars_found": "set()"
                },
                "script_snippet": "update xlandfreight SET transport_id = NULL WHERE id ={[xlandfreight].id}"
            },
            {
                "sql_source": "EXEC @main_db.dbo.UndoUnloading_LP @xLotPallet_ID=@ID ",
                "action_id": 18,
                "action_name": "Maak Uitlossing Ongedaan",
                "source_table": "api_card_actions",
                "analysis_findings": {
                    "sps_called": [],
                    "udfs_called": [],
                    "context_vars_found": "{'@id'}"
                },
                "script_snippet": "EXEC @main_db.dbo.UndoUnloading_LP @xLotPallet_ID=@ID "
            },
            {
                "sql_source": "SET @path = REPLACE(@path,'/lotpallets','/lotartsize')\r\nEXEC sp_api_goto @path\r\n",
                "action_id": 19,
                "action_name": "maten",
                "source_table": "api_card_actions",
                "analysis_findings": {
                    "sps_called": [
                        "dbo.sp_api_goto"
                    ],
                    "udfs_called": [],
                    "context_vars_found": "{'@path'}"
                },
                "script_snippet": "SET @path = REPLACE(@path,'/lotpallets','/lotartsize')\r\nEXEC sp_api_goto @path\r\n"
            },
            {
                "sql_source": "DECLARE @VerkoopPath nvarchar(200) \nSET @VerkoopPath=concat(N'/verkoop/',{[verkoop].id},N'/ctr2')\nEXEC SP_API_GOTO @VerkoopPath",
                "action_id": 26,
                "action_name": "naar CTR",
                "source_table": "api_card_actions",
                "analysis_findings": {
                    "sps_called": [
                        "dbo.sp_api_goto"
                    ],
                    "udfs_called": [],
                    "context_vars_found": "set()"
                },
                "script_snippet": "DECLARE @VerkoopPath nvarchar(200) \nSET @VerkoopPath=concat(N'/verkoop/',{[verkoop].id},N'/ctr2')\nEXEC SP_API_GOTO @VerkoopPath"
            },
            {
                "sql_source": "SELECT * INTO #globecsv FROM calc_exact_globe_csv WHERE datum IS NOT NULL ORDER BY factuurnum,dagboek,regel\nEXEC sp_api_modal_csv @tmptable=N'#globecsv',@ansi =1,@filename=N'exact_globe.csv',@orderby=N'ORDER BY factuurnum,dagboek,regel'",
                "action_id": 27,
                "action_name": "Naar ExactGlobe CSV_voor210112",
                "source_table": "api_card_actions",
                "analysis_findings": {
                    "sps_called": [
                        "dbo.sp_api_modal_csv"
                    ],
                    "udfs_called": [],
                    "context_vars_found": "set()"
                },
                "script_snippet": "SELECT * INTO #globecsv FROM calc_exact_globe_csv WHERE datum IS NOT NULL ORDER BY factuurnum,dagboek,regel\nEXEC sp_api_modal_csv @tmptable=N'#globecsv',@ansi =1,@filename=N'exact_globe.csv',@orderby=N'ORDER BY factuurnum,dagboek,regel'"
            },
            {
                "sql_source": "\nIF @id<>@ids --BULK naar Exact\n\tBEGIN\n\t\tDECLARE @cursor CURSOR,@idval INT,@count int = 0,@seconds int = 0\n\t\tSET @cursor = CURSOR LOCAL FAST_FORWARD FOR SELECT value FROM string_split(@ids,',')\n\t\tOPEN @cursor;\n\t\tFETCH NEXT FROM @cursor INTO @idval\n\t\tWHILE @@FETCH_STATUS = 0\n\t\t\tBEGIN\n\t\t\t\tSET @seconds+=6\n\t\t\t\tSET @subject = CONCAT(\n\t\t\t\t\t(SELECT [xCompany].[Code] FROM [xCompany] WHERE [id] = (SELECT [Q_xInvoice].[fromCompany_ID] FROM [Q_xInvoice] WHERE [id] = @idval))\n\t\t\t\t\t,' - ',(SELECT [Q_xInvoice].[dateInvoice] FROM [Q_xInvoice] WHERE [id] = @idval)\n\t\t\t\t\t,' - ',(SELECT [Q_xInvoice].[calcLegal] FROM [Q_xInvoice] WHERE [id] = @idval)\n\t\t\t\t\t)\n\t\t\t\tSET @sql = CONCAT(N'DECLARE @base64 nvarchar(max),@filename nvarchar(4000)\n', --EXEC sp_api_report_download_base64 @context = ''invoice_out'', @context_id = ',@idval,' , @filename =  @filename OUT, @base64 =  @base64 OUT\n'BEGIN TRY\n\tEXEC @main_db.dbo.sp_iu_finance_invoice ',@idval,',@groupbycostcodes = 1\nEND TRY BEGIN CATCH\n\tUPDATE xInvoice SET status = ''Exact Error'',statusHistory = ERROR_MESSAGE() WHERE id = ',@idval,'\nEND CATCH') -- = @filename,@subject = ',dbo.escape_string(@subject),',@base64 = @base64')\n\t\t\t\tSET @subject = N'To Exact: ' + @subject\n\t\t\t\tEXEC sp_api_add_sql_task @sql=@sql,@description=@subject,@seconds = @seconds\n\t\t\t\tUPDATE xInvoice SET status='Sending to Exact' WHERE id = @idval\n\t\t\t\tSET @count+=1\n\t\t\t\tFETCH NEXT FROM @cursor INTO @idval\n\t\t\tEND\n\t\tCLOSE @cursor;\n\t\tDEALLOCATE @cursor;\n\t\texecute sp_api_modal_clear\n\t\tIF @count > 0 EXEC sp_api_toast N'Verzenden is ingepland, F5 voor refresh'\n\t\tEXEC sp_api_modal_select_all_clear\n\t\tRETURN\n\tEND\n\nBEGIN TRY\n\tEXEC @main_db.dbo.sp_iu_finance_invoice @id, @groupbycostcodes = 1\nEND TRY BEGIN CATCH\n\tDECLARE @text nvarchar(max) = ERROR_MESSAGE(),@ERROR_SEVERITY int = ERROR_SEVERITY()\n\tIF @ERROR_SEVERITY = 17\n\t\tBEGIN\n\t\t\tEXEC sp_api_modal_url @text\n\t\t\tRETURN\n\t\tEND\n\tEXEC sp_api_modal_text @text\n\tDECLARE @valueout nvarchar(128)\n\tEXEC sp_api_modal_button @name='Retry',@value = 'Retry', @valueout = @valueout OUT\n\t\t,@class='btn-primary',@key='Enter'\nEND CATCH",
                "action_id": 28,
                "action_name": "Naar ExactOnline",
                "source_table": "api_card_actions",
                "analysis_findings": {
                    "sps_called": [
                        "dbo.sp_api_add_sql_task",
                        "dbo.sp_api_modal_button",
                        "dbo.sp_api_modal_text",
                        "dbo.sp_api_modal_url",
                        "dbo.sp_api_report_download_base64"
                    ],
                    "udfs_called": [],
                    "context_vars_found": "{'@ids', '@id'}"
                },
                "script_snippet": "\nIF @id<>@ids --BULK naar Exact\n\tBEGIN\n\t\tDECLARE @cursor CURSOR,@idval INT,@count int = 0,@seconds int = 0\n\t\tSET @cursor = CURSOR LOCAL FAST_FORWARD FOR SELECT value FROM string_split(@ids,',')\n\t\tOPEN @cursor;\n\t\tFETCH NEXT FROM @cursor INTO @idval\n\t\tWHILE @@FETCH_STATUS = 0\n\t\t\tBEGIN\n\t\t\t\tSET @seconds..."
            },
            {
                "sql_source": "\nIF @id<>@ids --BULK naar Exact\n\tBEGIN\n\t\tDECLARE @cursor CURSOR,@idval INT,@count int = 0,@seconds int = 0\n\t\tSET @cursor = CURSOR LOCAL FAST_FORWARD FOR SELECT value FROM string_split(@ids,',')\n\t\tOPEN @cursor;\n\t\tFETCH NEXT FROM @cursor INTO @idval\n\t\tWHILE @@FETCH_STATUS = 0\n\t\t\tBEGIN\n\t\t\t\tSET @seconds+=6\n\t\t\t\tSET @subject = CONCAT(\n\t\t\t\t\t(SELECT [xCompany].[Code] FROM [xCompany] WHERE [id] = (SELECT [Q_xInvoice].[toCompany_ID] FROM [Q_xInvoice] WHERE [id] = @idval))\n\t\t\t\t\t,' - ',(SELECT [Q_xInvoice].[dateInvoice] FROM [Q_xInvoice] WHERE [id] = @idval)\n\t\t\t\t\t,' - ',(SELECT [Q_xInvoice].[calcLegal] FROM [Q_xInvoice] WHERE [id] = @idval)\n\t\t\t\t\t)\n\t\t\t\tSET @sql = CONCAT(N'DECLARE @base64 nvarchar(max),@filename nvarchar(4000)\n', --EXEC sp_api_report_download_base64 @context = ''invoice_out'', @context_id = ',@idval,' , @filename =  @filename OUT, @base64 =  @base64 OUT\n'BEGIN TRY\n\tEXEC @main_db.dbo.sp_iu_finance_invoice ',@idval,',@groupbycostcodes = 1\nEND TRY BEGIN CATCH\n\tUPDATE xInvoice SET status = ''Exact Error'',statusHistory = ERROR_MESSAGE() WHERE id = ',@idval,'\nEND CATCH') -- = @filename,@subject = ',dbo.escape_string(@subject),',@base64 = @base64')\n\t\t\t\tSET @subject = N'To Exact: ' + @subject\n\t\t\t\tEXEC sp_api_add_sql_task @sql=@sql,@description=@subject,@seconds = @seconds\n\t\t\t\tUPDATE xInvoice SET status='Sending to Exact' WHERE id = @idval\n\t\t\t\tSET @count+=1\n\t\t\t\tFETCH NEXT FROM @cursor INTO @idval\n\t\t\tEND\n\t\tCLOSE @cursor;\n\t\tDEALLOCATE @cursor;\n\t\texecute sp_api_modal_clear\n\t\tIF @count > 0 EXEC sp_api_toast N'Verzenden is ingepland, F5 voor refresh'\n\t\tEXEC sp_api_modal_select_all_clear\n\t\tRETURN\n\tEND\n\nBEGIN TRY\n\tEXEC @main_db.dbo.sp_iu_finance_invoice @id, @groupbycostcodes = 1\nEND TRY BEGIN CATCH\n\tDECLARE @text nvarchar(max) = ERROR_MESSAGE(),@ERROR_SEVERITY int = ERROR_SEVERITY()\n\tIF @ERROR_SEVERITY = 17\n\t\tBEGIN\n\t\t\tEXEC sp_api_modal_url @text\n\t\t\tRETURN\n\t\tEND\n\tEXEC sp_api_modal_text @text\n\tDECLARE @valueout nvarchar(128)\n\tEXEC sp_api_modal_button @name='Retry',@value = 'Retry', @valueout = @valueout OUT\n\t\t,@class='btn-primary',@key='Enter'\nEND CATCH",
                "action_id": 29,
                "action_name": "Naar ExactOnline",
                "source_table": "api_card_actions",
                "analysis_findings": {
                    "sps_called": [
                        "dbo.sp_api_add_sql_task",
                        "dbo.sp_api_modal_button",
                        "dbo.sp_api_modal_text",
                        "dbo.sp_api_modal_url",
                        "dbo.sp_api_report_download_base64"
                    ],
                    "udfs_called": [],
                    "context_vars_found": "{'@ids', '@id'}"
                },
                "script_snippet": "\nIF @id<>@ids --BULK naar Exact\n\tBEGIN\n\t\tDECLARE @cursor CURSOR,@idval INT,@count int = 0,@seconds int = 0\n\t\tSET @cursor = CURSOR LOCAL FAST_FORWARD FOR SELECT value FROM string_split(@ids,',')\n\t\tOPEN @cursor;\n\t\tFETCH NEXT FROM @cursor INTO @idval\n\t\tWHILE @@FETCH_STATUS = 0\n\t\t\tBEGIN\n\t\t\t\tSET @seconds..."
            },
            {
                "sql_source": "DECLARE @S nvarchar(200), @P nvarchar(200)\r\nSET @P =N'/invoice'\r\nSET @S=concat(N'?id=',{[xinvcth].invoice_id})\r\n--EXEC sp_api_toast @S22\r\nEXEC sp_api_goto  @P, @S",
                "action_id": 30,
                "action_name": "naar Factuur",
                "source_table": "api_card_actions",
                "analysis_findings": {
                    "sps_called": [
                        "dbo.sp_api_goto",
                        "dbo.sp_api_toast"
                    ],
                    "udfs_called": [],
                    "context_vars_found": "set()"
                },
                "script_snippet": "DECLARE @S nvarchar(200), @P nvarchar(200)\r\nSET @P =N'/invoice'\r\nSET @S=concat(N'?id=',{[xinvcth].invoice_id})\r\n--EXEC sp_api_toast @S22\r\nEXEC sp_api_goto  @P, @S"
            },
            {
                "sql_source": "DECLARE @invoice_id nvarchar(40) = (SELECT TOP 1 invoice_id FROM xinvrow WHERE cth_id = @id)\nIF @invoice_id IS NULL\n\tEXEC sp_api_toast N'Geen invoice gevonden'\nELSE\n\tBEGIN\n\t\tSET @invoice_id = N'?id=' + @invoice_id\n\t\tEXEC sp_api_goto N'/invoice',@invoice_id\n\tEND",
                "action_id": 31,
                "action_name": "Naar factuur",
                "source_table": "api_card_actions",
                "analysis_findings": {
                    "sps_called": [],
                    "udfs_called": [],
                    "context_vars_found": "{'@id'}"
                },
                "script_snippet": "DECLARE @invoice_id nvarchar(40) = (SELECT TOP 1 invoice_id FROM xinvrow WHERE cth_id = @id)\nIF @invoice_id IS NULL\n\tEXEC sp_api_toast N'Geen invoice gevonden'\nELSE\n\tBEGIN\n\t\tSET @invoice_id = N'?id=' + @invoice_id\n\t\tEXEC sp_api_goto N'/invoice',@invoice_id\n\tEND"
            },
            {
                "sql_source": "DECLARE @invoice_id nvarchar(40) = (SELECT TOP 1 invoice_id FROM xinvrow WHERE cth_id = @id)\r\nIF @invoice_id IS NULL\r\n\tEXEC sp_api_toast N'Geen invoice gevonden'\r\nELSE\r\n\tBEGIN\r\n\t\tSET @invoice_id = N'?id=' + @invoice_id\r\n\t\tEXEC sp_api_goto N'/invoice',@invoice_id\r\n\tEND",
                "action_id": 32,
                "action_name": "Naar factuur van de order",
                "source_table": "api_card_actions",
                "analysis_findings": {
                    "sps_called": [],
                    "udfs_called": [],
                    "context_vars_found": "{'@id'}"
                },
                "script_snippet": "DECLARE @invoice_id nvarchar(40) = (SELECT TOP 1 invoice_id FROM xinvrow WHERE cth_id = @id)\r\nIF @invoice_id IS NULL\r\n\tEXEC sp_api_toast N'Geen invoice gevonden'\r\nELSE\r\n\tBEGIN\r\n\t\tSET @invoice_id = N'?id=' + @invoice_id\r\n\t\tEXEC sp_api_goto N'/invoice',@invoice_id\r\n\tEND"
            }
        ]
    }
}